import{B as ie,L as Sa}from"./ListItem-Dli5DX_B.js";import{s as pe,c as $,a as Qe,o as Ee,w as te,b as Xe,C as Qa,u as Ue,d as Gt,e as Ta,p as ce,m as Ma,f as Ge,g as me,h as vt,i as at,t as ee,j as yt,k as lt,r as A,l as pt,n as c,q as X,T as Ba,F as x,v as jt,x as U,y as d,z as I,A as p,B as T,D as b,E as oe,G as e,H as t,I as w,M as fe,P as At,$ as De,J as C,K as V,L as Ea,N as qa,O as za,Q as Kt,R as Z,S as D,U as Ke,V as rt,W as ut,X as Ze,Y as G,Z as $e,_ as K,a0 as Je,a1 as ye,a2 as re,a3 as Te,a4 as et,a5 as Zt,a6 as Jt,a7 as La,a8 as Aa,a9 as ea,aa as Wa,ab as ta,ac as Ha,ad as Ra,ae as Da,af as Fe,ag as Na,ah as it,ai as Ua,aj as Wt,ak as aa,al as la,am as Fa,an as Oa,ao as Ht,ap as Ya,aq as xa,ar as Xa}from"./index-CENm72M8.js";import{D as Ga}from"./constants-BXWEQHoz.js";import{m as ft,a as Pe,b as ht,c as gt,d as qe,u as _t,e as Oe,f as bt,g as wt,h as ja,t as Ka,i as ve,V as Me,j as Za,k as de,l as Ja,n as el,o as ia,p as tl,q as oa,r as sa,s as al,v as ge,w as O,x as ll,y as il,z as ol,A as sl,M as nl,B as rl,C as ul}from"./VListItem-DxGV844T.js";import{u as ot,V as tt,a as Be}from"./VList-D_s2On-E.js";import{m as dl,u as na,a as cl,V as kt,f as ml,b as vl,s as yl,c as pl,d as fl,e as ra}from"./VMenu-CEEm_N0n.js";import{m as Pt,u as Ct,a as hl,b as gl,c as _l}from"./layout-dXKdvoWL.js";import{_ as le}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{M as Se,_ as bl,i as st,a as ua,b as wl,g as Rt}from"./ItemContextMenu.vue_vue_type_style_index_0_scoped_3a9a25e3_lang-DHiiayJ-.js";import{_ as nt}from"./ProviderIcon.vue_vue_type_script_setup_true_lang-BU5cq-w_.js";import{e as ke}from"./eventbus-CGRXT3Tn.js";import{T as kl,V as dt}from"./Toolbar-B5avseYK.js";import{V as Ye}from"./VCard-BKOPmF8F.js";import{V as da}from"./VDialog-D9_Dmf8q.js";import{V as Pl,a as Cl}from"./VInfiniteScroll-xrzgbUmm.js";import{V as ca}from"./VSlider-BZ4VONuc.js";import{M as ne,a as ct}from"./marquee_text_sync-dQ6x7neZ.js";import{V as Vl}from"./VToolbar-CiZGbbCV.js";import{V as Ne,a as we}from"./VCardText-DZgSKYwj.js";import{m as Il,V as Dt,a as $l}from"./VChip-Cj8S4-uh.js";import{V as Sl}from"./VVirtualScroll-0_IQhuoN.js";import{V as Ql}from"./VCheckbox-BkojC2td.js";import{V as Tl,a as Ml,b as Bl}from"./VExpansionPanels-BqMECyDs.js";import"./VCheckboxBtn-HMfKhzLE.js";const El=""+new URL("icon-iUF3LVzp.png",import.meta.url).href;function ql(a){let{rootEl:l,isSticky:s,layoutItemStyles:o}=a;const n=pe(!1),i=pe(0),r=$(()=>{const u=typeof n.value=="boolean"?"top":n.value;return[s.value?{top:"auto",bottom:"auto",height:void 0}:void 0,n.value?{[u]:Qe(i.value)}:{top:o.value.top}]});Ee(()=>{te(s,u=>{u?window.addEventListener("scroll",f,{passive:!0}):window.removeEventListener("scroll",f)},{immediate:!0})}),Xe(()=>{window.removeEventListener("scroll",f)});let m=0;function f(){const u=m>window.scrollY?"up":"down",g=l.value.getBoundingClientRect(),y=parseFloat(o.value.top??0),v=window.scrollY-Math.max(0,i.value-y),_=g.height+Math.max(i.value,y)-window.scrollY-window.innerHeight,h=parseFloat(getComputedStyle(l.value).getPropertyValue("--v-body-scroll-y"))||0;g.height<window.innerHeight-y?(n.value="top",i.value=y):u==="up"&&n.value==="bottom"||u==="down"&&n.value==="top"?(i.value=window.scrollY+g.top-h,n.value=!0):u==="down"&&_<=0?(i.value=0,n.value="bottom"):u==="up"&&v<=0&&(h?n.value!=="top"&&(i.value=-v+h+y,n.value="top"):(i.value=g.top+v,n.value="top")),m=window.scrollY}return{isStuck:n,stickyStyles:r}}const zl=100,Ll=20;function Nt(a){return(a<0?-1:1)*Math.sqrt(Math.abs(a))*1.41421356237}function Ut(a){if(a.length<2)return 0;if(a.length===2)return a[1].t===a[0].t?0:(a[1].d-a[0].d)/(a[1].t-a[0].t);let l=0;for(let s=a.length-1;s>0;s--){if(a[s].t===a[s-1].t)continue;const o=Nt(l),n=(a[s].d-a[s-1].d)/(a[s].t-a[s-1].t);l+=(n-o)*Math.abs(n),s===a.length-1&&(l*=.5)}return Nt(l)*1e3}function Al(){const a={};function l(n){Array.from(n.changedTouches).forEach(i=>{(a[i.identifier]??(a[i.identifier]=new Qa(Ll))).push([n.timeStamp,i])})}function s(n){Array.from(n.changedTouches).forEach(i=>{delete a[i.identifier]})}function o(n){var u;const i=(u=a[n])==null?void 0:u.values().reverse();if(!i)throw new Error(`No samples for touch id ${n}`);const r=i[0],m=[],f=[];for(const g of i){if(r[0]-g[0]>zl)break;m.push({t:g[0],d:g[1].clientX}),f.push({t:g[0],d:g[1].clientY})}return{x:Ut(m),y:Ut(f),get direction(){const{x:g,y}=this,[v,_]=[Math.abs(g),Math.abs(y)];return v>_&&g>=0?"right":v>_&&g<=0?"left":_>v&&y>=0?"down":_>v&&y<=0?"up":Wl()}}}return{addMovement:l,endTouch:s,getVelocity:o}}function Wl(){throw new Error}function Hl(a){let{el:l,isActive:s,isTemporary:o,width:n,touchless:i,position:r}=a;Ee(()=>{window.addEventListener("touchstart",N,{passive:!0}),window.addEventListener("touchmove",R,{passive:!1}),window.addEventListener("touchend",z,{passive:!0})}),Xe(()=>{window.removeEventListener("touchstart",N),window.removeEventListener("touchmove",R),window.removeEventListener("touchend",z)});const m=$(()=>["left","right"].includes(r.value)),{addMovement:f,endTouch:u,getVelocity:g}=Al();let y=!1;const v=pe(!1),_=pe(0),h=pe(0);let S;function q(M,E){return(r.value==="left"?M:r.value==="right"?document.documentElement.clientWidth-M:r.value==="top"?M:r.value==="bottom"?document.documentElement.clientHeight-M:Ie())-(E?n.value:0)}function H(M){let E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;const k=r.value==="left"?(M-h.value)/n.value:r.value==="right"?(document.documentElement.clientWidth-M-h.value)/n.value:r.value==="top"?(M-h.value)/n.value:r.value==="bottom"?(document.documentElement.clientHeight-M-h.value)/n.value:Ie();return E?Math.max(0,Math.min(1,k)):k}function N(M){if(i.value)return;const E=M.changedTouches[0].clientX,k=M.changedTouches[0].clientY,P=25,Q=r.value==="left"?E<P:r.value==="right"?E>document.documentElement.clientWidth-P:r.value==="top"?k<P:r.value==="bottom"?k>document.documentElement.clientHeight-P:Ie(),L=s.value&&(r.value==="left"?E<n.value:r.value==="right"?E>document.documentElement.clientWidth-n.value:r.value==="top"?k<n.value:r.value==="bottom"?k>document.documentElement.clientHeight-n.value:Ie());(Q||L||s.value&&o.value)&&(S=[E,k],h.value=q(m.value?E:k,s.value),_.value=H(m.value?E:k),y=h.value>-20&&h.value<80,u(M),f(M))}function R(M){const E=M.changedTouches[0].clientX,k=M.changedTouches[0].clientY;if(y){if(!M.cancelable){y=!1;return}const Q=Math.abs(E-S[0]),L=Math.abs(k-S[1]);(m.value?Q>L&&Q>3:L>Q&&L>3)?(v.value=!0,y=!1):(m.value?L:Q)>3&&(y=!1)}if(!v.value)return;M.preventDefault(),f(M);const P=H(m.value?E:k,!1);_.value=Math.max(0,Math.min(1,P)),P>1?h.value=q(m.value?E:k,!0):P<0&&(h.value=q(m.value?E:k,!1))}function z(M){if(y=!1,!v.value)return;f(M),v.value=!1;const E=g(M.changedTouches[0].identifier),k=Math.abs(E.x),P=Math.abs(E.y);(m.value?k>P&&k>400:P>k&&P>3)?s.value=E.direction===({left:"right",right:"left",top:"down",bottom:"up"}[r.value]||Ie()):s.value=_.value>.5}const W=$(()=>v.value?{transform:r.value==="left"?`translateX(calc(-100% + ${_.value*n.value}px))`:r.value==="right"?`translateX(calc(100% - ${_.value*n.value}px))`:r.value==="top"?`translateY(calc(-100% + ${_.value*n.value}px))`:r.value==="bottom"?`translateY(calc(100% - ${_.value*n.value}px))`:Ie(),transition:"none"}:void 0);return Ue(v,()=>{var k,P;const M=((k=l.value)==null?void 0:k.style.transform)??null,E=((P=l.value)==null?void 0:P.style.transition)??null;Gt(()=>{var Q,L,Y,ae;(L=l.value)==null||L.style.setProperty("transform",((Q=W.value)==null?void 0:Q.transform)||"none"),(ae=l.value)==null||ae.style.setProperty("transition",((Y=W.value)==null?void 0:Y.transition)||null)}),Ta(()=>{var Q,L;(Q=l.value)==null||Q.style.setProperty("transform",M),(L=l.value)==null||L.style.setProperty("transition",E)})}),{isDragging:v,dragProgress:_,dragStyles:W}}function Ie(){throw new Error}const Rl=["start","end","left","right","top","bottom"],Dl=ce({color:String,disableResizeWatcher:Boolean,disableRouteWatcher:Boolean,expandOnHover:Boolean,floating:Boolean,modelValue:{type:Boolean,default:null},permanent:Boolean,rail:{type:Boolean,default:null},railWidth:{type:[Number,String],default:56},scrim:{type:[Boolean,String],default:!0},image:String,temporary:Boolean,persistent:Boolean,touchless:Boolean,width:{type:[Number,String],default:256},location:{type:String,default:"start",validator:a=>Rl.includes(a)},sticky:Boolean,...ft(),...Pe(),...dl(),...Ma({mobile:null}),...ht(),...Pt(),...gt(),...qe({tag:"nav"}),...Ge()},"VNavigationDrawer"),ma=me()({name:"VNavigationDrawer",props:Dl(),emits:{"update:modelValue":a=>!0,"update:rail":a=>!0},setup(a,l){let{attrs:s,emit:o,slots:n}=l;const{isRtl:i}=vt(),{themeClasses:r}=at(a),{borderClasses:m}=_t(a),{backgroundColorClasses:f,backgroundColorStyles:u}=Oe(ee(a,"color")),{elevationClasses:g}=bt(a),{displayClasses:y,mobile:v}=yt(a),{roundedClasses:_}=wt(a),h=ja(),S=lt(a,"modelValue",null,J=>!!J),{ssrBootStyles:q}=ot(),{scopeId:H}=na(),N=A(),R=pe(!1),{runOpenDelay:z,runCloseDelay:W}=cl(a,J=>{R.value=J}),M=$(()=>a.rail&&a.expandOnHover&&R.value?Number(a.width):Number(a.rail?a.railWidth:a.width)),E=$(()=>Ka(a.location,i.value)),k=$(()=>a.persistent),P=$(()=>!a.permanent&&(v.value||a.temporary)),Q=$(()=>a.sticky&&!P.value&&E.value!=="bottom");Ue(()=>a.expandOnHover&&a.rail!=null,()=>{te(R,J=>o("update:rail",!J))}),Ue(()=>!a.disableResizeWatcher,()=>{te(P,J=>!a.permanent&&jt(()=>S.value=!J))}),Ue(()=>!a.disableRouteWatcher&&!!h,()=>{te(h.currentRoute,()=>P.value&&(S.value=!1))}),te(()=>a.permanent,J=>{J&&(S.value=!0)}),a.modelValue==null&&!P.value&&(S.value=a.permanent||!v.value);const{isDragging:L,dragProgress:Y}=Hl({el:N,isActive:S,isTemporary:P,width:M,touchless:ee(a,"touchless"),position:E}),ae=$(()=>{const J=P.value?0:a.rail&&a.expandOnHover?Number(a.railWidth):M.value;return L.value?J*Y.value:J}),se=$(()=>["top","bottom"].includes(a.location)?0:M.value),{layoutItemStyles:ue,layoutItemScrimStyles:_e}=Ct({id:a.name,order:$(()=>parseInt(a.order,10)),position:E,layoutSize:ae,elementSize:se,active:$(()=>S.value||L.value),disableTransitions:$(()=>L.value),absolute:$(()=>a.absolute||Q.value&&typeof he.value!="string")}),{isStuck:he,stickyStyles:be}=ql({rootEl:N,isSticky:Q,layoutItemStyles:ue}),ze=Oe($(()=>typeof a.scrim=="string"?a.scrim:null)),je=$(()=>({...L.value?{opacity:Y.value*.2,transition:"none"}:void 0,..._e.value}));return pt({VList:{bgColor:"transparent"}}),ve(()=>{const J=n.image||a.image;return c(x,null,[c(a.tag,X({ref:N,onMouseenter:z,onMouseleave:W,class:["v-navigation-drawer",`v-navigation-drawer--${E.value}`,{"v-navigation-drawer--expand-on-hover":a.expandOnHover,"v-navigation-drawer--floating":a.floating,"v-navigation-drawer--is-hovering":R.value,"v-navigation-drawer--rail":a.rail,"v-navigation-drawer--temporary":P.value,"v-navigation-drawer--persistent":k.value,"v-navigation-drawer--active":S.value,"v-navigation-drawer--sticky":Q.value},r.value,f.value,m.value,y.value,g.value,_.value,a.class],style:[u.value,ue.value,q.value,be.value,a.style,["top","bottom"].includes(E.value)?{height:"auto"}:{}]},H,s),{default:()=>{var Le,Ae,We;return[J&&c("div",{key:"image",class:"v-navigation-drawer__img"},[n.image?c(Za,{key:"image-defaults",disabled:!a.image,defaults:{VImg:{alt:"",cover:!0,height:"inherit",src:a.image}}},n.image):c(Me,{key:"image-img",alt:"",cover:!0,height:"inherit",src:a.image},null)]),n.prepend&&c("div",{class:"v-navigation-drawer__prepend"},[(Le=n.prepend)==null?void 0:Le.call(n)]),c("div",{class:"v-navigation-drawer__content"},[(Ae=n.default)==null?void 0:Ae.call(n)]),n.append&&c("div",{class:"v-navigation-drawer__append"},[(We=n.append)==null?void 0:We.call(n)])]}}),c(Ba,{name:"fade-transition"},{default:()=>[P.value&&(L.value||S.value)&&!!a.scrim&&c("div",X({class:["v-navigation-drawer__scrim",ze.backgroundColorClasses.value],style:[je.value,ze.backgroundColorStyles.value],onClick:()=>{k.value||(S.value=!1)}},H),null)]})])}),{isStuck:he}}}),va=function(){const a=localStorage.getItem("frontend.settings.menu_items"),l=a?a.split(","):Ga,s=[];for(const o of l)o==="home"&&s.push({label:"home",icon:"mdi-home-outline",path:"/home",isLibraryNode:!1}),o==="search"&&s.push({label:"search",icon:"mdi-magnify",path:"/search",isLibraryNode:!1}),o==="artists"&&s.push({label:"artists",icon:"mdi-account-outline",path:"/artists",isLibraryNode:!0,hidden:t.libraryArtistsCount===0}),o==="albums"&&s.push({label:"albums",icon:"mdi-album",path:"/albums",isLibraryNode:!0,hidden:t.libraryAlbumsCount===0}),o==="tracks"&&s.push({label:"tracks",icon:"mdi-music-note",path:"/tracks",isLibraryNode:!0,hidden:t.libraryTracksCount===0}),o==="playlists"&&s.push({label:"playlists",icon:"mdi-playlist-play",path:"/playlists",isLibraryNode:!0,hidden:t.libraryPlaylistsCount===0}),o==="podcasts"&&s.push({label:"podcasts",icon:"mdi-podcast",path:"/podcasts",isLibraryNode:!0,hidden:t.libraryPodcastsCount===0}),o==="audiobooks"&&s.push({label:"audiobooks",icon:"mdi-book-play-outline",path:"/audiobooks",isLibraryNode:!0,hidden:t.libraryAudiobooksCount===0}),o==="radios"&&s.push({label:"radios",icon:"mdi-access-point",path:"/radios",isLibraryNode:!0,hidden:t.libraryRadiosCount===0}),o==="browse"&&s.push({label:"browse",icon:"mdi-folder-outline",path:"/browse",isLibraryNode:!0}),o==="settings"&&s.push({label:"settings.settings",icon:"mdi-cog-outline",path:"/settings",isLibraryNode:!0});return s},Nl=U({__name:"DrawerNavigation",setup(a){const l=A(!0),s=A(!1),o=va();return(n,i)=>(d(),I(ma,{modelValue:l.value,"onUpdate:modelValue":i[1]||(i[1]=r=>l.value=r),app:"",rail:s.value,width:280},{default:p(()=>[c(de,{style:{height:"55px"},active:!1},{prepend:p(()=>i[2]||(i[2]=[T("img",{class:"logo_icon",size:"40",src:El},null,-1)])),title:p(()=>i[3]||(i[3]=[T("div",{class:"logo_text"},"Music Assistant",-1)])),_:1}),c(tt),c(Be,{lines:"one",density:"compact",nav:""},{default:p(()=>[(d(!0),b(x,null,oe(e(o).filter(r=>!r.hidden),r=>(d(),I(de,{key:r.path,nav:"",density:"compact",height:15,title:n.$t(r.label),"prepend-icon":r.icon,to:r.path},null,8,["title","prepend-icon","to"]))),128))]),_:1}),c(ie,{nav:"",height:15,width:40,style:{position:"relative",float:"right",right:"10px",top:"20px"},ripple:!1,icon:s.value?"mdi-chevron-right":"mdi-chevron-left",title:n.$t("tooltip.show_menu"),onClick:i[0]||(i[0]=r=>s.value=!s.value)},null,8,["icon","title"])]),_:1},8,["modelValue","rail"]))}}),Ul=le(Nl,[["__scopeId","data-v-8c634824"]]),Fl={class:"media-thumb"},Ol={style:{"margin-left":"-10px","padding-right":"5px"}},Yl=U({__name:"AddToPlaylistDialog",setup(a){const l=A(!1),s=A([]),o=A([]),n=A(),i=A([]);Ee(()=>{ke.on("playlistdialog",async g=>{l.value=!0,i.value=g.items,n.value=g.parentItem,await r()}),Xe(()=>{ke.off("playlistdialog")})});const r=async function(){s.value=[],o.value=[];const g=await w.getLibraryPlaylists(),y=i.value.length?i.value[0]:void 0;for(const v of g){if(!v.provider_mappings.filter(h=>h.available).length||!v.is_editable||n.value&&n.value.media_type===fe.PLAYLIST&&v.item_id===n.value.item_id)continue;const _=w.providers[v.provider_mappings[0].provider_instance];_&&(_.domain=="builtin"||_.is_streaming_provider||y!=null&&y.provider_mappings.filter(h=>h.provider_instance==_.instance_id).length)&&s.value.push(v)}for(const v of Object.values(w.providers))v.supported_features.includes(At.PLAYLIST_CREATE)&&v.supported_features.includes(At.PLAYLIST_TRACKS_EDIT)&&(v.domain=="builtin"||v.is_streaming_provider||y!=null&&y.provider_mappings.filter(_=>_.provider_instance==v.instance_id).length)&&o.value.push(v.instance_id)},m=async function(g){if(i.value[0].media_type===fe.TRACK)w.addPlaylistTracks(g.item_id,i.value.map(v=>v.uri));else if(i.value[0].media_type===fe.ALBUM){var y=await w.getAlbumTracks(i.value[0].item_id,i.value[0].provider);w.addPlaylistTracks(g.item_id,y.map(v=>v.uri))}u(),t.activeAlert={type:Ea.INFO,message:De("background_task_added"),persistent:!1}},f=async function(g){const y=prompt(De("new_playlist_name"));if(!y)return;const v=await w.createPlaylist(y,g);m(v)},u=function(){l.value=!1};return(g,y)=>(d(),I(da,{modelValue:l.value,"onUpdate:modelValue":[y[0]||(y[0]=v=>l.value=v),y[1]||(y[1]=v=>{e(t).dialogActive=v})],fullscreen:"",transition:"dialog-bottom-transition"},{default:p(()=>[c(Ye,null,{default:p(()=>[c(kl,{icon:"mdi-playlist-plus",title:e(De)("add_playlist"),"menu-items":[{label:"close",icon:"mdi-close",action:u}]},null,8,["title","menu-items"]),c(tt),y[4]||(y[4]=T("br",null,null,-1)),c(Be,null,{default:p(()=>[(d(!0),b(x,null,oe(s.value,v=>(d(),b("div",{key:v.item_id},[c(de,{onClick:_=>m(v)},{prepend:p(()=>[T("div",Fl,[c(Se,{item:v,size:50},null,8,["item"])])]),title:p(()=>[T("div",null,C(v.name),1)]),subtitle:p(()=>[T("div",null,C(v.owner),1)]),append:p(()=>[v.provider_mappings?(d(),I(nt,{key:0,domain:v.provider_mappings[0].provider_domain,size:20},null,8,["domain"])):V("",!0)]),_:2},1032,["onClick"])]))),128)),y[2]||(y[2]=T("div",{style:{height:"30px"}},null,-1)),c(tt),y[3]||(y[3]=T("div",{style:{height:"30px"}},null,-1)),(d(!0),b(x,null,oe(o.value,v=>(d(),b("div",{key:v},[c(de,{onClick:_=>f(v)},{prepend:p(()=>[T("div",Ol,[c(nt,{domain:e(w).providers[v].domain,size:50},null,8,["domain"])])]),title:p(()=>[T("div",null,C(e(De)("new_playlist")),1)]),subtitle:p(()=>[T("div",null,C(e(De)("create_playlist_on",[e(w).providers[v].name])),1)]),append:p(()=>[c(nt,{domain:e(w).providers[v].domain,size:20},null,8,["domain"])]),_:2},1032,["onClick"])]))),128))]),_:1})]),_:1})]),_:1},8,["modelValue"]))}}),xl=le(Yl,[["__scopeId","data-v-a7c53a67"]]),Xl=le(bl,[["__scopeId","data-v-3a9a25e3"]]),Gl=ce({scrollable:Boolean,...Pe(),...Ja(),...qe({tag:"main"})},"VMain"),jl=me()({name:"VMain",props:Gl(),setup(a,l){let{slots:s}=l;const{dimensionStyles:o}=el(a),{mainStyles:n}=hl(),{ssrBootStyles:i}=ot();return ve(()=>c(a.tag,{class:["v-main",{"v-main--scrollable":a.scrollable},a.class],style:[n.value,i.value,o.value,a.style]},{default:()=>{var r,m;return[a.scrollable?c("div",{class:"v-main__scroller"},[(r=s.default)==null?void 0:r.call(s)]):(m=s.default)==null?void 0:m.call(s)]}})),{}}}),Ft=U({__name:"View",setup(a){return(l,s)=>{const o=qa("router-view");return d(),I(jl,{id:"cont",class:"overflow-y-auto",style:{height:"0px"}},{default:p(()=>{var n,i,r;return[e(t).navigationMenuStyle=="vertical"&&!e(t).frameless?(d(),I(Ul,{key:0})):V("",!0),c(o,null,{default:p(({Component:m})=>[(d(),I(za(m)))]),_:1}),c(xl),c(Xl),c(Pl,{"model-value":e(t).activeAlert!==void 0,color:((n=e(t).activeAlert)==null?void 0:n.type)||"grey",text:(i=e(t).activeAlert)==null?void 0:i.message,"close-on-content-click":"",position:"sticky",timeout:(r=e(t).activeAlert)!=null&&r.persistent?-1:5e3,"z-index":"999999",style:{"z-index":"999999"},"onUpdate:modelValue":s[0]||(s[0]=()=>e(t).activeAlert=void 0)},null,8,["model-value","color","text","timeout"])]}),_:1})}}}),Kl=ce({baseColor:String,bgColor:String,color:String,grow:Boolean,mode:{type:String,validator:a=>!a||["horizontal","shift"].includes(a)},height:{type:[Number,String],default:56},active:{type:Boolean,default:!0},...ft(),...Pe(),...ia(),...ht(),...gt(),...Pt({name:"bottom-navigation"}),...qe({tag:"header"}),...tl({selectedClass:"v-btn--selected"}),...Ge()},"VBottomNavigation"),Zl=me()({name:"VBottomNavigation",props:Kl(),emits:{"update:active":a=>!0,"update:modelValue":a=>!0},setup(a,l){let{slots:s}=l;const{themeClasses:o}=Kt(),{borderClasses:n}=_t(a),{backgroundColorClasses:i,backgroundColorStyles:r}=Oe(ee(a,"bgColor")),{densityClasses:m}=oa(a),{elevationClasses:f}=bt(a),{roundedClasses:u}=wt(a),{ssrBootStyles:g}=ot(),y=$(()=>Number(a.height)-(a.density==="comfortable"?8:0)-(a.density==="compact"?16:0)),v=lt(a,"active",a.active),{layoutItemStyles:_}=Ct({id:a.name,order:$(()=>parseInt(a.order,10)),position:$(()=>"bottom"),layoutSize:$(()=>v.value?y.value:0),elementSize:y,active:v,absolute:ee(a,"absolute")});return sa(a,al),pt({VBtn:{baseColor:ee(a,"baseColor"),color:ee(a,"color"),density:ee(a,"density"),stacked:$(()=>a.mode!=="horizontal"),variant:"text"}},{scoped:!0}),ve(()=>c(a.tag,{class:["v-bottom-navigation",{"v-bottom-navigation--active":v.value,"v-bottom-navigation--grow":a.grow,"v-bottom-navigation--shift":a.mode==="shift"},o.value,i.value,n.value,m.value,f.value,u.value,a.class],style:[r.value,_.value,{height:Qe(y.value)},g.value,a.style]},{default:()=>[s.default&&c("div",{class:"v-bottom-navigation__content"},[s.default()])]})),{}}}),Jl={class:"menuButton"},ei={class:"menuButton"},ti={class:"menuButton"},ai=U({__name:"BottomNavigation",props:{height:{}},setup(a){const l=va(),s=A(!1);return(o,n)=>(d(),I(Zl,{height:o.height,grow:"",elevation:"15",style:{"border-top":"1px solid #20202035"},role:"navigation"},{default:p(()=>[e(Z)("tablet")?(d(!0),b(x,{key:0},oe(e(l),i=>(d(),I(ge,{key:i.label,to:i.path,"aria-label":o.$t(i.label),tabindex:"0"},{default:p(()=>[c(O,{size:"xx-large"},{default:p(()=>[D(C(i.icon),1)]),_:2},1024),T("span",Jl,C(o.$t(i.label)),1)]),_:2},1032,["to","aria-label"]))),128)):(d(),b(x,{key:1},[(d(!0),b(x,null,oe(e(l).filter(i=>!i.isLibraryNode),i=>(d(),I(ge,{key:i.label,to:i.path,"aria-label":o.$t(i.label),tabindex:"0"},{default:p(()=>[c(O,{size:"xx-large"},{default:p(()=>[D(C(i.icon),1)]),_:2},1024),T("span",ei,C(o.$t(i.label)),1)]),_:2},1032,["to","aria-label"]))),128)),c(kt,null,{activator:p(({props:i})=>[c(ge,X(i,{"aria-haspopup":"true","aria-expanded":s.value.toString(),"aria-label":"Open library menu"}),{default:p(()=>[c(O,{size:"xx-large"},{default:p(()=>n[0]||(n[0]=[D("mdi-bookshelf")])),_:1}),T("span",ti,C(o.$t("library")),1)]),_:2},1040,["aria-expanded"])]),default:p(()=>[c(Be,null,{default:p(()=>[(d(!0),b(x,null,oe(e(l).filter(i=>i.isLibraryNode),i=>(d(),I(de,{key:i.label,title:o.$t(i.label),"prepend-icon":i.icon,to:i.path},null,8,["title","prepend-icon","to"]))),128))]),_:1})]),_:1})],64))]),_:1},8,["height"]))}}),li=le(ai,[["__scopeId","data-v-5c8e33d1"]]),ii={style:{width:"auto"}},oi={key:0,style:{width:"100%"}},si=["onClick"],ni={key:0,class:"time-text-row"},ri={class:"text-caption time-text-right"},ui=U({__name:"PlayerTimeline",props:{showLabels:{type:Boolean,default:!1}},setup(a){const l=A(!1),s=A(!0),o=A(!1),n=A(0),i=A(0),r=$(()=>t.curQueueItem?l.value?`-${Ke(t.curQueueItem.duration-f.value)}`:`${Ke(f.value)}`:"0:00"),m=$(()=>{var h;if(!t.curQueueItem||!t.curQueueItem.duration||((h=t.curQueueItem.media_item)==null?void 0:h.media_type)==fe.RADIO)return"";const _=t.curQueueItem.duration;return Ke(_)}),f=$(()=>o.value?(i.value=n.value,n.value):t.activePlayerQueue?t.activePlayerQueue.elapsed_time:0),u=$(()=>{var h,S,q;const _={};return(q=(S=(h=t.curQueueItem)==null?void 0:h.media_item)==null?void 0:S.metadata)!=null&&q.chapters&&t.curQueueItem.media_item.metadata.chapters.forEach(H=>{_[H.start]=H.name}),_});te(f,_=>{o.value||(n.value=_)});const g=function(){o.value=!0},y=()=>{o.value=!1,!o.value&&t.activePlayer&&w.playerCommandSeek(t.activePlayer.player_id,Math.round(i.value))},v=function(_){var h,S,q;if((q=(S=(h=t.curQueueItem)==null?void 0:h.media_item)==null?void 0:S.metadata)!=null&&q.chapters){for(const H of t.curQueueItem.media_item.metadata.chapters)if(H.start==_){w.playMedia(t.curQueueItem.media_item.uri,void 0,void 0,H.position.toString());return}}};return(_,h)=>{var S;return d(),b("div",ii,[e(t).activePlayerQueue?(d(),b("div",oi,[c(ca,{modelValue:n.value,"onUpdate:modelValue":h[0]||(h[0]=q=>n.value=q),disabled:!e(t).curQueueItem||!e(t).curQueueItem.media_item||!e(t).curQueueItem.duration||e(t).curQueueItem.media_item.media_type==e(fe).RADIO,style:{width:"100%"},min:0,max:(S=e(t).curQueueItem)==null?void 0:S.duration,"hide-details":"","track-size":2,"thumb-size":s.value?0:10,"show-ticks":u.value?"always":!1,ticks:u.value,"tick-size":"4",onTouchstart:h[1]||(h[1]=q=>s.value=!1),onTouchend:h[2]||(h[2]=q=>s.value=!0),onMouseenter:h[3]||(h[3]=q=>s.value=!1),onMouseleave:h[4]||(h[4]=q=>s.value=!0),onStart:g,onEnd:y},{"tick-label":p(({tick:q})=>[_.showLabels&&!s.value&&Object.values(u.value).length<6?(d(),b("a",{key:0,class:"text-caption",onClick:H=>v(q.value)},C(q.label),9,si)):V("",!0)]),_:1},8,["modelValue","disabled","max","thumb-size","show-ticks","ticks"]),_.showLabels?(d(),b("div",ni,[T("div",{class:"text-caption time-text-left",onClick:h[5]||(h[5]=q=>l.value?l.value=!1:l.value=!0)},C(r.value),1),T("div",ri,C(m.value),1)])):V("",!0)])):V("",!0)])}}}),ya=le(ui,[["__scopeId","data-v-50cb7560"]]),di=U({__name:"ResponsiveIcon",props:{width:{default:void 0},height:{default:void 0},staticWidth:{default:void 0},staticHeight:{default:void 0},maxWidth:{default:void 0},maxHeight:{default:void 0},minWidth:{default:"24px"},minHeight:{default:"24px"},icon:{default:void 0},type:{default:"icon"},color:{default:void 0},disabled:{type:Boolean},badge:{type:Boolean,default:void 0}},emits:["click"],setup(a,{emit:l}){const s=()=>{if(o.value){const i=o.value.offsetWidth,r=o.value.offsetHeight,m=Math.min(i,r);n.value.$el.style.fontSize=`${m}px`}},o=A(),n=A();return Ee(()=>{s(),window.addEventListener("resize",s)}),Xe(()=>{window.removeEventListener("resize",s)}),(i,r)=>(d(),b("div",{ref_key:"responsiveIconHolder",ref:o,class:Ze([i.type=="btn"&&!i.disabled?"responsive-icon-holder-btn":"responsive-icon-holder"]),style:G({width:i.staticWidth?i.staticWidth:i.width,height:i.staticWidth?i.staticWidth:i.height,maxHeight:i.staticHeight?i.staticHeight:i.maxHeight,maxWidth:i.staticWidth?i.staticWidth:i.maxWidth,minHeight:i.staticHeight?i.staticHeight:i.minHeight,minWidth:i.staticWidth?i.staticWidth:i.minWidth}),onClick:r[0]||(r[0]=m=>i.disabled?m.preventDefault():i.$emit("click",m))},[c(dt,{"model-value":i.badge==!0,color:"error",dot:""},{default:p(()=>[i.type==="icon"?(d(),I(O,{key:0,ref_key:"responsiveIcon",ref:n,class:"responsive-icon",color:i.color?i.color:"",icon:i.icon?i.icon:"mdi-check",width:i.staticWidth?i.staticWidth:null,height:i.staticHeight?i.staticHeight:null,disabled:i.disabled},rt({_:2},[oe(i.$slots,(m,f)=>({name:f,fn:p(()=>[ut(i.$slots,f,{},void 0,!0)])}))]),1032,["color","icon","width","height","disabled"])):i.type==="btn"?(d(),I(O,{key:1,ref_key:"responsiveIcon",ref:n,class:"responsive-icon",style:{cursor:"pointer"},color:i.color?i.color:"",icon:i.icon?i.icon:"mdi-check",width:i.staticWidth?i.staticWidth:null,height:i.staticHeight?i.staticHeight:null,disabled:i.disabled},rt({_:2},[oe(i.$slots,(m,f)=>({name:f,fn:p(()=>[ut(i.$slots,f,{},void 0,!0)])}))]),1032,["color","icon","width","height","disabled"])):V("",!0)]),_:3},8,["model-value"])],6))}}),Ce=le(di,[["__scopeId","data-v-2c9253ab"]]),pa=U({__name:"RepeatBtn",props:{playerQueue:{},isVisible:{type:Boolean,default:!0},icon:{default:void 0}},setup(a){return(l,s)=>{var o,n;return l.isVisible&&l.playerQueue?(d(),I(Ce,X({key:0},l.icon,{disabled:!l.playerQueue.active||l.playerQueue.items==0,color:e($e)((o=l.icon)==null?void 0:o.color,[[l.playerQueue.repeat_mode==e(K).OFF,null],[l.playerQueue.repeat_mode==e(K).ALL,"primary"],[l.playerQueue.repeat_mode==e(K).ONE,"primary"]]),icon:e($e)((n=l.icon)==null?void 0:n.icon,[[l.playerQueue.repeat_mode==e(K).OFF,"mdi-repeat-off"],[l.playerQueue.repeat_mode==e(K).ALL,"mdi-repeat"],[l.playerQueue.repeat_mode==e(K).ONE,"mdi-repeat-once"],[!0,"mdi-repeat-off"]]),type:"btn",onClick:s[0]||(s[0]=i=>e(w).queueCommandRepeat(l.playerQueue.queue_id||"",e($e)(null,[[l.playerQueue.repeat_mode==e(K).OFF,e(K).ONE],[l.playerQueue.repeat_mode==e(K).ALL,e(K).OFF],[l.playerQueue.repeat_mode==e(K).ONE,e(K).ALL]])))}),null,16,["disabled","color","icon"])):V("",!0)}}}),fa=U({__name:"ShuffleBtn",props:{playerQueue:{},isVisible:{type:Boolean,default:!0},icon:{default:void 0}},setup(a){return(l,s)=>{var o,n;return l.isVisible&&l.playerQueue?(d(),I(Ce,X({key:0},l.icon,{disabled:!l.playerQueue.active||l.playerQueue.items==0,color:e($e)((o=l.icon)==null?void 0:o.color,[[l.playerQueue.shuffle_enabled,"primary",""]]),icon:e($e)((n=l.icon)==null?void 0:n.icon,[[l.playerQueue.shuffle_enabled,"mdi-shuffle"],[l.playerQueue.shuffle_enabled==!1,"mdi-shuffle-disabled"],[!0,"mdi-shuffle"]]),type:"btn",onClick:s[0]||(s[0]=i=>e(w).queueCommandShuffle(l.playerQueue.queue_id,!l.playerQueue.shuffle_enabled))}),null,16,["disabled","color","icon"])):V("",!0)}}}),Vt=U({__name:"PlayBtn",props:{player:{},playerQueue:{default:void 0},isVisible:{type:Boolean,default:!0},withCircle:{type:Boolean,default:!0},icon:{default:void 0},iconStyle:{default:"circle"}},setup(a){const l=a,s=$(()=>l.playerQueue?l.playerQueue.items>0:!1),o=$(()=>{var i;return!(!l.player||(i=l.playerQueue)!=null&&i.active||!l.player.current_media)}),n=$(()=>{var i;return((i=l.player)==null?void 0:i.state)==Je.PLAYING?"mdi-pause":"mdi-play"});return(i,r)=>i.isVisible&&i.player?(d(),I(Ce,X({key:0},i.icon,{disabled:!s.value&&!o.value,icon:i.iconStyle?`${n.value}-${i.iconStyle}`:n.value,type:"btn",onClick:r[0]||(r[0]=m=>e(w).playerCommandPlayPause(i.player.player_id))}),null,16,["disabled","icon"])):V("",!0)}}),ha=U({__name:"PreviousBtn",props:{player:{},playerQueue:{default:void 0},isVisible:{type:Boolean,default:!0},icon:{default:void 0}},setup(a){const l=a,s=$(()=>{var n,i;return!((n=l.playerQueue)!=null&&n.active)||!((i=l.playerQueue)!=null&&i.items)||!l.playerQueue.current_index?!1:l.playerQueue.current_index>0}),o=$(()=>{var n;return!l.player||(n=l.playerQueue)!=null&&n.active||!l.player.current_media?!1:l.player.supported_features.includes(ye.NEXT_PREVIOUS)});return(n,i)=>n.isVisible&&n.player?(d(),I(Ce,X({key:0},n.icon,{disabled:!s.value&&!o.value,icon:"mdi-skip-previous-outline",type:"btn",onClick:i[0]||(i[0]=r=>e(w).playerCommandPrevious(n.player.player_id))}),null,16,["disabled"])):V("",!0)}}),ga=U({__name:"NextBtn",props:{player:{},playerQueue:{default:void 0},isVisible:{type:Boolean,default:!0},icon:{default:void 0}},setup(a){const l=a,s=$(()=>{var n;return(n=l.playerQueue)!=null&&n.active?(l.playerQueue.current_index||0)<l.playerQueue.items-1:!1}),o=$(()=>{var n;return!l.player||(n=l.playerQueue)!=null&&n.active||!l.player.current_media?!1:l.player.supported_features.includes(ye.NEXT_PREVIOUS)});return(n,i)=>n.isVisible&&n.player?(d(),I(Ce,X({key:0},n.icon,{disabled:!s.value&&!o.value,icon:"mdi-skip-next-outline",type:"btn",onClick:i[0]||(i[0]=r=>e(w).playerCommandNext(n.player.player_id))}),null,16,["disabled"])):V("",!0)}}),ci={key:0,class:"player-controls"},mi={key:0,class:"player-controls-elements"},vi={key:1,class:"player-controls-elements"},yi={key:2},pi={key:3,class:"player-controls-elements"},fi={key:4,class:"player-controls-elements"},Ot=U({__name:"PlayerControls",props:{visibleComponents:{default:()=>({repeat:{isVisible:!0},shuffle:{isVisible:!0},play:{isVisible:!0},previous:{isVisible:!0},next:{isVisible:!0}})}},setup(a){return(l,s)=>{var o,n,i,r,m;return l.visibleComponents?(d(),b("div",ci,[l.visibleComponents&&((o=l.visibleComponents.shuffle)!=null&&o.isVisible)?(d(),b("div",mi,[c(fa,{"player-queue":e(t).activePlayerQueue,class:"media-controls-item",icon:l.visibleComponents.shuffle.icon},null,8,["player-queue","icon"])])):V("",!0),l.visibleComponents&&((n=l.visibleComponents.previous)!=null&&n.isVisible)?(d(),b("div",vi,[c(ha,{player:e(t).activePlayer,"player-queue":e(t).activePlayerQueue,class:"media-controls-item",icon:l.visibleComponents.previous.icon},null,8,["player","player-queue","icon"])])):V("",!0),l.visibleComponents&&((i=l.visibleComponents.play)!=null&&i.isVisible)?(d(),b("div",yi,[c(Vt,{player:e(t).activePlayer,"player-queue":e(t).activePlayerQueue,class:"media-controls-item","icon-style":l.visibleComponents.play.withCircle?"circle":"",icon:l.visibleComponents.play.icon},null,8,["player","player-queue","icon-style","icon"])])):V("",!0),l.visibleComponents&&((r=l.visibleComponents.next)!=null&&r.isVisible)?(d(),b("div",pi,[c(ga,{player:e(t).activePlayer,"player-queue":e(t).activePlayerQueue,icon:l.visibleComponents.next.icon,"static-height":"24px","static-width":"24px"},null,8,["player","player-queue","icon"])])):V("",!0),l.visibleComponents&&((m=l.visibleComponents.repeat)!=null&&m.isVisible)?(d(),b("div",fi,[c(pa,{"player-queue":e(t).activePlayerQueue,icon:l.visibleComponents.repeat.icon,"static-height":"24px","static-width":"24px"},null,8,["player-queue","icon"])])):V("",!0)])):V("",!0)}}}),hi={props:{width:String,height:String,style:String,isPowered:Boolean,allowWheel:Boolean},emits:["update:model-value"],setup(a,l){const s=A(!0),o=$(()=>({class:"player-volume",hideDetails:!0,trackSize:2,thumbSize:s.value?0:10,step:2,elevation:0,style:`width: ${a.width}; height:${a.height}; display: inline-grid; ${a.style}`,disabled:!a.isPowered})),n=$(()=>({...o.value,...l}));return{isThumbHidden:s,playerVolumeProps:n,onWheel:({deltaY:r})=>{if(!a.allowWheel)return;const m=n.value.step,f=l.attrs["model-value"],u=r<0?m:-m;l.emit("update:model-value",f+u)}}}};function gi(a,l,s,o,n,i){return d(),I(ca,X(o.playerVolumeProps,{onTouchstart:l[0]||(l[0]=r=>o.isThumbHidden=!1),onTouchend:l[1]||(l[1]=r=>o.isThumbHidden=!0),onMouseenter:l[2]||(l[2]=r=>o.isThumbHidden=!1),onMouseleave:l[3]||(l[3]=r=>o.isThumbHidden=!0),onWheel:re(o.onWheel,["prevent"]),onEnd:l[4]||(l[4]=r=>a.$emit("update:model-value",r))}),rt({_:2},[oe(a.$slots,(r,m)=>({name:m,fn:p(()=>[ut(a.$slots,m,{},void 0,!0)])}))]),1040,["onWheel"])}const xe=le(hi,[["render",gi],["__scopeId","data-v-e5af1148"]]),_a=U({__name:"QueueBtn",props:{isVisible:{type:Boolean,default:!0},icon:{default:void 0}},setup(a){const l=function(){t.showFullscreenPlayer&&t.showQueueItems?t.showQueueItems=!1:t.showFullscreenPlayer&&!t.showQueueItems?t.showQueueItems=!0:(t.showQueueItems=!0,t.showFullscreenPlayer=!0)};return(s,o)=>{var n;return s.isVisible?(d(),I(Ce,X({key:0},s.icon,{disabled:!e(t).activePlayerId||e(t).showFullscreenPlayer&&!e(t).curQueueItem&&!e(t).showQueueItems,icon:"mdi-playlist-play",color:e($e)((n=s.icon)==null?void 0:n.color,[[e(t).showFullscreenPlayer&&e(t).showQueueItems,"primary",""]]),type:"btn",onClick:l}),null,16,["disabled","color"])):V("",!0)}}}),ba=U({__name:"SpeakerBtn",props:{color:{}},setup(a){return(l,s)=>(d(),I(ie,{variant:"icon",ripple:!1,icon:"",onClick:s[0]||(s[0]=o=>e(t).showPlayersMenu=!0)},{default:p(()=>{var o;return[c(O,{color:l.color?l.color:"",size:24,icon:(o=e(t).activePlayer)!=null&&o.group_childs.length?"mdi-speaker-multiple":"mdi-speaker"},null,8,["color","icon"])]}),_:1}))}}),wa=(a,l)=>{const s=[{label:a.powered?"power_off_player":"power_on_player",labelArgs:[],action:()=>{w.playerCommandPowerToggle(a.player_id)},icon:"mdi-power"}],o=Object.values(w.players).filter(n=>n.player_id!=a.player_id&&n.available&&n.enabled&&n.provider==a.provider&&n.supported_features.includes(ye.SET_MEMBERS)&&!n.synced_to);return a.supported_features.includes(ye.SET_MEMBERS)&&!a.synced_to&&a.type==Te.PLAYER&&a.group_childs.length==0&&o.length>0&&s.push({label:"sync_player_with",labelArgs:[],icon:"mdi-link-variant",subItems:o.map(n=>({label:n.display_name,labelArgs:[],action:()=>{w.playerCommandGroup(a.player_id,n.player_id)}})).sort((n,i)=>{var r;return n.label.toUpperCase()>((r=i.label)==null?void 0:r.toUpperCase())?1:-1})}),l&&s.push({label:l.shuffle_enabled?"shuffle_disable":"shuffle_enable",labelArgs:[],action:()=>{w.queueCommandShuffleToggle(l.queue_id)},icon:l.shuffle_enabled?"mdi-shuffle-disabled":"mdi-shuffle"}),l&&s.push({label:"select_repeat_mode",labelArgs:[],subItems:[{label:"repeat_mode.off",labelArgs:[],action:()=>{w.queueCommandRepeat(l.queue_id,K.OFF)},selected:l.repeat_mode==K.OFF},{label:"repeat_mode.all",labelArgs:[],action:()=>{w.queueCommandRepeat(l.queue_id,K.ALL)},selected:l.repeat_mode==K.ALL},{label:"repeat_mode.one",labelArgs:[],action:()=>{w.queueCommandRepeat(l.queue_id,K.ONE)},selected:l.repeat_mode==K.ONE}],icon:"mdi-repeat"}),l!=null&&l.items&&s.push({label:"transfer_queue",icon:"mdi-swap-horizontal",subItems:Object.values(w.players).filter(n=>n.player_id!=l.queue_id&&n.player_id!=a.player_id&&n.available&&n.enabled&&!n.synced_to).map(n=>({label:n.display_name,labelArgs:[],action:()=>{w.queueCommandTransfer(l.queue_id,n.player_id),t.activePlayerId=n.player_id}})).sort((n,i)=>{var r;return n.label.toUpperCase()>((r=i.label)==null?void 0:r.toUpperCase())?1:-1})}),l!=null&&l.items&&s.push({label:"queue_clear",labelArgs:[],action:()=>{w.queueCommandClear(l.queue_id)},icon:"mdi-cancel"}),l&&"dont_stop_the_music_enabled"in l&&s.push({label:l.dont_stop_the_music_enabled?"dont_stop_the_music_disable":"dont_stop_the_music_enable",labelArgs:[],action:()=>{w.queueCommandDontStopTheMusicToggle(l.queue_id)},icon:"mdi-all-inclusive"}),s.push({label:"open_player_settings",labelArgs:[],action:()=>{t.showFullscreenPlayer=!1,t.showPlayersMenu=!1,et.push(`/settings/editplayer/${a.player_id}`)},icon:"mdi-cog-outline"}),s.push({label:"open_dsp_settings",labelArgs:[],action:()=>{t.showFullscreenPlayer=!1,t.showPlayersMenu=!1,et.push(`/settings/editplayer/${a.player_id}/dsp`)},icon:"mdi-equalizer"}),s},It=Symbol.for("vuetify:v-tabs"),_i=ce({fixed:Boolean,sliderColor:String,hideSlider:Boolean,direction:{type:String,default:"horizontal"},...Zt(ll({selectedClass:"v-tab--selected",variant:"text"}),["active","block","flat","location","position","symbol"])},"VTab"),mt=me()({name:"VTab",props:_i(),setup(a,l){let{slots:s,attrs:o}=l;const{textColorClasses:n,textColorStyles:i}=il(a,"sliderColor"),r=A(),m=A(),f=$(()=>a.direction==="horizontal"),u=$(()=>{var y,v;return((v=(y=r.value)==null?void 0:y.group)==null?void 0:v.isSelected.value)??!1});function g(y){var _,h;let{value:v}=y;if(v){const S=(h=(_=r.value)==null?void 0:_.$el.parentElement)==null?void 0:h.querySelector(".v-tab--selected .v-tab__slider"),q=m.value;if(!S||!q)return;const H=getComputedStyle(S).color,N=S.getBoundingClientRect(),R=q.getBoundingClientRect(),z=f.value?"x":"y",W=f.value?"X":"Y",M=f.value?"right":"bottom",E=f.value?"width":"height",k=N[z],P=R[z],Q=k>P?N[M]-R[M]:N[z]-R[z],L=Math.sign(Q)>0?f.value?"right":"bottom":Math.sign(Q)<0?f.value?"left":"top":"center",ae=(Math.abs(Q)+(Math.sign(Q)<0?N[E]:R[E]))/Math.max(N[E],R[E])||0,se=N[E]/R[E]||0,ue=1.5;vl(q,{backgroundColor:[H,"currentcolor"],transform:[`translate${W}(${Q}px) scale${W}(${se})`,`translate${W}(${Q/ue}px) scale${W}(${(ae-1)/ue+1})`,"none"],transformOrigin:Array(3).fill(L)},{duration:225,easing:yl})}}return ve(()=>{const y=ge.filterProps(a);return c(ge,X({symbol:It,ref:r,class:["v-tab",a.class],style:a.style,tabindex:u.value?0:-1,role:"tab","aria-selected":String(u.value),active:!1},y,o,{block:a.fixed,maxWidth:a.fixed?300:void 0,"onGroup:selected":g}),{...s,default:()=>{var v;return c(x,null,[((v=s.default)==null?void 0:v.call(s))??a.text,!a.hideSlider&&c("div",{ref:m,class:["v-tab__slider",n.value],style:i.value},null)])}})}),ml({},r)}}),bi=a=>{const{touchstartX:l,touchendX:s,touchstartY:o,touchendY:n}=a,i=.5,r=16;a.offsetX=s-l,a.offsetY=n-o,Math.abs(a.offsetY)<i*Math.abs(a.offsetX)&&(a.left&&s<l-r&&a.left(a),a.right&&s>l+r&&a.right(a)),Math.abs(a.offsetX)<i*Math.abs(a.offsetY)&&(a.up&&n<o-r&&a.up(a),a.down&&n>o+r&&a.down(a))};function wi(a,l){var o;const s=a.changedTouches[0];l.touchstartX=s.clientX,l.touchstartY=s.clientY,(o=l.start)==null||o.call(l,{originalEvent:a,...l})}function ki(a,l){var o;const s=a.changedTouches[0];l.touchendX=s.clientX,l.touchendY=s.clientY,(o=l.end)==null||o.call(l,{originalEvent:a,...l}),bi(l)}function Pi(a,l){var o;const s=a.changedTouches[0];l.touchmoveX=s.clientX,l.touchmoveY=s.clientY,(o=l.move)==null||o.call(l,{originalEvent:a,...l})}function Ci(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const l={touchstartX:0,touchstartY:0,touchendX:0,touchendY:0,touchmoveX:0,touchmoveY:0,offsetX:0,offsetY:0,left:a.left,right:a.right,up:a.up,down:a.down,start:a.start,move:a.move,end:a.end};return{touchstart:s=>wi(s,l),touchend:s=>ki(s,l),touchmove:s=>Pi(s,l)}}function Vi(a,l){var m;const s=l.value,o=s!=null&&s.parent?a.parentElement:a,n=(s==null?void 0:s.options)??{passive:!0},i=(m=l.instance)==null?void 0:m.$.uid;if(!o||!i)return;const r=Ci(l.value);o._touchHandlers=o._touchHandlers??Object.create(null),o._touchHandlers[i]=r,Jt(r).forEach(f=>{o.addEventListener(f,r[f],n)})}function Ii(a,l){var i,r;const s=(i=l.value)!=null&&i.parent?a.parentElement:a,o=(r=l.instance)==null?void 0:r.$.uid;if(!(s!=null&&s._touchHandlers)||!o)return;const n=s._touchHandlers[o];Jt(n).forEach(m=>{s.removeEventListener(m,n[m])}),delete s._touchHandlers[o]}const ka={mounted:Vi,unmounted:Ii},Pa=Symbol.for("vuetify:v-window"),Ca=Symbol.for("vuetify:v-window-group"),Va=ce({continuous:Boolean,nextIcon:{type:[Boolean,String,Function,Object],default:"$next"},prevIcon:{type:[Boolean,String,Function,Object],default:"$prev"},reverse:Boolean,showArrows:{type:[Boolean,String],validator:a=>typeof a=="boolean"||a==="hover"},touch:{type:[Object,Boolean],default:void 0},direction:{type:String,default:"horizontal"},modelValue:null,disabled:Boolean,selectedClass:{type:String,default:"v-window-item--active"},mandatory:{type:[Boolean,String],default:"force"},...Pe(),...qe(),...Ge()},"VWindow"),Yt=me()({name:"VWindow",directives:{Touch:ka},props:Va(),emits:{"update:modelValue":a=>!0},setup(a,l){let{slots:s}=l;const{themeClasses:o}=at(a),{isRtl:n}=vt(),{t:i}=La(),r=sa(a,Ca),m=A(),f=$(()=>n.value?!a.reverse:a.reverse),u=pe(!1),g=$(()=>{const z=a.direction==="vertical"?"y":"x",M=(f.value?!u.value:u.value)?"-reverse":"";return`v-window-${z}${M}-transition`}),y=pe(0),v=A(void 0),_=$(()=>r.items.value.findIndex(z=>r.selected.value.includes(z.id)));te(_,(z,W)=>{const M=r.items.value.length,E=M-1;M<=2?u.value=z<W:z===E&&W===0?u.value=!0:z===0&&W===E?u.value=!1:u.value=z<W}),Aa(Pa,{transition:g,isReversed:u,transitionCount:y,transitionHeight:v,rootRef:m});const h=$(()=>a.continuous||_.value!==0),S=$(()=>a.continuous||_.value!==r.items.value.length-1);function q(){h.value&&r.prev()}function H(){S.value&&r.next()}const N=$(()=>{const z=[],W={icon:n.value?a.nextIcon:a.prevIcon,class:`v-window__${f.value?"right":"left"}`,onClick:r.prev,"aria-label":i("$vuetify.carousel.prev")};z.push(h.value?s.prev?s.prev({props:W}):c(ge,W,null):c("div",null,null));const M={icon:n.value?a.prevIcon:a.nextIcon,class:`v-window__${f.value?"left":"right"}`,onClick:r.next,"aria-label":i("$vuetify.carousel.next")};return z.push(S.value?s.next?s.next({props:M}):c(ge,M,null):c("div",null,null)),z}),R=$(()=>a.touch===!1?a.touch:{...{left:()=>{f.value?q():H()},right:()=>{f.value?H():q()},start:W=>{let{originalEvent:M}=W;M.stopPropagation()}},...a.touch===!0?{}:a.touch});return ve(()=>ea(c(a.tag,{ref:m,class:["v-window",{"v-window--show-arrows-on-hover":a.showArrows==="hover"},o.value,a.class],style:a.style},{default:()=>{var z,W;return[c("div",{class:"v-window__container",style:{height:v.value}},[(z=s.default)==null?void 0:z.call(s,{group:r}),a.showArrows!==!1&&c("div",{class:"v-window__controls"},[N.value])]),(W=s.additional)==null?void 0:W.call(s,{group:r})]}}),[[Wa("touch"),R.value]])),{group:r}}}),$i=ce({...Zt(Va(),["continuous","nextIcon","prevIcon","showArrows","touch","mandatory"])},"VTabsWindow"),Si=me()({name:"VTabsWindow",props:$i(),emits:{"update:modelValue":a=>!0},setup(a,l){let{slots:s}=l;const o=ta(It,null),n=lt(a,"modelValue"),i=$({get(){var r;return n.value!=null||!o?n.value:(r=o.items.value.find(m=>o.selected.value.includes(m.id)))==null?void 0:r.value},set(r){n.value=r}});return ve(()=>{const r=Yt.filterProps(a);return c(Yt,X({_as:"VTabsWindow"},r,{modelValue:i.value,"onUpdate:modelValue":m=>i.value=m,class:["v-tabs-window",a.class],style:a.style,mandatory:!1,touch:!1}),s)}),{}}}),Ia=ce({reverseTransition:{type:[Boolean,String],default:void 0},transition:{type:[Boolean,String],default:void 0},...Pe(),...ol(),...pl()},"VWindowItem"),xt=me()({name:"VWindowItem",directives:{Touch:ka},props:Ia(),emits:{"group:selected":a=>!0},setup(a,l){let{slots:s}=l;const o=ta(Pa),n=sl(a,Ca),{isBooted:i}=ot();if(!o||!n)throw new Error("[Vuetify] VWindowItem must be used inside VWindow");const r=pe(!1),m=$(()=>i.value&&(o.isReversed.value?a.reverseTransition!==!1:a.transition!==!1));function f(){!r.value||!o||(r.value=!1,o.transitionCount.value>0&&(o.transitionCount.value-=1,o.transitionCount.value===0&&(o.transitionHeight.value=void 0)))}function u(){var h;r.value||!o||(r.value=!0,o.transitionCount.value===0&&(o.transitionHeight.value=Qe((h=o.rootRef.value)==null?void 0:h.clientHeight)),o.transitionCount.value+=1)}function g(){f()}function y(h){r.value&&jt(()=>{!m.value||!r.value||!o||(o.transitionHeight.value=Qe(h.clientHeight))})}const v=$(()=>{const h=o.isReversed.value?a.reverseTransition:a.transition;return m.value?{name:typeof h!="string"?o.transition.value:h,onBeforeEnter:u,onAfterEnter:f,onEnterCancelled:g,onBeforeLeave:u,onAfterLeave:f,onLeaveCancelled:g,onEnter:y}:!1}),{hasContent:_}=fl(a,n.isSelected);return ve(()=>c(nl,{transition:v.value,disabled:!i.value},{default:()=>{var h;return[ea(c("div",{class:["v-window-item",n.selectedClass.value,a.class],style:a.style},[_.value&&((h=s.default)==null?void 0:h.call(s))]),[[Ha,n.isSelected.value]])]}})),{groupItem:n}}}),Qi=ce({...Ia()},"VTabsWindowItem"),Ti=me()({name:"VTabsWindowItem",props:Qi(),setup(a,l){let{slots:s}=l;return ve(()=>{const o=xt.filterProps(a);return c(xt,X({_as:"VTabsWindowItem"},o,{class:["v-tabs-window-item",a.class],style:a.style}),s)}),{}}});function Mi(a){return a?a.map(l=>Ra(l)?l:{text:l,value:l}):[]}const Bi=ce({alignTabs:{type:String,default:"start"},color:String,fixedTabs:Boolean,items:{type:Array,default:()=>[]},stacked:Boolean,bgColor:String,grow:Boolean,height:{type:[Number,String],default:void 0},hideSlider:Boolean,sliderColor:String,...Il({mandatory:"force",selectedClass:"v-tab-item--selected"}),...ia(),...qe()},"VTabs"),Ei=me()({name:"VTabs",props:Bi(),emits:{"update:modelValue":a=>!0},setup(a,l){let{attrs:s,slots:o}=l;const n=lt(a,"modelValue"),i=$(()=>Mi(a.items)),{densityClasses:r}=oa(a),{backgroundColorClasses:m,backgroundColorStyles:f}=Oe(ee(a,"bgColor")),{scopeId:u}=na();return pt({VTab:{color:ee(a,"color"),direction:ee(a,"direction"),stacked:ee(a,"stacked"),fixed:ee(a,"fixedTabs"),sliderColor:ee(a,"sliderColor"),hideSlider:ee(a,"hideSlider")}}),ve(()=>{const g=Dt.filterProps(a),y=!!(o.window||a.items.length>0);return c(x,null,[c(Dt,X(g,{modelValue:n.value,"onUpdate:modelValue":v=>n.value=v,class:["v-tabs",`v-tabs--${a.direction}`,`v-tabs--align-tabs-${a.alignTabs}`,{"v-tabs--fixed-tabs":a.fixedTabs,"v-tabs--grow":a.grow,"v-tabs--stacked":a.stacked},r.value,m.value,a.class],style:[{"--v-tabs-height":Qe(a.height)},f.value,a.style],role:"tablist",symbol:It},u,s),{default:()=>{var v;return[((v=o.default)==null?void 0:v.call(o))??i.value.map(_=>{var h;return((h=o.tab)==null?void 0:h.call(o,{item:_}))??c(mt,X(_,{key:_.text,value:_.value}),{default:o[`tab.${_.value}`]?()=>{var S;return(S=o[`tab.${_.value}`])==null?void 0:S.call(o,{item:_})}:void 0})})]}}),y&&c(Si,X({modelValue:n.value,"onUpdate:modelValue":v=>n.value=v,key:"tabs-window"},u),{default:()=>{var v;return[i.value.map(_=>{var h;return((h=o.item)==null?void 0:h.call(o,{item:_}))??c(Ti,{value:_.value},{default:()=>{var S;return(S=o[`item.${_.value}`])==null?void 0:S.call(o,{item:_})}})}),(v=o.window)==null?void 0:v.call(o)]}})])}),{}}}),qi=["onClick"],zi={class:"main"},Li={key:0,class:"main-media-details"},Ai={key:0,class:"main-media-details-image"},Wi={class:"main-media-details-track-info"},Hi={key:0},Ri={key:0},Di={key:0},Ni={style:{margin:"auto","padding-top":"20px"}},Ui={key:1,class:"main-queue-items"},Fi={class:"queue-items-scroll-box"},Oi={class:"media-thumb listitem-media-thumb"},Yi={class:"d-flex"},xi={style:{"white-space":"nowrap"},class:"pr-1"},Xi={key:0},Gi={key:2,class:"main-queue-items"},ji={class:"main-media-details-image main-media-details-image-alt"},Ki={class:"player-bottom"},Zi={class:"row",style:{"margin-left":"5%","margin-right":"5%"}},Ji={class:"media-controls"},eo={key:0,class:"row",style:{"margin-left":"5%","margin-right":"5%"}},to={key:1,class:"row",style:{height:"70px",display:"flex","justify-content":"center","align-items":"center","padding-bottom":"15px","padding-top":"15px"}},ao=U({__name:"PlayerFullscreen",props:{colorPalette:{}},setup(a){Da();const{name:l}=yt(),s=a,o=new ct,n=A(-1),i=new ct,r=A([]),m=A(""),f=A(0),u=A(!1),g=$(()=>t.activePlayerQueue?r.value.slice(t.activePlayerQueue.current_index):[]),y=$(()=>t.activePlayerQueue?r.value.slice(0,t.activePlayerQueue.current_index):[]),v=$(()=>{switch(l.value){case"xs":return"1.2em";case"sm":return"1.6em";case"md":return"2em";case"lg":return t.showQueueItems?"1.5em":"2.5em";case"xl":return t.showQueueItems?"1.6em":"3em";case"xxl":return t.showQueueItems?"1.7em":"3.2em";default:return"1.0em."}}),_=$(()=>{switch(l.value){case"xs":return"1.0em";case"sm":return"1.2em";case"md":return"1.7em";case"lg":return t.showQueueItems?"1.0em":"1.6em";case"xl":return t.showQueueItems?"1.2em":"2em";case"xxl":return t.showQueueItems?"1.2em":"2em";default:return"1.0em."}}),h=$(()=>Fe.display.height.value>800),S=function(k){t.showFullscreenPlayer=!1,et.push({name:k.media_type,params:{itemId:k.item_id,provider:k.provider}})},q=function(k){t.globalSearchTerm=k,et.push({name:"search"}),t.showFullscreenPlayer=!1},H=function(k,P){var Y,ae,se,ue,_e,he,be;const Q=r.value.indexOf(P),L=[{label:"play_now",labelArgs:[],action:()=>{R(P,"play_now")},icon:"mdi-play-circle-outline",disabled:Q===((Y=t.activePlayerQueue)==null?void 0:Y.current_index)||Q===((ae=t.activePlayerQueue)==null?void 0:ae.index_in_buffer)},{label:"play_next",labelArgs:[],action:()=>{R(P,"move_next")},icon:"mdi-skip-next-circle-outline",disabled:Q<=(((se=t.activePlayerQueue)==null?void 0:se.index_in_buffer)||0)},{label:"queue_move_up",labelArgs:[],action:()=>{R(P,"up")},icon:"mdi-arrow-up",disabled:Q<=(((ue=t.activePlayerQueue)==null?void 0:ue.index_in_buffer)||0)},{label:"queue_move_down",labelArgs:[],action:()=>{R(P,"down")},icon:"mdi-arrow-down",disabled:Q<=(((_e=t.activePlayerQueue)==null?void 0:_e.index_in_buffer)||0)},{label:"queue_delete",labelArgs:[],action:()=>{R(P,"delete")},icon:"mdi-delete",disabled:Q<=(((he=t.activePlayerQueue)==null?void 0:he.index_in_buffer)||0)}];((be=P==null?void 0:P.media_item)==null?void 0:be.media_type)==fe.TRACK&&L.push({label:"show_info",labelArgs:[],action:()=>{S(P.media_item)},icon:"mdi-information-outline",disabled:!1}),ke.emit("contextmenu",{items:L,posX:k.clientX,posY:k.clientY})},N=function(k){t.activePlayer&&ke.emit("contextmenu",{items:wa(t.activePlayer,t.activePlayerQueue),posX:k.clientX,posY:k.clientY})},R=function(k,P){var Q,L,Y,ae,se;!k||!t.activePlayerQueue||(P=="play_now"?w.queueCommandPlayIndex((Q=t.activePlayerQueue)==null?void 0:Q.queue_id,k.queue_item_id):P=="move_next"?w.queueCommandMoveNext((L=t.activePlayerQueue)==null?void 0:L.queue_id,k.queue_item_id):P=="up"?w.queueCommandMoveUp((Y=t.activePlayerQueue)==null?void 0:Y.queue_id,k.queue_item_id):P=="down"?w.queueCommandMoveDown((ae=t.activePlayerQueue)==null?void 0:ae.queue_id,k.queue_item_id):P=="delete"&&w.queueCommandDelete((se=t.activePlayerQueue)==null?void 0:se.queue_id,k.queue_item_id))},z=async function(){u.value=!0,r.value=[],await Wt(100),u.value=!1},W=async function({done:k}){var Y;if(!t.activePlayerQueue||t.activePlayerQueue.items==0){k("empty");return}if(r.value.length>=((Y=t.activePlayerQueue)==null?void 0:Y.items)){k("empty");return}const P=r.value.length,Q=(t.activePlayerQueue.current_index||0)+50,L=await w.getPlayerQueueItems(t.activePlayerQueue.queue_id,Q,P);r.value.push(...L),L.length<50?k("empty"):k("ok")};Ee(()=>{const k=w.subscribe(Na.QUEUE_ITEMS_UPDATED,P=>{var Q;P.object_id==((Q=t.activePlayerQueue)==null?void 0:Q.queue_id)&&(P.data,z())});Xe(k)});const M=function(k){var Q;if(!((Q=t.curQueueItem)!=null&&Q.media_item))return;if(!t.curQueueItem.media_item.favorite){w.toggleFavorite(t.curQueueItem.media_item);return}const P=[{label:"favorites_remove",labelArgs:[],action:()=>{w.toggleFavorite(t.curQueueItem.media_item)},icon:"mdi-heart"},{label:"add_playlist",labelArgs:[],action:()=>{ke.emit("playlistdialog",{items:[t.curQueueItem.media_item]})},icon:"mdi-plus-circle-outline"}];ke.emit("contextmenu",{items:P,posX:k.clientX,posY:k.clientY})},E=function(){u.value=!0,Wt(100).then(()=>{u.value=!1})};return te(()=>t.activePlayerId,k=>{z()},{immediate:!0}),te(()=>s.colorPalette,k=>{!k.darkColor||!k.lightColor?m.value=Fe.theme.current.value.dark?"#000":"#fff":m.value=Fe.theme.current.value.dark?k.darkColor:k.lightColor}),(k,P)=>(d(),I(da,{modelValue:e(t).showFullscreenPlayer,"onUpdate:modelValue":P[12]||(P[12]=Q=>e(t).showFullscreenPlayer=Q),fullscreen:"",scrim:!1,transition:"dialog-bottom-transition","z-index":"9999"},{default:p(()=>[c(Ye,{color:e(Ua)(m.value,70,80)},{default:p(()=>{var Q,L,Y,ae,se,ue,_e,he,be,ze,je,J,Le,Ae,We,$t,St,Qt,Tt,Mt,Bt,Et,qt,zt,Lt;return[c(Vl,{class:"v-toolbar-default",color:"transparent"},{prepend:p(()=>[c(ie,{icon:"",onClick:P[0]||(P[0]=B=>e(t).showFullscreenPlayer=!1)},{default:p(()=>[c(O,{icon:"mdi-chevron-down"})]),_:1})]),append:p(()=>{var B;return[(B=e(t).activePlayerQueue)!=null&&B.radio_source.length?(d(),I(kt,{key:0,scrim:""},{activator:p(({props:F})=>[c(ie,X(F,{icon:""}),{default:p(()=>[c(O,{color:"accent",icon:"mdi-radio-tower"})]),_:2},1040)]),default:p(()=>[c(Ye,{title:k.$t("queue_radio_enabled"),subtitle:k.$t("queue_radio_based_on")},{text:p(()=>{var F;return[(d(!0),b(x,null,oe((F=e(t).activePlayerQueue)==null?void 0:F.radio_source,j=>(d(),b("div",{key:j.uri},[T("a",{onClick:Ve=>S(j)},C(j.name),9,qi)]))),128))]}),_:1},8,["title","subtitle"])]),_:1})):V("",!0),h.value?V("",!0):(d(),I(ba,{key:1})),c(ie,{icon:"",onClick:re(N,["stop"])},{default:p(()=>[c(O,{icon:"mdi-dots-vertical"})]),_:1})]}),_:1}),T("div",zi,[e(Z)("bp7")||!e(t).showQueueItems?(d(),b("div",Li,[k.$vuetify.display.height>600?(d(),b("div",Ai,[(Y=(L=(Q=e(t).curQueueItem)==null?void 0:Q.streamdetails)==null?void 0:L.stream_metadata)!=null&&Y.image_url?(d(),I(Me,{key:0,style:{"max-width":"100%",width:"auto","border-radius":"4px"},src:e(t).curQueueItem.streamdetails.stream_metadata.image_url},null,8,["src"])):!((ae=e(t).curQueueItem)!=null&&ae.image)&&((ue=(se=e(t).activePlayer)==null?void 0:se.current_media)!=null&&ue.image_url)?(d(),I(Me,{key:1,style:{"max-width":"100%",width:"auto","border-radius":"4px"},src:e(t).activePlayer.current_media.image_url},null,8,["src"])):(d(),I(Se,{key:2,item:e(t).curQueueItem,thumbnail:!1,style:{"max-width":"100%",width:"auto"},fallback:k.$vuetify.theme.current.dark?e(st):e(ua)},null,8,["item","fallback"]))])):V("",!0),T("div",Wi,[((_e=e(t).activePlayer)==null?void 0:_e.powered)==!1?(d(),I(Ne,{key:0,style:G(`font-size: ${v.value};`)},{default:p(()=>{var B;return[D(C((B=e(t).activePlayer)==null?void 0:B.display_name),1)]}),_:1},8,["style"])):(he=e(t).curQueueItem)!=null&&he.media_item?(d(),I(Ne,{key:1,style:G(`font-size: ${v.value};cursor:pointer;`),onClick:P[1]||(P[1]=B=>S(e(t).curQueueItem.media_item))},{default:p(()=>[c(ne,{sync:e(o)},{default:p(()=>[D(C(e(t).curQueueItem.media_item.name)+" ",1),"version"in e(t).curQueueItem.media_item&&e(t).curQueueItem.media_item.version?(d(),b("span",Hi,"("+C(e(t).curQueueItem.media_item.version)+")",1)):V("",!0)]),_:1},8,["sync"])]),_:1},8,["style"])):!e(t).activePlayerQueue&&((ze=(be=e(t).activePlayer)==null?void 0:be.current_media)!=null&&ze.title)?(d(),I(Ne,{key:2},{default:p(()=>{var B,F,j,Ve;return[(F=(B=e(t).activePlayer)==null?void 0:B.current_media)!=null&&F.artist?(d(),b("div",Ri,[c(ne,{sync:e(o)},{default:p(()=>{var He,Re;return[D(C((Re=(He=e(t).activePlayer)==null?void 0:He.current_media)==null?void 0:Re.artist),1)]}),_:1},8,["sync"])])):V("",!0),(Ve=(j=e(t).activePlayer)==null?void 0:j.current_media)!=null&&Ve.title?(d(),b("div",{key:1,style:G(`font-size: ${_.value};`)},[c(ne,{sync:e(o)},{default:p(()=>{var He,Re;return[D(C((Re=(He=e(t).activePlayer)==null?void 0:He.current_media)==null?void 0:Re.title),1)]}),_:1},8,["sync"])],4)):V("",!0)]}),_:1})):(d(),I(Ne,{key:3,style:G(`font-size: ${v.value};cursor:pointer;`),onClick:P[2]||(P[2]=B=>e(t).showPlayersMenu=!0)},{default:p(()=>[c(ne,{sync:e(o)},{default:p(()=>{var B;return[D(C(((B=e(t).activePlayer)==null?void 0:B.display_name)||k.$t("no_player")),1)]}),_:1},8,["sync"])]),_:1},8,["style"])),(je=e(t).activePlayer)!=null&&je.powered?V("",!0):(d(),I(we,{key:4,class:"text-h6 text-md-h5 text-lg-h4"},{default:p(()=>[D(C(k.$t("off")),1)]),_:1})),(Ae=(Le=(J=e(t).curQueueItem)==null?void 0:J.streamdetails)==null?void 0:Le.stream_metadata)!=null&&Ae.title?(d(),I(we,{key:5,class:"text-h6 text-md-h5 text-lg-h4",onClick:P[3]||(P[3]=B=>{var F,j,Ve;return q(((Ve=(j=(F=e(t).curQueueItem)==null?void 0:F.streamdetails)==null?void 0:j.stream_metadata)==null?void 0:Ve.artist)+" - "+e(t).curQueueItem.streamdetails.stream_metadata.title)})},{default:p(()=>[c(ne,{sync:e(o)},{default:p(()=>{var B,F,j;return[(j=(F=(B=e(t).curQueueItem)==null?void 0:B.streamdetails)==null?void 0:F.stream_metadata)!=null&&j.artist?(d(),b("span",Di,C(e(t).curQueueItem.streamdetails.stream_metadata.artist)+" - ",1)):V("",!0),D(C(e(t).curQueueItem.streamdetails.stream_metadata.title),1)]}),_:1},8,["sync"])]),_:1})):V("",!0),(We=e(t).curQueueItem)!=null&&We.media_item&&"album"in e(t).curQueueItem.media_item&&e(t).curQueueItem.media_item.album?(d(),I(we,{key:6,style:G(`font-size: ${_.value};cursor:pointer;`),onClick:P[4]||(P[4]=B=>S(e(t).curQueueItem.media_item.album))},{default:p(()=>[c(ne,{sync:e(o)},{default:p(()=>[D(C(e(t).curQueueItem.media_item.album.name),1)]),_:1},8,["sync"])]),_:1},8,["style"])):V("",!0),($t=e(t).curQueueItem)!=null&&$t.media_item&&"artists"in e(t).curQueueItem.media_item&&e(t).curQueueItem.media_item.artists.length?(d(),I(we,{key:7,style:G(`font-size: ${_.value};cursor:pointer;`),onClick:P[5]||(P[5]=B=>S(e(t).curQueueItem.media_item.artists[0]))},{default:p(()=>[c(ne,{sync:e(o)},{default:p(()=>[D(C(e(t).curQueueItem.media_item.artists[0].name),1)]),_:1},8,["sync"])]),_:1},8,["style"])):V("",!0),(St=e(t).curQueueItem)!=null&&St.media_item&&"podcast"in e(t).curQueueItem.media_item&&e(t).curQueueItem.media_item.podcast?(d(),I(we,{key:8,style:G(`font-size: ${_.value};`)},{default:p(()=>[c(ne,{sync:e(o)},{default:p(()=>[D(C(e(t).curQueueItem.media_item.podcast.name),1)]),_:1},8,["sync"])]),_:1},8,["style"])):((Qt=e(t).activePlayer)==null?void 0:Qt.active_source)!=((Tt=e(t).activePlayer)==null?void 0:Tt.player_id)?(d(),I(we,{key:9},{default:p(()=>{var B;return[D(C(k.$t("external_source_active",[(B=e(t).activePlayer)==null?void 0:B.active_source])),1)]}),_:1})):e(t).activePlayerQueue&&e(t).activePlayerQueue.items==0?(d(),I(we,{key:10,style:G(`font-size: ${_.value}`)},{default:p(()=>[D(C(k.$t("queue_empty")),1)]),_:1},8,["style"])):V("",!0),T("div",Ni,[c(wl)])])])):V("",!0),e(t).showQueueItems?(d(),b("div",Ui,[c(Ei,{modelValue:f.value,"onUpdate:modelValue":P[6]||(P[6]=B=>f.value=B),"hide-slider":"",density:"compact",onClick:E},{default:p(()=>[c(mt,{value:0},{default:p(()=>{var B,F;return[D(C(k.$t("queue"))+" ",1),c(dt,{color:"grey",content:(((B=e(t).activePlayerQueue)==null?void 0:B.items)||0)-(((F=e(t).activePlayerQueue)==null?void 0:F.current_index)||0),inline:""},null,8,["content"])]}),_:1}),c(mt,{value:1},{default:p(()=>{var B;return[D(C(k.$t("played"))+" ",1),c(dt,{color:"grey",content:(B=e(t).activePlayerQueue)==null?void 0:B.current_index,inline:""},null,8,["content"])]}),_:1})]),_:1},8,["modelValue"]),T("div",Fi,[u.value?V("",!0):(d(),I(Cl,{key:0,onLoad:W,"empty-text":"",height:"100%"},{default:p(()=>[c(Sl,{"item-height":70,"max-height":"90%",items:f.value==0?g.value:y.value},{default:p(({item:B,index:F})=>[c(Sa,{link:"","show-menu-btn":!0,onClick:re(j=>H(j,B),["stop"]),onMenu:re(j=>H(j,B),["stop"]),onMouseenter:j=>n.value=F,onMouseleave:P[7]||(P[7]=j=>n.value=-1)},{prepend:p(()=>[T("div",Oi,[c(Se,{size:"50",item:B},null,8,["item"])])]),title:p(()=>[c(ne,{sync:F==0&&f.value==0?e(o):e(i),disabled:!(F==0&&f.value==0||n.value==F)},{default:p(()=>[D(C(B.name),1)]),_:2},1032,["sync","disabled"])]),subtitle:p(()=>[T("div",Yi,[T("span",xi,C(e(Ke)(B.duration))+" | ",1),c(ne,{sync:F==0&&f.value==0?e(o):e(i),disabled:!(F==0&&f.value==0||n.value==F)},{default:p(()=>[B.media_item&&"album"in B.media_item&&B.media_item.album?(d(),b("span",Xi,C(B.media_item.album.name),1)):V("",!0)]),_:2},1032,["sync","disabled"])])]),_:2},1032,["onClick","onMenu","onMouseenter"])]),_:1},8,["items"])]),_:1}))])])):V("",!0),!e(t).showQueueItems&&k.$vuetify.display.height<=600?(d(),b("div",Gi,[T("div",ji,[c(Se,{item:e(t).curQueueItem,thumbnail:!1,style:{"max-width":"100%",width:"auto"}},null,8,["item"])])])):V("",!0)]),T("div",Ki,[T("div",Zi,[c(ya,{"show-labels":!0})]),T("div",Ji,[e(t).activePlayerQueue?(d(),I(Ce,{key:0,disabled:!((Mt=e(t).curQueueItem)!=null&&Mt.media_item),icon:(Et=(Bt=e(t).curQueueItem)==null?void 0:Bt.media_item)!=null&&Et.favorite?"mdi-heart":"mdi-heart-outline",title:k.$t("tooltip.favorite"),type:"btn",class:"media-controls-item","max-height":"30px",onClick:M},null,8,["disabled","icon","title"])):V("",!0),k.$vuetify.display.mdAndUp?(d(),I(fa,{key:1,"player-queue":e(t).activePlayerQueue,class:"media-controls-item","max-height":"30px"},null,8,["player-queue"])):V("",!0),c(ha,{player:e(t).activePlayer,"player-queue":e(t).activePlayerQueue,class:"media-controls-item","max-height":"45px"},null,8,["player","player-queue"]),c(Vt,{player:e(t).activePlayer,"player-queue":e(t).activePlayerQueue,class:"media-controls-item","max-height":"100px"},null,8,["player","player-queue"]),c(ga,{player:e(t).activePlayer,"player-queue":e(t).activePlayerQueue,class:"media-controls-item","max-height":"45px"},null,8,["player","player-queue"]),k.$vuetify.display.mdAndUp?(d(),I(pa,{key:2,"player-queue":e(t).activePlayerQueue,class:"media-controls-item","max-height":"35px"},null,8,["player-queue"])):V("",!0),e(t).activePlayerQueue?(d(),I(_a,{key:3,class:"media-controls-item","max-height":"30px"})):V("",!0)]),e(t).activePlayer?(d(),b("div",eo,[c(xe,{width:"100%","is-powered":(qt=e(t).activePlayer)==null?void 0:qt.powered,disabled:!e(t).activePlayer||!((zt=e(t).activePlayer)!=null&&zt.powered),"model-value":Math.round(((Lt=e(t).activePlayer)==null?void 0:Lt.group_volume)||0),"prepend-icon":"mdi-volume-minus","append-icon":"mdi-volume-plus","allow-wheel":!0,"onUpdate:modelValue":P[8]||(P[8]=B=>e(t).activePlayer.group_childs.length>0?e(w).playerCommandGroupVolume(e(t).activePlayerId,B):e(w).playerCommandVolumeSet(e(t).activePlayerId,B)),"onClick:prepend":P[9]||(P[9]=B=>e(t).activePlayer.group_childs.length>0?e(w).playerCommandGroupVolumeDown(e(t).activePlayerId):e(w).playerCommandVolumeDown(e(t).activePlayerId)),"onClick:append":P[10]||(P[10]=B=>e(t).activePlayer.group_childs.length>0?e(w).playerCommandGroupVolumeUp(e(t).activePlayerId):e(w).playerCommandVolumeUp(e(t).activePlayerId))},null,8,["is-powered","disabled","model-value"])])):V("",!0),h.value?(d(),b("div",to,[c(ge,{class:"responsive-icon-holder-btn",variant:"outlined",onClick:P[11]||(P[11]=B=>e(t).showPlayersMenu=!0)},{default:p(()=>{var B;return[c(O,{icon:((B=e(t).activePlayer)==null?void 0:B.icon)||"mdi-speaker"},null,8,["icon"]),D(" "+C(e(t).activePlayer?e(it)(e(t).activePlayer):""),1)]}),_:1})])):V("",!0)])]}),_:1},8,["color"])]),_:1},8,["modelValue"]))}}),lo=le(ao,[["__scopeId","data-v-d50b38e6"]]),io={key:0},oo={key:2},so={key:3,class:"icon-thumb"},no={key:0},ro={key:2},uo={key:3},co={key:4},mo={class:"d-flex justify-center",style:{width:"100%"}},vo={key:0},yo={key:1},po={key:2},fo={key:3},ho={key:4,class:"line-clamp-1"},go={key:0},_o={key:5,class:"line-clamp-1"},bo={key:6},wo={key:7,class:"line-clamp-1"},ko={key:8,class:"line-clamp-1"},Po={key:0},Co=U({__name:"PlayerTrackDetails",props:{showOnlyArtist:{type:Boolean,default:!1},showQualityDetailsBtn:{type:Boolean,default:!0},colorPalette:{},primaryColor:{default:""}},setup(a){const l=new ct,s=a,o=$(()=>{var n,i;return(i=(n=t.activePlayerQueue)==null?void 0:n.current_item)==null?void 0:i.streamdetails});return(n,i)=>(d(),b(x,null,[c(de,{style:{height:"auto",width:"fit-content",margin:"0px",padding:"0px"},lines:"two"},{prepend:p(()=>{var r,m,f,u,g,y,v,_,h,S,q,H,N;return[T("div",{class:"media-thumb player-media-thumb",style:G(`cursor: pointer;height: ${e(Z)({breakpoint:"phone"})?50:64}px; width: ${e(Z)({breakpoint:"phone"})?50:64}px; `),onClick:i[0]||(i[0]=R=>e(t).showFullscreenPlayer=!0)},[(r=e(t).activePlayer)!=null&&r.powered&&((u=(f=(m=e(t).curQueueItem)==null?void 0:m.streamdetails)==null?void 0:f.stream_metadata)!=null&&u.image_url)?(d(),b("div",io,[c(Me,{class:"media-thumb",style:{"border-radius":"4px"},size:"55",src:e(t).curQueueItem.streamdetails.stream_metadata.image_url},null,8,["src"])])):(g=e(t).curQueueItem)!=null&&g.media_item||(y=e(t).curQueueItem)!=null&&y.image?(d(),I(Se,{key:1,item:((v=e(t).curQueueItem)==null?void 0:v.media_item)||e(t).curQueueItem,fallback:e(st)},null,8,["item","fallback"])):(_=e(t).activePlayer)!=null&&_.powered&&((S=(h=e(t).activePlayer)==null?void 0:h.current_media)!=null&&S.image_url)?(d(),b("div",oo,[c(Me,{class:"media-thumb",style:{"border-radius":"4px"},size:"55",src:e(t).activePlayer.current_media.image_url},null,8,["src"])])):(d(),b("div",so,[c(O,{size:"35",icon:((q=e(t).activePlayer)==null?void 0:q.type)==e(Te).PLAYER&&((H=e(t).activePlayer)!=null&&H.group_childs.length)?"mdi-speaker-multiple":((N=e(t).activePlayer)==null?void 0:N.icon)||"mdi-speaker",style:{display:"table-cell",opacity:"0.8"}},null,8,["icon"])]))],4)]}),title:p(()=>{var r,m,f,u,g,y;return[T("div",{style:G({cursor:"pointer",color:n.primaryColor})},[((r=e(t).activePlayer)==null?void 0:r.powered)==!1?(d(),b("div",{key:0,onClick:i[1]||(i[1]=v=>e(t).showPlayersMenu=!0)},C((m=e(t).activePlayer)==null?void 0:m.display_name),1)):(f=e(t).curQueueItem)!=null&&f.media_item?(d(),b("div",{key:1,onClick:i[2]||(i[2]=v=>e(t).showFullscreenPlayer=!0)},[c(ne,{sync:e(l)},{default:p(()=>[D(C(e(t).curQueueItem.media_item.name)+" ",1),"version"in e(t).curQueueItem.media_item&&e(t).curQueueItem.media_item.version?(d(),b("span",no,"("+C(e(t).curQueueItem.media_item.version)+")",1)):V("",!0)]),_:1},8,["sync"])])):e(t).curQueueItem?(d(),b("div",ro,C(e(t).curQueueItem.name),1)):!e(t).activePlayerQueue&&((g=(u=e(t).activePlayer)==null?void 0:u.current_media)!=null&&g.title)?(d(),b("div",uo,C(e(t).activePlayer.current_media.title),1)):e(t).activePlayer?(d(),b("div",co,C((y=e(t).activePlayer)==null?void 0:y.display_name),1)):(d(),b("div",{key:5,onClick:i[3]||(i[3]=v=>e(t).showPlayersMenu=!0)},C(n.$t("no_player")),1))],4)]}),append:p(()=>{var r,m,f;return[(r=o.value)!=null&&r.audio_format.content_type&&!e(Z)({breakpoint:"phone"})&&n.showQualityDetailsBtn?(d(),I($l,X({key:0,disabled:!e(t).activePlayerQueue||!((m=e(t).activePlayerQueue)!=null&&m.active)||((f=e(t).activePlayerQueue)==null?void 0:f.items)==0,class:"player-track-content-type",style:n.$vuetify.theme.current.dark?"color: #000; background: #fff; margin-left: 15px;":"color: #fff; background: #000; margin-left: 15px;",label:"",ripple:!1},s),{default:p(()=>[T("div",mo,C(o.value.audio_format.content_type.toUpperCase()),1)]),_:1},16,["disabled","style"])):V("",!0)]}),subtitle:p(()=>{var r;return[T("div",{style:G({cursor:"pointer",color:n.primaryColor}),class:"line-clamp-1",onClick:i[4]||(i[4]=m=>e(t).showFullscreenPlayer=!0)},[c(ne,{sync:e(l)},{default:p(()=>{var m,f,u,g,y,v,_,h,S,q,H,N,R,z,W,M,E,k,P,Q;return[(m=e(t).activePlayer)!=null&&m.powered?e(t).curQueueItem&&((f=e(t).curQueueItem.media_item)==null?void 0:f.media_type)==e(fe).TRACK&&"album"in e(t).curQueueItem.media_item&&e(t).curQueueItem.media_item.album&&!s.showOnlyArtist?(d(),b("div",yo,C(e(aa)(e(t).curQueueItem.media_item.artists))+" • "+C(e(t).curQueueItem.media_item.album.name),1)):(u=e(t).curQueueItem)!=null&&u.media_item&&"artists"in e(t).curQueueItem.media_item&&e(t).curQueueItem.media_item.artists.length>0?(d(),b("div",po,C(e(t).curQueueItem.media_item.artists[0].name),1)):(g=e(t).curQueueItem)!=null&&g.media_item&&"podcast"in e(t).curQueueItem.media_item&&((y=e(t).curQueueItem.media_item.podcast)!=null&&y.name)?(d(),b("div",fo,C(e(t).curQueueItem.media_item.podcast.name),1)):(h=(_=(v=e(t).curQueueItem)==null?void 0:v.streamdetails)==null?void 0:_.stream_metadata)!=null&&h.title?(d(),b("div",ho,[(H=(q=(S=e(t).curQueueItem)==null?void 0:S.streamdetails)==null?void 0:q.stream_metadata)!=null&&H.artist?(d(),b("span",go,C(e(t).curQueueItem.streamdetails.stream_metadata.artist)+" - ",1)):V("",!0),D(C((R=(N=e(t).curQueueItem)==null?void 0:N.streamdetails)==null?void 0:R.stream_metadata.title),1)])):(W=(z=e(t).curQueueItem)==null?void 0:z.media_item)!=null&&W.metadata.description?(d(),b("div",_o,C(e(la)(e(t).curQueueItem.media_item.metadata.description,100)),1)):!e(t).activePlayerQueue&&((M=e(t).activePlayer)!=null&&M.active_source)&&((k=(E=e(t).activePlayer)==null?void 0:E.current_media)!=null&&k.artist)?(d(),b("div",bo,C(e(t).activePlayer.current_media.artist),1)):!e(t).activePlayerQueue&&((P=e(t).activePlayer)!=null&&P.active_source)?(d(),b("div",wo,C(n.$t("external_source_active",[(Q=e(t).activePlayer)==null?void 0:Q.active_source])),1)):e(t).activePlayerQueue&&e(t).activePlayerQueue.items==0?(d(),b("div",ko,C(n.$t("queue_empty")),1)):V("",!0):(d(),b("div",vo,C(n.$t("off")),1))]}),_:1},8,["sync"]),e(t).activePlayer&&((r=e(t).activePlayer)!=null&&r.powered)?(d(),b("div",Po,C(e(it)(e(t).activePlayer)),1)):V("",!0)],4)]}),_:1}),c(lo,{"show-fullscreen":e(t).showFullscreenPlayer,"color-palette":n.colorPalette},null,8,["show-fullscreen","color-palette"])],64))}}),Vo={key:1,class:"text-caption volumecaption"},Io={key:0,class:"text-caption volumecaption"},$o=U({__name:"VolumeControl",props:{player:{},showSyncControls:{type:Boolean},showSubPlayers:{type:Boolean},hideHeadingRow:{type:Boolean},allowWheel:{type:Boolean}},setup(a){const l=a,s=A([]),o=A([]),n=A(void 0),i=$(()=>l.player.group_childs.length>0),r=function(u,g=!0){var v,_;const y=[];g&&u.type!=Te.GROUP&&y.push(u);for(const h of u.group_childs){const S=(v=w)==null?void 0:v.players[h];S&&S.available&&!y.includes(S)&&y.push(S)}if(l.showSyncControls&&u.supported_features.includes(ye.SET_MEMBERS))for(const h of Object.values((_=w)==null?void 0:_.players))h.player_id!=u.player_id&&(!u.can_group_with.includes(h.player_id)&&!u.can_group_with.includes(h.provider)||h.available&&(h.active_group&&h.active_group!=u.player_id||h.active_source&&h.state==Je.PLAYING&&![u.player_id,h.player_id].includes(h.active_source)||y.includes(h)||y.push(h)));return y.sort((h,S)=>h.display_name.toUpperCase()>S.display_name.toUpperCase()?1:-1),y},m=async function(u){for(const g of u)w.players[g].powered&&!w.players[g].active_group?await w.playerCommandPower(g,!1):await w.playerCommandUnGroup(g)},f=async function(u,g){const y=l.player.player_id;g?(o.value.includes(u)&&(o.value=o.value.filter(v=>v!=u)),s.value.includes(u)||s.value.push(u),w.players[y].group_childs.push(u)):(s.value.includes(u)&&(s.value=s.value.filter(v=>v!=u)),o.value.includes(u)||o.value.push(u),w.players[y].group_childs=w.players[y].group_childs.filter(v=>v!=u)),n.value!=null&&clearTimeout(n.value),n.value=setTimeout(async()=>{o.value.length>0&&m(o.value).catch(async()=>{w.players[y]=await w.getPlayer(y)}).finally(()=>{o.value=[]}),s.value.length>0&&w.playerCommandGroupMany(y,s.value).catch(async()=>{w.players[y]=await w.getPlayer(y)}).finally(()=>{s.value=[]})},1e3)};return(u,g)=>(d(),I(Be,{style:{overflow:"hidden",padding:"0"},lines:"two"},{default:p(()=>[u.hideHeadingRow?V("",!0):(d(),I(de,{key:0,class:"volumesliderrow heading",link:!1,style:G(u.player.powered?"opacity: 1":"opacity: 0.6")},{prepend:p(()=>[c(O,{size:25,icon:u.player.icon,style:{"margin-left":"6px",opacity:"0.6"}},null,8,["icon"])]),default:p(()=>[T("h5",null,C(e(it)(u.player,27)),1)]),append:p(()=>[c(ie,{class:"powerbtn",variant:"icon",onClick:g[0]||(g[0]=re(y=>e(w).playerCommandPowerToggle(u.player.player_id),["stop"]))},{default:p(()=>[c(O,{size:25,icon:"mdi-power"})]),_:1})]),_:1},8,["style"])),c(de,{class:"volumesliderrow",link:!1,style:G(u.player.powered?"opacity: 0.75":"opacity: 0.35")},{prepend:p(()=>[c(ie,{icon:"",style:{height:"25px"},disabled:u.player.type==e(Te).GROUP||u.player.group_childs.length>0,onClick:g[1]||(g[1]=re(y=>e(w).playerCommandMuteToggle(u.player.player_id),["stop"]))},{default:p(()=>[c(O,{size:25,icon:u.player.volume_muted?"mdi-volume-mute":"mdi-volume-medium"},null,8,["icon"])]),_:1},8,["disabled"])]),default:p(()=>[c(xe,{color:"secondary",width:"100%","is-powered":u.player.powered,disabled:!u.player.available||!u.player.powered||!u.player.supported_features.includes(e(ye).VOLUME_SET)&&!u.player.group_childs.length,"model-value":Math.round(u.player.group_childs.length?u.player.group_volume:u.player.volume_level),onClick:g[2]||(g[2]=re(()=>{},["stop"])),"onUpdate:modelValue":g[3]||(g[3]=y=>u.player.group_childs.length>0?e(w).playerCommandGroupVolume(u.player.player_id,y):e(w).playerCommandVolumeSet(u.player.player_id,y))},null,8,["is-powered","disabled","model-value"])]),append:p(()=>[i.value&&!u.showSubPlayers?(d(),I(O,{key:0,class:"expandbtn"},{default:p(()=>g[7]||(g[7]=[D(" mdi-chevron-down ")])),_:1})):(d(),b("div",Vo,C(Math.round(u.player.group_childs.length?u.player.group_volume:u.player.volume_level)),1))]),_:1},8,["style"]),u.showSubPlayers&&u.player.powered&&(u.player.group_childs.length>0||u.showSyncControls)?(d(),b("div",{key:1,onClick:g[6]||(g[6]=re(()=>{},["stop"]))},[c(tt,{style:{"margin-top":"10px","margin-bottom":"15px"}}),(d(!0),b(x,null,oe(r(u.player,!u.showSyncControls),y=>(d(),b("div",{key:y.player_id},[c(de,{class:"volumesliderrow",link:!1,style:G(y.powered||u.showSyncControls?"opacity: 0.75":"opacity: 0.4"),onClick:g[4]||(g[4]=re(()=>{},["stop"]))},{prepend:p(()=>[c(O,{size:30,icon:y.icon,style:{"margin-left":"6px",opacity:"0.6"}},null,8,["icon"])]),default:p(()=>[T("h6",null,C(e(la)(y.display_name,27)),1)]),append:p(()=>[u.showSyncControls?(d(),I(Ql,{key:0,ripple:!1,disabled:y.player_id==u.player.player_id,"model-value":u.player.group_childs.includes(y.player_id)||y.player_id==u.player.player_id,size:"22",class:"checkbox","onUpdate:modelValue":v=>f(y.player_id,v)},null,8,["disabled","model-value","onUpdate:modelValue"])):V("",!0)]),_:2},1032,["style"]),c(de,{class:"volumesliderrow",link:!1,style:G(y.powered?"opacity: 0.75":"opacity: 0.4"),onClick:g[5]||(g[5]=re(()=>{},["stop"]))},{prepend:p(()=>[c(ie,{icon:"",disabled:!y.supported_features.includes(e(ye).VOLUME_MUTE),style:{height:"25px"},onClick:v=>e(w).playerCommandMuteToggle(y.player_id)},{default:p(()=>[c(O,{size:25,icon:y.volume_muted?"mdi-volume-mute":"mdi-volume-medium"},null,8,["icon"])]),_:2},1032,["disabled","onClick"])]),default:p(()=>[c(xe,{color:"secondary",width:"100%","is-powered":y.powered,disabled:!y.available||!y.supported_features.includes(e(ye).VOLUME_SET),"allow-wheel":u.allowWheel,"model-value":Math.round(y.volume_level),"onUpdate:modelValue":v=>e(w).playerCommandVolumeSet(y.player_id,v)},null,8,["is-powered","disabled","allow-wheel","model-value","onUpdate:modelValue"])]),append:p(()=>[y.supported_features.includes(e(ye).VOLUME_SET)?(d(),b("div",Io,C(y.volume_level),1)):V("",!0)]),_:2},1032,["style"]),g[8]||(g[8]=T("div",{style:{height:"14px"}},null,-1))]))),128))])):V("",!0)]),_:1}))}}),$a=le($o,[["__scopeId","data-v-5404a26c"]]),So={key:0},Qo={key:0},To={class:"text-caption"},Mo={key:1},Bo=U({__name:"VolumeBtn",props:{volumeSize:{default:"150px"},responsiveVolumeSize:{type:Boolean,default:!0},isVisible:{type:Boolean,default:!0},color:{default:""}},setup(a){const l=a,s=A(!1);return(o,n)=>l.isVisible&&e(t).activePlayer?(d(),b("div",So,[c(kt,{modelValue:s.value,"onUpdate:modelValue":n[1]||(n[1]=i=>s.value=i),class:"volume-control-dialog","close-on-content-click":!1,location:"top",scrim:o.$vuetify.theme.current.dark?"rgba(0,0,0,.75)":"rgba(0,0,0,.85)"},{activator:p(({props:i})=>{var r,m;return[e(Z)("bp6")||!o.responsiveVolumeSize?(d(),b("div",Qo,[c(xe,{style:"margin-right: 0px; margin-left: 0px;",width:o.volumeSize,"is-powered":!0,"model-value":e(t).activePlayer.group_childs.length>0?Math.round(((r=e(t).activePlayer)==null?void 0:r.group_volume)||0):Math.round(((m=e(t).activePlayer)==null?void 0:m.volume_level)||0),"allow-wheel":!0,"onUpdate:modelValue":n[0]||(n[0]=f=>{var u,g;return e(t).activePlayer.group_childs.length>0?e(w).playerCommandGroupVolume(((u=e(t).activePlayer)==null?void 0:u.player_id)||"",f):e(w).playerCommandVolumeSet(((g=e(t).activePlayer)==null?void 0:g.player_id)||"",f)})},{prepend:p(()=>[c(ie,X({variant:"icon",size:"48",ripple:!1},{...i}),{default:p(()=>{var f,u;return[c(O,{color:l.color?o.color:"",size:24,icon:"mdi-volume-high"},null,8,["color"]),T("div",To,C(e(t).activePlayer.group_childs.length>0?Math.round(((f=e(t).activePlayer)==null?void 0:f.group_volume)||0):Math.round(((u=e(t).activePlayer)==null?void 0:u.volume_level)||0)),1)]}),_:2},1040)]),_:2},1032,["width","model-value"])])):(d(),b("div",Mo,[c(ie,X({...i},{size:"48",variant:"icon"}),{default:p(()=>{var f,u;return[c(O,{color:l.color?o.color:"",icon:"mdi-volume-high"},null,8,["color"]),T("div",{class:"text-caption",style:G({color:l.color?o.color:""})},C(e(t).activePlayer.group_childs.length>0?Math.round(((f=e(t).activePlayer)==null?void 0:f.group_volume)||0):Math.round(((u=e(t).activePlayer)==null?void 0:u.volume_level)||0)),5)]}),_:2},1040)]))]}),default:p(()=>[c(Ye,{"min-width":300,style:{overflow:"hidden","padding-top":"20px","padding-bottom":"20px","padding-right":"20px"}},{default:p(()=>[e(t).activePlayer?(d(),I($a,{key:0,player:e(t).activePlayer,"show-sub-players":!0,"show-sync-controls":!1,"hide-heading-row":!1,"allow-wheel":!0,style:{"margin-left":"18px"}},null,8,["player"])):V("",!0)]),_:1})]),_:1},8,["modelValue","scrim"])])):V("",!0)}}),Eo=le(Bo,[["__scopeId","data-v-3b2ac5c4"]]),qo=U({__name:"PlayerExtendedControls",props:{queue:{default:()=>({isVisible:!0,showQueueDialog:!1})},player:{default:()=>({isVisible:!0})},volume:{default:()=>({isVisible:!0,volumeSize:"150px",responsiveVolumeSize:!1})}},setup(a){return(l,s)=>(d(),b(x,null,[l.player&&l.player.isVisible?(d(),I(ba,{key:0,color:l.player.color},null,8,["color"])):V("",!0),l.queue&&l.queue.isVisible?(d(),I(_a,{key:1,color:l.player.color,style:{"padding-left":"15px","padding-right":"20px"}},null,8,["color"])):V("",!0),l.volume&&l.volume.isVisible?(d(),I(Eo,{key:2,color:l.volume.color,"volume-size":l.volume.volumeSize,"responsive-volume-size":l.volume.responsiveVolumeSize},null,8,["color","volume-size","responsive-volume-size"])):V("",!0)],64))}}),zo=["data-floating"],Lo=["data-mobile"],Ao={class:"mediacontrols-left"},Wo={class:"mediacontrols-bottom-center"},Ho={class:"mediacontrols-bottom-right"},Ro={key:0,class:"volume-slider"},Do=U({__name:"Player",props:{useFloatingPlayer:{type:Boolean}},setup(a){Fa(i=>({"4e17711c":n.value})),Kt();const{mobile:l}=yt({mobileBreakpoint:576}),s=A({0:"",1:"",2:"",3:"",4:"",5:"",lightColor:"",darkColor:""}),o=new Image;o.src=Fe.theme.current.value.dark?st:ua,o.crossOrigin="Anonymous",o.addEventListener("load",function(){s.value=Oa(o)});const n=$(()=>Fe.theme.current.value.dark?s.value&&s.value.darkColor?s.value.darkColor+"26":"CCCCCC26":s.value&&s.value.lightColor?s.value.lightColor+"26":"CCCCCC26");return te(()=>{var i;return(i=t.curQueueItem)==null?void 0:i.queue_item_id},()=>{var i;(i=t.curQueueItem)!=null&&i.media_item?o.src=Rt(t.curQueueItem.media_item,Ht.THUMB)||"":t.curQueueItem?o.src=Rt(t.curQueueItem,Ht.THUMB)||"":o.src=""}),(i,r)=>{var m,f,u,g,y,v,_;return d(),b(x,null,[T("div",{class:"mediacontrols-bg","data-floating":i.useFloatingPlayer},null,8,zo),T("div",{class:"mediacontrols","data-mobile":e(l)},[T("div",Ao,[c(Co,{"show-quality-details-btn":!!e(Z)("bp8"),"show-only-artist":!e(Z)("bp7"),"color-palette":s.value,"primary-color":i.$vuetify.theme.current.dark?"#fff":"#000"},null,8,["show-quality-details-btn","show-only-artist","color-palette","primary-color"])]),T("div",Wo,[c(Ot,{"visible-components":{repeat:{isVisible:e(Z)("bp3")},shuffle:{isVisible:e(Z)("bp3")},play:{isVisible:!0,icon:{staticWidth:"50px",staticHeight:"50px"},withCircle:i.useFloatingPlayer},previous:{isVisible:e(Z)("bp3")},next:{isVisible:e(Z)("bp3")}}},null,8,["visible-components"]),e(Z)("bp6")?(d(),I(ya,{key:0,color:i.$vuetify.theme.current.dark?s.value.lightColor||"#fff":s.value.darkColor||"#000","is-progress-bar":!1,disabled:!((m=e(t).activePlayerQueue)!=null&&m.active)||((g=(u=(f=e(t).activePlayerQueue)==null?void 0:f.current_item)==null?void 0:u.media_item)==null?void 0:g.media_type)!==e(fe).TRACK},null,8,["color","disabled"])):V("",!0)]),T("div",Ho,[T("div",null,[c(qo,{queue:{isVisible:e(Z)("bp3"),color:i.$vuetify.theme.current.dark?"#fff":"#000"},player:{isVisible:!0,color:i.$vuetify.theme.current.dark?"#fff":"#000"},volume:{isVisible:!e(l),color:i.$vuetify.theme.current.dark?"#fff":"#000"}},null,8,["queue","player","volume"]),c(Ot,{style:{"padding-right":"5px"},"visible-components":{repeat:{isVisible:!1},shuffle:{isVisible:!1},play:{isVisible:e(Z)({breakpoint:"bp3",condition:"lt"}),withCircle:!1,icon:{staticWidth:"40px",staticHeight:"40px",color:i.$vuetify.theme.current.dark?"#fff":"#000"}},previous:{isVisible:!1},next:{isVisible:!1}}},null,8,["visible-components"])])])],8,Lo),e(l)?(d(),b("div",Ro,[c(xe,{width:"100%",color:"secondary","is-powered":(y=e(t).activePlayer)==null?void 0:y.powered,disabled:!e(t).activePlayer||!((v=e(t).activePlayer)!=null&&v.powered),"model-value":Math.round(((_=e(t).activePlayer)==null?void 0:_.group_volume)||0),"prepend-icon":"mdi-volume-minus","append-icon":"mdi-volume-plus","onUpdate:modelValue":r[0]||(r[0]=h=>e(t).activePlayer.group_childs.length>0?e(w).playerCommandGroupVolume(e(t).activePlayerId,h):e(w).playerCommandVolumeSet(e(t).activePlayerId,h)),"onClick:prepend":r[1]||(r[1]=h=>e(t).activePlayer.group_childs.length>0?e(w).playerCommandGroupVolume(e(t).activePlayerId,e(t).activePlayer.group_volume-5):e(w).playerCommandVolumeSet(e(t).activePlayerId,e(t).activePlayer.volume_level-5)),"onClick:append":r[2]||(r[2]=h=>e(t).activePlayer.group_childs.length>0?e(w).playerCommandGroupVolume(e(t).activePlayerId,e(t).activePlayer.group_volume+5):e(w).playerCommandVolumeSet(e(t).activePlayerId,e(t).activePlayer.volume_level+5))},null,8,["is-powered","disabled","model-value"])])):V("",!0)],64)}}}),No=le(Do,[["__scopeId","data-v-3edee708"]]),Uo=ce({app:Boolean,color:String,height:{type:[Number,String],default:"auto"},...ft(),...Pe(),...ht(),...Pt(),...gt(),...qe({tag:"footer"}),...Ge()},"VFooter"),Fo=me()({name:"VFooter",props:Uo(),setup(a,l){let{slots:s}=l;const o=A(),{themeClasses:n}=at(a),{backgroundColorClasses:i,backgroundColorStyles:r}=Oe(ee(a,"color")),{borderClasses:m}=_t(a),{elevationClasses:f}=bt(a),{roundedClasses:u}=wt(a),g=pe(32),{resizeRef:y}=rl(_=>{_.length&&(g.value=_[0].target.clientHeight)}),v=$(()=>a.height==="auto"?g.value:parseInt(a.height,10));return Ue(()=>a.app,()=>{const _=Ct({id:a.name,order:$(()=>parseInt(a.order,10)),position:$(()=>"bottom"),layoutSize:v,elementSize:$(()=>a.height==="auto"?void 0:v.value),active:$(()=>a.app),absolute:ee(a,"absolute")});Gt(()=>{o.value=_.layoutItemStyles.value})}),ve(()=>c(a.tag,{ref:y,class:["v-footer",n.value,i.value,m.value,f.value,u.value,a.class],style:[r.value,a.app?o.value:{height:Qe(a.height)},a.style]},s)),{}}}),Oo=U({__name:"Footer",setup(a){const l=$(()=>t.navigationMenuStyle=="horizontal"),s=$(()=>t.navigationMenuStyle!="horizontal"?0:t.isInStandaloneMode?100:80),o=$(()=>l.value?s.value+5:0);return(n,i)=>(d(),b(x,null,[l.value?(d(),b("div",{key:0,class:Ze(n.$vuetify.theme.current.dark?"gradient-dark":"gradient-light"),style:G(`
      position: fixed;
      width: 100%;
      height: ${s.value+(e(Z)("bp3")?100:70)}px;
      bottom: 0px;
      z-index: 999;
    `)},null,6)):V("",!0),e(t).navigationMenuStyle=="horizontal"?(d(),I(li,{key:1,height:s.value},null,8,["height"])):V("",!0),c(Fo,{bottom:"",fixed:"",class:Ze(`d-flex flex-column ${l.value?"mediacontrols-player-float":"mediacontrols-player-default"}`),style:G(`bottom: ${o.value}px;`),elevation:"10",app:""},{default:p(()=>[c(No,{"use-floating-player":l.value},null,8,["use-floating-player"])]),_:1},8,["class","style"])],64))}}),Yo={class:"player-media-thumb"},xo={key:1},Xo={key:2,class:"icon-thumb"},Go={style:{"margin-bottom":"3px"}},jo={key:0,style:{"font-size":"0.85rem","font-weight":"500","white-space":"nowrap"}},Ko={key:0},Zo={key:0},Jo={key:1},es={key:2},ts={class:"v-list-item-subtitle",style:{"white-space":"nowrap"}},as={key:0},ls={key:1},is={key:2},os={key:3},ss={key:0},ns={key:4},rs={key:5},us={key:6},ds=U({__name:"PlayerCard",props:{player:{},showVolumeControl:{type:Boolean},showMenuButton:{type:Boolean},showSubPlayers:{type:Boolean},showSyncControls:{type:Boolean}},setup(a){const l=a,s=$(()=>{if(l.player&&l.player.active_source in w.queues)return w.queues[l.player.active_source];if(l.player&&!l.player.active_source&&l.player.player_id in w.queues)return w.queues[l.player.player_id]}),o=$(()=>{if(s.value&&s.value.active)return s.value.current_item}),n=function(i){ke.emit("contextmenu",{items:wa(l.player,s.value),posX:i.clientX,posY:i.clientY})};return(i,r)=>(d(),I(Ye,{flat:"",class:Ze(["panel-item",{"panel-item-selected":i.player.player_id==e(t).activePlayerId,"panel-item-idle":i.player.state==e(Je).IDLE,"panel-item-off":!i.player.powered}]),ripple:!1},{default:p(()=>[c(de,{class:"panel-item-details",flat:"",ripple:!1},{prepend:p(()=>{var m,f,u,g;return[T("div",Yo,[i.player.powered&&((m=o.value)!=null&&m.media_item)||(f=o.value)!=null&&f.image?(d(),I(Se,{key:0,class:"media-thumb",size:"55",item:((u=o.value)==null?void 0:u.media_item)||o.value,fallback:e(st)},null,8,["item","fallback"])):i.player.powered&&!s.value&&((g=i.player.current_media)!=null&&g.image_url)?(d(),b("div",xo,[c(Me,{class:"media-thumb",size:"55",src:i.player.current_media.image_url},null,8,["src"])])):(d(),b("div",Xo,[c(O,{size:"35",icon:i.player.type==e(Te).PLAYER&&i.player.group_childs.length?"mdi-speaker-multiple":i.player.icon,style:{display:"table-cell",opacity:"0.8"}},null,8,["icon"])]))])]}),title:p(()=>[T("div",Go,C(e(it)(i.player,27)),1)]),subtitle:p(()=>{var m,f,u,g,y,v,_;return[i.player.powered?(d(),b("div",jo,[(m=o.value)!=null&&m.media_item?(d(),b("div",Ko,[D(C((f=o.value)==null?void 0:f.media_item.name)+" ",1),"version"in((u=o.value)==null?void 0:u.media_item)&&((g=o.value)!=null&&g.media_item.version)?(d(),b("span",Zo,"("+C((y=o.value)==null?void 0:y.media_item.version)+")",1)):V("",!0)])):o.value?(d(),b("div",Jo,C((v=o.value)==null?void 0:v.name),1)):!s.value&&((_=i.player.current_media)!=null&&_.title)?(d(),b("div",es,C(i.player.current_media.title),1)):V("",!0)])):V("",!0)]}),default:p(()=>{var m,f,u,g,y,v,_,h,S,q,H,N,R,z,W,M,E,k,P,Q,L,Y;return[T("div",ts,[i.player.powered?(m=o.value)!=null&&m.media_item&&((u=(f=o.value)==null?void 0:f.media_item)==null?void 0:u.media_type)==e(fe).TRACK&&"album"in((g=o.value)==null?void 0:g.media_item)&&((y=o.value)!=null&&y.media_item.album)?(d(),b("div",ls,C(e(aa)((v=o.value)==null?void 0:v.media_item.artists))+" • "+C((_=o.value)==null?void 0:_.media_item.album.name),1)):(h=o.value)!=null&&h.media_item&&"artists"in((S=o.value)==null?void 0:S.media_item)&&((q=o.value)==null?void 0:q.media_item.artists.length)>0?(d(),b("div",is,C((H=o.value)==null?void 0:H.media_item.artists[0].name),1)):(R=(N=o.value)==null?void 0:N.streamdetails)!=null&&R.stream_metadata?(d(),b("div",os,[(M=(W=(z=o.value)==null?void 0:z.streamdetails)==null?void 0:W.stream_metadata)!=null&&M.artist?(d(),b("span",ss,C(o.value.streamdetails.stream_metadata.artist)+" - ",1)):V("",!0),D(C((k=(E=o.value)==null?void 0:E.streamdetails)==null?void 0:k.stream_metadata.title),1)])):(Q=(P=o.value)==null?void 0:P.media_item)!=null&&Q.metadata.description?(d(),b("div",ns,C((L=o.value)==null?void 0:L.media_item.metadata.description),1)):!s.value&&i.player.active_source?(d(),b("div",rs,C(i.$t("external_source_active",[i.player.active_source])),1)):((Y=s.value)==null?void 0:Y.items)==0?(d(),b("div",us,C(i.$t("queue_empty")),1)):V("",!0):(d(),b("div",as,C(i.$t("off")),1))])]}),append:p(()=>[i.player.powered?V("",!0):(d(),I(ie,{key:0,variant:"icon",class:"player-command-btn",onClick:r[0]||(r[0]=m=>{e(w).playerCommandPowerToggle(i.player.player_id),e(t).activePlayerId=i.player.player_id})},{default:p(()=>[c(O,{size:e(Z)({breakpoint:"phone"})?"30":"32"},{default:p(()=>r[2]||(r[2]=[D("mdi-power")])),_:1},8,["size"])]),_:1})),i.player.powered?(d(),I(Vt,{key:1,player:i.player,"player-queue":s.value,class:"player-command-btn",style:{height:"50px"},"icon-style":"circle-outline",onClick:r[1]||(r[1]=re(m=>{i.player.state!=e(Je).PLAYING&&(e(t).activePlayerId=i.player.player_id)},["stop"]))},null,8,["player","player-queue"])):V("",!0),i.showMenuButton?(d(),I(ie,{key:2,variant:"icon",class:"player-command-btn",style:{"margin-right":"-5px"},onClick:re(n,["stop"])},{default:p(()=>[c(O,{size:e(Z)({breakpoint:"phone"})?"30":"32"},{default:p(()=>r[3]||(r[3]=[D("mdi-dots-vertical")])),_:1},8,["size"])]),_:1})):V("",!0)]),_:1}),i.showVolumeControl&&i.player.powered?(d(),I($a,{key:0,player:i.player,"show-sync-controls":i.showSyncControls,"hide-heading-row":!0,"show-sub-players":i.showSubPlayers,"allow-wheel":!1},null,8,["player","show-sync-controls","show-sub-players"])):V("",!0)]),_:1},8,["class"]))}}),Xt=le(ds,[["__scopeId","data-v-dcbc5392"]]),cs=U({__name:"PlayerSelect",setup(a){const l=A(!1),s=$(()=>Object.values(w.players).filter(m=>n(m,!1,!1,!1)).sort((m,f)=>{var u;return m.display_name.toUpperCase()>((u=f.display_name)==null?void 0:u.toUpperCase())?1:-1}).sort((m,f)=>Number(f.powered)-Number(m.powered)));te(()=>t.activePlayerId,m=>{m&&localStorage.setItem("mass.LastPlayerId",m)}),te(()=>w.players,m=>{m&&!t.activePlayer&&i()},{deep:!0}),te(()=>w.state,m=>{m.value!=Ya.CONNECTED&&(t.activePlayerId=void 0)},{deep:!0});function o(m,f=!1){t.activePlayerId==m.player_id?l.value=!l.value:(l.value=!1,t.activePlayerId=m.player_id),f&&(t.showPlayersMenu=!1)}Ee(()=>{i()});const n=function(m,f=!0,u=!1,g=!1){return!(!m.enabled||!g&&m.hidden||!f&&!m.available||m.synced_to&&!u||!u&&m.type==Te.PLAYER&&m.active_group)},i=function(){if(t.activePlayer&&n(t.activePlayer,!1,!1,!1))return;const m=r();m&&(t.activePlayerId=m.player_id)},r=function(){const m=localStorage.getItem("mass.LastPlayerId");if(m&&m in w.players&&n(w.players[m],!1,!1,!1))return w.players[m]};return(m,f)=>(d(),b(x,null,[c(ra,{modelValue:e(t).showPlayersMenu,"onUpdate:modelValue":f[0]||(f[0]=u=>e(t).showPlayersMenu=u)},null,8,["modelValue"]),e(t).showPlayersMenu?(d(),I(ma,{key:0,modelValue:e(t).showPlayersMenu,"onUpdate:modelValue":f[2]||(f[2]=u=>e(t).showPlayersMenu=u),location:"right",app:"",clipped:"",temporary:"",touchless:"",width:500,style:{"z-index":"99999"},"z-index":"99999"},{default:p(()=>[T("div",null,[c(Ne,{class:"title"},{default:p(()=>[T("b",null,C(m.$t("players")),1)]),_:1}),c(ie,{variant:"icon",style:{float:"right",top:"-40px",height:"0"},onClick:f[1]||(f[1]=u=>e(t).showPlayersMenu=!1)},{default:p(()=>[c(O,{size:"30"},{default:p(()=>f[3]||(f[3]=[D("mdi-window-close")])),_:1})]),_:1}),c(Be,{flat:"",style:{margin:"5px 5px"}},{default:p(()=>[(d(!0),b(x,null,oe(s.value.filter(u=>u.powered),u=>(d(),I(Xt,{id:u.player_id,key:u.player_id,player:u,"show-volume-control":!0,"show-menu-button":!0,"show-sub-players":l.value&&u.player_id==e(t).activePlayerId,"show-sync-controls":u.supported_features.includes(e(ye).SET_MEMBERS),onClick:g=>o(u)},null,8,["id","player","show-sub-players","show-sync-controls","onClick"]))),128))]),_:1}),c(Bl,{variant:"accordion",flat:"",class:"expansion"},{default:p(()=>[c(Tl,{title:m.$t("powered_off_players"),style:{padding:"0"}},{default:p(()=>[c(Ml,{style:{padding:"0"}},{default:p(()=>[c(Be,{flat:""},{default:p(()=>[(d(!0),b(x,null,oe(s.value.filter(u=>!u.powered),u=>(d(),I(Xt,{id:u.player_id,key:u.player_id,player:u,"show-volume-control":!1,"show-menu-button":!0,"show-sub-players":!1,"show-sync-controls":!1,onClick:g=>o(u)},null,8,["id","player","onClick"]))),128))]),_:1})]),_:1})]),_:1},8,["title"])]),_:1})])]),_:1},8,["modelValue"])):V("",!0)],64))}}),ms=le(cs,[["__scopeId","data-v-b2d8bc7d"]]);function vs(a={}){const{immediate:l=!1,onNeedRefresh:s,onOfflineReady:o,onRegistered:n,onRegisteredSW:i,onRegisterError:r}=a;let m,f,u;const g=async(v=!0)=>{await f,u==null||u()};async function y(){if("serviceWorker"in navigator){if(m=await xa(async()=>{const{Workbox:v}=await import("./workbox-window.prod.es5-B9K5rw8f.js");return{Workbox:v}},[],import.meta.url).then(({Workbox:v})=>new v("./sw.js",{scope:"./",type:"classic"})).catch(v=>{r==null||r(v)}),!m)return;u=()=>{m==null||m.messageSkipWaiting()};{let v=!1;const _=()=>{v=!0,m==null||m.addEventListener("controlling",h=>{h.isUpdate&&window.location.reload()}),s==null||s()};m.addEventListener("installed",h=>{typeof h.isUpdate>"u"?typeof h.isExternal<"u"&&h.isExternal?_():!v&&(o==null||o()):h.isUpdate||o==null||o()}),m.addEventListener("waiting",_)}m.register({immediate:l}).then(v=>{i?i("./sw.js",v):n==null||n(v)}).catch(v=>{r==null||r(v)})}}return f=y(),g}function ys(a={}){const{immediate:l=!0,onNeedRefresh:s,onOfflineReady:o,onRegistered:n,onRegisteredSW:i,onRegisterError:r}=a,m=A(!1),f=A(!1);return{updateServiceWorker:vs({immediate:l,onNeedRefresh(){m.value=!0,s==null||s()},onOfflineReady(){f.value=!0,o==null||o()},onRegistered:n,onRegisteredSW:i,onRegisterError:r}),offlineReady:f,needRefresh:m}}const ps={key:0,class:"pwa-toast",role:"alert"},fs={class:"message"},hs={key:0},gs={key:1},_s=U({__name:"ReloadPrompt",setup(a){const{offlineReady:l,needRefresh:s,updateServiceWorker:o}=ys(),n=async()=>{l.value=!1,s.value=!1};return(i,r)=>e(l)||e(s)?(d(),b("div",ps,[T("div",fs,[e(l)?(d(),b("span",hs," App ready to work offline ")):(d(),b("span",gs," New content available, click on reload button to update. "))]),e(s)?(d(),b("button",{key:0,onClick:r[0]||(r[0]=m=>e(o)())},"Reload")):V("",!0),T("button",{onClick:n},"Close")])):V("",!0)}}),bs=ce({...Pe(),...gl({fullHeight:!0}),...Ge()},"VApp"),ws=me()({name:"VApp",props:bs(),setup(a,l){let{slots:s}=l;const o=at(a),{layoutClasses:n,getLayoutItem:i,items:r,layoutRef:m}=_l(a),{rtlClasses:f}=vt();return ve(()=>{var u;return c("div",{ref:m,class:["v-application",o.themeClasses.value,n.value,f.value,a.class],style:[a.style]},[c("div",{class:"v-application__wrap"},[(u=s.default)==null?void 0:u.call(s)])])}),{getLayoutItem:i,items:r,theme:o}}}),ks=U({__name:"Default",setup(a){const l=Xa();return te([()=>l.query.player,()=>Object.keys(w.players).length],([s])=>{var i;if(!s)return;const o=s.toString().toLowerCase(),n=(i=Object.values(w.players).find(r=>r.player_id.toLowerCase()===o||r.display_name.toLowerCase()===o))==null?void 0:i.player_id;n&&(t.activePlayerId=n)},{immediate:!0}),te(()=>l.query.showFullscreenPlayer,s=>{t.showFullscreenPlayer=!!s},{immediate:!0}),te(()=>l.query.frameless,s=>{s&&(t.frameless=!0)},{immediate:!0}),(s,o)=>(d(),b(x,null,[e(t).connected?(d(),I(ws,{key:0},{default:p(()=>[e(t).frameless?(d(),I(Ft,{key:0})):(d(),b(x,{key:1},[c(ms),c(Oo),c(Ft)],64))]),_:1})):(d(),I(ra,{key:1,class:"centeredoverlay",persistent:"","model-value":!e(t).connected},{default:p(()=>[T("div",null,[c(ul,{color:"primary",indeterminate:"",size:"64"})])]),_:1},8,["model-value"])),e(t).isInStandaloneMode?(d(),I(_s,{key:2})):V("",!0)],64))}}),xs=le(ks,[["__scopeId","data-v-33a00054"]]);export{xs as default};
