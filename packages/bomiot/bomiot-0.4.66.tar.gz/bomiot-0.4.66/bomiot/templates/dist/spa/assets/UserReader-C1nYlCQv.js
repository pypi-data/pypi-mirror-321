import{u as N,Q as T}from"./use-meta-DNKO4nf6.js";import{l as z,t as A,v as I}from"./QItemLabel-CAR5HLBB.js";import{u as L,a as M,Q as m}from"./token-C4MY-byV.js";import{a as P,r,o as B,w as k,Z as y,_ as C,a1 as e,a2 as t,C as w,a4 as c,a0 as n,a3 as d,a8 as i,$ as h,am as R,ac as D,aj as F,e as K,a6 as E}from"./index-4VyYssN1.js";import{Q as H,a as O,b as W}from"./QTable-BBqda1rh.js";import{get as Z}from"./axios-BnZM3o6I.js";import{u as J}from"./vue-i18n.runtime-CMmDb4uM.js";const X={class:"q-pa-md"},Y={key:0},ee={key:1},ae={__name:"UserList",setup(S){const{t:a}=J(),f=z(),g=L(),x=P(()=>[{name:"username",required:!0,label:a("username"),align:"left",field:"username"},{name:"email",align:"center",label:a("email"),field:"email"},{name:"date_joined",label:a("date_joined"),field:"date_joined"},{name:"last_login",label:a("last_login"),field:"last_login"},{name:"updated_time",label:a("updated_time"),field:"updated_time"},{name:"action",label:a("action"),align:"right"}]),b=r([]),_=r(""),Q=r(0),u=r({page:1,rowsPerPage:1,rowsNumber:1}),$=P(()=>V.value!==""?Math.ceil(Q.value/u.value.rowsPerPage):0),q=r(f.screen.height*.73+"px"),G=r(f.screen.width*.825+"px"),U=r(f.dark.isActive?"#121212":"#ffffff"),V=P(()=>g.token);function v(l){g.userPermissionGet("Get User List")&&(Z({url:"core/user/",params:{search:_.value,page:l.pagination.page,max_page:l.pagination.rowsPerPage}}).then(o=>{b.value=o.results,Q.value=o.count}).catch(o=>(console.error(o),Promise.reject(o))),u.value=l.pagination)}function j(l){console.log("pageChange",l)}return B(()=>{v({pagination:u.value})}),k(()=>f.dark.isActive,l=>{U.value=l?"#121212":"#ffffff"}),k(()=>u.value,l=>{console.log("watch",l.sortBy)}),k(()=>V.value,l=>{console.log("watch token",l)}),(l,o)=>(y(),C("div",X,[e(W,{class:F(n(f).dark.isActive?"my-sticky-header-last-column-table-dark":"my-sticky-header-last-column-table"),flat:"",bordered:"",rows:b.value,columns:x.value,"row-key":"name",pagination:u.value,separator:"cell","no-data-label":n(a)("nodata"),"rows-per-page-label":n(a)("per_page"),"rows-per-page-options":[1,10,30,50,200,0],"table-style":{height:q.value,width:G.value},"card-style":{backgroundColor:U.value},onRequest:v},{top:t(s=>[e(M,{flat:""},{default:t(()=>[w(e(c,{label:n(a)("refresh"),icon:"refresh",onClick:o[0]||(o[0]=p=>v({pagination:u.value}))},{default:t(()=>[e(m,{class:"bg-indigo",offset:[10,10],"content-style":"font-size: 12px"},{default:t(()=>[d(i(n(a)("refresh")),1)]),_:1})]),_:1},8,["label"]),[[h,n(g).userPermissionGet("Get User List")]]),w(e(c,{label:n(a)("new"),icon:"add"},{default:t(()=>[e(m,{class:"bg-indigo",offset:[10,10],"content-style":"font-size: 12px"},{default:t(()=>[d(i(n(a)("newUser")),1)]),_:1})]),_:1},8,["label"]),[[h,n(g).userPermissionGet("Create One User")]])]),_:1}),e(A),e(I,{borderless:"",dense:"",debounce:"300",color:"primary",modelValue:_.value,"onUpdate:modelValue":o[1]||(o[1]=p=>_.value=p),onInput:o[2]||(o[2]=p=>v({pagination:u.value})),onKeyup:o[3]||(o[3]=R(p=>v({pagination:u.value}),["enter"]))},{append:t(()=>[e(D,{name:"search"})]),_:1},8,["modelValue"]),e(c,{flat:"",round:"",dense:"",icon:s.inFullscreen?"fullscreen_exit":"fullscreen",onClick:s.toggleFullscreen},null,8,["icon","onClick"])]),"body-cell":t(s=>[e(H,{props:s},{default:t(()=>[s.col.name==="action"?(y(),C("div",Y,[e(c,{round:"",flat:"",icon:"published_with_changes"},{default:t(()=>[e(m,{class:"bg-indigo",offset:[10,10],"content-style":"font-size: 12px"},{default:t(()=>[d(i(n(a)("changepassword")),1)]),_:1})]),_:1}),e(c,{round:"",flat:"",icon:"admin_panel_settings"},{default:t(()=>[e(m,{class:"bg-indigo",offset:[10,10],"content-style":"font-size: 12px"},{default:t(()=>[d(i(n(a)("permission")),1)]),_:1})]),_:1}),w(e(c,{round:"",flat:"",icon:"lock_person"},{default:t(()=>[e(m,{class:"bg-indigo",offset:[10,10],"content-style":"font-size: 12px"},{default:t(()=>[d(i(n(a)("isnotactive")),1)]),_:1})]),_:2},1536),[[h,!s.row.is_active]]),w(e(c,{round:"",flat:"",icon:"lock_open"},{default:t(()=>[e(m,{class:"bg-indigo",offset:[10,10],"content-style":"font-size: 12px"},{default:t(()=>[d(i(n(a)("isactive")),1)]),_:1})]),_:2},1536),[[h,s.row.is_active]]),e(c,{round:"",flat:"",icon:"delete_sweep"},{default:t(()=>[e(m,{class:"bg-indigo",offset:[10,10],"content-style":"font-size: 12px"},{default:t(()=>[d(i(n(a)("deleteuser")),1)]),_:1})]),_:1})])):(y(),C("div",ee,i(s.value),1))]),_:2},1032,["props"])]),pagination:t(s=>[d(i(n(a)("total"))+i($.value)+" "+i(n(a)("page"))+" ",1),e(O,{modelValue:s.pagination.page,"onUpdate:modelValue":[p=>s.pagination.page=p,p=>j(s)],max:s.pagesNumber,input:"","input-class":"text-orange-10"},null,8,["modelValue","onUpdate:modelValue","max"])]),_:1},8,["class","rows","columns","pagination","no-data-label","rows-per-page-label","table-style","card-style"])]))}},ue={__name:"UserReader",setup(S){const a=z(),f=r(!1),g=r(""),x=r(""),b=r("");return N(()=>({title:g.value,meta:{description:{name:"description",content:x.value},keywords:{name:"keywords",content:b.value}}})),B(()=>{}),K(()=>{}),k(()=>a.dark.isActive,_=>{f.value=_}),(_,Q)=>(y(),E(T,{class:"flex flex-top"},{default:t(()=>[e(ae)]),_:1}))}};export{ue as default};
