import{u as T,Q as A}from"./use-meta-ByuMTFYZ.js";import{l as B,t as I,v as z}from"./QItemLabel-DeperHnI.js";import{u as L,a as M,Q as V}from"./token-B7vokpev.js";import{a as x,r as s,o as S,w as P,Z as h,_ as Q,a1 as e,a2 as l,C as v,a4 as u,a0 as o,a3 as b,a8 as m,$ as w,am as R,ac as D,aj as F,e as K,a6 as E}from"./index-mjfFtF_2.js";import{Q as H,a as O,b as W}from"./QTable-pH9pc_9v.js";import{get as Z}from"./axios-pfH6oimT.js";import{u as J}from"./vue-i18n.runtime-TYrIdpTh.js";const X={class:"q-pa-md"},Y={key:0},ee={key:1},ae={__name:"UserList",setup($){const{t:a}=J(),c=B(),p=L(),k=x(()=>[{name:"username",required:!0,label:a("username"),align:"left",field:"username"},{name:"email",align:"center",label:a("email"),field:"email"},{name:"date_joined",label:a("date_joined"),field:"date_joined"},{name:"last_login",label:a("last_login"),field:"last_login"},{name:"updated_time",label:a("updated_time"),field:"updated_time"},{name:"action",label:a("action"),align:"right"}]),_=s([]),f=s(""),y=s(0),i=s({page:1,rowsPerPage:1,rowsNumber:1}),C=x(()=>j.value!==""?Math.ceil(y.value/i.value.rowsPerPage):0),q=s(c.screen.height*.73+"px"),G=s(c.screen.width*.825+"px"),U=s(c.dark.isActive?"#121212":"#ffffff"),j=x(()=>p.token);function g(r){p.userPermissionGet("Get User List")&&(Z({url:"core/user/",params:{search:f.value,page:r.pagination.page,max_page:r.pagination.rowsPerPage}}).then(t=>{_.value=t.results,y.value=t.count}).catch(t=>(console.error(t),Promise.reject(t))),i.value=r.pagination)}function N(r){console.log("pageChange",r)}return S(()=>{g({pagination:i.value})}),P(()=>c.dark.isActive,r=>{U.value=r?"#121212":"#ffffff"}),P(()=>i.value,r=>{console.log("watch",r.sortBy)}),(r,t)=>(h(),Q("div",X,[e(W,{class:F(o(c).dark.isActive?"my-sticky-header-last-column-table-dark":"my-sticky-header-last-column-table"),flat:"",bordered:"",rows:_.value,columns:k.value,"row-key":"name",pagination:i.value,separator:"cell","no-data-label":o(a)("nodata"),"rows-per-page-label":o(a)("per_page"),"rows-per-page-options":[1,10,30,50,200,0],"table-style":{height:q.value,width:G.value},"card-style":{backgroundColor:U.value},onRequest:g},{top:l(n=>[e(M,{flat:""},{default:l(()=>[v(e(u,{label:o(a)("refresh"),icon:"refresh",onClick:t[0]||(t[0]=d=>g({pagination:i.value}))},{default:l(()=>[e(V,{class:"bg-indigo",offset:[10,10],"content-style":"font-size: 12px"},{default:l(()=>[b(m(o(a)("refresh")),1)]),_:1})]),_:1},8,["label"]),[[w,o(p).userPermissionGet("Get User List")]]),v(e(u,{label:o(a)("new"),icon:"add"},{default:l(()=>[e(V,{class:"bg-indigo",offset:[10,10],"content-style":"font-size: 12px"},{default:l(()=>[b(m(o(a)("new")),1)]),_:1})]),_:1},8,["label"]),[[w,o(p).userPermissionGet("Create One User")]])]),_:1}),b(" "+m(C.value)+" ",1),e(I),e(z,{borderless:"",dense:"",debounce:"300",color:"primary",modelValue:f.value,"onUpdate:modelValue":t[1]||(t[1]=d=>f.value=d),onInput:t[2]||(t[2]=d=>g({pagination:i.value})),onKeyup:t[3]||(t[3]=R(d=>g({pagination:i.value}),["enter"]))},{append:l(()=>[e(D,{name:"search"})]),_:1},8,["modelValue"]),e(u,{flat:"",round:"",dense:"",icon:n.inFullscreen?"fullscreen_exit":"fullscreen",onClick:n.toggleFullscreen},null,8,["icon","onClick"])]),"body-cell":l(n=>[e(H,{props:n},{default:l(()=>[n.col.name==="action"?(h(),Q("div",Y,[e(u,{round:"",flat:"",icon:"published_with_changes"}),e(u,{round:"",flat:"",icon:"admin_panel_settings"}),v(e(u,{round:"",flat:"",icon:"lock_person"},null,512),[[w,!n.row.is_active]]),v(e(u,{round:"",flat:"",icon:"lock_open"},null,512),[[w,n.row.is_active]]),e(u,{round:"",flat:"",icon:"delete_sweep"})])):(h(),Q("div",ee,m(n.value),1))]),_:2},1032,["props"])]),pagination:l(n=>[b(m(o(a)("total"))+m(C.value)+" "+m(o(a)("page"))+" ",1),e(O,{modelValue:n.pagination.page,"onUpdate:modelValue":[d=>n.pagination.page=d,d=>N(n)],max:n.pagesNumber,input:"","input-class":"text-orange-10"},null,8,["modelValue","onUpdate:modelValue","max"])]),_:1},8,["class","rows","columns","pagination","no-data-label","rows-per-page-label","table-style","card-style"])]))}},ue={__name:"UserReader",setup($){const a=B(),c=s(!1),p=s(""),k=s(""),_=s("");return T(()=>({title:p.value,meta:{description:{name:"description",content:k.value},keywords:{name:"keywords",content:_.value}}})),S(()=>{}),K(()=>{}),P(()=>a.dark.isActive,f=>{c.value=f}),(f,y)=>(h(),E(A,{class:"flex flex-top"},{default:l(()=>[e(ae)]),_:1}))}};export{ue as default};
