"use strict";(self["webpackChunksortinghat_ui"]=self["webpackChunksortinghat_ui"]||[]).push([[224],{52790:(e,n,t)=>{t.d(n,{A:()=>h});var i=t(20641),r=t(90033),a=t(13892),o=t(4189),l=t(30697),u=t(93745),d=t(41720),c=t(79669),s=t(88249),f=t(43948),m={key:0},p={key:1,class:"font-italic"};function v(e,n,t,v,k,g){var b=(0,i.g2)("v-confirm-edit");return(0,i.uX)(),(0,i.Wv)(s.q,{modelValue:e.menu,"onUpdate:modelValue":n[2]||(n[2]=function(n){return e.menu=n}),"close-on-content-click":!1},{activator:(0,i.k6)((function(n){var o=n.props;return["text"===t.activator?((0,i.uX)(),(0,i.CE)("button",(0,i.v6)({key:0,class:"hide-icon"},o),[t.modelValue?((0,i.uX)(),(0,i.CE)("span",m,[(0,i.RG)(e.$slots,"value",(0,r._B)((0,i.Ng)(o)),(function(){return[(0,i.eW)((0,r.v_)(t.modelValue),1)]}),!0)])):((0,i.uX)(),(0,i.CE)("span",p,(0,r.v_)(t.emptyValue),1)),(0,i.bF)(c.w,{class:"icon--hidden ml-2","aria-label":t.label,size:"x-small"},{default:(0,i.k6)((function(){return[(0,i.eW)(" mdi-lead-pencil ")]})),_:1},8,["aria-label"])],16)):((0,i.uX)(),(0,i.Wv)(a.D,(0,r._B)((0,i.v6)({key:1},o)),{default:(0,i.k6)((function(){return[(0,i.bF)(c.w,{start:""},{default:(0,i.k6)((function(){return[(0,i.eW)("mdi-plus")]})),_:1}),(0,i.eW)(" Add ")]})),_:2},1040))]})),default:(0,i.k6)((function(){return[(0,i.bF)(o.J,{"min-width":"250"},{default:(0,i.k6)((function(){return[(0,i.bF)(b,{"model-value":t.modelValue,"ok-text":"Save",onCancel:n[0]||(n[0]=function(n){return e.menu=!1}),onSave:n[1]||(n[1]=function(e){return g.save(e)})},{default:(0,i.k6)((function(n){var r=n.model,a=n.actions;return[(0,i.bF)(l.O,null,{default:(0,i.k6)((function(){return[(0,i.RG)(e.$slots,"input",{model:r},(function(){return[(0,i.bF)(f.W,{modelValue:r.value,"onUpdate:modelValue":function(e){return r.value=e},label:t.label,color:"primary",density:"compact","hide-details":"","single-line":""},null,8,["modelValue","onUpdate:modelValue","label"])]}),!0)]})),_:2},1024),(0,i.bF)(u.S,null,{default:(0,i.k6)((function(){return[(0,i.bF)(d.h),((0,i.uX)(),(0,i.Wv)((0,i.$y)(a),{color:"primary"}))]})),_:2},1024)]})),_:3},8,["model-value"])]})),_:3})]})),_:3},8,["modelValue"])}const k={name:"EditDialog",props:{modelValue:{type:[String,Object],required:!1},label:{type:String,required:!0},activator:{type:String,required:!1,default:"text"},emptyValue:{type:String,required:!1}},data:function(){return{menu:!1}},methods:{save:function(e){this.$emit("save",e),this.menu=!1}}};var g=t(64621);const b=(0,g.A)(k,[["render",v],["__scopeId","data-v-3daedc2c"]]),h=b},83102:(e,n,t)=>{t.d(n,{A:()=>f});var i=t(20641),r=t(90033),a=t(26106),o={class:"d-flex flex-column justify-center align-center pa-4 h-100"},l={key:0,class:"subtitle-1 text-medium-emphasis mt-4"};function u(e,n,t,u,d,c){return(0,i.uX)(),(0,i.CE)("div",o,[(0,i.bF)(a.x,{size:t.size,color:"primary",indeterminate:""},null,8,["size"]),t.label?((0,i.uX)(),(0,i.CE)("p",l,(0,r.v_)(t.label),1)):(0,i.Q3)("",!0)])}t(2892);const d={name:"LoadingSpinner",props:{label:{type:String,required:!1,default:null},size:{type:[String,Number],required:!1,default:48}}};var c=t(64621);const s=(0,c.A)(d,[["render",u]]),f=s},34224:(e,n,t)=>{t.r(n),t.d(n,{default:()=>le});t(62010),t(50778);var i=t(20641),r=t(90033),a=t(53751),o=t(31969),l=t(13892),u=t(93745),d=t(4189),c=t(91606),s=t(30697),f=t(20396),m=t(91772),p=t(7511),v=t(43813),k=t(56756),g=t(35526),b=t(41720),h=t(79669),_=t(57254),w=t(4913),y=t(97505),x=t(69915),F=t(86449),A=t(98477),M=t(88249),E=t(43948),$=t(51161),C=function(e){return(0,i.Qi)("data-v-64bde28a"),e=e(),(0,i.jt)(),e},L={key:0},W=["href","data-profile-link"],I=C((function(){return(0,i.Lk)("span",null,"Unlock",-1)})),U=C((function(){return(0,i.Lk)("span",null,"Lock",-1)})),V={key:0},D={key:0},X={key:0},O=C((function(){return(0,i.Lk)("span",null,"UUID:",-1)})),B={key:0,class:"pt-2 pb-2 text-body-2"};function P(e,n,t,C,P,S){var z=this,R=(0,i.g2)("loading-spinner"),q=(0,i.g2)("avatar"),Q=(0,i.g2)("edit-dialog"),j=(0,i.g2)("identities-list"),G=(0,i.g2)("enrollment-list"),K=(0,i.g2)("individual-card"),T=(0,i.g2)("enroll-modal"),Y=(0,i.g2)("team-enroll-modal"),J=(0,i.g2)("matches-modal");return(0,i.uX)(),(0,i.Wv)(A.Y,null,{default:(0,i.k6)((function(){return[e.$apollo.loading?((0,i.uX)(),(0,i.Wv)(R,{key:0,label:"Loading"})):P.individual?((0,i.uX)(),(0,i.Wv)(v.I,{key:1,class:"mx-auto mb-8"},{default:(0,i.k6)((function(){return[(0,i.bF)(k.L,null,{default:(0,i.k6)((function(){return[(0,i.bF)(g.B,{cols:S.showRecommendations?8:12,xl:S.showRecommendations?9:12},{default:(0,i.k6)((function(){return[(0,i.bF)(k.L,{class:"section pa-3 mb-4 mt-0"},{default:(0,i.k6)((function(){return[(0,i.bF)(g.B,null,{default:(0,i.k6)((function(){return[(0,i.bF)(_.g,{class:"pl-1 my-n4 v-list-item--three-line"},{prepend:(0,i.k6)((function(){return[(0,i.bF)(q,{name:P.individual.name,email:P.individual.email},null,8,["name","email"])]})),default:(0,i.k6)((function(){return[(0,i.bF)(w.U,{class:"font-weight-medium text-h6"},{default:(0,i.k6)((function(){return[P.individual.isLocked?((0,i.uX)(),(0,i.CE)("span",L,(0,r.v_)(P.individual.name||"no name"),1)):((0,i.uX)(),(0,i.Wv)(Q,{key:1,modelValue:P.individual.name,"onUpdate:modelValue":n[0]||(n[0]=function(e){return P.individual.name=e}),"empty-value":"no name",label:"Edit name",onSave:n[1]||(n[1]=function(e){return S.updateProfile({name:e})})},null,8,["modelValue"]))]})),_:1}),(0,i.bF)(y.w,{class:"mb-1"},{default:(0,i.k6)((function(){return[(0,i.eW)((0,r.v_)(P.individual.organization),1)]})),_:1}),((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(P.socialProfiles,(function(e,n){return(0,i.uX)(),(0,i.CE)("p",{key:n,class:"d-flex align-center"},[(0,i.bF)(h.w,{size:"small",start:""},{default:(0,i.k6)((function(){return[(0,i.eW)((0,r.v_)(e.icon),1)]})),_:2},1024),(0,i.Lk)("a",{href:e.link,"data-profile-link":e.source,class:"link--underline font-weight-regular",target:"_blank"},(0,r.v_)(e.username),9,W)])})),128))]})),_:1})]})),_:1}),(0,i.bF)(g.B,{cols:"2",class:"d-flex justify-end align-start mr-1"},{default:(0,i.k6)((function(){return[(0,i.bF)($.y,{location:"bottom","max-width":"200"},{activator:(0,i.k6)((function(e){var t=e.props;return[(0,i.bF)(l.D,(0,i.v6)({disabled:P.individual.isLocked,"aria-label":S.reviewButton.tooltip,icon:S.reviewButton.icon},t,{class:"mr-1","data-testid":"review-btn",variant:"text",onClick:n[2]||(n[2]=function(e){return S.review(z.mk)})}),null,16,["disabled","aria-label","icon"])]})),default:(0,i.k6)((function(){return[(0,i.Lk)("span",null,(0,r.v_)(S.reviewButton.tooltip),1)]})),_:1}),(0,i.bF)($.y,{location:"bottom"},{activator:(0,i.k6)((function(e){var t=e.props;return[(0,i.bF)(l.D,(0,i.v6)({disabled:P.individual.isLocked,"aria-label":P.individual.isBot?"Unmark as bot":"Mark as bot",icon:P.individual.isBot?"mdi-robot":"mdi-robot-outline"},t,{class:"mr-1",variant:"text",onClick:n[3]||(n[3]=function(e){return S.updateProfile({isBot:!P.individual.isBot})})}),null,16,["disabled","aria-label","icon"])]})),default:(0,i.k6)((function(){return[(0,i.Lk)("span",null,(0,r.v_)(P.individual.isBot?"Unmark as bot":"Mark as bot"),1)]})),_:1}),(0,i.bF)($.y,{location:"bottom"},{activator:(0,i.k6)((function(t){var r=t.props;return[(0,i.bF)(l.D,(0,i.v6)({"aria-label":S.isInWorkspace?"In workspace":"Add to workspace",class:"mr-1",variant:"text"},r,{icon:S.isInWorkspace?"mdi-pin":"mdi-pin-outline",onClick:n[4]||(n[4]=function(n){return e.$store.dispatch("togglePin",P.mk)})}),null,16,["aria-label","icon"])]})),default:(0,i.k6)((function(){return[(0,i.Lk)("span",null,(0,r.v_)(S.isInWorkspace?"In workspace":"Add to workspace"),1)]})),_:1}),P.individual.isLocked?((0,i.uX)(),(0,i.Wv)($.y,{key:0,location:"bottom"},{activator:(0,i.k6)((function(e){var n=e.props;return[(0,i.bF)(l.D,(0,i.v6)({"aria-label":"Unlock",class:"mr-1"},n,{icon:"mdi-lock",variant:"text",onClick:S.unlock}),null,16,["onClick"])]})),default:(0,i.k6)((function(){return[I]})),_:1})):((0,i.uX)(),(0,i.Wv)($.y,{key:1,location:"bottom"},{activator:(0,i.k6)((function(e){var n=e.props;return[(0,i.bF)(l.D,(0,i.v6)({"aria-label":"Lock",class:"mr-1"},n,{icon:"mdi-lock-outline",variant:"text",onClick:S.lock}),null,16,["onClick"])]})),default:(0,i.k6)((function(){return[U]})),_:1})),(0,i.bF)(M.q,{location:"bottom",left:"","nudge-bottom":"38"},{activator:(0,i.k6)((function(e){var n=e.props;return[(0,i.bF)(l.D,(0,i.v6)({"aria-label":"See more actions"},n,{icon:"mdi-dots-vertical",variant:"text"}),null,16)]})),default:(0,i.k6)((function(){return[(0,i.bF)(x.x,{density:"compact"},{default:(0,i.k6)((function(){return[(0,i.bF)(_.g,{disabled:P.individual.isLocked,onClick:n[5]||(n[5]=function(e){return P.matchesModal.open=!0})},{default:(0,i.k6)((function(){return[(0,i.bF)(w.U,null,{default:(0,i.k6)((function(){return[(0,i.eW)("Find matches")]})),_:1})]})),_:1},8,["disabled"]),S.hasLinkedinProfile?((0,i.uX)(),(0,i.Wv)(_.g,{key:0,disabled:P.individual.isLocked,onClick:S.confirmRemoveIdentity},{default:(0,i.k6)((function(){return[(0,i.bF)(w.U,null,{default:(0,i.k6)((function(){return[(0,i.eW)(" Remove LinkedIn profile ")]})),_:1})]})),_:1},8,["disabled","onClick"])):((0,i.uX)(),(0,i.Wv)(_.g,{key:1,disabled:P.individual.isLocked,onClick:n[6]||(n[6]=function(e){return P.linkedinModal.open=!0})},{default:(0,i.k6)((function(){return[(0,i.bF)(w.U,null,{default:(0,i.k6)((function(){return[(0,i.eW)("Add LinkedIn profile")]})),_:1})]})),_:1},8,["disabled"])),(0,i.bF)(p.G,{inline:""}),(0,i.bF)(_.g,{disabled:P.individual.isLocked,onClick:S.confirmDelete},{default:(0,i.k6)((function(){return[(0,i.bF)(w.U,null,{default:(0,i.k6)((function(){return[(0,i.eW)("Delete individual")]})),_:1})]})),_:1},8,["disabled","onClick"])]})),_:1})]})),_:1})]})),_:1})]})),_:1}),(0,i.bF)(k.L,{class:"section mb-4"},{default:(0,i.k6)((function(){return[(0,i.bF)(v.I,{class:"pb-6",fluid:""},{default:(0,i.k6)((function(){return[(0,i.bF)(F.w,{class:"text-subtitle-2 mb-4"},{default:(0,i.k6)((function(){return[(0,i.eW)("Profile")]})),_:1}),(0,i.bF)(k.L,null,{default:(0,i.k6)((function(){return[(0,i.bF)(g.B,{cols:"1",class:"ml-4"},{default:(0,i.k6)((function(){return[(0,i.eW)(" Email: ")]})),_:1}),(0,i.bF)(g.B,null,{default:(0,i.k6)((function(){return[P.individual.isLocked?((0,i.uX)(),(0,i.CE)("span",V,(0,r.v_)(P.individual.email||"none"),1)):((0,i.uX)(),(0,i.Wv)(Q,{key:1,modelValue:P.individual.email,"onUpdate:modelValue":n[7]||(n[7]=function(e){return P.individual.email=e}),"empty-value":"none",label:"Edit email",onSave:n[8]||(n[8]=function(e){return S.updateProfile({email:e})})},null,8,["modelValue"]))]})),_:1})]})),_:1}),(0,i.bF)(k.L,null,{default:(0,i.k6)((function(){return[(0,i.bF)(g.B,{cols:"1",class:"ml-4"},{default:(0,i.k6)((function(){return[(0,i.eW)(" Country: ")]})),_:1}),(0,i.bF)(g.B,null,{default:(0,i.k6)((function(){return[P.individual.isLocked?((0,i.uX)(),(0,i.CE)("span",D,(0,r.v_)(P.individual.country?P.individual.country.name:"none"),1)):((0,i.uX)(),(0,i.Wv)(Q,{key:1,modelValue:P.individual.country,"onUpdate:modelValue":n[9]||(n[9]=function(e){return P.individual.country=e}),"empty-value":"none",label:"Edit country",onSave:n[10]||(n[10]=function(e){return S.updateProfile({countryCode:e.code})})},{value:(0,i.k6)((function(e){var n=e.props;return[(0,i.Lk)("span",(0,r._B)((0,i.Ng)(n)),(0,r.v_)(P.individual.country.name),17)]})),input:(0,i.k6)((function(e){var n=e.model;return[(0,i.bF)(f.A,{modelValue:n.value,"onUpdate:modelValue":function(e){return n.value=e},items:P.countries,label:"Country","item-title":"name","hide-details":"","single-line":"",onClickOnce:S.getCountryList,onKeypressOnce:S.getCountryList},null,8,["modelValue","onUpdate:modelValue","items","onClickOnce","onKeypressOnce"])]})),_:1},8,["modelValue"]))]})),_:1})]})),_:1}),(0,i.bF)(k.L,null,{default:(0,i.k6)((function(){return[(0,i.bF)(g.B,{cols:"1",class:"ml-4"},{default:(0,i.k6)((function(){return[(0,i.eW)(" Gender: ")]})),_:1}),(0,i.bF)(g.B,null,{default:(0,i.k6)((function(){return[P.individual.isLocked?((0,i.uX)(),(0,i.CE)("span",X,(0,r.v_)(P.individual.gender||"none"),1)):((0,i.uX)(),(0,i.Wv)(Q,{key:1,modelValue:P.individual.gender,"onUpdate:modelValue":n[11]||(n[11]=function(e){return P.individual.gender=e}),"empty-value":"none",label:"Edit gender",onSave:n[12]||(n[12]=function(e){return S.updateProfile({gender:e})})},null,8,["modelValue"]))]})),_:1})]})),_:1}),(0,i.bF)(k.L,null,{default:(0,i.k6)((function(){return[(0,i.bF)(g.B,{cols:"1",class:"ml-4"},{default:(0,i.k6)((function(){return[O]})),_:1}),(0,i.bF)(g.B,null,{default:(0,i.k6)((function(){return[(0,i.Lk)("span",null,(0,r.v_)(P.individual.uuid),1)]})),_:1})]})),_:1})]})),_:1})]})),_:1}),(0,i.bF)(k.L,{class:"section mb-4"},{default:(0,i.k6)((function(){return[(0,i.bF)(v.I,{fluid:""},{default:(0,i.k6)((function(){return[P.individual.identities?((0,i.uX)(),(0,i.Wv)(j,{key:0,class:"mb-8",identities:P.individual.identities,uuid:P.individual.uuid,"is-locked":P.individual.isLocked,onUnmerge:S.unmergeIdentities},null,8,["identities","uuid","is-locked","onUnmerge"])):(0,i.Q3)("",!0)]})),_:1})]})),_:1}),(0,i.bF)(k.L,{class:"section"},{default:(0,i.k6)((function(){return[(0,i.bF)(v.I,{fluid:""},{default:(0,i.k6)((function(){return[P.individual.enrollments?((0,i.uX)(),(0,i.Wv)(G,{key:0,enrollments:P.individual.enrollments,"is-locked":P.individual.isLocked,onOpenEnrollmentModal:n[13]||(n[13]=function(n){return e.confirmEnroll(P.individual)}),onOpenTeamModal:S.openTeamModal,onUpdateEnrollment:S.updateEnrollment,onWithdraw:S.withdraw},null,8,["enrollments","is-locked","onOpenTeamModal","onUpdateEnrollment","onWithdraw"])):(0,i.Q3)("",!0)]})),_:1})]})),_:1})]})),_:1},8,["cols","xl"]),S.showRecommendations?((0,i.uX)(),(0,i.Wv)(g.B,{key:0,cols:"4",xl:"3"},{default:(0,i.k6)((function(){return[(0,i.bF)(v.I,{class:"section"},{default:(0,i.k6)((function(){return[(0,i.bF)(F.w,{class:"text-subtitle-2"},{default:(0,i.k6)((function(){return[(0,i.eW)(" Possible matches ")]})),_:1}),((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(P.individual.matchRecommendations,(function(e,n){var t=e.id,o=e.individual;return(0,i.uX)(),(0,i.CE)("div",{key:t,class:"ml-2 mr-2"},[(0,i.bF)(K,{name:o.name,email:o.email,enrollments:o.enrollments,identities:o.identities,"is-locked":o.isLocked,sources:o.sources,uuid:o.uuid,class:(0,r.C4)({"mt-4":n>0,"mt-2":0===n})},null,8,["name","email","enrollments","identities","is-locked","sources","uuid","class"]),(0,i.bF)(u.S,null,{default:(0,i.k6)((function(){return[(0,i.bF)(b.h),(0,i.bF)(l.D,{variant:"text",size:"small",onClick:(0,a.D$)((function(e){return S.applyRecommendation(t,!1)}),["prevent"])},{default:(0,i.k6)((function(){return[(0,i.eW)(" Dismiss ")]})),_:2},1032,["onClick"]),(0,i.bF)(l.D,{size:"small",variant:"outlined",onClick:(0,a.D$)((function(e){return S.applyRecommendation(t,!0)}),["prevent"])},{default:(0,i.k6)((function(){return[(0,i.eW)(" Merge ")]})),_:2},1032,["onClick"])]})),_:2},1024)])})),128))]})),_:1})]})),_:1})):(0,i.Q3)("",!0)]})),_:1})]})),_:1})):(0,i.Q3)("",!0),P.error?((0,i.uX)(),(0,i.Wv)(v.I,{key:2},{default:(0,i.k6)((function(){return[(0,i.bF)(o.l,{dense:"",text:"",type:"error"},{default:(0,i.k6)((function(){return[(0,i.eW)(" Individual "+(0,r.v_)(P.error),1)]})),_:1}),(0,i.bF)(l.D,{to:"/",color:"primary",depressed:""},{default:(0,i.k6)((function(){return[(0,i.bF)(h.w,{left:"",dark:""},{default:(0,i.k6)((function(){return[(0,i.eW)("mdi-arrow-left")]})),_:1}),(0,i.eW)(" Go to dashboard ")]})),_:1})]})),_:1})):(0,i.Q3)("",!0),(0,i.bF)(T,{"is-open":e.enrollmentModal.open,"onUpdate:isOpen":n[14]||(n[14]=function(n){return e.enrollmentModal.open=n}),title:e.enrollmentModal.title,text:e.enrollmentModal.text,uuid:P.mk,enroll:e.enrollIndividual,"fetch-organizations":S.fetchOrganizations,"add-organization":e.addOrganization},null,8,["is-open","title","text","uuid","enroll","fetch-organizations","add-organization"]),P.teamModal.open?((0,i.uX)(),(0,i.Wv)(Y,{key:3,"is-open":P.teamModal.open,"onUpdate:isOpen":n[15]||(n[15]=function(e){return P.teamModal.open=e}),organization:P.teamModal.organization,uuid:P.mk,enroll:S.enroll,enrollments:P.individual.enrollments,onUpdateIndividual:n[16]||(n[16]=function(e){return S.updateIndividual(e)})},null,8,["is-open","organization","uuid","enroll","enrollments"])):(0,i.Q3)("",!0),(0,i.bF)(J,{"is-open":P.matchesModal.open,"onUpdate:isOpen":n[17]||(n[17]=function(e){return P.matchesModal.open=e}),"recommend-matches":S.recommendMatches,uuid:P.mk},null,8,["is-open","recommend-matches","uuid"]),(0,i.bF)(m.p,{modelValue:P.linkedinModal.open,"onUpdate:modelValue":n[20]||(n[20]=function(e){return P.linkedinModal.open=e}),"max-width":"500px"},{default:(0,i.k6)((function(){return[(0,i.bF)(d.J,{class:"pa-3"},{default:(0,i.k6)((function(){return[(0,i.bF)(c.r,{class:"headline"},{default:(0,i.k6)((function(){return[(0,i.eW)("Add LinkedIn profile")]})),_:1}),(0,i.bF)(s.O,null,{default:(0,i.k6)((function(){return[(0,i.bF)(E.W,{modelValue:P.linkedinModal.username,"onUpdate:modelValue":n[18]||(n[18]=function(e){return P.linkedinModal.username=e}),label:"LinkedIn username",prefix:"https://www.linkedin.com/in/",placeholder:"username",autofocus:""},null,8,["modelValue"])]})),_:1}),(0,i.bF)(u.S,null,{default:(0,i.k6)((function(){return[(0,i.bF)(b.h),(0,i.bF)(l.D,{text:"",onClick:n[19]||(n[19]=function(e){return P.linkedinModal.open=!1})},{default:(0,i.k6)((function(){return[(0,i.eW)(" Cancel ")]})),_:1}),(0,i.bF)(l.D,{disabled:!P.linkedinModal.username,color:"primary",onClick:(0,a.D$)(S.addLinkedInProfile,["stop"])},{default:(0,i.k6)((function(){return[(0,i.eW)(" Confirm ")]})),_:1},8,["disabled","onClick"])]})),_:1})]})),_:1})]})),_:1},8,["modelValue"]),(0,i.bF)(m.p,{modelValue:P.dialog.open,"onUpdate:modelValue":n[21]||(n[21]=function(e){return P.dialog.open=e}),"max-width":"500px"},{default:(0,i.k6)((function(){return[(0,i.bF)(d.J,{class:"pa-3"},{default:(0,i.k6)((function(){return[(0,i.bF)(c.r,{class:"headline"},{default:(0,i.k6)((function(){return[(0,i.eW)((0,r.v_)(P.dialog.title),1)]})),_:1}),(0,i.bF)(s.O,null,{default:(0,i.k6)((function(){return[P.dialog.text?((0,i.uX)(),(0,i.CE)("p",B,(0,r.v_)(P.dialog.text),1)):(0,i.Q3)("",!0),P.dialog.errorMessage?((0,i.uX)(),(0,i.Wv)(o.l,{key:1,dense:"",text:"",type:"error"},{default:(0,i.k6)((function(){return[(0,i.eW)((0,r.v_)(P.dialog.errorMessage),1)]})),_:1})):(0,i.Q3)("",!0)]})),_:1}),P.dialog.action?((0,i.uX)(),(0,i.Wv)(u.S,{key:0},{default:(0,i.k6)((function(){return[(0,i.bF)(b.h),(0,i.bF)(l.D,{text:"",onClick:S.closeDialog},{default:(0,i.k6)((function(){return[(0,i.eW)(" Cancel ")]})),_:1},8,["onClick"]),(0,i.bF)(l.D,{color:"primary",id:"confirm",depressed:"",onClick:(0,a.D$)(P.dialog.action,["stop"])},{default:(0,i.k6)((function(){return[(0,i.eW)(" Confirm ")]})),_:1},8,["onClick"])]})),_:1})):((0,i.uX)(),(0,i.Wv)(u.S,{key:1},{default:(0,i.k6)((function(){return[(0,i.bF)(b.h),(0,i.bF)(l.D,{text:"",color:"primary",onClick:S.closeDialog},{default:(0,i.k6)((function(){return[(0,i.eW)(" OK ")]})),_:1},8,["onClick"])]})),_:1}))]})),_:1})]})),_:1},8,["modelValue"])]})),_:1})}var S=t(41034),z=t(14048),R=t(30388),q=(t(28706),t(50113),t(25276),t(64346),t(44114),t(72712),t(15086),t(26099),t(74353)),Q=t.n(q),j=t(58663),G=t(20595),K=t(87131),T=t(80220),Y=t(40018),J=t(57712),N=t(49659),H=t(88075),Z=t(56105),ee=t(54640),ne=t(10978),te=t(52790),ie=t(83102);const re={name:"Individual",components:{Avatar:Y.A,IdentitiesList:J.A,IndividualCard:N.A,EnrollmentList:H.A,EnrollModal:Z.A,TeamEnrollModal:ee.A,MatchesModal:ne.A,EditDialog:te.A,LoadingSpinner:ie.A},mixins:[T.M],apollo:{individuals:function(){return{query:j.UE,variables:{uuid:this.mk},result:function(e){1===e.data.individuals.entities.length?this.updateIndividual(e.data.individuals.entities):e.errors?this.error=this.$getErrorMessage(e.errors[0]):this.error="Individual ".concat(this.mk," not found")}}}},data:function(){return{individual:null,dialog:{open:!1,title:"",text:"",errorMessage:"",action:null},form:{},teamModal:{open:!1,organization:""},matchesModal:{open:!1},linkedinModal:{open:!1,username:""},countries:[],socialProfiles:[],mk:this.$route.params.mk,error:null}},computed:{showRecommendations:function(){return this.individual.matchRecommendations&&this.individual.matchRecommendations.length>0},isInWorkspace:function(){var e=this.$store.getters.workspace;return e&&-1!==e.indexOf(this.mk)},hasLinkedinProfile:function(){return this.socialProfiles.some((function(e){return"linkedin"===e.source}))},reviewButton:function(){var e=this.$formatDate(this.individual.lastReviewed,"YYYY-MM-DD"),n=Q()(this.individual.lastModified).isAfter(this.individual.lastReviewed,"second");return e?n?{icon:"mdi-alert-decagram",tooltip:"Changes since last review on ".concat(e)}:{icon:"mdi-check-decagram",tooltip:"Last reviewed ".concat(e)}:{icon:"mdi-check-decagram-outline",tooltip:"Mark as reviewed"}}},methods:{updateProfile:function(e){var n=this;return(0,R.A)((0,z.A)().mark((function t(){var i;return(0,z.A)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,(0,G.r7)(n.$apollo,e,n.mk);case 3:i=t.sent,n.updateIndividual(i.data.updateProfile.individual),n.$logger.debug("Updated profile ".concat(n.mk),e),t.next=12;break;case 8:t.prev=8,t.t0=t["catch"](0),n.dialog={open:!0,title:"Error updating profile",errorMessage:n.$getErrorMessage(t.t0)},n.$logger.error("Error updating profile: ".concat(t.t0),e);case 12:case"end":return t.stop()}}),t,null,[[0,8]])})))()},lock:function(){var e=this;return(0,R.A)((0,z.A)().mark((function n(){var t;return(0,z.A)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,(0,G.pG)(e.$apollo,e.mk);case 3:t=n.sent,Object.assign(e.individual,{isLocked:t.data.lock.individual.isLocked}),e.$logger.debug("Locked individual ".concat(e.mk)),n.next=12;break;case 8:n.prev=8,n.t0=n["catch"](0),e.dialog={open:!0,title:"Error locking profile",errorMessage:e.$getErrorMessage(n.t0)},e.$logger.error("Error locking individual ".concat(e.mk,": ").concat(n.t0));case 12:case"end":return n.stop()}}),n,null,[[0,8]])})))()},unlock:function(){var e=this;return(0,R.A)((0,z.A)().mark((function n(){var t;return(0,z.A)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,(0,G.Cr)(e.$apollo,e.mk);case 3:t=n.sent,Object.assign(e.individual,{isLocked:t.data.unlock.individual.isLocked}),e.$logger.debug("Unlocked individual ".concat(e.mk)),n.next=12;break;case 8:n.prev=8,n.t0=n["catch"](0),e.dialog={open:!0,title:"Error updating profile",errorMessage:e.$getErrorMessage(n.t0)},e.$logger.error("Error unlocking individual ".concat(e.mk,": ").concat(n.t0));case 12:case"end":return n.stop()}}),n,null,[[0,8]])})))()},getCountryList:function(){var e=this;return(0,R.A)((0,z.A)().mark((function n(){var t;return(0,z.A)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,(0,j.X6)(e.$apollo);case 3:t=n.sent,e.countries=t.data.countries.entities,n.next=10;break;case 7:n.prev=7,n.t0=n["catch"](0),e.dialog={open:!0,title:"Error loading country list",errorMessage:e.$getErrorMessage(n.t0)};case 10:case"end":return n.stop()}}),n,null,[[0,7]])})))()},unmergeIdentities:function(e){var n=this;return(0,R.A)((0,z.A)().mark((function t(){var i,r;return(0,z.A)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,(0,G.Io)(n.$apollo,e);case 3:i=t.sent,r=i.data.unmergeIdentities.individuals.find((function(e){return e.mk===n.mk})),n.updateIndividual(r),n.$logger.debug("Unmerged identities",e),t.next=13;break;case 9:t.prev=9,t.t0=t["catch"](0),n.dialog={open:!0,title:"Error updating profile",errorMessage:n.$getErrorMessage(t.t0)},n.$logger.error("Error unmerging identities ".concat(e,": ").concat(t.t0));case 13:case"end":return t.stop()}}),t,null,[[0,9]])})))()},enroll:function(e,n,t,i,r){var a=this;return(0,R.A)((0,z.A)().mark((function o(){var l;return(0,z.A)().wrap((function(o){while(1)switch(o.prev=o.next){case 0:return o.next=2,(0,G.xu)(a.$apollo,e,n,t,i,r);case 2:return l=o.sent,o.abrupt("return",l);case 4:case"end":return o.stop()}}),o)})))()},updateEnrollment:function(e){var n=this;return(0,R.A)((0,z.A)().mark((function t(){var i;return(0,z.A)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return Object.assign(e,{uuid:n.mk}),t.prev=1,t.next=4,(0,G.ct)(n.$apollo,e);case 4:i=t.sent,n.updateIndividual(i.data.updateEnrollment.individual),n.$logger.debug("Updated enrollment",e),t.next=13;break;case 9:t.prev=9,t.t0=t["catch"](1),n.dialog={open:!0,title:"Error updating profile",errorMessage:n.$getErrorMessage(t.t0)},n.$logger.error("Error updating enrollment: ".concat(t.t0),e);case 13:case"end":return t.stop()}}),t,null,[[1,9]])})))()},withdraw:function(e){var n=this;return(0,R.A)((0,z.A)().mark((function t(){var i,r,a,o,l;return(0,z.A)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i=e.name,r=e.fromDate,a=e.toDate,o=e.parentOrg,t.prev=1,t.next=4,(0,G.ne)(n.$apollo,n.mk,i,r,a,o);case 4:l=t.sent,n.updateIndividual(l.data.withdraw.individual),n.$logger.debug("Removed affiliation",(0,S.A)({uuid:n.mk},e)),t.next=13;break;case 9:t.prev=9,t.t0=t["catch"](1),n.dialog={open:!0,title:"Error updating profile",errorMessage:n.$getErrorMessage(t.t0)},n.$logger.error("Error removing affiliation: ".concat(t.t0),(0,S.A)({uuid:n.mk},e));case 13:case"end":return t.stop()}}),t,null,[[1,9]])})))()},deleteIndividual:function(){var e=this;return(0,R.A)((0,z.A)().mark((function n(){var t;return(0,z.A)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,(0,G.Ut)(e.$apollo,e.mk);case 3:t=n.sent,t&&e.$router.push("/"),n.next=10;break;case 7:n.prev=7,n.t0=n["catch"](0),e.dialog={open:!0,title:"Error deleting profile",errorMessage:e.$getErrorMessage(n.t0)};case 10:case"end":return n.stop()}}),n,null,[[0,7]])})))()},openTeamModal:function(e){this.teamModal={open:!0,organization:e}},confirmDelete:function(){this.dialog={open:!0,title:"Delete ".concat(this.individual.name,"?"),action:this.deleteIndividual}},closeDialog:function(){this.dialog={open:!1,title:"",text:"",errorMessage:""}},updateIndividual:function(e){Array.isArray(e)||(e=[e]),this.individual=(0,K.p4)(e[0]),this.socialProfiles=this.getSocialProfiles(e[0]),Object.assign(this.form,{name:this.individual.name,email:this.individual.email,country:this.individual.country,gender:this.individual.gender}),document.title="".concat(this.individual.name||"Individual"," - Sorting Hat")},fetchOrganizations:function(e,n,t){var i=this;return(0,R.A)((0,z.A)().mark((function r(){var a;return(0,z.A)().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,(0,j.t2)(i.$apollo,e,n,t);case 2:return a=r.sent,r.abrupt("return",a.data.organizations);case 4:case"end":return r.stop()}}),r)})))()},applyRecommendation:function(e,n){var t=this;return(0,R.A)((0,z.A)().mark((function i(){return(0,z.A)().wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,(0,G.x2)(t.$apollo,e,n);case 3:t.$apollo.queries.individuals.refetch(),t.$logger.debug("Applied recommendation ".concat(e)),i.next=11;break;case 7:i.prev=7,i.t0=i["catch"](0),t.dialog={open:!0,title:"Error applying recommendation",errorMessage:t.$getErrorMessage(i.t0)},t.$logger.error("Error applying recommendation ".concat(e,": ").concat(i.t0));case 11:case"end":return i.stop()}}),i,null,[[0,7]])})))()},recommendMatches:function(e,n,t,i){var r=this;return(0,R.A)((0,z.A)().mark((function a(){var o;return(0,z.A)().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,(0,G.wg)(r.$apollo,e,n,t,i);case 2:return o=a.sent,a.abrupt("return",o);case 4:case"end":return a.stop()}}),a)})))()},getSocialProfiles:function(e){return e.identities.reduce((function(e,n){var t=[{source:"github",link:"http://github.com/".concat(n.username),icon:"mdi-github"},{source:"linkedin",link:"https://www.linkedin.com/in/".concat(n.username),icon:"mdi-linkedin"}],i=t.find((function(e){return e.source===n.source.toLowerCase()})),r=e.find((function(e){return e.source===n.source&&e.username===n.username}));return i&&!r&&e.push((0,S.A)((0,S.A)({},n),i)),e}),[])},addLinkedInProfile:function(){var e=this;return(0,R.A)((0,z.A)().mark((function n(){var t;return(0,z.A)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,(0,G.DA)(e.$apollo,e.mk,e.linkedinModal.username);case 3:t=n.sent,e.updateIndividual(t.data.addIdentity.individual),Object.assign(e.linkedinModal,{open:!1,username:""}),n.next=12;break;case 8:n.prev=8,n.t0=n["catch"](0),e.dialog={open:!0,title:"Error adding identity",errorMessage:e.$getErrorMessage(n.t0)},e.$logger.error("Error adding identity: ".concat(n.t0));case 12:case"end":return n.stop()}}),n,null,[[0,8]])})))()},removeLinkedInProfile:function(){var e=this;return(0,R.A)((0,z.A)().mark((function n(){var t,i,r;return(0,z.A)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,i=null===(t=e.socialProfiles.find((function(e){return"linkedin"===e.source})))||void 0===t?void 0:t.uuid,n.next=4,(0,G.Ut)(e.$apollo,i);case 4:r=n.sent,e.updateIndividual(r.data.deleteIdentity.individual),e.closeDialog(),n.next=13;break;case 9:n.prev=9,n.t0=n["catch"](0),e.dialog={open:!0,title:"Error removing identity",errorMessage:e.$getErrorMessage(n.t0)},e.$logger.error("Error removing identity: ".concat(n.t0));case 13:case"end":return n.stop()}}),n,null,[[0,9]])})))()},confirmRemoveIdentity:function(){this.dialog={open:!0,title:"Remove LinkedIn profile?",action:this.removeLinkedInProfile}},review:function(e){var n=this;return(0,R.A)((0,z.A)().mark((function t(){var i;return(0,z.A)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,(0,G._9)(n.$apollo,e);case 3:i=t.sent,n.updateIndividual(i.data.review.individual),n.$logger.debug("Marked individual ".concat(n.mk," as reviewed")),t.next=12;break;case 8:t.prev=8,t.t0=t["catch"](0),n.dialog={open:!0,title:"Error reviewing individual",errorMessage:n.$getErrorMessage(t.t0)},n.$logger.error("Error reviewing individual: ".concat(t.t0));case 12:case"end":return t.stop()}}),t,null,[[0,8]])})))()}}};var ae=t(64621);const oe=(0,ae.A)(re,[["render",P],["__scopeId","data-v-64bde28a"]]),le=oe}}]);
//# sourceMappingURL=224.34efe242.js.map