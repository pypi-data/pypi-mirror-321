(self["webpackChunksortinghat_ui"]=self["webpackChunksortinghat_ui"]||[]).push([[806],{40018:(e,t,n)=>{"use strict";n.d(t,{A:()=>g});var r=n(20641),a=n(90033),o=n(73416),i=["src"],u={class:"text-white"};function l(e,t,n,l,s,d){return(0,r.uX)(),(0,r.Wv)(o.y,{color:d.getAvatarColor,size:n.size},{default:(0,r.k6)((function(){return[n.email?((0,r.uX)(),(0,r.CE)("img",{key:0,src:d.getGravatar,style:(0,a.Tr)({width:"".concat(n.size+2,"px"),height:"".concat(n.size+2,"px")}),"aria-hidden":"true"},null,12,i)):(0,r.Q3)("",!0),(0,r.Lk)("span",u,(0,a.v_)(d.getNameInitials),1)]})),_:1},8,["color","size"])}n(48598),n(62062),n(62010),n(2892),n(42762);var s=n(83503),d=n.n(s),c=["#f41900","#E35017","#F58E0C","#f4bc00","#3fa500","#436436","#00a156","#003756","#0090E3","#0B22E3","#7218F5","#6b00f4","#3c0056","#bc00f4","#a5003f","#F52537"];const f={props:{name:{type:String,required:!1},email:{type:String,required:!1},size:{type:Number,required:!1,default:40}},computed:{getAvatarColor:function(){var e=this.getNameInitials.split("").map((function(e){return e.charCodeAt(0)})).join(""),t=e%c.length;return c[t]},getGravatar:function(){if(this.email){var e=d()(this.email.trim().toLowerCase());return"https://www.gravatar.com/avatar/".concat(e,".jpg?d=blank&s=40")}return null},getNameInitials:function(){var e=this.name||this.email||"",t=e.split(" "),n=t[0].substring(0,1).toUpperCase();return t.length>1&&(n+=t[t.length-1].substring(0,1).toUpperCase()),n}}};var m=n(64621);const p=(0,m.A)(f,[["render",l],["__scopeId","data-v-c0142cc6"]]),g=p},46266:(e,t,n)=>{"use strict";n.d(t,{A:()=>f});var r=n(20641),a=n(93095),o=n(88249),i=n(43948);function u(e,t,n,u,l,s){return(0,r.uX)(),(0,r.CE)("div",null,[(0,r.bF)(i.W,{modelValue:l.inputDate,"onUpdate:modelValue":t[0]||(t[0]=function(e){return l.inputDate=e}),density:"outlined"==n.variant?"comfortable":"default","error-messages":l.error,label:n.label,variant:n.variant,"single-line":n.singleLine,rules:l.isValid,height:"30",clearable:"",hint:"YYYY-MM-DD",onChange:t[1]||(t[1]=function(e){return s.formatDate(l.inputDate)}),"onClick:clear":t[2]||(t[2]=function(e){return s.formatDate()}),"onUpdate:focused":function(){}},null,8,["modelValue","density","error-messages","label","variant","single-line","rules"]),(0,r.bF)(o.q,{modelValue:l.openPicker,"onUpdate:modelValue":t[5]||(t[5]=function(e){return l.openPicker=e}),"close-on-content-click":!1,activator:"parent",location:"right",transition:"scale-transition","min-width":"290px","offset-x":""},{default:(0,r.k6)((function(){return[(0,r.bF)(a.f,{modelValue:l.pickerDate,"onUpdate:modelValue":[t[3]||(t[3]=function(e){return l.pickerDate=e}),t[4]||(t[4]=function(e){return s.formatDate(e)})],min:n.min,max:n.max,color:"primary","hide-header":"","hide-weekdays":""},null,8,["modelValue","min","max"])]})),_:1},8,["modelValue"])])}n(23288);var l=n(72666);const s={name:"DateInput",props:{modelValue:{type:[String,Date]},label:{type:String,required:!0},min:{type:[String,Date],required:!1},max:{type:[String,Date],required:!1},variant:{type:String,required:!1,default:"outlined"},singleLine:{type:Boolean,required:!1,default:!1}},data:function(){var e=this;return{dateFormatter:null,openPicker:!1,error:null,inputDate:this.modelValue,pickerDate:null,isValid:[function(t){return!t||!e.error}]}},emits:["update:modelValue"],methods:{setError:function(e){this.error=e},formatDate:function(e){if(this.setError(null),this.openPicker=!1,e)try{var t=this.dateFormatter.date(e),n=this.dateFormatter.toISO(t),r="".concat(n,"T00:00:00+00:00");this.inputDate=n,this.pickerDate=t,this.$emit("update:modelValue",r)}catch(a){this.setError("Invalid date"),this.pickerDate=null}else this.$emit("update:modelValue",null),this.inputDate="",this.pickerDate=null}},watch:{modelValue:function(e,t){(null===e||void 0===e?void 0:e.substring(0,9))!==(null===t||void 0===t?void 0:t.substring(0,9))&&this.formatDate(e)}},mounted:function(){this.dateFormatter=(0,l.S_)(),this.formatDate(this.modelValue)}};var d=n(64621);const c=(0,d.A)(s,[["render",u],["__scopeId","data-v-0ad18f2a"]]),f=c},56105:(e,t,n)=>{"use strict";n.d(t,{A:()=>C});var r=n(20641),a=n(90033),o=n(31969),i=n(13892),u=n(4189),l=n(91606),s=n(30697),d=n(93745),c=n(91772),f=n(56756),m=n(35526),p=n(41720),g={key:0,class:"pt-2 pb-2 text-body-2"},v={key:1,class:"subheader"};function k(e,t,n,k,h,b){var y=(0,r.g2)("organization-selector"),_=(0,r.g2)("date-input");return(0,r.uX)(),(0,r.Wv)(c.p,{"model-value":n.isOpen,"max-width":n.organization?"550px":"740px"},{default:(0,r.k6)((function(){return[(0,r.bF)(u.J,{class:"pa-3"},{default:(0,r.k6)((function(){return[(0,r.bF)(l.r,{class:"headline"},{default:(0,r.k6)((function(){return[(0,r.eW)((0,a.v_)(n.title),1)]})),_:1}),(0,r.bF)(s.O,null,{default:(0,r.k6)((function(){return[n.text?((0,r.uX)(),(0,r.CE)("p",g,(0,a.v_)(n.text),1)):(0,r.Q3)("",!0),n.organization?((0,r.uX)(),(0,r.CE)("h6",v," Enrollment dates (optional) ")):(0,r.Q3)("",!0),(0,r.bF)(f.L,null,{default:(0,r.k6)((function(){return[n.organization?(0,r.Q3)("",!0):((0,r.uX)(),(0,r.Wv)(m.B,{key:0,cols:"6"},{default:(0,r.k6)((function(){return[(0,r.bF)(y,{modelValue:h.form.organization,"onUpdate:modelValue":t[0]||(t[0]=function(e){return h.form.organization=e}),"add-organization":n.addOrganization,"fetch-organizations":n.fetchOrganizations,onError:t[1]||(t[1]=function(e){return h.errorMessage=e})},null,8,["modelValue","add-organization","fetch-organizations"])]})),_:1})),(0,r.bF)(m.B,{cols:n.organization?6:3},{default:(0,r.k6)((function(){return[(0,r.bF)(_,{modelValue:h.form.dateFrom,"onUpdate:modelValue":t[2]||(t[2]=function(e){return h.form.dateFrom=e}),label:"Date from",variant:"outlined"},null,8,["modelValue"])]})),_:1},8,["cols"]),(0,r.bF)(m.B,{cols:n.organization?6:3},{default:(0,r.k6)((function(){return[(0,r.bF)(_,{modelValue:h.form.dateTo,"onUpdate:modelValue":t[3]||(t[3]=function(e){return h.form.dateTo=e}),label:"Date to",variant:"outlined"},null,8,["modelValue"])]})),_:1},8,["cols"])]})),_:1}),h.errorMessage?((0,r.uX)(),(0,r.Wv)(o.l,{key:2,variant:"tonal",type:"error"},{default:(0,r.k6)((function(){return[(0,r.eW)((0,a.v_)(h.errorMessage),1)]})),_:1})):(0,r.Q3)("",!0)]})),_:1}),(0,r.bF)(d.S,null,{default:(0,r.k6)((function(){return[(0,r.bF)(p.h),(0,r.bF)(i.D,{variant:"text",onClick:b.onClose},{default:(0,r.k6)((function(){return[(0,r.eW)(" Cancel ")]})),_:1},8,["onClick"]),(0,r.bF)(i.D,{disabled:!n.organization&&!h.form.organization,color:"primary",id:"confirm",variant:"flat",onClick:b.onSave},{default:(0,r.k6)((function(){return[(0,r.eW)(" Confirm ")]})),_:1},8,["disabled","onClick"])]})),_:1})]})),_:1})]})),_:1},8,["model-value","max-width"])}var h=n(14048),b=n(30388),y=n(46266),_=n(62477);const D={name:"EnrollModal",components:{DateInput:y.A,OrganizationSelector:_.A},props:{isOpen:{type:Boolean,required:!0},enroll:{type:Function,required:!0},uuid:{type:String,required:!1},title:{type:String,required:!1},text:{type:String,required:!1},organization:{type:String,required:!1},addOrganization:{type:Function,required:!1,default:function(){}},fetchOrganizations:{type:Function,required:!1,default:function(){}}},data:function(){return{form:{organization:this.organization,dateFrom:"",dateTo:""},errorMessage:""}},methods:{onSave:function(){var e=this;return(0,b.A)((0,h.A)().mark((function t(){return(0,h.A)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.enroll(e.uuid,e.form.organization,e.form.dateFrom,e.form.dateTo);case 3:e.onClose(),t.next=10;break;case 6:t.prev=6,t.t0=t["catch"](0),e.errorMessage=e.$getErrorMessage(t.t0),e.$logger.error("Error enrolling individual: ".concat(t.t0),e.form);case 10:case"end":return t.stop()}}),t,null,[[0,6]])})))()},onClose:function(){this.$emit("update:isOpen",!1),this.form={organization:this.organization,dateFrom:"",dateTo:""},this.errorMessage=""}},watch:{organization:function(e){this.form.organization=e}}};var F=n(64621);const x=(0,F.A)(D,[["render",k],["__scopeId","data-v-65b7cc04"]]),C=x},88075:(e,t,n)=>{"use strict";n.d(t,{A:()=>X});n(1688),n(23288),n(62010),n(79432);var r=n(20641),a=n(90033),o=n(13892),i=n(4189),u=n(30697),l=n(93745),s=n(41720),d=n(79669),c=n(86449),f=n(88249),m=n(83260),p=n(51161),g=function(e){return(0,r.Qi)("data-v-103b16bc"),e=e(),(0,r.jt)(),e},v={class:"text-subtitle-2"},k={key:0},h={key:0},b=g((function(){return(0,r.Lk)("tr",null,[(0,r.Lk)("th",{class:"text-left"},"Name"),(0,r.Lk)("th",{class:"text-left"},"From"),(0,r.Lk)("th",{class:"text-left"},"To")],-1)})),y=[b],_=g((function(){return(0,r.Lk)("span",null,"Organization",-1)})),D=["disabled"],F={class:"grey--text text--darken-2 ml-6"},x=["disabled"],C={class:"grey--text text--darken-2 ml-2"},w=g((function(){return(0,r.Lk)("span",null,"Add to team",-1)})),L=g((function(){return(0,r.Lk)("span",null,"Remove affiliation",-1)})),V={class:"ma-2 mr-0"},z={class:"d-flex align-center"},A={class:"ml-3 mr-4"},S=["disabled"],M={class:"grey--text text--darken-2 ml-6"},W=["disabled"],O={class:"grey--text text--darken-2 ml-2"},E=g((function(){return(0,r.Lk)("span",null,"Remove affiliation",-1)}));function q(e,t,n,g,b,q){var I=(0,r.g2)("date-input");return(0,r.uX)(),(0,r.CE)("div",null,[(0,r.bF)(c.w,null,{default:(0,r.k6)((function(){return[(0,r.Lk)("span",v," Organizations ("+(0,a.v_)(Object.keys(b.items).length)+") ",1),n.compact?(0,r.Q3)("",!0):((0,r.uX)(),(0,r.CE)("div",k,[(0,r.bF)(o.D,{class:"mr-4",size:"small",variant:"outlined",disabled:n.isLocked,onClick:t[0]||(t[0]=function(t){return e.$emit("openEnrollmentModal")})},{default:(0,r.k6)((function(){return[(0,r.bF)(d.w,{size:"small",start:""},{default:(0,r.k6)((function(){return[(0,r.eW)("mdi-plus")]})),_:1}),(0,r.eW)(" Add ")]})),_:1},8,["disabled"]),(0,r.bF)(o.D,{size:"small",variant:"outlined",disabled:n.enrollments.length<1||n.isLocked,onClick:q.withdrawAll},{default:(0,r.k6)((function(){return[(0,r.bF)(d.w,{size:"small",start:""},{default:(0,r.k6)((function(){return[(0,r.eW)("mdi-delete")]})),_:1}),(0,r.eW)(" Remove all ")]})),_:1},8,["disabled","onClick"])]))]})),_:1}),n.compact?((0,r.uX)(),(0,r.Wv)(m.Z,{key:0,density:"compact"},{default:(0,r.k6)((function(){return[n.enrollments.length>0?((0,r.uX)(),(0,r.CE)("thead",h,y)):(0,r.Q3)("",!0),(0,r.Lk)("tbody",null,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(n.enrollments,(function(e){return(0,r.uX)(),(0,r.CE)("tr",{key:e.name},[(0,r.Lk)("td",null,(0,a.v_)(e.group.name),1),(0,r.Lk)("td",null,(0,a.v_)(q.formatDate(e.start)),1),(0,r.Lk)("td",null,(0,a.v_)(q.formatDate(e.end)),1)])})),128))])]})),_:1})):((0,r.uX)(!0),(0,r.CE)(r.FK,{key:1},(0,r.pI)(b.items,(function(t,c){return(0,r.uX)(),(0,r.CE)("div",{key:c,class:"ma-4"},[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(t.enrollments,(function(t,m){return(0,r.uX)(),(0,r.CE)("div",{key:m,class:"mb-2 d-flex justify-space-between align-center"},[(0,r.Lk)("div",null,[(0,r.bF)(p.y,{location:"bottom"},{activator:(0,r.k6)((function(e){var t=e.props;return[(0,r.bF)(d.w,(0,r.v6)(t,{class:"mr-3"}),{default:(0,r.k6)((function(){return[(0,r.eW)(" mdi-sitemap ")]})),_:2},1040)]})),default:(0,r.k6)((function(){return[_]})),_:1}),(0,r.eW)(" "+(0,a.v_)(c)+" ",1),(0,r.bF)(f.q,{modelValue:t.form.fromDateMenu,"onUpdate:modelValue":function(e){return t.form.fromDateMenu=e},"close-on-content-click":!1,"return-value":t.form.fromDate,"onUpdate:returnValue":function(e){return t.form.fromDate=e},transition:"scale-transition","offset-y":"","min-width":"290px"},{activator:(0,r.k6)((function(e){var o=e.props;return[(0,r.Lk)("button",(0,r.v6)({disabled:n.isLocked},o,{class:"v-small-dialog__activator"}),[(0,r.Lk)("span",F,(0,a.v_)(q.formatDate(t.start)),1),(0,r.bF)(d.w,{size:"small",end:""},{default:(0,r.k6)((function(){return[(0,r.eW)(" mdi-lead-pencil ")]})),_:1})],16,D)]})),default:(0,r.k6)((function(){return[(0,r.bF)(i.J,{"min-width":"180"},{default:(0,r.k6)((function(){return[(0,r.bF)(u.O,null,{default:(0,r.k6)((function(){return[(0,r.bF)(I,{modelValue:t.form.fromDate,"onUpdate:modelValue":function(e){return t.form.fromDate=e},label:"Date from","nudge-top":"20","nudge-right":"10",max:t.end},null,8,["modelValue","onUpdate:modelValue","max"])]})),_:2},1024),(0,r.bF)(l.S,{class:"pt-0"},{default:(0,r.k6)((function(){return[(0,r.bF)(s.h),(0,r.bF)(o.D,{text:"",color:"primary",onClick:function(e){return t.form.fromDateMenu=!1}},{default:(0,r.k6)((function(){return[(0,r.eW)(" Cancel ")]})),_:2},1032,["onClick"]),(0,r.bF)(o.D,{disabled:!t.form.fromDate,color:"primary",text:"",onClick:function(n){e.$emit("updateEnrollment",{fromDate:t.start,toDate:t.end,newFromDate:t.form.fromDate,group:t.group.name}),t.form.fromDateMenu=!1}},{default:(0,r.k6)((function(){return[(0,r.eW)(" Save ")]})),_:2},1032,["disabled","onClick"])]})),_:2},1024)]})),_:2},1024)]})),_:2},1032,["modelValue","onUpdate:modelValue","return-value","onUpdate:returnValue"]),(0,r.bF)(f.q,{modelValue:t.form.toDateMenu,"onUpdate:modelValue":function(e){return t.form.toDateMenu=e},"close-on-content-click":!1,"return-value":t.form.toDate,"onUpdate:returnValue":function(e){return t.form.toDate=e},transition:"scale-transition","offset-y":"","min-width":"290px"},{activator:(0,r.k6)((function(e){var o=e.props;return[(0,r.Lk)("button",(0,r.v6)({disabled:n.isLocked},o,{class:"v-small-dialog__activator ml-5"}),[(0,r.Lk)("span",C,(0,a.v_)(q.formatDate(t.end)),1),(0,r.bF)(d.w,{size:"small",end:""},{default:(0,r.k6)((function(){return[(0,r.eW)(" mdi-lead-pencil ")]})),_:1})],16,x)]})),default:(0,r.k6)((function(){return[(0,r.bF)(i.J,{"min-width":"180"},{default:(0,r.k6)((function(){return[(0,r.bF)(u.O,null,{default:(0,r.k6)((function(){return[(0,r.bF)(I,{modelValue:t.form.toDate,"onUpdate:modelValue":function(e){return t.form.toDate=e},min:t.start,label:"Date to","nudge-top":"20","nudge-right":"10"},null,8,["modelValue","onUpdate:modelValue","min"])]})),_:2},1024),(0,r.bF)(l.S,{class:"pt-0"},{default:(0,r.k6)((function(){return[(0,r.bF)(s.h),(0,r.bF)(o.D,{text:"",color:"primary",onClick:function(e){return t.form.toDateMenu=!1}},{default:(0,r.k6)((function(){return[(0,r.eW)(" Cancel ")]})),_:2},1032,["onClick"]),(0,r.bF)(o.D,{disabled:!t.form.toDate,color:"primary",text:"",onClick:function(n){e.$emit("updateEnrollment",{fromDate:t.start,toDate:t.end,newToDate:t.form.toDate,group:t.group.name}),t.form.toDateMenu=!1}},{default:(0,r.k6)((function(){return[(0,r.eW)(" Save ")]})),_:2},1032,["disabled","onClick"])]})),_:2},1024)]})),_:2},1024)]})),_:2},1032,["modelValue","onUpdate:modelValue","return-value","onUpdate:returnValue"])]),(0,r.Lk)("div",null,[(0,r.bF)(p.y,{location:"bottom",transition:"expand-y-transition","open-delay":"200"},{activator:(0,r.k6)((function(a){var i=a.props;return[(0,r.bF)(o.D,(0,r.v6)({disabled:n.isLocked,icon:"mdi-account-multiple-plus",variant:"text"},i,{onClick:function(n){return e.$emit("openTeamModal",t.group.name)}}),null,16,["disabled","onClick"])]})),default:(0,r.k6)((function(){return[w]})),_:2},1024),(0,r.bF)(p.y,{location:"bottom",transition:"expand-y-transition","open-delay":"200"},{activator:(0,r.k6)((function(a){var i=a.props;return[(0,r.bF)(o.D,(0,r.v6)({icon:"mdi-delete"},i,{variant:"text",disabled:n.isLocked,onClick:function(n){return e.$emit("withdraw",{name:t.group.name,fromDate:t.start,toDate:t.end})}}),null,16,["disabled","onClick"])]})),default:(0,r.k6)((function(){return[L]})),_:2},1024)])])})),128)),(0,r.Lk)("ul",V,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(t.teams,(function(t){return(0,r.uX)(),(0,r.CE)("li",{key:t.group.name,class:"d-flex justify-space-between pr-0"},[(0,r.Lk)("div",z,[(0,r.Lk)("span",A,(0,a.v_)(t.group.name),1),(0,r.bF)(f.q,{modelValue:t.form.fromDateMenu,"onUpdate:modelValue":function(e){return t.form.fromDateMenu=e},"close-on-content-click":!1,"return-value":t.form.fromDate,"onUpdate:returnValue":function(e){return t.form.fromDate=e},transition:"scale-transition","offset-y":"","min-width":"290px"},{activator:(0,r.k6)((function(e){var o=e.props;return[(0,r.Lk)("button",(0,r.v6)({disabled:n.isLocked},o,{class:"v-small-dialog__activator"}),[(0,r.Lk)("span",M,(0,a.v_)(q.formatDate(t.start)),1),(0,r.bF)(d.w,{size:"small",end:""},{default:(0,r.k6)((function(){return[(0,r.eW)(" mdi-lead-pencil ")]})),_:1})],16,S)]})),default:(0,r.k6)((function(){return[(0,r.bF)(i.J,{"min-width":"180"},{default:(0,r.k6)((function(){return[(0,r.bF)(u.O,null,{default:(0,r.k6)((function(){return[(0,r.bF)(I,{modelValue:t.form.fromDate,"onUpdate:modelValue":function(e){return t.form.fromDate=e},max:t.end,label:"Date to","nudge-top":"20","nudge-right":"10"},null,8,["modelValue","onUpdate:modelValue","max"])]})),_:2},1024),(0,r.bF)(l.S,null,{default:(0,r.k6)((function(){return[(0,r.bF)(s.h),(0,r.bF)(o.D,{text:"",color:"primary",onClick:function(e){return t.form.fromDateMenu=!1}},{default:(0,r.k6)((function(){return[(0,r.eW)(" Cancel ")]})),_:2},1032,["onClick"]),(0,r.bF)(o.D,{text:"",color:"primary",onClick:function(n){e.$emit("updateEnrollment",{fromDate:t.start,toDate:t.end,newFromDate:new Date(t.form.fromDate).toISOString(),group:t.group.name,parentOrg:t.group.parentOrg.name}),t.form.fromDateMenu=!1}},{default:(0,r.k6)((function(){return[(0,r.eW)(" Save ")]})),_:2},1032,["onClick"])]})),_:2},1024)]})),_:2},1024)]})),_:2},1032,["modelValue","onUpdate:modelValue","return-value","onUpdate:returnValue"]),(0,r.eW)(" - "),(0,r.bF)(f.q,{modelValue:t.form.toDateMenu,"onUpdate:modelValue":function(e){return t.form.toDateMenu=e},"close-on-content-click":!1,"return-value":t.form.toDate,"onUpdate:returnValue":function(e){return t.form.toDate=e},transition:"scale-transition","offset-y":"","min-width":"290px"},{activator:(0,r.k6)((function(e){var o=e.props;return[(0,r.Lk)("button",(0,r.v6)({disabled:n.isLocked},o,{class:"v-small-dialog__activator ml-5"}),[(0,r.Lk)("span",O,(0,a.v_)(q.formatDate(t.end)),1),(0,r.bF)(d.w,{size:"small",end:""},{default:(0,r.k6)((function(){return[(0,r.eW)(" mdi-lead-pencil ")]})),_:1})],16,W)]})),default:(0,r.k6)((function(){return[(0,r.bF)(i.J,{"min-width":"180"},{default:(0,r.k6)((function(){return[(0,r.bF)(u.O,null,{default:(0,r.k6)((function(){return[(0,r.bF)(I,{modelValue:t.form.toDate,"onUpdate:modelValue":function(e){return t.form.toDate=e},min:t.start,label:"Date to","nudge-top":"20","nudge-right":"10"},null,8,["modelValue","onUpdate:modelValue","min"])]})),_:2},1024),(0,r.bF)(l.S,{class:"pt-0"},{default:(0,r.k6)((function(){return[(0,r.bF)(s.h),(0,r.bF)(o.D,{text:"",color:"primary",onClick:function(e){return t.form.toDateMenu=!1}},{default:(0,r.k6)((function(){return[(0,r.eW)(" Cancel ")]})),_:2},1032,["onClick"]),(0,r.bF)(o.D,{disabled:!t.form.toDate,color:"primary",text:"",onClick:function(n){e.$emit("updateEnrollment",{fromDate:t.start,toDate:t.end,newToDate:new Date(t.form.toDate).toISOString(),group:t.group.name,parentOrg:t.group.parentOrg.name}),t.form.toDateMenu=!1}},{default:(0,r.k6)((function(){return[(0,r.eW)(" Save ")]})),_:2},1032,["disabled","onClick"])]})),_:2},1024)]})),_:2},1024)]})),_:2},1032,["modelValue","onUpdate:modelValue","return-value","onUpdate:returnValue"])]),(0,r.bF)(p.y,{location:"bottom",transition:"expand-y-transition","open-delay":"200"},{activator:(0,r.k6)((function(a){var i=a.props;return[(0,r.bF)(o.D,(0,r.v6)({disabled:n.isLocked,icon:"mdi-delete",variant:"text"},i,{onClick:function(n){return e.$emit("withdraw",{name:t.group.name,fromDate:t.start,toDate:t.end,parentOrg:t.group.parentOrg.name})}}),null,16,["disabled","onClick"])]})),default:(0,r.k6)((function(){return[E]})),_:2},1024)])})),128))])])})),128))])}n(51629),n(44114),n(72712),n(26099),n(23500);var I=n(46266);const T={name:"EnrollmentList",components:{DateInput:I.A},props:{enrollments:{type:Array,required:!0},compact:{type:Boolean,required:!1,default:!1},isLocked:{type:Boolean,required:!1,default:!1}},data:function(){return{items:{}}},methods:{formatDate:function(e){return e.split("T")[0]},groupEnrollments:function(e){return e.reduce((function(e,t){var n={fromDate:t.start.split("T")[0],fromDateMenu:!1,toDate:t.end.split("T")[0],toDateMenu:!1};if(t.group.parentOrg){var r=t.group.parentOrg.name;e[r]||(e[r]={enrollments:[],teams:[]}),t=Object.assign({},t,{form:n}),e[r].teams.push(t)}else{var a=t.group.name;e[a]||(e[a]={enrollments:[],teams:[]}),t=Object.assign({},t,{form:n}),e[a].enrollments.push(t)}return e}),{})},withdrawAll:function(){var e=this;this.enrollments.forEach((function(t){e.$emit("withdraw",{name:t.group.name,fromDate:t.start,toDate:t.end,parentOrg:t.group.parentOrg?t.group.parentOrg.name:null})}))}},watch:{enrollments:function(e){this.items=this.groupEnrollments(e)}},created:function(){this.items=this.groupEnrollments(this.enrollments)}};var U=n(64621);const $=(0,U.A)(T,[["render",q],["__scopeId","data-v-103b16bc"]]),X=$},78521:(e,t,n)=>{"use strict";n.d(t,{A:()=>m});var r=n(20641),a=n(90033);function o(e,t,n,o,i,u){var l=(0,r.g2)("identities-list"),s=(0,r.g2)("enrollment-list");return(0,r.uX)(),(0,r.CE)("td",{class:(0,a.C4)({compact:n.compact}),colspan:"5"},[(0,r.bF)(l,{identities:n.identities,uuid:n.uuid,compact:n.compact,"is-locked":n.isLocked,draggable:"",onUnmerge:t[0]||(t[0]=function(t){return e.$emit("unmerge",t)})},null,8,["identities","uuid","compact","is-locked"]),(0,r.bF)(s,{enrollments:n.enrollments,compact:n.compact,"is-locked":n.isLocked,onOpenEnrollmentModal:t[1]||(t[1]=function(t){return e.$emit("openEnrollmentModal")}),onOpenTeamModal:t[2]||(t[2]=function(t){return e.$emit("openTeamModal",{uuid:n.uuid,organization:t,enrollments:n.enrollments})}),onUpdateEnrollment:t[3]||(t[3]=function(t){return e.$emit("updateEnrollment",Object.assign(t,{uuid:n.uuid}))}),onWithdraw:t[4]||(t[4]=function(t){return e.$emit("withdraw",t)})},null,8,["enrollments","compact","is-locked"])],2)}var i=n(14048),u=n(30388),l=n(57712),s=n(88075);const d={name:"ExpandedIndividual",components:{IdentitiesList:l.A,EnrollmentList:s.A},props:{gender:{type:String,required:!1},country:{type:Object,required:!1},isBot:{type:Boolean,required:!1},isLocked:{type:Boolean,required:!1},identities:{type:Array,required:!0},enrollments:{type:Array,required:!0},compact:{type:Boolean,required:!1,default:!1},uuid:{type:String,required:!0},getCountries:{type:Function,required:!1}},data:function(){return{countries:[],form:{gender:this.gender,country:this.country,isBot:this.isBot},enrollmentsForm:[]}},methods:{getCountryList:function(){var e=this;return(0,u.A)((0,i.A)().mark((function t(){var n;return(0,i.A)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getCountries();case 2:n=t.sent,n&&(e.countries=n);case 4:case"end":return t.stop()}}),t)})))()}}};var c=n(64621);const f=(0,c.A)(d,[["render",o],["__scopeId","data-v-f64f804c"]]),m=f},57712:(e,t,n)=>{"use strict";n.d(t,{A:()=>$});n(62010);var r=n(20641),a=n(90033),o=n(13892),i=n(4189),u=n(85832),l=n(79669),s=n(86449),d=n(69915),c=n(57254),f=n(83260),m=n(51161),p=function(e){return(0,r.Qi)("data-v-5d95be59"),e=e(),(0,r.jt)(),e},g={class:"text-subtitle-2"},v={key:0},k=p((function(){return(0,r.Lk)("tr",null,[(0,r.Lk)("th",{class:"text-left"},"Name"),(0,r.Lk)("th",{class:"text-left"},"Email"),(0,r.Lk)("th",{class:"text-left"},"Username"),(0,r.Lk)("th",{class:"text-left"},"Source")],-1)})),h=[k],b=p((function(){return(0,r.Lk)("span",null,"Split identity",-1)})),y=p((function(){return(0,r.Lk)("span",null,"Move identity",-1)}));function _(e,t,n,p,k,_){var D=(0,r.g2)("identity");return(0,r.uX)(),(0,r.CE)("div",null,[(0,r.bF)(s.w,null,{default:(0,r.k6)((function(){return[(0,r.Lk)("span",g,"Identities ("+(0,a.v_)(_.identitiesCount)+")",1),n.compact?(0,r.Q3)("",!0):((0,r.uX)(),(0,r.Wv)(o.D,{key:0,disabled:1===_.identitiesCount||n.isLocked,onClick:_.splitAll},{default:(0,r.k6)((function(){return[(0,r.bF)(l.w,{size:"small",start:""},{default:(0,r.k6)((function(){return[(0,r.eW)("mdi-call-split")]})),_:1}),(0,r.eW)(" Split all ")]})),_:1},8,["disabled","onClick"]))]})),_:1}),n.compact?((0,r.uX)(),(0,r.Wv)(f.Z,{key:0,density:"compact"},{default:(0,r.k6)((function(){return[_.identitiesCount>0?((0,r.uX)(),(0,r.CE)("thead",v,h)):(0,r.Q3)("",!0),(0,r.Lk)("tbody",null,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(_.flatIdentities,(function(e){return(0,r.uX)(),(0,r.CE)("tr",{key:e.uuid},[(0,r.Lk)("td",null,(0,a.v_)(e.name||"-"),1),(0,r.Lk)("td",null,(0,a.v_)(e.email||"-"),1),(0,r.Lk)("td",null,(0,a.v_)(e.username||"-"),1),(0,r.Lk)("td",null,[(0,r.bF)(m.y,{location:"bottom",transition:"expand-y-transition","open-delay":"300"},{activator:(0,r.k6)((function(t){var n=t.props;return[(0,r.bF)(l.w,(0,r.v6)(n,{size:"small"}),{default:(0,r.k6)((function(){return[(0,r.eW)((0,a.v_)(e.icon),1)]})),_:2},1040)]})),default:(0,r.k6)((function(){return[(0,r.Lk)("span",null,(0,a.v_)(e.source.toLowerCase()),1)]})),_:2},1024)])])})),128))])]})),_:1})):((0,r.uX)(!0),(0,r.CE)(r.FK,{key:1},(0,r.pI)(n.identities,(function(i,u){return(0,r.uX)(),(0,r.Wv)(d.x,{key:i.name,class:(0,a.C4)([{"row-border":u!==n.identities.length-1},"indented"]),dense:""},{default:(0,r.k6)((function(){return[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(_.sortSources(i.identities,"source"),(function(u,s){return(0,r.uX)(),(0,r.Wv)(c.g,{class:(0,a.C4)({draggable:n.draggable&&u.uuid!==n.uuid}),key:u.uuid,draggable:n.draggable&&!n.isLocked&&u.uuid!==n.uuid,onDragstart:function(e){return _.startDrag(u,e)},onDragend:t[0]||(t[0]=function(e){return _.dragEnd(e)})},{prepend:(0,r.k6)((function(){return[(0,r.bF)(m.y,{location:"bottom",transition:"expand-y-transition","open-delay":"300"},{activator:(0,r.k6)((function(e){var t=e.props;return[0===s?((0,r.uX)(),(0,r.Wv)(l.w,(0,a._B)((0,r.v6)({key:0},t)),{default:(0,r.k6)((function(){return[(0,r.eW)((0,a.v_)(i.icon),1)]})),_:2},1040)):(0,r.Q3)("",!0)]})),default:(0,r.k6)((function(){return[(0,r.Lk)("span",null,(0,a.v_)(i.name),1)]})),_:2},1024)]})),append:(0,r.k6)((function(){return[(0,r.bF)(m.y,{location:"bottom",transition:"expand-y-transition","open-delay":"200"},{activator:(0,r.k6)((function(t){var a=t.props;return[(0,r.bF)(o.D,(0,r.v6)({icon:"mdi-call-split",variant:"text",disabled:u.uuid===n.uuid||n.isLocked},a,{onClick:function(t){return e.$emit("unmerge",[u.uuid,n.uuid])}}),null,16,["disabled","onClick"])]})),default:(0,r.k6)((function(){return[b]})),_:2},1024),(0,r.bF)(m.y,{location:"bottom",transition:"expand-y-transition","open-delay":"200"},{activator:(0,r.k6)((function(e){var t=e.props;return[n.draggable?((0,r.uX)(),(0,r.Wv)(l.w,(0,r.v6)({key:0,disabled:u.uuid===n.uuid||n.isLocked},t),{default:(0,r.k6)((function(){return[(0,r.eW)(" mdi-drag-vertical ")]})),_:2},1040,["disabled"])):(0,r.Q3)("",!0)]})),default:(0,r.k6)((function(){return[y]})),_:2},1024)]})),default:(0,r.k6)((function(){return[(0,r.bF)(D,{uuid:u.uuid,name:u.name,email:u.email,username:u.username,source:u.source||i.name,"is-main":u.uuid===n.uuid},null,8,["uuid","name","email","username","source","is-main"])]})),_:2},1032,["class","draggable","onDragstart"])})),128))]})),_:2},1032,["class"])})),128)),(0,r.bF)(i.J,{class:"dragged-identity",color:"primary",dark:""},{default:(0,r.k6)((function(){return[(0,r.bF)(u.Z,null,{default:(0,r.k6)((function(){return[(0,r.eW)(" Moving 1 identity")]})),_:1})]})),_:1})])}n(46449),n(62062),n(72712),n(34782),n(26910),n(93514),n(26099);var D=n(87524),F=n(56756),x=n(35526),C={class:"clip mr-1"},w={key:0,class:"d-sr-only"},L={class:"text-break"},V=["href"],z=["href"],A={key:2,class:"text-break"};function S(e,t,n,i,u,s){return(0,r.uX)(),(0,r.Wv)(F.L,{class:"d-flex align-center flex-nowrap","no-gutters":""},{default:(0,r.k6)((function(){return[(0,r.bF)(x.B,{class:"uuid d-flex align-center"},{default:(0,r.k6)((function(){return[(0,r.bF)(D.x,{class:(0,a.C4)(["text-center pr-2",{"v-chip--border":n.isMain}]),variant:n.isMain?"tonal":"outlined"},{default:(0,r.k6)((function(){return[(0,r.Lk)("span",C,(0,a.v_)(n.uuid),1),n.isMain?((0,r.uX)(),(0,r.CE)("span",w," Main identity ")):(0,r.Q3)("",!0),(0,r.bF)(m.y,{"open-delay":"100",location:"bottom"},{activator:(0,r.k6)((function(e){var a=e.props;return[(0,r.bF)(o.D,(0,r.v6)(a,{density:"comfortable",icon:"mdi-content-copy",size:"small",variant:"text",onClick:t[0]||(t[0]=function(e){return s.copy(n.uuid)}),onMouseenter:s.resetCopyText}),null,16,["onMouseenter"])]})),default:(0,r.k6)((function(){return[(0,r.Lk)("span",null,(0,a.v_)(e.tooltip),1)]})),_:1})]})),_:1},8,["class","variant"])]})),_:1}),(0,r.bF)(x.B,{class:"ma-2",md:"2"},{default:(0,r.k6)((function(){return[(0,r.Lk)("span",null,(0,a.v_)(n.name),1)]})),_:1}),(0,r.bF)(x.B,{class:"ma-2",cols:"3"},{default:(0,r.k6)((function(){return[(0,r.Lk)("span",L,(0,a.v_)(n.email),1)]})),_:1}),(0,r.bF)(x.B,{class:"ma-2"},{default:(0,r.k6)((function(){var e,t;return["github"===(null===(e=n.source)||void 0===e?void 0:e.toLowerCase())?((0,r.uX)(),(0,r.CE)("a",{key:0,href:"http://github.com/".concat(n.username),class:"link--underline font-weight-regular",target:"_blank"},[(0,r.eW)((0,a.v_)(n.username)+" ",1),(0,r.bF)(l.w,{size:"x-small",end:""},{default:(0,r.k6)((function(){return[(0,r.eW)("mdi-open-in-new")]})),_:1})],8,V)):"linkedin"===(null===(t=n.source)||void 0===t?void 0:t.toLowerCase())?((0,r.uX)(),(0,r.CE)("a",{key:1,href:"https://www.linkedin.com/in/".concat(n.username),class:"link--underline font-weight-regular",target:"_blank"},[(0,r.eW)((0,a.v_)(n.username)+" ",1),(0,r.bF)(l.w,{size:"x-small",end:""},{default:(0,r.k6)((function(){return[(0,r.eW)("mdi-open-in-new")]})),_:1})],8,z)):((0,r.uX)(),(0,r.CE)("span",A,(0,a.v_)(n.username),1))]})),_:1}),null!==n.source?((0,r.uX)(),(0,r.Wv)(x.B,{key:0,class:"ma-2"},{default:(0,r.k6)((function(){return[(0,r.Lk)("span",null,(0,a.v_)(n.source),1)]})),_:1})):(0,r.Q3)("",!0)]})),_:1})}var M="Copy full UUID",W="Copied";const O={name:"identity",props:{uuid:{type:String,required:!0},name:{type:String,required:!1},email:{type:String,required:!1},username:{type:String,required:!1},source:{type:String,required:!1,default:null},isMain:{type:Boolean,required:!1}},data:function(){return{tooltip:M}},methods:{copy:function(e){var t=this;navigator.clipboard.writeText(e).then((function(){t.tooltip=W}))},resetCopyText:function(){this.tooltip=M}}};var E=n(64621);const q=(0,E.A)(O,[["render",S],["__scopeId","data-v-82224040"]]),I=q,T={name:"IdentitiesList",components:{Identity:I},props:{identities:{type:Array,required:!0},isLocked:{type:Boolean,required:!1,default:!1},compact:{type:Boolean,required:!1,default:!1},uuid:{type:String,required:!0},draggable:{type:Boolean,required:!1,default:!1}},methods:{sortSources:function(e,t){return e.slice().sort((function(e,n){var r=e[t].toLowerCase(),a=n[t].toLowerCase();return r.localeCompare(a)}))},startDrag:function(e,t){var n=document.querySelector(".dragged-identity");t.dataTransfer.setDragImage(n,0,0),t.dataTransfer.effectAllowed="move",t.dataTransfer.setData("type","move"),t.dataTransfer.setData("uuid",e.uuid),t.target.classList.add("dragging")},dragEnd:function(e){e.target.classList.remove("dragging")},splitAll:function(){var e=this.flatIdentities.map((function(e){return e.uuid}));this.$emit("unmerge",e)}},computed:{identitiesCount:function(){return this.identities.reduce((function(e,t){return e+t.identities.length}),0)},sources:function(){return this.identities.map((function(e){return e.name}))},flatIdentities:function(){return this.identities.map((function(e){return e.identities.map((function(t){return Object.assign({icon:e.icon},t)}))})).flat()}}},U=(0,E.A)(T,[["render",_],["__scopeId","data-v-5d95be59"]]),$=U},49659:(e,t,n)=>{"use strict";n.d(t,{A:()=>_});n(62010);var r=n(20641),a=n(53751),o=n(90033),i=n(13892),u=n(4189),l=n(79669),s=n(57254),d=n(4913),c=n(97505),f=n(88249),m=n(51161);function p(e,t,n,p,g,v){var k=(0,r.g2)("avatar"),h=(0,r.g2)("router-link"),b=(0,r.g2)("expanded-individual");return(0,r.uX)(),(0,r.Wv)(u.J,(0,r.v6)({class:["mx-auto",{locked:n.isLocked,dropzone:g.isDragging,selected:n.isSelected,highlighted:n.isHighlighted,disabled:!n.selectable}],ripple:n.selectable},e.$attrs,{onDrop:t[5]||(t[5]=(0,a.D$)((function(e){return v.onDrop(e)}),["prevent","stop"])),onDragover:t[6]||(t[6]=(0,a.D$)((function(e){return v.isDropZone(e,!0)}),["prevent","stop"])),onDragenter:t[7]||(t[7]=(0,a.D$)((function(e){return v.isDropZone(e,!0)}),["prevent","stop"])),onDragleave:t[8]||(t[8]=function(e){return v.isDropZone(e,!1)}),onClick:v.selectIndividual}),{prepend:(0,r.k6)((function(){return[(0,r.bF)(k,{name:n.name,email:n.email,size:30},null,8,["name","email"])]})),item:(0,r.k6)((function(){return[(0,r.bF)(s.g,{class:"grow pa-2",lines:"three"},{default:(0,r.k6)((function(){return[(0,r.bF)(d.U,{class:"font-weight-medium"},{default:(0,r.k6)((function(){return[(0,r.bF)(h,{to:{name:"Individual",params:{mk:n.uuid}},target:"_blank",class:"link--underline"},{default:(0,r.k6)((function(){return[(0,r.Lk)("span",{onClick:t[0]||(t[0]=(0,a.D$)((function(){}),["stop"]))},(0,o.v_)(n.name||n.email),1)]})),_:1},8,["to"])]})),_:1}),v.organization?((0,r.uX)(),(0,r.Wv)(c.w,{key:0},{default:(0,r.k6)((function(){return[(0,r.eW)((0,o.v_)(v.organization),1)]})),_:1})):(0,r.Q3)("",!0),(0,r.bF)(c.w,null,{default:(0,r.k6)((function(){return[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(n.sources,(function(e){return(0,r.uX)(),(0,r.Wv)(m.y,{key:e.name,location:"bottom",transition:"expand-y-transition","open-delay":"300"},{activator:(0,r.k6)((function(t){var n=t.props;return[(0,r.bF)(l.w,(0,r.v6)(n,{size:"small",start:""}),{default:(0,r.k6)((function(){return[(0,r.eW)((0,o.v_)(e.icon),1)]})),_:2},1040)]})),default:(0,r.k6)((function(){return[(0,r.Lk)("span",null,(0,o.v_)(e.name),1)]})),_:2},1024)})),128))]})),_:1})]})),_:1})]})),append:(0,r.k6)((function(){return[n.isLocked?((0,r.uX)(),(0,r.Wv)(l.w,{key:0,size:"x-small",class:"mr-2"},{default:(0,r.k6)((function(){return[(0,r.eW)("mdi-lock")]})),_:1})):(0,r.Q3)("",!0),(0,r.bF)(f.q,{offset:"4",location:"right","close-on-content-click":!1},{activator:(0,r.k6)((function(e){var n=e.props;return[(0,r.bF)(i.D,(0,r.v6)({variant:"text",class:"mr-1",density:"compact",icon:"mdi-magnify-plus-outline"},n,{"data-cy":"expand-button","aria-label":"Expand information",onMousedown:t[1]||(t[1]=(0,a.D$)((function(){}),["stop"])),onKeyup:t[2]||(t[2]=(0,a.D$)((function(){}),["stop"]))}),null,16)]})),default:(0,r.k6)((function(){return[(0,r.bF)(u.J,{class:"pa-1"},{default:(0,r.k6)((function(){return[(0,r.bF)(b,{compact:"",enrollments:n.enrollments,identities:n.identities,uuid:n.uuid},null,8,["enrollments","identities","uuid"])]})),_:1})]})),_:1}),n.closable?((0,r.uX)(),(0,r.Wv)(i.D,{key:1,icon:"mdi-close",density:"compact",variant:"text","aria-label":"Remove",onClick:t[3]||(t[3]=(0,a.D$)((function(t){return e.$emit("remove")}),["stop"])),onMousedown:t[4]||(t[4]=(0,a.D$)((function(){}),["stop"]))})):(0,r.Q3)("",!0)]})),default:(0,r.k6)((function(){return[(0,r.RG)(e.$slots,"default",{},void 0,!0)]})),_:3},16,["class","ripple","onClick"])}var g=n(74721),v=(n(28706),n(2008),n(10838),n(74423),n(62062),n(79432),n(26099),n(21699),n(40018)),k=n(78521);const h={name:"individualcard",components:{Avatar:v.A,ExpandedIndividual:k.A},props:{name:{type:String,required:!1,default:null},email:{type:String,required:!1,default:null},sources:{type:Array,required:!1,default:function(){return[]}},isSelected:{type:Boolean,required:!1,default:!1},uuid:{type:String,required:!0},identities:{type:Array,required:!1},enrollments:{type:Array,required:!1},isHighlighted:{type:Boolean,required:!1,default:!1},isLocked:{type:Boolean,required:!0},closable:{type:Boolean,required:!1},selectable:{type:Boolean,required:!1}},data:function(){return{isDragging:!1}},computed:{organization:function(){return this.enrollments&&this.enrollments.length>0?this.enrollments.findLast((function(e){return!e.group.parentOrg})).group.name:null}},methods:{selectSourceIcon:function(e){var t=e.toLowerCase();return"others"===t?"mdi-account-multiple":"mdi-".concat(t)},onDrop:function(e){if(this.isDragging=!1,!this.isLocked){var t=e.dataTransfer.getData("type");"move"===t?this.moveIndividual(e):e.dataTransfer.getData("group")?this.enrollIndividual(e):this.mergeIndividuals(e)}},selectIndividual:function(){this.$emit("select")},moveIndividual:function(e){var t=e.dataTransfer.getData("uuid");this.$emit("move",{fromUuid:t,toUuid:this.uuid})},mergeIndividuals:function(e){var t=JSON.parse(e.dataTransfer.getData("individuals")),n=t.filter((function(e){return!e.isLocked})).map((function(e){return e.uuid}));n.length>0&&this.$emit("merge",[this.uuid].concat((0,g.A)(n)))},enrollIndividual:function(e){var t=e.dataTransfer.getData("group"),n=e.dataTransfer.getData("parentorg");this.$emit("enroll",{group:t,parentOrg:n})},isDropZone:function(e,t){var n=e.dataTransfer.types;t&&!n.includes("lockactions")?this.isDragging=!0:this.isDragging=!1}}};var b=n(64621);const y=(0,b.A)(h,[["render",p],["__scopeId","data-v-7fd3ecc5"]]),_=y},10978:(e,t,n)=>{"use strict";n.d(t,{A:()=>x});var r=n(20641),a=n(90033),o=n(53751),i=n(31969),u=n(13892),l=n(4189),s=n(91606),d=n(30697),c=n(93745),f=n(40276),m=n(91772),p=n(7511),g=n(41720),v=(0,r.Lk)("p",{class:"subtitle-2 mt-2"}," Find possible matches based on this profile's: ",-1),k={class:"my-4"};function h(e,t,n,h,b,y){var _=(0,r.g2)("router-link");return(0,r.uX)(),(0,r.Wv)(m.p,{modelValue:n.isOpen,"max-width":"500px","onClick:outside":y.closeModal},{default:(0,r.k6)((function(){return[(0,r.bF)(l.J,{class:"pa-3"},{default:(0,r.k6)((function(){return[(0,r.bF)(s.r,{class:"headline"},{default:(0,r.k6)((function(){return[(0,r.eW)("Recommend matches")]})),_:1}),b.jobId?((0,r.uX)(),(0,r.Wv)(d.O,{key:0},{default:(0,r.k6)((function(){return[(0,r.bF)(i.l,{type:"success",text:""},{default:(0,r.k6)((function(){return[(0,r.Lk)("p",null,[(0,r.eW)(" Enqueued job "),(0,r.Lk)("code",null,(0,a.v_)(b.jobId),1),(0,r.eW)(" to recommend matches. ")]),(0,r.bF)(_,{to:{name:"Jobs"},target:"_blank"},{default:(0,r.k6)((function(){return[(0,r.eW)(" View jobs ")]})),_:1})]})),_:1})]})),_:1})):((0,r.uX)(),(0,r.Wv)(d.O,{key:1},{default:(0,r.k6)((function(){return[v,(0,r.Lk)("div",null,[(0,r.bF)(f.a,{modelValue:b.form.criteria,"onUpdate:modelValue":t[0]||(t[0]=function(e){return b.form.criteria=e}),label:"Name",value:"name",dense:"","hide-details":""},null,8,["modelValue"]),(0,r.bF)(f.a,{modelValue:b.form.criteria,"onUpdate:modelValue":t[1]||(t[1]=function(e){return b.form.criteria=e}),label:"Email",value:"email",dense:"","hide-details":""},null,8,["modelValue"]),(0,r.bF)(f.a,{modelValue:b.form.criteria,"onUpdate:modelValue":t[2]||(t[2]=function(e){return b.form.criteria=e}),label:"Username",value:"username",dense:""},null,8,["modelValue"])]),(0,r.bF)(p.G),(0,r.Lk)("div",k,[(0,r.bF)(f.a,{modelValue:b.form.strict,"onUpdate:modelValue":t[3]||(t[3]=function(e){return b.form.strict=e}),label:"Strict matching criteria",dense:"","hide-details":""},null,8,["modelValue"]),(0,r.bF)(f.a,{modelValue:b.form.exclude,"onUpdate:modelValue":t[4]||(t[4]=function(e){return b.form.exclude=e}),label:"Exclude individuals in RecommenderExclusionTerm list",dense:"","hide-details":""},null,8,["modelValue"])]),b.error?((0,r.uX)(),(0,r.Wv)(i.l,{key:0,dense:"",text:"",type:"error"},{default:(0,r.k6)((function(){return[(0,r.eW)((0,a.v_)(b.error),1)]})),_:1})):(0,r.Q3)("",!0)]})),_:1})),b.jobId?((0,r.uX)(),(0,r.Wv)(c.S,{key:2},{default:(0,r.k6)((function(){return[(0,r.bF)(g.h),(0,r.bF)(u.D,{text:"",color:"primary",onClick:y.closeModal},{default:(0,r.k6)((function(){return[(0,r.eW)(" OK ")]})),_:1},8,["onClick"])]})),_:1})):((0,r.uX)(),(0,r.Wv)(c.S,{key:3},{default:(0,r.k6)((function(){return[(0,r.bF)(g.h),(0,r.bF)(u.D,{text:"",onClick:y.closeModal},{default:(0,r.k6)((function(){return[(0,r.eW)(" Cancel ")]})),_:1},8,["onClick"]),(0,r.bF)(u.D,{color:"primary",id:"confirm",depressed:"",onClick:(0,o.D$)(y.createJob,["stop"])},{default:(0,r.k6)((function(){return[(0,r.eW)(" Confirm ")]})),_:1},8,["onClick"])]})),_:1}))]})),_:1})]})),_:1},8,["modelValue","onClick:outside"])}var b=n(14048),y=n(30388);const _={name:"MatchesModal",props:{isOpen:{type:Boolean,required:!0},recommendMatches:{type:Function,required:!0},uuid:{type:String,required:!0}},data:function(){return{form:{criteria:["name","email","username"],exclude:!0,strict:!0},jobId:null,error:null}},methods:{closeModal:function(){this.$emit("update:isOpen",!1),this.form={criteria:["name","email","username"],exclude:!0,strict:!0},this.error=null,this.jobId=null},createJob:function(){var e=this;return(0,y.A)((0,b.A)().mark((function t(){var n;return(0,b.A)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.recommendMatches(e.form.criteria,e.form.exclude,e.form.strict,[e.uuid]);case 3:n=t.sent,e.jobId=n.data.recommendMatches.jobId,t.next=11;break;case 7:t.prev=7,t.t0=t["catch"](0),e.error=e.$getErrorMessage(t.t0),e.$logger.error("Error recommending matches: ".concat(t.t0));case 11:case"end":return t.stop()}}),t,null,[[0,7]])})))()}}};var D=n(64621);const F=(0,D.A)(_,[["render",h]]),x=F},62477:(e,t,n)=>{"use strict";n.d(t,{A:()=>v});n(27495),n(5746);var r=n(20641),a=n(90033),o=n(92239),i=n(57254),u=n(4913),l=(0,r.Lk)("span",{class:"font-weight-regular"},"Create",-1);function s(e,t,n,s,d,c){return(0,r.uX)(),(0,r.Wv)(o.V,{modelValue:d.inputValue,"onUpdate:modelValue":t[0]||(t[0]=function(e){return d.inputValue=e}),items:d.organizations,label:n.label,loading:d.isLoading,filter:c.filterItems,"no-data-text":'No matches for "'.concat(d.searchValue,'"'),"hide-no-data":d.isLoading,"item-title":"name","item-value":"name",variant:"outlined",density:"comfortable",clearable:"","onUpdate:search":c.search},{"append-item":(0,r.k6)((function(){return[c.appendContent?((0,r.uX)(),(0,r.Wv)(i.g,{key:0,onClick:c.createOrganization},{default:(0,r.k6)((function(){return[(0,r.bF)(u.U,null,{default:(0,r.k6)((function(){return[l,(0,r.eW)(" "+(0,a.v_)(d.searchValue),1)]})),_:1})]})),_:1},8,["onClick"])):(0,r.Q3)("",!0)]})),_:1},8,["modelValue","items","label","loading","filter","no-data-text","hide-no-data","onUpdate:search"])}var d=n(74721),c=n(14048),f=n(30388);n(28706),n(15086),n(62010),n(26099),n(76031);const m={name:"OrganizationSelector",data:function(){return{inputValue:"",organizations:[],isLoading:!1,searchValue:null}},emits:["update:modelValue"],props:{addOrganization:{type:Function,required:!0},fetchOrganizations:{type:Function,required:!0},label:{type:String,required:!1,default:"Organization"}},methods:{debounceSearch:function(e){var t=this;clearTimeout(this.timer),this.timer=setTimeout((function(){t.getSelectorItems(e)}),500)},getSelectorItems:function(e){var t=this;return(0,f.A)((0,c.A)().mark((function n(){var r,a;return(0,c.A)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e?{term:e}:{},n.next=3,t.fetchOrganizations(1,10,r);case 3:a=n.sent,a&&(t.organizations=a.entities,t.isLoading=!1);case 5:case"end":return n.stop()}}),n)})))()},createOrganization:function(){var e=this;return(0,f.A)((0,c.A)().mark((function t(){var n,r;return(0,c.A)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.addOrganization(e.searchValue);case 3:n=t.sent,r={name:n.data.addOrganization.organization.name},e.organizations=[r].concat((0,d.A)(e.organizations)),e.inputValue=e.searchValue,e.$logger.debug('Created organization "'.concat(e.searchValue,'"')),t.next=14;break;case 10:t.prev=10,t.t0=t["catch"](0),e.$logger.error("Error creating organization: ".concat(t.t0)),e.$emit("error",e.$getErrorMessage(t.t0));case 14:case"end":return t.stop()}}),t,null,[[0,10]])})))()},filterItems:function(e){return e},search:function(e){this.searchValue=e,(!e||e.length>2&&e!==this.inputValue)&&(this.isLoading=!0,this.debounceSearch(e))}},computed:{appendContent:function(){var e=this;return this.searchValue&&!this.organizations.some((function(t){return t.name.toLowerCase()===e.searchValue.toLowerCase()||t.aliases.some((function(t){return t.alias.toLowerCase()===e.searchValue.toLowerCase()}))}))}},watch:{inputValue:function(){this.$emit("update:modelValue",this.inputValue)}},mounted:function(){this.getSelectorItems(this.value)}};var p=n(64621);const g=(0,p.A)(m,[["render",s]]),v=g},54640:(e,t,n)=>{"use strict";n.d(t,{A:()=>L});var r=n(20641),a=n(90033),o=n(53751),i=n(31969),u=n(13892),l=n(4189),s=n(91606),d=n(30697),c=n(93745),f=n(91772),m=n(1560),p=n(56756),g=n(35526),v=n(41720),k=n(43948),h={key:0,class:"title"},b={key:1,class:"title"};function y(e,t,n,y,_,D){var F=(0,r.g2)("date-input");return(0,r.uX)(),(0,r.Wv)(f.p,{"model-value":n.isOpen,persistent:"","max-width":"650"},{default:(0,r.k6)((function(){return[(0,r.bF)(l.J,{class:"section"},{default:(0,r.k6)((function(){return[(0,r.bF)(s.r,{class:"header"},{default:(0,r.k6)((function(){return[n.team?((0,r.uX)(),(0,r.CE)("span",h," Add to "+(0,a.v_)(n.team)+" in "+(0,a.v_)(n.organization),1)):((0,r.uX)(),(0,r.CE)("span",b,"Add to "+(0,a.v_)(n.organization)+" team",1))]})),_:1}),(0,r.bF)(d.O,{class:"mt-3"},{default:(0,r.k6)((function(){return[(0,r.bF)(m.n,{ref:"form"},{default:(0,r.k6)((function(){return[(0,r.bF)(p.L,null,{default:(0,r.k6)((function(){return[n.team?(0,r.Q3)("",!0):((0,r.uX)(),(0,r.Wv)(g.B,{key:0,cols:"4"},{default:(0,r.k6)((function(){return[(0,r.bF)(k.W,{modelValue:_.form.team,"onUpdate:modelValue":t[0]||(t[0]=function(e){return _.form.team=e}),rules:_.validations.required,label:"Team",outlined:"",dense:""},null,8,["modelValue","rules"])]})),_:1})),(0,r.bF)(g.B,{cols:n.team?6:4},{default:(0,r.k6)((function(){return[(0,r.bF)(F,{modelValue:_.form.dateFrom,"onUpdate:modelValue":t[1]||(t[1]=function(e){return _.form.dateFrom=e}),max:_.form.dateTo,label:"Date from",outlined:""},null,8,["modelValue","max"])]})),_:1},8,["cols"]),(0,r.bF)(g.B,{cols:n.team?6:4},{default:(0,r.k6)((function(){return[(0,r.bF)(F,{modelValue:_.form.dateTo,"onUpdate:modelValue":t[2]||(t[2]=function(e){return _.form.dateTo=e}),min:_.form.dateFrom,label:"Date to",outlined:""},null,8,["modelValue","min"])]})),_:1},8,["cols"])]})),_:1})]})),_:1},512),_.errorMessage?((0,r.uX)(),(0,r.Wv)(i.l,{key:0,text:"",type:"error"},{default:(0,r.k6)((function(){return[(0,r.eW)((0,a.v_)(_.errorMessage),1)]})),_:1})):(0,r.Q3)("",!0),(0,r.bF)(c.S,null,{default:(0,r.k6)((function(){return[(0,r.bF)(v.h),(0,r.bF)(u.D,{color:"primary darken-1",variant:"text",onClick:(0,o.D$)(D.closeModal,["prevent"])},{default:(0,r.k6)((function(){return[(0,r.eW)(" Cancel ")]})),_:1},8,["onClick"]),(0,r.bF)(u.D,{variant:"flat",color:"primary",disabled:!n.team&&!_.form.team,onClick:(0,o.D$)(D.onSave,["prevent"])},{default:(0,r.k6)((function(){return[(0,r.eW)(" Save ")]})),_:1},8,["disabled","onClick"])]})),_:1})]})),_:1})]})),_:1})]})),_:1},8,["model-value"])}var _=n(14048),D=n(30388),F=(n(28706),n(15086),n(62010),n(26099),n(46266));const x={name:"TeamEnrollModal",components:{DateInput:F.A},props:{isOpen:{type:Boolean,required:!1,default:!1},uuid:{type:String,required:!0},enrollments:{type:Array,required:!1},organization:{type:String,required:!1},team:{type:String,required:!1},enroll:{type:Function,required:!0}},data:function(){return{form:{team:null,dateFrom:null,dateTo:null},validations:{required:[function(e){return!!e||"Required"}]},errorMessage:null}},methods:{closeModal:function(){this.$emit("update:isOpen",!1),this.$emit("updateTable"),this.$refs.form.reset(),this.form=[{team:null,dateFrom:null,dateTo:null}],this.errorMessage=null},onSave:function(){var e=this;return(0,D.A)((0,_.A)().mark((function t(){var n,r,a;return(0,_.A)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=e.$refs.form.validate(),n){t.next=3;break}return t.abrupt("return");case 3:return t.prev=3,r=e.team||e.form.team,e.enrollments.some((function(t){return t.group.name===e.organization}))||e.enroll(e.uuid,e.organization,e.form.dateFrom,e.form.dateTo),t.next=8,e.enroll(e.uuid,r,e.form.dateFrom,e.form.dateTo,e.organization);case 8:a=t.sent,a&&!a.errors&&(e.$logger.debug("Enrolled individual ".concat(e.uuid),{uuid:e.uuid,group:r,parentOrg:e.organization,fromDate:e.form.dateFrom,toDate:e.form.dateTo}),e.$emit("updateIndividual",a.data.enroll.individual),e.closeModal()),t.next=16;break;case 12:t.prev=12,t.t0=t["catch"](3),e.errorMessage=e.$getErrorMessage(t.t0),e.$logger.error("Error enrolling individual ".concat(e.uuid,": ").concat(t.t0),e.form);case 16:case"end":return t.stop()}}),t,null,[[3,12]])})))()}}};var C=n(64621);const w=(0,C.A)(x,[["render",y]]),L=w},92151:e=>{var t={utf8:{stringToBytes:function(e){return t.bin.stringToBytes(unescape(encodeURIComponent(e)))},bytesToString:function(e){return decodeURIComponent(escape(t.bin.bytesToString(e)))}},bin:{stringToBytes:function(e){for(var t=[],n=0;n<e.length;n++)t.push(255&e.charCodeAt(n));return t},bytesToString:function(e){for(var t=[],n=0;n<e.length;n++)t.push(String.fromCharCode(e[n]));return t.join("")}}};e.exports=t},3939:e=>{(function(){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n={rotl:function(e,t){return e<<t|e>>>32-t},rotr:function(e,t){return e<<32-t|e>>>t},endian:function(e){if(e.constructor==Number)return 16711935&n.rotl(e,8)|4278255360&n.rotl(e,24);for(var t=0;t<e.length;t++)e[t]=n.endian(e[t]);return e},randomBytes:function(e){for(var t=[];e>0;e--)t.push(Math.floor(256*Math.random()));return t},bytesToWords:function(e){for(var t=[],n=0,r=0;n<e.length;n++,r+=8)t[r>>>5]|=e[n]<<24-r%32;return t},wordsToBytes:function(e){for(var t=[],n=0;n<32*e.length;n+=8)t.push(e[n>>>5]>>>24-n%32&255);return t},bytesToHex:function(e){for(var t=[],n=0;n<e.length;n++)t.push((e[n]>>>4).toString(16)),t.push((15&e[n]).toString(16));return t.join("")},hexToBytes:function(e){for(var t=[],n=0;n<e.length;n+=2)t.push(parseInt(e.substr(n,2),16));return t},bytesToBase64:function(e){for(var n=[],r=0;r<e.length;r+=3)for(var a=e[r]<<16|e[r+1]<<8|e[r+2],o=0;o<4;o++)8*r+6*o<=8*e.length?n.push(t.charAt(a>>>6*(3-o)&63)):n.push("=");return n.join("")},base64ToBytes:function(e){e=e.replace(/[^A-Z0-9+\/]/gi,"");for(var n=[],r=0,a=0;r<e.length;a=++r%4)0!=a&&n.push((t.indexOf(e.charAt(r-1))&Math.pow(2,-2*a+8)-1)<<2*a|t.indexOf(e.charAt(r))>>>6-2*a);return n}};e.exports=n})()},87206:e=>{function t(e){return!!e.constructor&&"function"===typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}function n(e){return"function"===typeof e.readFloatLE&&"function"===typeof e.slice&&t(e.slice(0,0))}
/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
e.exports=function(e){return null!=e&&(t(e)||n(e)||!!e._isBuffer)}},83503:(e,t,n)=>{(function(){var t=n(3939),r=n(92151).utf8,a=n(87206),o=n(92151).bin,i=function(e,n){e.constructor==String?e=n&&"binary"===n.encoding?o.stringToBytes(e):r.stringToBytes(e):a(e)?e=Array.prototype.slice.call(e,0):Array.isArray(e)||e.constructor===Uint8Array||(e=e.toString());for(var u=t.bytesToWords(e),l=8*e.length,s=1732584193,d=-271733879,c=-1732584194,f=271733878,m=0;m<u.length;m++)u[m]=16711935&(u[m]<<8|u[m]>>>24)|4278255360&(u[m]<<24|u[m]>>>8);u[l>>>5]|=128<<l%32,u[14+(l+64>>>9<<4)]=l;var p=i._ff,g=i._gg,v=i._hh,k=i._ii;for(m=0;m<u.length;m+=16){var h=s,b=d,y=c,_=f;s=p(s,d,c,f,u[m+0],7,-680876936),f=p(f,s,d,c,u[m+1],12,-389564586),c=p(c,f,s,d,u[m+2],17,606105819),d=p(d,c,f,s,u[m+3],22,-1044525330),s=p(s,d,c,f,u[m+4],7,-176418897),f=p(f,s,d,c,u[m+5],12,1200080426),c=p(c,f,s,d,u[m+6],17,-1473231341),d=p(d,c,f,s,u[m+7],22,-45705983),s=p(s,d,c,f,u[m+8],7,1770035416),f=p(f,s,d,c,u[m+9],12,-1958414417),c=p(c,f,s,d,u[m+10],17,-42063),d=p(d,c,f,s,u[m+11],22,-1990404162),s=p(s,d,c,f,u[m+12],7,1804603682),f=p(f,s,d,c,u[m+13],12,-40341101),c=p(c,f,s,d,u[m+14],17,-1502002290),d=p(d,c,f,s,u[m+15],22,1236535329),s=g(s,d,c,f,u[m+1],5,-165796510),f=g(f,s,d,c,u[m+6],9,-1069501632),c=g(c,f,s,d,u[m+11],14,643717713),d=g(d,c,f,s,u[m+0],20,-373897302),s=g(s,d,c,f,u[m+5],5,-701558691),f=g(f,s,d,c,u[m+10],9,38016083),c=g(c,f,s,d,u[m+15],14,-660478335),d=g(d,c,f,s,u[m+4],20,-405537848),s=g(s,d,c,f,u[m+9],5,568446438),f=g(f,s,d,c,u[m+14],9,-1019803690),c=g(c,f,s,d,u[m+3],14,-187363961),d=g(d,c,f,s,u[m+8],20,1163531501),s=g(s,d,c,f,u[m+13],5,-1444681467),f=g(f,s,d,c,u[m+2],9,-51403784),c=g(c,f,s,d,u[m+7],14,1735328473),d=g(d,c,f,s,u[m+12],20,-1926607734),s=v(s,d,c,f,u[m+5],4,-378558),f=v(f,s,d,c,u[m+8],11,-2022574463),c=v(c,f,s,d,u[m+11],16,1839030562),d=v(d,c,f,s,u[m+14],23,-35309556),s=v(s,d,c,f,u[m+1],4,-1530992060),f=v(f,s,d,c,u[m+4],11,1272893353),c=v(c,f,s,d,u[m+7],16,-155497632),d=v(d,c,f,s,u[m+10],23,-1094730640),s=v(s,d,c,f,u[m+13],4,681279174),f=v(f,s,d,c,u[m+0],11,-358537222),c=v(c,f,s,d,u[m+3],16,-722521979),d=v(d,c,f,s,u[m+6],23,76029189),s=v(s,d,c,f,u[m+9],4,-640364487),f=v(f,s,d,c,u[m+12],11,-421815835),c=v(c,f,s,d,u[m+15],16,530742520),d=v(d,c,f,s,u[m+2],23,-995338651),s=k(s,d,c,f,u[m+0],6,-198630844),f=k(f,s,d,c,u[m+7],10,1126891415),c=k(c,f,s,d,u[m+14],15,-1416354905),d=k(d,c,f,s,u[m+5],21,-57434055),s=k(s,d,c,f,u[m+12],6,1700485571),f=k(f,s,d,c,u[m+3],10,-1894986606),c=k(c,f,s,d,u[m+10],15,-1051523),d=k(d,c,f,s,u[m+1],21,-2054922799),s=k(s,d,c,f,u[m+8],6,1873313359),f=k(f,s,d,c,u[m+15],10,-30611744),c=k(c,f,s,d,u[m+6],15,-1560198380),d=k(d,c,f,s,u[m+13],21,1309151649),s=k(s,d,c,f,u[m+4],6,-145523070),f=k(f,s,d,c,u[m+11],10,-1120210379),c=k(c,f,s,d,u[m+2],15,718787259),d=k(d,c,f,s,u[m+9],21,-343485551),s=s+h>>>0,d=d+b>>>0,c=c+y>>>0,f=f+_>>>0}return t.endian([s,d,c,f])};i._ff=function(e,t,n,r,a,o,i){var u=e+(t&n|~t&r)+(a>>>0)+i;return(u<<o|u>>>32-o)+t},i._gg=function(e,t,n,r,a,o,i){var u=e+(t&r|n&~r)+(a>>>0)+i;return(u<<o|u>>>32-o)+t},i._hh=function(e,t,n,r,a,o,i){var u=e+(t^n^r)+(a>>>0)+i;return(u<<o|u>>>32-o)+t},i._ii=function(e,t,n,r,a,o,i){var u=e+(n^(t|~r))+(a>>>0)+i;return(u<<o|u>>>32-o)+t},i._blocksize=16,i._digestsize=16,e.exports=function(e,n){if(void 0===e||null===e)throw new Error("Illegal argument "+e);var r=t.wordsToBytes(i(e,n));return n&&n.asBytes?r:n&&n.asString?o.bytesToString(r):t.bytesToHex(r)}})()},80220:(e,t,n)=>{"use strict";n.d(t,{M:()=>u});var r=n(14048),a=n(30388),o=n(87131),i=n(20595),u={data:function(){return{enrollmentModal:{open:!1,title:"",text:"",action:"",organization:null,uuid:null},teamModal:{isOpen:!1,organization:null,team:null,uuid:null,enrollments:null}}},methods:{confirmEnroll:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.group,a=n.parentOrg;a?Object.assign(this.teamModal,{isOpen:!0,organization:a,team:r,uuid:e.uuid,enrollments:e.enrollments}):Object.assign(this.enrollmentModal,{open:!0,title:"Affiliate individual to ".concat(r?r+"?":"an organization"),organization:r,uuid:e.uuid,text:null,dateFrom:null,dateTo:null,showDates:!0,action:function(){return t.enrollIndividual()}})},enrollIndividual:function(e,t,n,i,u){var l=this;return(0,a.A)((0,r.A)().mark((function a(){var s;return(0,r.A)().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return l.closeDialog(),r.next=3,l.enroll(e,t,n,i,u);case 3:s=r.sent,s&&(l.$emit("updateWorkspace",{update:(0,o.G5)([s.data.enroll.individual])}),l.$emit("updateOrganizations"),l.$emit("updateIndividuals"),l.queryIndividuals&&l.queryIndividuals(),l.individual&&(l.individual=(0,o.G5)([s.data.enroll.individual])[0]),l.$logger.debug("Enrolled individual",{group:t,uuid:e,dateFrom:n,dateTo:i,parentOrg:u}),Object.assign(l.teamModal,{isOpen:!1,organization:null,team:null,uuid:null}));case 5:case"end":return r.stop()}}),a)})))()},addOrganization:function(e){var t=this;return(0,a.A)((0,r.A)().mark((function n(){var a;return(0,r.A)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,(0,i.F3)(t.$apollo,e);case 2:return a=n.sent,n.abrupt("return",a);case 4:case"end":return n.stop()}}),n)})))()}}}},87131:(e,t,n)=>{"use strict";n.d(t,{p4:()=>f,G5:()=>m,x_:()=>l,gE:()=>d});var r=n(47914),a=n(22036),o=n(12635),i=n(3531);function u(e){return(0,r.A)(e)||(0,a.A)(e)||(0,o.A)(e)||(0,i.A)()}n(50113),n(10838),n(62062),n(44114),n(72712),n(34782),n(26910),n(62010),n(26099),n(16034),n(27495),n(31415),n(47764),n(25440),n(62953);var l=function(e,t,n){if(e.length===new Set(e).size){var r=u(e),a=r[0],o=r.slice(1),i=o.map((function(e){return e.uuid?e.uuid:e}));s(n,t,i,a.uuid||a)}},s=function(e,t,n,r){Object.assign(e,{open:!0,title:"Merge the selected individuals?",text:"",action:function(){return t(n,r)}})},d=function(e,t,n,r){e!==t&&Object.assign(r,{open:!0,title:"Move identity to this individual?",text:"",action:function(){return n(e,t)}})},c=function(e){var t=[{source:"git",icon:"mdi-git"},{source:"github",icon:"mdi-github"},{source:"gitlab",icon:"mdi-gitlab"},{source:"dockerhub",icon:"mdi-docker"},{source:"jira",icon:"mdi-jira"},{source:"linkedin",icon:"mdi-linkedin"},{source:"rss",icon:"mdi-rss"},{source:"slack",icon:"mdi-slack"},{source:"stackexchange",icon:"mdi-stack-exchange"},{source:"telegram",icon:"mdi-telegram"},{source:"twitter",icon:"mdi-twitter"}],n="Other sources",r=e.reduce((function(e,r){var a=r.source.toLowerCase().replace(/\s+/g,""),o=t.find((function(e){return e.source===a}));return o||(a=n),e[a]?e[a].identities.push(r):e[a]={name:a,identities:[r],icon:o?o.icon:"mdi-account-multiple"},e}),{}),a=Object.values(r).sort((function(e,t){return e.name===n?1:t.name===n?-1:e.name.localeCompare(t.name)}));return a},f=function e(t){var n={name:t.profile.name,id:t.profile.id,uuid:t.mk,email:t.profile.email,sources:c(t.identities).map((function(e){return{name:e.name,icon:e.icon,count:e.identities.length}})),identities:c(t.identities),enrollments:t.enrollments,gender:t.profile.gender,country:t.profile.country,isLocked:t.isLocked,isBot:t.profile.isBot,lastReviewed:t.lastReviewed,lastModified:t.lastModified};if(t.enrollments&&t.enrollments.length>0){var r,a=null===(r=t.enrollments.findLast((function(e){return!e.group.parentOrg})))||void 0===r?void 0:r.group.name;Object.assign(n,{organization:a})}if(t.matchRecommendationSet){var o=t.matchRecommendationSet.map((function(t){return{id:t.id,individual:e(t.individual)}}));Object.assign(n,{matchRecommendations:o})}return n},m=function(e){return e.map((function(e){return f(e)}))}},43839:(e,t,n)=>{"use strict";var r=n(76080),a=n(47055),o=n(48981),i=n(26198),u=function(e){var t=1===e;return function(n,u,l){var s,d,c=o(n),f=a(c),m=i(f),p=r(u,l);while(m-- >0)if(s=f[m],d=p(s,m,c),d)switch(e){case 0:return s;case 1:return m}return t?-1:void 0}};e.exports={findLast:u(0),findLastIndex:u(1)}},70380:(e,t,n)=>{"use strict";var r=n(79504),a=n(79039),o=n(60533).start,i=RangeError,u=isFinite,l=Math.abs,s=Date.prototype,d=s.toISOString,c=r(s.getTime),f=r(s.getUTCDate),m=r(s.getUTCFullYear),p=r(s.getUTCHours),g=r(s.getUTCMilliseconds),v=r(s.getUTCMinutes),k=r(s.getUTCMonth),h=r(s.getUTCSeconds);e.exports=a((function(){return"0385-07-25T07:06:39.999Z"!==d.call(new Date(-50000000000001))}))||!a((function(){d.call(new Date(NaN))}))?function(){if(!u(c(this)))throw new i("Invalid time value");var e=this,t=m(e),n=g(e),r=t<0?"-":t>9999?"+":"";return r+o(l(t),r?6:4,0)+"-"+o(k(e)+1,2,0)+"-"+o(f(e),2,0)+"T"+o(p(e),2,0)+":"+o(v(e),2,0)+":"+o(h(e),2,0)+"."+o(n,3,0)+"Z"}:d},60533:(e,t,n)=>{"use strict";var r=n(79504),a=n(18014),o=n(655),i=n(72333),u=n(67750),l=r(i),s=r("".slice),d=Math.ceil,c=function(e){return function(t,n,r){var i,c,f=o(u(t)),m=a(n),p=f.length,g=void 0===r?" ":o(r);return m<=p||""===g?f:(i=m-p,c=l(g,d(i/g.length)),c.length>i&&(c=s(c,0,i)),e?f+c:c+f)}};e.exports={start:c(!1),end:c(!0)}},10838:(e,t,n)=>{"use strict";var r=n(46518),a=n(43839).findLast,o=n(6469);r({target:"Array",proto:!0},{findLast:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}}),o("findLast")},1688:(e,t,n)=>{"use strict";var r=n(46518),a=n(70380);r({target:"Date",proto:!0,forced:Date.prototype.toISOString!==a},{toISOString:a})}}]);
//# sourceMappingURL=806.1e071929.js.map