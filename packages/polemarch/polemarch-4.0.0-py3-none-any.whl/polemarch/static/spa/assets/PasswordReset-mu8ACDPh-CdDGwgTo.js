import{m as c,d as p,$ as d,_ as f,r as i}from"./index-C_iAD1KJ.js";import{v}from"./FormGroup-DFdr3vqD-B29mjSrf.js";import{k as y}from"./BackButton-BoogC8Ev-CR44bVC7.js";const _=p({__name:"PasswordReset",setup(e){const a=d(),{i18n:t}=f(),r=i("INITIAL"),o=i(""),s=i([]);async function m(){r.value="LOADING";try{const l=new URL("oauth2/password_reset/",a.api.url);l.search=new URLSearchParams({lang:t.locale}).toString();const n=await fetch(l,{method:"POST",body:JSON.stringify({email:o.value}),headers:{"Content-Type":"application/json"}});if(!n.ok){if(n.status===400){const u=await n.json();if(u.email){s.value=u.email,r.value="INITIAL";return}}throw new Error("Invalid response")}r.value="SUCCESS"}catch{r.value="ERROR"}}return{__sfc:!0,config:a,i18n:t,state:r,email:o,emailErrors:s,submit:m,FormGroup:v,BackButton:y}}});var h=function(){var e=this,a=e._self._c,t=e._self._setupProxy;return t.state==="INITIAL"||t.state==="LOADING"?a("form",{on:{submit:function(r){return r.preventDefault(),t.submit.apply(null,arguments)}}},[a("p",[e._v(" "+e._s(e.$t("Forgot your password? Enter your email address below, and an email with instructions for setting a new one will be sent."))+" ")]),a(t.FormGroup,{attrs:{label:"Email",errors:t.emailErrors},scopedSlots:e._u([{key:"default",fn:function({classes:r,id:o}){return[a("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],class:r,attrs:{id:o,type:"email",name:"email"},domProps:{value:t.email},on:{input:function(s){s.target.composing||(t.email=s.target.value)}}})]}}],null,!1,3704277616)}),a("button",{staticClass:"btn btn-primary",attrs:{type:"submit",disabled:t.state==="LOADING"}},[e._v(" "+e._s(e.$t("Reset my Password"))+" ")]),a(t.BackButton,{staticStyle:{"margin-top":"16px"}})],1):t.state==="ERROR"?a("p",[e._v(" "+e._s(e.$t("An error occurred. Please try again later."))+" ")]):t.state==="SUCCESS"?a("p",[e._v(" "+e._s(e.$t("We've emailed you instructions for setting your password, if an account exists with the email you entered. You should receive them shortly."))+" "),a("br"),e._v(" "+e._s(e.$t("If you don't receive an email, please make sure you've entered the address you registered with, and check your spam folder."))+" ")]):e._e()},w=[],g=c(_,h,w,!1,null,null);const E=g.exports;export{E as default};
