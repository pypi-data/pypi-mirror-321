"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[577],{49577:(e,s,t)=>{t.r(s),t.d(s,{default:()=>L});var l=t(95155),a=t(12115),n=t(94860),r=t(18593),i=t(71548),o=t(99373),d=t(92236);let c=a.forwardRef(function(e,s){let{title:t,titleId:l,...n}=e;return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":l},n),t?a.createElement("title",{id:l},t):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m8.25 4.5 7.5 7.5-7.5 7.5"}))});var m=t(21096);let u=a.forwardRef(function(e,s){let{title:t,titleId:l,...n}=e;return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":l},n),t?a.createElement("title",{id:l},t):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L6.832 19.82a4.5 4.5 0 0 1-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 0 1 1.13-1.897L16.863 4.487Zm0 0L19.5 7.125"}))});var h=t(9347);let x=a.forwardRef(function(e,s){let{title:t,titleId:l,...n}=e;return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":l},n),t?a.createElement("title",{id:l},t):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M20.25 8.511c.884.284 1.5 1.128 1.5 2.097v4.286c0 1.136-.847 2.1-1.98 2.193-.34.027-.68.052-1.02.072v3.091l-3-3c-1.354 0-2.694-.055-4.02-.163a2.115 2.115 0 0 1-.825-.242m9.345-8.334a2.126 2.126 0 0 0-.476-.095 48.64 48.64 0 0 0-8.048 0c-1.131.094-1.976 1.057-1.976 2.192v4.286c0 .837.46 1.58 1.155 1.951m9.345-8.334V6.637c0-1.621-1.152-3.026-2.76-3.235A48.455 48.455 0 0 0 11.25 3c-2.115 0-4.198.137-6.24.402-1.608.209-2.76 1.614-2.76 3.235v6.226c0 1.621 1.152 3.026 2.76 3.235.577.075 1.157.14 1.74.194V21l4.155-4.155"}))});var v=t(49904),g=t(60915),w=t(7663),f=t(24681),j=t(79005),b=t(84843),p=t(66799),N=t(49058),k=t(70565),y=t(48173),E=t.n(y);let A=e=>{let{workflow:s,setWorkflow:t,disabled:r}=e,[d,c]=a.useState({status:!0,message:"All good"}),[m,u]=a.useState(!1),[h,x]=a.useState([]),[v,g]=a.useState(0),{user:w}=a.useContext(i.v),f=(0,n.Tt)(),j="".concat(f,"/workflows?user_id=").concat(null==w?void 0:w.email),b=()=>{c(null),u(!0),(0,n.hI)(j,{method:"GET",headers:{"Content-Type":"application/json"}},e=>{e&&e.status?(x(e.data),e.data.length>0&&t(e.data[0])):o.Ay.error(e.message),u(!1)},e=>{c(e),o.Ay.error(e.message),u(!1)})};return a.useEffect(()=>{w&&b()},[]),(0,l.jsxs)("div",{className:" mb-4 relative",children:[(0,l.jsxs)("div",{className:"text-sm mt-2 mb-2 pb-1  ",children:[" ","Please select an agent workflow to begin."," "]}),(0,l.jsxs)("div",{className:"relative mt-2 ",children:[(0,l.jsx)(p.p8,{loading:m}),h&&h.length>0&&(0,l.jsx)(k.A,{disabled:r,className:"w-full",value:h[v].name,onChange:e=>{g(e),t(h[e])},options:h.map((e,s)=>({label:e.name,value:s}))}),(0,l.jsxs)("div",{className:"mt-2 text-xs hidden",children:[" ",(0,l.jsxs)("div",{className:"my-2 text-xs",children:[" ",null==s?void 0:s.name]}),"View all workflows"," ",(0,l.jsxs)("span",{className:"text-accent",children:[" ",(0,l.jsx)(E(),{href:"/build",children:"here"})]})," "]})]}),!h||h&&0===h.length&&(0,l.jsxs)("div",{className:"p-1 border rounded text-xs px-2 text-secondary",children:[" ","No agent workflows found."]})]})},C=e=>{let s,{}=e,[t,r]=a.useState(!1),[d,c]=a.useState({status:!0,message:"All good"}),{user:k}=a.useContext(i.v),y=(0,n.Tt)(),E="".concat(y,"/sessions?user_id=").concat(null==k?void 0:k.email),C="".concat(y,"/sessions"),S=(0,N.J)(e=>e.sessions),L=(0,N.J)(e=>e.setSessions),_={user_id:(null==k?void 0:k.email)||"",name:"New Session "+new Date().toLocaleString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"numeric",hour12:!0})},[T,O]=a.useState(_),W=(0,N.J)(e=>e.session),B=(0,N.J)(e=>e.setSession),R=e=>{c(null),r(!0);let s="".concat(y,"/sessions/delete?user_id=").concat(null==k?void 0:k.email,"&session_id=").concat(e.id),t={method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:null==k?void 0:k.email,session:e})};(0,n.hI)(s,t,e=>{e&&e.status?(o.Ay.success(e.message),M()):o.Ay.error(e.message),r(!1)},e=>{c(e),o.Ay.error(e.message),r(!1)})},[J,I]=a.useState(!1),M=()=>{c(null),r(!0),(0,n.hI)(E,{method:"GET",headers:{"Content-Type":"application/json"}},e=>{e&&e.status?L(e.data):o.Ay.error(e.message),r(!1)},e=>{c(e),o.Ay.error(e.message),r(!1)})};a.useEffect(()=>{S&&S.length>0?B(S[0]):B(null)},[S]);let D=e=>{c(null),r(!0);let s={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)};(0,n.hI)(C,s,e=>{e&&e.status?(o.Ay.success(e.message),M()):o.Ay.error(e.message),r(!1)},e=>{c(e),o.Ay.error(e.message),r(!1)})};a.useEffect(()=>{k&&M()},[]);let H=S.map((e,s)=>{let t=(null==W?void 0:W.id)===e.id,a=[{label:(0,l.jsxs)("div",{onClick:()=>{console.log("deleting session"),R(e)},children:[(0,l.jsx)(m.A,{role:"button",title:"Delete",className:"h-4 w-4 mr-1 inline-block"}),"Delete"]}),key:"delete"},{label:(0,l.jsxs)("div",{onClick:()=>{O(e),I(!0)},children:[(0,l.jsx)(u,{role:"button",title:"Edit",className:"h-4 w-4 mr-1 inline-block"}),"Edit"]}),key:"edit"}];a.push();let r=(0,l.jsx)(w.A,{menu:{items:a},trigger:["click"],placement:"bottomRight",children:(0,l.jsx)("div",{role:"button",className:"float-right ml-2 duration-100 hover:bg-secondary font-semibold px-2 pb-1  rounded ".concat(t?"hover:text-accent":""),children:(0,l.jsxs)("span",{className:"block -mt-2 ".concat(t?"text-white":""),children:[" ","..."]})})});return(0,l.jsxs)("div",{className:"group relative  mb-2 pb-1  border-b border-dashed ",children:[a.length>0&&(0,l.jsx)("div",{className:"  absolute right-2 top-2 group-hover:opacity-100 opacity-0 ",children:r}),(0,l.jsxs)("div",{className:"rounded p-2 cursor-pointer ".concat(t?"bg-accent text-white":"bg-secondary text-primary"),role:"button",onClick:()=>{B(e)},children:[(0,l.jsxs)("div",{className:"text-xs mt-1",children:[(0,l.jsx)(h.A,{className:"h-4 w-4 inline-block mr-1"}),e.name]}),(0,l.jsx)("div",{className:"text-xs text-right ",children:(0,n.fF)(e.created_at||"")})]})]},"sessionsrow"+s)});return s=window.innerHeight-400+"px",(0,l.jsxs)("div",{className:"  ",children:[(0,l.jsx)(e=>{let{session:s}=e,[t,r]=a.useState(null),[i,o]=a.useState(s);a.useEffect(()=>{t&&t.id&&i&&o({...i,workflow_id:t.id})},[t]);let d=null!==i&&void 0!==i.id;return(0,l.jsxs)(f.A,{onCancel:()=>{I(!1)},title:(0,l.jsxs)("div",{className:"font-semibold mb-2 pb-1 border-b",children:[(0,l.jsx)(h.A,{className:"h-5 w-5 inline-block mr-1"}),"New Session"," "]}),open:J,footer:[(0,l.jsx)(j.Ay,{onClick:()=>{I(!1)},children:"Cancel"},"back"),(0,l.jsx)(j.Ay,{type:"primary",disabled:!t,onClick:()=>{I(!1),i&&D(i)},children:"Create"},"submit")],children:[(0,l.jsx)(A,{workflow:t,setWorkflow:r,disabled:d}),(0,l.jsx)("div",{className:"my-2 text-xs",children:" Session Name "}),(0,l.jsx)(b.A,{placeholder:"Session Name",value:(null==i?void 0:i.name)||"",onChange:e=>{i&&o({...i,name:e.target.value})}}),(0,l.jsxs)("div",{className:"text-xs mt-4",children:[" ",(0,n.fF)((null==i?void 0:i.created_at)||"",!0)]})]})},{session:T||_}),(0,l.jsxs)("div",{className:"mb-2 relative",children:[(0,l.jsxs)("div",{className:"",children:[(0,l.jsxs)("div",{className:"font-semibold mb-2 pb-1 border-b",children:[(0,l.jsx)(x,{className:"h-5 w-5 inline-block mr-1"}),"Sessions"," "]}),S&&S.length>0&&(0,l.jsxs)("div",{className:"text-xs  hidden mb-2 pb-1  ",children:[" ","Create a new session or select an existing session to view chat."]}),(0,l.jsxs)("div",{style:{maxHeight:s},className:"mb-4 overflow-y-auto scroll rounded relative ",children:[H,(0,l.jsx)(p.p8,{loading:t})]}),(!S||0==S.length)&&!t&&(0,l.jsx)("div",{className:"text-xs text-gray-500",children:"No sessions found. Create a new session to get started."})]}),(0,l.jsxs)("div",{className:"flex gap-x-2",children:[(0,l.jsx)("div",{className:"flex-1"}),(0,l.jsxs)(p.Yi,{className:"text-sm p-2 px-3",onClick:()=>{O(_),I(!0)},children:[" ",(0,l.jsx)(v.A,{className:"w-5 h-5 inline-block mr-1"}),"New"]})]})]}),d&&!d.status&&(0,l.jsxs)("div",{className:"p-2 border border-orange-500 text-secondary  rounded mt-4   text-sm",children:[" ",(0,l.jsx)(g.A,{className:"h-5 text-orange-500 inline-block mr-2"})," ",d.message]})]})},S=()=>{let[e,s]=a.useState(!0),t=e?"270px":"50px";return window.innerHeight,(0,l.jsxs)("div",{style:{minWidth:t,maxWidth:t,height:"calc(100vh - 190px)"},className:"    ",children:[(0,l.jsx)("div",{className:" transition overflow-hidden duration-300  flex flex-col   h-full p-2 overflow-y-scroll scroll rounded ",children:(0,l.jsx)("div",{className:"".concat(e?"":"hidden","  "),children:(0,l.jsx)(C,{})})}),(0,l.jsx)("div",{onClick:()=>s(!e),role:"button",className:" hover:text-accent duration-150  ",children:e?(0,l.jsxs)("div",{className:"mt-4  ",children:[" ",(0,l.jsx)(d.A,{className:"w-6 h-6  inline-block    rounded"})," ",(0,l.jsx)("span",{className:"text-xs ",children:" close sidebar"})]}):(0,l.jsx)(c,{className:"w-6 h-6   inline-block   font-bold rounded "})})]})},L=()=>{let e=(0,N.J)(e=>e.session),[s,t]=a.useState(!1),[d,c]=a.useState(null),[m,u]=a.useState(null);a.useEffect(()=>{(0,n.ZB)("ara_config",m)},[m]);let[h,x]=a.useState({status:!0,message:"All good"}),{user:v}=a.useContext(i.v),g=(0,n.Tt)(),w="".concat(g,"/sessions/").concat(null==e?void 0:e.id,"/messages?user_id=").concat(null==v?void 0:v.email),f=()=>{x(null),t(!0),c(null),(0,n.hI)(w,{method:"GET",headers:{"Content-Type":"application/json"}},e=>{e&&e.status?c(e.data):o.Ay.error(e.message),t(!1)},e=>{x(e),o.Ay.error(e.message),t(!1)})};return a.useEffect(()=>{v&&e&&f()},[e]),(0,l.jsx)("div",{className:"h-full   ",children:(0,l.jsxs)("div",{className:"flex h-full   ",children:[(0,l.jsx)("div",{className:"  mr-2  rounded",children:(0,l.jsx)(S,{})}),(0,l.jsxs)("div",{className:" flex-1  ",children:[!e&&(0,l.jsx)("div",{className:" w-full  h-full flex items-center justify-center",children:(0,l.jsxs)("div",{className:"w-2/3",id:"middle",children:[(0,l.jsxs)("div",{className:"w-full   text-center",children:[" ",(0,l.jsx)("img",{src:"/static/images/svgs/welcome.svg",alt:"welcome",className:"text-accent inline-block object-cover w-56"})]}),(0,l.jsx)(C,{})]})}),null!==e&&(0,l.jsx)(r.A,{initMessages:d,session:e})]})]})})}},92236:(e,s,t)=>{t.d(s,{A:()=>a});var l=t(12115);let a=l.forwardRef(function(e,s){let{title:t,titleId:a,...n}=e;return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":a},n),t?l.createElement("title",{id:a},t):null,l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5 8.25 12l7.5-7.5"}))})},49904:(e,s,t)=>{t.d(s,{A:()=>a});var l=t(12115);let a=l.forwardRef(function(e,s){let{title:t,titleId:a,...n}=e;return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":a},n),t?l.createElement("title",{id:a},t):null,l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"}))})},9347:(e,s,t)=>{t.d(s,{A:()=>a});var l=t(12115);let a=l.forwardRef(function(e,s){let{title:t,titleId:a,...n}=e;return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":a},n),t?l.createElement("title",{id:a},t):null,l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.429 9.75 2.25 12l4.179 2.25m0-4.5 5.571 3 5.571-3m-11.142 0L2.25 7.5 12 2.25l9.75 5.25-4.179 2.25m0 0L21.75 12l-4.179 2.25m0 0 4.179 2.25L12 21.75 2.25 16.5l4.179-2.25m11.142 0-5.571 3-5.571-3"}))})},21096:(e,s,t)=>{t.d(s,{A:()=>a});var l=t(12115);let a=l.forwardRef(function(e,s){let{title:t,titleId:a,...n}=e;return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":a},n),t?l.createElement("title",{id:a},t):null,l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"}))})}}]);