import{a as vr}from"./chunk-T44WMGZF.js";import{b as ft}from"./chunk-NOGHTXP6.js";import{a as gr,b as br,c as jr,d as I,e as pt}from"./chunk-Y3TI4FK7.js";import{a as yr,b as ut}from"./chunk-SG7BXLTI.js";import{a as mt}from"./chunk-W5RPWA2M.js";import{a as ht}from"./chunk-65OJRBX6.js";import{a as Ce,b as P}from"./chunk-K2M4C6NF.js";var yt=Ce((Yo,vt)=>{var Er="[object AsyncFunction]",wr="[object Function]",kr="[object GeneratorFunction]",xr="[object Null]",Tr="[object Proxy]",Fr="[object Undefined]",Ar=typeof global=="object"&&global&&global.Object===Object&&global,Cr=typeof self=="object"&&self&&self.Object===Object&&self,Lr=Ar||Cr||Function("return this")(),bt=Object.prototype,Sr=bt.hasOwnProperty,jt=bt.toString,gt=Lr.Symbol,q=gt?gt.toStringTag:void 0;function Pr(o){return o==null?o===void 0?Fr:xr:q&&q in Object(o)?Mr(o):Ir(o)}function Mr(o){var e=Sr.call(o,q),t=o[q];try{o[q]=void 0;var r=!0}catch{}var n=jt.call(o);return r&&(e?o[q]=t:delete o[q]),n}function Ir(o){return jt.call(o)}function Hr(o){if(!Dr(o))return!1;var e=Pr(o);return e==wr||e==kr||e==Er||e==Tr}function Dr(o){var e=typeof o;return o!=null&&(e=="object"||e=="function")}vt.exports=Hr});var xt=Ce((Zo,kt)=>{var Or="[object Object]";function Rr(o){var e=!1;if(o!=null&&typeof o.toString!="function")try{e=!!(o+"")}catch{}return e}function qr(o,e){return function(t){return o(e(t))}}var Vr=Function.prototype,Et=Object.prototype,wt=Vr.toString,Br=Et.hasOwnProperty,_r=wt.call(Object),$r=Et.toString,Nr=qr(Object.getPrototypeOf,Object);function Gr(o){return!!o&&typeof o=="object"}function Ur(o){if(!Gr(o)||$r.call(o)!=Or||Rr(o))return!1;var e=Nr(o);if(e===null)return!0;var t=Br.call(e,"constructor")&&e.constructor;return typeof t=="function"&&t instanceof t&&wt.call(t)==_r}kt.exports=Ur});var qt=Ce((ei,Rt)=>{var zr="Expected a function",Lt="__lodash_hash_undefined__",St=1/0,Jr=9007199254740991,Xr="[object Function]",Kr="[object GeneratorFunction]",Wr="[object Symbol]",Qr=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Yr=/^\w*$/,Zr=/^\./,eo=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,to=/[\\^$.*+?()[\]{}|]/g,ro=/\\(\\)?/g,oo=/^\[object .+?Constructor\]$/,io=/^(?:0|[1-9]\d*)$/,no=typeof global=="object"&&global&&global.Object===Object&&global,so=typeof self=="object"&&self&&self.Object===Object&&self,Se=no||so||Function("return this")();function ao(o,e){return o==null?void 0:o[e]}function lo(o){var e=!1;if(o!=null&&typeof o.toString!="function")try{e=!!(o+"")}catch{}return e}var co=Array.prototype,uo=Function.prototype,Pt=Object.prototype,Le=Se["__core-js_shared__"],Tt=function(){var o=/[^.]+$/.exec(Le&&Le.keys&&Le.keys.IE_PROTO||"");return o?"Symbol(src)_1."+o:""}(),Mt=uo.toString,fe=Pt.hasOwnProperty,It=Pt.toString,fo=RegExp("^"+Mt.call(fe).replace(to,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ft=Se.Symbol,po=co.splice,mo=Ht(Se,"Map"),Q=Ht(Object,"create"),At=Ft?Ft.prototype:void 0,Ct=At?At.toString:void 0;function V(o){var e=-1,t=o?o.length:0;for(this.clear();++e<t;){var r=o[e];this.set(r[0],r[1])}}function ho(){this.__data__=Q?Q(null):{}}function go(o){return this.has(o)&&delete this.__data__[o]}function bo(o){var e=this.__data__;if(Q){var t=e[o];return t===Lt?void 0:t}return fe.call(e,o)?e[o]:void 0}function jo(o){var e=this.__data__;return Q?e[o]!==void 0:fe.call(e,o)}function vo(o,e){var t=this.__data__;return t[o]=Q&&e===void 0?Lt:e,this}V.prototype.clear=ho;V.prototype.delete=go;V.prototype.get=bo;V.prototype.has=jo;V.prototype.set=vo;function U(o){var e=-1,t=o?o.length:0;for(this.clear();++e<t;){var r=o[e];this.set(r[0],r[1])}}function yo(){this.__data__=[]}function Eo(o){var e=this.__data__,t=pe(e,o);if(t<0)return!1;var r=e.length-1;return t==r?e.pop():po.call(e,t,1),!0}function wo(o){var e=this.__data__,t=pe(e,o);return t<0?void 0:e[t][1]}function ko(o){return pe(this.__data__,o)>-1}function xo(o,e){var t=this.__data__,r=pe(t,o);return r<0?t.push([o,e]):t[r][1]=e,this}U.prototype.clear=yo;U.prototype.delete=Eo;U.prototype.get=wo;U.prototype.has=ko;U.prototype.set=xo;function B(o){var e=-1,t=o?o.length:0;for(this.clear();++e<t;){var r=o[e];this.set(r[0],r[1])}}function To(){this.__data__={hash:new V,map:new(mo||U),string:new V}}function Fo(o){return me(this,o).delete(o)}function Ao(o){return me(this,o).get(o)}function Co(o){return me(this,o).has(o)}function Lo(o,e){return me(this,o).set(o,e),this}B.prototype.clear=To;B.prototype.delete=Fo;B.prototype.get=Ao;B.prototype.has=Co;B.prototype.set=Lo;function So(o,e,t){var r=o[e];(!(fe.call(o,e)&&Dt(r,t))||t===void 0&&!(e in o))&&(o[e]=t)}function pe(o,e){for(var t=o.length;t--;)if(Dt(o[t][0],e))return t;return-1}function Po(o){if(!ue(o)||qo(o))return!1;var e=$o(o)||lo(o)?fo:oo;return e.test(_o(o))}function Mo(o,e,t,r){if(!ue(o))return o;e=Oo(e,o)?[e]:Ho(e);for(var n=-1,i=e.length,s=i-1,u=o;u!=null&&++n<i;){var d=Bo(e[n]),l=t;if(n!=s){var a=u[d];l=r?r(a,d,u):void 0,l===void 0&&(l=ue(a)?a:Do(e[n+1])?[]:{})}So(u,d,l),u=u[d]}return o}function Io(o){if(typeof o=="string")return o;if(Me(o))return Ct?Ct.call(o):"";var e=o+"";return e=="0"&&1/o==-St?"-0":e}function Ho(o){return Ot(o)?o:Vo(o)}function me(o,e){var t=o.__data__;return Ro(e)?t[typeof e=="string"?"string":"hash"]:t.map}function Ht(o,e){var t=ao(o,e);return Po(t)?t:void 0}function Do(o,e){return e=e??Jr,!!e&&(typeof o=="number"||io.test(o))&&o>-1&&o%1==0&&o<e}function Oo(o,e){if(Ot(o))return!1;var t=typeof o;return t=="number"||t=="symbol"||t=="boolean"||o==null||Me(o)?!0:Yr.test(o)||!Qr.test(o)||e!=null&&o in Object(e)}function Ro(o){var e=typeof o;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?o!=="__proto__":o===null}function qo(o){return!!Tt&&Tt in o}var Vo=Pe(function(o){o=Go(o);var e=[];return Zr.test(o)&&e.push(""),o.replace(eo,function(t,r,n,i){e.push(n?i.replace(ro,"$1"):r||t)}),e});function Bo(o){if(typeof o=="string"||Me(o))return o;var e=o+"";return e=="0"&&1/o==-St?"-0":e}function _o(o){if(o!=null){try{return Mt.call(o)}catch{}try{return o+""}catch{}}return""}function Pe(o,e){if(typeof o!="function"||e&&typeof e!="function")throw new TypeError(zr);var t=function(){var r=arguments,n=e?e.apply(this,r):r[0],i=t.cache;if(i.has(n))return i.get(n);var s=o.apply(this,r);return t.cache=i.set(n,s),s};return t.cache=new(Pe.Cache||B),t}Pe.Cache=B;function Dt(o,e){return o===e||o!==o&&e!==e}var Ot=Array.isArray;function $o(o){var e=ue(o)?It.call(o):"";return e==Xr||e==Kr}function ue(o){var e=typeof o;return!!o&&(e=="object"||e=="function")}function No(o){return!!o&&typeof o=="object"}function Me(o){return typeof o=="symbol"||No(o)&&It.call(o)==Wr}function Go(o){return o==null?"":Io(o)}function Uo(o,e,t){return o==null?o:Mo(o,e,t)}Rt.exports=Uo});(function(){"use strict";var o=function(f,c){var p=function(y){for(var b=0,v=y.length;b<v;b++)h(y[b])},h=function(y){var b=y.target,v=y.attributeName,w=y.oldValue;b.attributeChangedCallback(v,w,b.getAttribute(v))};return function(g,y){var b=g.constructor.observedAttributes;return b&&f(y).then(function(){new c(p).observe(g,{attributes:!0,attributeOldValue:!0,attributeFilter:b});for(var v=0,w=b.length;v<w;v++)g.hasAttribute(b[v])&&h({target:g,attributeName:b[v],oldValue:null})}),g}};function e(f,c){if(f){if(typeof f=="string")return t(f,c);var p=Object.prototype.toString.call(f).slice(8,-1);if(p==="Object"&&f.constructor&&(p=f.constructor.name),p==="Map"||p==="Set")return Array.from(f);if(p==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p))return t(f,c)}}function t(f,c){(c==null||c>f.length)&&(c=f.length);for(var p=0,h=new Array(c);p<c;p++)h[p]=f[p];return h}function r(f,c){var p=typeof Symbol<"u"&&f[Symbol.iterator]||f["@@iterator"];if(!p){if(Array.isArray(f)||(p=e(f))||c&&f&&typeof f.length=="number"){p&&(f=p);var h=0,g=function(){};return{s:g,n:function(){return h>=f.length?{done:!0}:{done:!1,value:f[h++]}},e:function(w){throw w},f:g}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var y=!0,b=!1,v;return{s:function(){p=p.call(f)},n:function(){var w=p.next();return y=w.done,w},e:function(w){b=!0,v=w},f:function(){try{!y&&p.return!=null&&p.return()}finally{if(b)throw v}}}}var n=!0,i=!1,s="querySelectorAll",u=function(c){var p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:document,h=arguments.length>2&&arguments[2]!==void 0?arguments[2]:MutationObserver,g=arguments.length>3&&arguments[3]!==void 0?arguments[3]:["*"],y=function w(O,R,T,j,E,k){var F=r(O),G;try{for(F.s();!(G=F.n()).done;){var x=G.value;(k||s in x)&&(E?T.has(x)||(T.add(x),j.delete(x),c(x,E)):j.has(x)||(j.add(x),T.delete(x),c(x,E)),k||w(x[s](R),R,T,j,E,n))}}catch(Ae){F.e(Ae)}finally{F.f()}},b=new h(function(w){if(g.length){var O=g.join(","),R=new Set,T=new Set,j=r(w),E;try{for(j.s();!(E=j.n()).done;){var k=E.value,F=k.addedNodes,G=k.removedNodes;y(G,O,R,T,i,i),y(F,O,R,T,n,i)}}catch(x){j.e(x)}finally{j.f()}}}),v=b.observe;return(b.observe=function(w){return v.call(b,w,{subtree:n,childList:n})})(p),b},d="querySelectorAll",l=self,a=l.document,m=l.Element,N=l.MutationObserver,te=l.Set,Kt=l.WeakMap,$e=function(c){return d in c},Ne=[].filter,ve=function(f){var c=new Kt,p=function(j){for(var E=0,k=j.length;E<k;E++)c.delete(j[E])},h=function(){for(var j=O.takeRecords(),E=0,k=j.length;E<k;E++)b(Ne.call(j[E].removedNodes,$e),!1),b(Ne.call(j[E].addedNodes,$e),!0)},g=function(j){return j.matches||j.webkitMatchesSelector||j.msMatchesSelector},y=function(j,E){var k;if(E)for(var F,G=g(j),x=0,Ae=v.length;x<Ae;x++)G.call(j,F=v[x])&&(c.has(j)||c.set(j,new te),k=c.get(j),k.has(F)||(k.add(F),f.handle(j,E,F)));else c.has(j)&&(k=c.get(j),c.delete(j),k.forEach(function(hr){f.handle(j,E,hr)}))},b=function(j){for(var E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,k=0,F=j.length;k<F;k++)y(j[k],E)},v=f.query,w=f.root||a,O=u(y,w,N,v),R=m.prototype.attachShadow;return R&&(m.prototype.attachShadow=function(T){var j=R.call(this,T);return O.observe(j),j}),v.length&&b(w[d](v)),{drop:p,flush:h,observer:O,parse:b}},A=self,C=A.document,D=A.Map,Ge=A.MutationObserver,re=A.Object,Ue=A.Set,Wt=A.WeakMap,ze=A.Element,Qt=A.HTMLElement,Je=A.Node,Xe=A.Error,Ke=A.TypeError,Yt=A.Reflect,oe=re.defineProperty,Zt=re.keys,er=re.getOwnPropertyNames,X=re.setPrototypeOf,K=!self.customElements,We=function(c){for(var p=Zt(c),h=[],g=new Ue,y=p.length,b=0;b<y;b++){h[b]=c[p[b]];try{delete c[p[b]]}catch{g.add(b)}}return function(){for(var v=0;v<y;v++)g.has(v)||(c[p[v]]=h[v])}};if(K){var ye=function(){var c=this.constructor;if(!Ee.has(c))throw new Ke("Illegal constructor");var p=Ee.get(c);if(ne)return et(ne,p);var h=Qe.call(C,p);return et(X(h,c.prototype),p)},Qe=C.createElement,Ee=new D,ie=new D,Ye=new D,W=new D,Ze=[],tr=function(c,p,h){var g=Ye.get(h);if(p&&!g.isPrototypeOf(c)){var y=We(c);ne=X(c,g);try{new g.constructor}finally{ne=null,y()}}var b="".concat(p?"":"dis","connectedCallback");b in g&&c[b]()},rr=ve({query:Ze,handle:tr}),or=rr.parse,ne=null,we=function(c){if(!ie.has(c)){var p,h=new Promise(function(g){p=g});ie.set(c,{$:h,_:p})}return ie.get(c).$},et=o(we,Ge);self.customElements={define:function(c,p){if(W.has(c))throw new Xe('the name "'.concat(c,'" has already been used with this registry'));Ee.set(p,c),Ye.set(c,p.prototype),W.set(c,p),Ze.push(c),we(c).then(function(){or(C.querySelectorAll(c))}),ie.get(c)._(p)},get:function(c){return W.get(c)},whenDefined:we},oe(ye.prototype=Qt.prototype,"constructor",{value:ye}),self.HTMLElement=ye,C.createElement=function(f,c){var p=c&&c.is,h=p?W.get(p):W.get(f);return h?new h:Qe.call(C,f)},"isConnected"in Je.prototype||oe(Je.prototype,"isConnected",{configurable:!0,get:function(){return!(this.ownerDocument.compareDocumentPosition(this)&this.DOCUMENT_POSITION_DISCONNECTED)}})}else if(K=!self.customElements.get("extends-br"),K)try{var tt=function f(){return self.Reflect.construct(HTMLBRElement,[],f)};tt.prototype=HTMLLIElement.prototype;var rt="extends-br";self.customElements.define("extends-br",tt,{extends:"br"}),K=C.createElement("br",{is:rt}).outerHTML.indexOf(rt)<0;var ot=self.customElements,ir=ot.get,nr=ot.whenDefined;self.customElements.whenDefined=function(f){var c=this;return nr.call(this,f).then(function(p){return p||ir.call(c,f)})}}catch{}if(K){var it=function(c){var p=ke.get(c);dt(p.querySelectorAll(this),c.isConnected)},S=self.customElements,nt=C.createElement,sr=S.define,ar=S.get,lr=S.upgrade,dr=Yt||{construct:function(c){return c.call(this)}},cr=dr.construct,ke=new Wt,xe=new Ue,se=new D,ae=new D,st=new D,le=new D,at=[],de=[],lt=function(c){return le.get(c)||ar.call(S,c)},ur=function(c,p,h){var g=st.get(h);if(p&&!g.isPrototypeOf(c)){var y=We(c);ce=X(c,g);try{new g.constructor}finally{ce=null,y()}}var b="".concat(p?"":"dis","connectedCallback");b in g&&c[b]()},fr=ve({query:de,handle:ur}),dt=fr.parse,pr=ve({query:at,handle:function(c,p){ke.has(c)&&(p?xe.add(c):xe.delete(c),de.length&&it.call(de,c))}}),mr=pr.parse,ct=ze.prototype.attachShadow;ct&&(ze.prototype.attachShadow=function(f){var c=ct.call(this,f);return ke.set(this,c),c});var Te=function(c){if(!ae.has(c)){var p,h=new Promise(function(g){p=g});ae.set(c,{$:h,_:p})}return ae.get(c).$},Fe=o(Te,Ge),ce=null;er(self).filter(function(f){return/^HTML.*Element$/.test(f)}).forEach(function(f){var c=self[f];function p(){var h=this.constructor;if(!se.has(h))throw new Ke("Illegal constructor");var g=se.get(h),y=g.is,b=g.tag;if(y){if(ce)return Fe(ce,y);var v=nt.call(C,b);return v.setAttribute("is",y),Fe(X(v,h.prototype),y)}else return cr.call(this,c,[],h)}oe(p.prototype=c.prototype,"constructor",{value:p}),oe(self,f,{value:p})}),C.createElement=function(f,c){var p=c&&c.is;if(p){var h=le.get(p);if(h&&se.get(h).tag===f)return new h}var g=nt.call(C,f);return p&&g.setAttribute("is",p),g},S.get=lt,S.whenDefined=Te,S.upgrade=function(f){var c=f.getAttribute("is");if(c){var p=le.get(c);if(p){Fe(X(f,p.prototype),c);return}}lr.call(S,f)},S.define=function(f,c,p){if(lt(f))throw new Xe("'".concat(f,"' has already been defined as a custom element"));var h,g=p&&p.extends;se.set(c,g?{is:f,tag:g}:{is:"",tag:f}),g?(h="".concat(g,'[is="').concat(f,'"]'),st.set(h,c.prototype),le.set(f,c),de.push(h)):(sr.apply(S,arguments),at.push(h=f)),Te(f).then(function(){g?(dt(C.querySelectorAll(h)),xe.forEach(it,[h])):mr(C.querySelectorAll(h))}),ae.get(f)._(c)}}})();var H=P(gr()),_=P(br()),Ut=P(jr()),Z=P(vr()),je=P(yt()),zt=P(xt()),L=P(yr()),Ie=P(qt()),Jt=P(ut());var Vt=P(ut()),he=class{constructor(e,t){this.progressBar=null;this.fileDrop=e=>{if(this.swallowEvent(e),e.dataTransfer){for(let t of e.dataTransfer.files)if(!this.matchesMimeType(t.type)){e.dataTransfer.clearData(),this.fieldGroup.reportFailedUpload();return}this.fieldGroup.touch(),this.inputElement.files=e.dataTransfer.files,this.uploadFiles(this.inputElement.files).then(()=>{this.fieldGroup.inputted(),this.fieldGroup.validate()})}};this.fileRemove=()=>{for(this.inputElement.value="",this.uploadedFiles=this.initialData.length>0?[{}]:[];this.dropbox.firstChild;)this.dropbox.removeChild(this.dropbox.firstChild);this.dropbox.appendChild(this.emptyDropboxItem),this.fieldGroup.touch(),this.fieldGroup.inputted(),this.fieldGroup.validate()};this.swallowEvent=e=>{e.stopPropagation(),e.preventDefault()};if(this.fieldGroup=e,this.inputElement=t,this.maxUploadSize=parseInt(this.inputElement.getAttribute("max-size")??"0"),this.dropbox=this.fieldGroup.element.querySelector("figure.dj-dropbox"),!this.dropbox)throw new Error('Element <input type="file"> requires sibling element <figure class="dj-dropbox"></figure>');if(this.chooseFileButton=this.fieldGroup.element.querySelector("button.dj-choose-file"),!this.chooseFileButton)throw new Error('Element <input type="file"> requires sibling element <button class="dj-choose-file"></button>');if(this.progressBar=this.fieldGroup.element.querySelector("progress"),this.progressBar&&(this.progressBar.style.visibility="hidden"),this.emptyDropboxItem=this.dropbox.querySelector("div.dj-empty-item"),!this.emptyDropboxItem)throw new Error('Element <input type="file"> requires sibling element <figure><div class="dj-empty-item"></div></figure>');let r=this.fieldGroup.element.querySelector(".dj-dropbox-items");if(!r)throw new Error('Element <input type="file"> requires sibling element <template class="dj-dropbox-items"></template>');this.dropboxItemTemplate=(0,Vt.default)(r.innerHTML),this.observer=new MutationObserver(i=>this.attributesChanged(i)),this.observer.observe(this.inputElement,{attributes:!0}),this.chooseFileButton.disabled=t.disabled;let n=document.getElementById(`initial_${t.id}`);n!=null&&n.textContent?(this.uploadedFiles=this.initialData=[JSON.parse(n.textContent)],this.renderDropbox()):this.uploadedFiles=this.initialData=[],this.dropbox.addEventListener("dragenter",this.swallowEvent),this.dropbox.addEventListener("dragover",this.swallowEvent),this.dropbox.addEventListener("drop",this.fileDrop),this.chooseFileButton.addEventListener("click",()=>{t.click()}),t.addEventListener("change",()=>this.uploadFiles(this.inputElement.files).then(()=>{this.fieldGroup.inputted(),this.fieldGroup.validate()}).catch(()=>{this.fieldGroup.reportFailedUpload()}).finally(()=>{this.chooseFileButton.blur(),this.fieldGroup.touch()}))}matchesMimeType(e){if(!this.inputElement.accept)return!0;let t=this.inputElement.accept.split(",").map(i=>i.trim()),[r,n]=e.split("/");for(let i of t)if(!i||i===e||n==="*"&&i.split("/")[0]===r)return!0;return!1}async uploadFiles(e){return!e||e.length===0?Promise.reject():new Promise((t,r)=>{let n=e.item(0);n&&(!this.maxUploadSize||n.size<=this.maxUploadSize)?this.uploadFile(n,this.dropbox.clientHeight).then(i=>{this.uploadedFiles=[i],this.renderDropbox(),this.fieldGroup.inputted(),this.inputElement.dataset.fileupload=JSON.stringify(i),t()}).catch(()=>{r()}):r()})}async uploadFile(e,t){let r=this;function n(s){let u=s.lengthComputable?s.loaded/s.total:0;r.progressBar&&(r.progressBar.style.visibility="visible",r.progressBar.value=.97*u)}let i=new FormData;return i.append("temp_file",e),i.append("image_height",t.toString()),new Promise((s,u)=>{function d(){r.progressBar&&(r.progressBar.value=1,window.setTimeout(()=>r.progressBar.style.visibility="hidden",333)),l.status===200?s(l.response):u(l.response)}let l=new XMLHttpRequest;r.progressBar&&(l.addEventListener("loadstart",n),l.upload.addEventListener("progress",n,!1)),l.addEventListener("loadend",d),l.open("POST",this.fieldGroup.form.formset.endpoint,!0);let a=this.fieldGroup.form.formset.CSRFToken;a&&l.setRequestHeader("X-CSRFToken",a),l.responseType="json",l.send(i)})}renderDropbox(){let e=this.uploadedFiles.map(this.dropboxItemTemplate);e.length>0?(this.dropbox.innerHTML=e.join(""),this.inputElement.dataset.fileupload=JSON.stringify(this.uploadedFiles[0])):this.dropbox.replaceChildren(this.emptyDropboxItem)}attributesChanged(e){for(let t of e)if(t.type==="attributes"&&(t.attributeName==="disabled"&&this.chooseFileButton.disabled!=this.inputElement.disabled&&(this.chooseFileButton.disabled=this.inputElement.disabled),t.attributeName==="data-fileupload")){let r=this.inputElement.dataset.fileupload;if(r){this.dropbox.innerHTML=this.dropboxItemTemplate(JSON.parse(r));let n=this.dropbox.querySelector(".dj-delete-file");n&&n.addEventListener("click",this.fileRemove,{once:!0})}}}inProgress(){return!!this.inputElement.files&&this.inputElement.files.length>0&&!this.uploadedFiles.length}resetToInitial(){this.uploadedFiles=this.initialData,this.renderDropbox()}};var Bt=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24" fill="currentColor">
	<g class="spinner">
		<path style="stroke-width:0.729" d="m 12.73285,23.212276 -10e-7,-4.393157 A 0.27932072,0.27932072 0 0 0 12.27476,18.604602 l -2.6367848,2.196577 a 0.27932072,0.27932072 0 0 0 -10e-8,0.429037 l 2.6367859,2.196577 a 0.27932072,0.27932072 0 0 0 0.458089,-0.214517 z" />
		<path style="stroke-width:0.729" d="m 11.298326,5.191792 -10e-7,-4.39315704 a 0.27932072,0.27932072 0 0 1 0.458086,-0.214519 L 14.393193,2.780699 a 0.27932072,0.27932072 0 0 1 2e-6,0.429033 l -2.636785,2.19658 a 0.27932072,0.27932072 0 0 1 -0.458084,-0.21452 z" />
		<path style="fill:none;stroke:currentColor;stroke-width:2;stroke-linecap:round;stroke-miterlimit:10;stroke-dashoffset:89.339;stroke-dasharray:none" d="M 12.5,2.9179688 C 12.333705,2.9010187 12.166975,2.8886442 12,2.8808594 6.9635919,2.8807514 2.8807499,6.9635934 2.8808594,12 c 0.00661,2.530252 1.064217,4.944009 2.9199218,6.664062" />
		<path style="fill:none;stroke:currentColor;stroke-width:2;stroke-linecap:round;stroke-miterlimit:10;stroke-dashoffset:89.339;stroke-dasharray:none" d="m 11.458261,21.082031 c 0.166295,0.01695 0.333025,0.02933 0.5,0.03711 C 16.994669,21.119249 21.077511,17.036407 21.077402,12 21.070802,9.469748 20.013185,7.055991 18.15748,5.335938" />
	</g>
</svg>
`;var _t=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24" fill="currentColor">
	<circle class="path circle" fill="none" stroke="currentColor" stroke-width="1.93833" stroke-miterlimit="10" cx="12.000002" cy="12.000002" r="10.030837" />
	<polyline class="path check" fill="none" stroke="currentColor" stroke-width="12" stroke-linecap="round" stroke-miterlimit="10" points="100.2,40.2 51.5,88.8 29.8,67.5 " transform="matrix(0.18,0,0,0.18,-0.284,0.544)" />
</svg>
`;var $t=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24" fill="currentColor">
	<circle class="path circle" fill="none" stroke="currentColor" stroke-width="1.93833" stroke-miterlimit="10" cx="12.000002" cy="12.000002" r="10.030837" />
	<line class="path line" fill="none" stroke="currentColor" stroke-width="2.12533" stroke-linecap="round" stroke-miterlimit="10" x1="6.562665" y1="7.1626649" x2="17.437328" y2="16.79755" />
	<line class="path line" fill="none" stroke="currentColor" stroke-width="2.12534" stroke-linecap="round" stroke-miterlimit="10" x1="17.437338" y1="7.1626701" x2="6.5626698" y2="16.762127" />
</svg>
`;var Nt=`select::placeholder{color:gray}select.ts-hidden-accessible{display:none}django-formset{--django-formset-color-invalid: rgb(255, 3, 0);--django-formset-shadow-invalid: rgb(255, 3, 0, 0.25);--django-formset-color-valid: rgb(0, 122, 0);--django-formset-icon-invalid: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 16" fill="rgb(255, 3, 0)"><path fill-rule="evenodd" d="M8 15A7 7 0 1 0 8 1a7 7 0 0 0 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/><path d="M7.002 11a1 1 0 1 1 2 0 1 1 0 0 1-2 0zM7.1 4.995a.905.905 0 1 1 1.8 0l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 4.995z"/></svg>');--django-formset-icon-warning: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 16" fill="rgb(255, 165, 0)"><path fill-rule="evenodd" d="M7.938 2.016a.146.146 0 0 0-.054.057L1.027 13.74a.176.176 0 0 0-.002.183c.016.03.037.05.054.06.015.01.034.017.066.017h13.713a.12.12 0 0 0 .066-.017.163.163 0 0 0 .055-.06.176.176 0 0 0-.003-.183L8.12 2.073a.146.146 0 0 0-.054-.057A.13.13 0 0 0 8.002 2a.13.13 0 0 0-.064.016zm1.044-.45a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767L8.982 1.566z"/><path d="M7.002 12a1 1 0 1 1 2 0 1 1 0 0 1-2 0zM7.1 5.995a.905.905 0 1 1 1.8 0l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 5.995z"/></svg>');--django-formset-icon-valid: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 16" fill="rgb(0, 122, 0)"><path fill-rule="evenodd" d="M10.97 4.97a.75.75 0 0 1 1.071 1.05l-3.992 4.99a.75.75 0 0 1-1.08.02L4.324 8.384a.75.75 0 1 1 1.06-1.06l2.094 2.093 3.473-4.425a.236.236 0 0 1 .02-.022z"/></svg>')}django-formset ul.dj-errorlist{list-style:none;margin-top:0;margin-bottom:0;margin-left:0;padding-left:0;color:var(--django-formset-color-invalid)}django-formset.dj-feedback-errors [role=group].dj-touched:not(.dj-submitted)>input[type=email]:not(.dj-exempt-feedback):invalid:not(:focus),django-formset.dj-feedback-errors [role=group].dj-touched:not(.dj-submitted) :not([role=group])>input[type=email]:not(.dj-exempt-feedback):invalid:not(:focus){border-color:var(--django-formset-color-invalid);background-image:var(--django-formset-icon-invalid)}django-formset.dj-feedback-errors [role=group].dj-touched:not(.dj-submitted)>input[type=text]:not(.dj-exempt-feedback):invalid:not(:focus),django-formset.dj-feedback-errors [role=group].dj-touched:not(.dj-submitted) :not([role=group])>input[type=text]:not(.dj-exempt-feedback):invalid:not(:focus){border-color:var(--django-formset-color-invalid);background-image:var(--django-formset-icon-invalid)}django-formset.dj-feedback-errors [role=group].dj-touched:not(.dj-submitted)>input[type=number]:not(.dj-exempt-feedback):invalid:not(:focus),django-formset.dj-feedback-errors [role=group].dj-touched:not(.dj-submitted) :not([role=group])>input[type=number]:not(.dj-exempt-feedback):invalid:not(:focus){border-color:var(--django-formset-color-invalid);background-image:var(--django-formset-icon-invalid)}django-formset.dj-feedback-errors [role=group].dj-touched:not(.dj-submitted)>input[type=regex]:not(.dj-exempt-feedback):invalid:not(:focus),django-formset.dj-feedback-errors [role=group].dj-touched:not(.dj-submitted) :not([role=group])>input[type=regex]:not(.dj-exempt-feedback):invalid:not(:focus){border-color:var(--django-formset-color-invalid);background-image:var(--django-formset-icon-invalid)}django-formset.dj-feedback-errors [role=group].dj-touched:not(.dj-submitted)>input[type=date]:not(.dj-exempt-feedback):invalid:not(:focus),django-formset.dj-feedback-errors [role=group].dj-touched:not(.dj-submitted) :not([role=group])>input[type=date]:not(.dj-exempt-feedback):invalid:not(:focus){border-color:var(--django-formset-color-invalid);background-image:var(--django-formset-icon-invalid)}django-formset.dj-feedback-errors [role=group].dj-touched:not(.dj-submitted)>input[type=datetime-local]:not(.dj-exempt-feedback):invalid:not(:focus),django-formset.dj-feedback-errors [role=group].dj-touched:not(.dj-submitted) :not([role=group])>input[type=datetime-local]:not(.dj-exempt-feedback):invalid:not(:focus){border-color:var(--django-formset-color-invalid);background-image:var(--django-formset-icon-invalid)}django-formset.dj-feedback-errors [role=group].dj-touched:not(.dj-submitted)>input[type=url]:not(.dj-exempt-feedback):invalid:not(:focus),django-formset.dj-feedback-errors [role=group].dj-touched:not(.dj-submitted) :not([role=group])>input[type=url]:not(.dj-exempt-feedback):invalid:not(:focus){border-color:var(--django-formset-color-invalid);background-image:var(--django-formset-icon-invalid)}django-formset.dj-feedback-errors [role=group].dj-touched:not(.dj-submitted)>input[type=password]:not(.dj-exempt-feedback):invalid:not(:focus),django-formset.dj-feedback-errors [role=group].dj-touched:not(.dj-submitted) :not([role=group])>input[type=password]:not(.dj-exempt-feedback):invalid:not(:focus){border-color:var(--django-formset-color-invalid);background-image:var(--django-formset-icon-invalid)}django-formset.dj-feedback-errors [role=group].dj-touched:not(.dj-submitted)>select:not(.dj-exempt-feedback):invalid:not(:focus),django-formset.dj-feedback-errors [role=group].dj-touched:not(.dj-submitted) :not([role=group])>select:not(.dj-exempt-feedback):invalid:not(:focus){border-color:var(--django-formset-color-invalid);background-image:var(--django-formset-icon-invalid)}django-formset.dj-feedback-errors [role=group].dj-touched:not(.dj-submitted)>textarea:not(.dj-exempt-feedback):invalid:not(:focus),django-formset.dj-feedback-errors [role=group].dj-touched:not(.dj-submitted) :not([role=group])>textarea:not(.dj-exempt-feedback):invalid:not(:focus){border-color:var(--django-formset-color-invalid);background-image:var(--django-formset-icon-invalid)}django-formset.dj-feedback-errors [role=group].dj-touched:not(.dj-submitted) input[is^=django]:invalid+[role=textbox]:not(.focus){border-color:var(--django-formset-color-invalid);background-image:var(--django-formset-icon-invalid)}django-formset.dj-feedback-warnings [role=group].dj-dirty:not(.dj-submitted)>input[type=email]:not(.dj-exempt-feedback):invalid:focus,django-formset.dj-feedback-warnings [role=group].dj-dirty:not(.dj-submitted) :not([role=group])>input[type=email]:not(.dj-exempt-feedback):invalid:focus{background-image:var(--django-formset-icon-warning)}django-formset.dj-feedback-warnings [role=group].dj-dirty:not(.dj-submitted)>input[type=text]:not(.dj-exempt-feedback):invalid:focus,django-formset.dj-feedback-warnings [role=group].dj-dirty:not(.dj-submitted) :not([role=group])>input[type=text]:not(.dj-exempt-feedback):invalid:focus{background-image:var(--django-formset-icon-warning)}django-formset.dj-feedback-warnings [role=group].dj-dirty:not(.dj-submitted)>input[type=number]:not(.dj-exempt-feedback):invalid:focus,django-formset.dj-feedback-warnings [role=group].dj-dirty:not(.dj-submitted) :not([role=group])>input[type=number]:not(.dj-exempt-feedback):invalid:focus{background-image:var(--django-formset-icon-warning)}django-formset.dj-feedback-warnings [role=group].dj-dirty:not(.dj-submitted)>input[type=regex]:not(.dj-exempt-feedback):invalid:focus,django-formset.dj-feedback-warnings [role=group].dj-dirty:not(.dj-submitted) :not([role=group])>input[type=regex]:not(.dj-exempt-feedback):invalid:focus{background-image:var(--django-formset-icon-warning)}django-formset.dj-feedback-warnings [role=group].dj-dirty:not(.dj-submitted)>input[type=date]:not(.dj-exempt-feedback):invalid:focus,django-formset.dj-feedback-warnings [role=group].dj-dirty:not(.dj-submitted) :not([role=group])>input[type=date]:not(.dj-exempt-feedback):invalid:focus{background-image:var(--django-formset-icon-warning)}django-formset.dj-feedback-warnings [role=group].dj-dirty:not(.dj-submitted)>input[type=datetime-local]:not(.dj-exempt-feedback):invalid:focus,django-formset.dj-feedback-warnings [role=group].dj-dirty:not(.dj-submitted) :not([role=group])>input[type=datetime-local]:not(.dj-exempt-feedback):invalid:focus{background-image:var(--django-formset-icon-warning)}django-formset.dj-feedback-warnings [role=group].dj-dirty:not(.dj-submitted)>input[type=url]:not(.dj-exempt-feedback):invalid:focus,django-formset.dj-feedback-warnings [role=group].dj-dirty:not(.dj-submitted) :not([role=group])>input[type=url]:not(.dj-exempt-feedback):invalid:focus{background-image:var(--django-formset-icon-warning)}django-formset.dj-feedback-warnings [role=group].dj-dirty:not(.dj-submitted)>input[type=password]:not(.dj-exempt-feedback):invalid:focus,django-formset.dj-feedback-warnings [role=group].dj-dirty:not(.dj-submitted) :not([role=group])>input[type=password]:not(.dj-exempt-feedback):invalid:focus{background-image:var(--django-formset-icon-warning)}django-formset.dj-feedback-warnings [role=group].dj-dirty:not(.dj-submitted)>select:not(.dj-exempt-feedback):invalid:focus,django-formset.dj-feedback-warnings [role=group].dj-dirty:not(.dj-submitted) :not([role=group])>select:not(.dj-exempt-feedback):invalid:focus{background-image:var(--django-formset-icon-warning)}django-formset.dj-feedback-warnings [role=group].dj-dirty:not(.dj-submitted)>textarea:not(.dj-exempt-feedback):invalid:focus,django-formset.dj-feedback-warnings [role=group].dj-dirty:not(.dj-submitted) :not([role=group])>textarea:not(.dj-exempt-feedback):invalid:focus{background-image:var(--django-formset-icon-warning)}django-formset.dj-feedback-warnings:not(.dj-feedback-errors) [role=group].dj-dirty:not(.dj-submitted)>input[type=email]:not(.dj-exempt-feedback):invalid,django-formset.dj-feedback-warnings:not(.dj-feedback-errors) [role=group].dj-dirty:not(.dj-submitted) :not([role=group])>input[type=email]:not(.dj-exempt-feedback):invalid{background-image:var(--django-formset-icon-warning)}django-formset.dj-feedback-warnings:not(.dj-feedback-errors) [role=group].dj-dirty:not(.dj-submitted)>input[type=text]:not(.dj-exempt-feedback):invalid,django-formset.dj-feedback-warnings:not(.dj-feedback-errors) [role=group].dj-dirty:not(.dj-submitted) :not([role=group])>input[type=text]:not(.dj-exempt-feedback):invalid{background-image:var(--django-formset-icon-warning)}django-formset.dj-feedback-warnings:not(.dj-feedback-errors) [role=group].dj-dirty:not(.dj-submitted)>input[type=number]:not(.dj-exempt-feedback):invalid,django-formset.dj-feedback-warnings:not(.dj-feedback-errors) [role=group].dj-dirty:not(.dj-submitted) :not([role=group])>input[type=number]:not(.dj-exempt-feedback):invalid{background-image:var(--django-formset-icon-warning)}django-formset.dj-feedback-warnings:not(.dj-feedback-errors) [role=group].dj-dirty:not(.dj-submitted)>input[type=regex]:not(.dj-exempt-feedback):invalid,django-formset.dj-feedback-warnings:not(.dj-feedback-errors) [role=group].dj-dirty:not(.dj-submitted) :not([role=group])>input[type=regex]:not(.dj-exempt-feedback):invalid{background-image:var(--django-formset-icon-warning)}django-formset.dj-feedback-warnings:not(.dj-feedback-errors) [role=group].dj-dirty:not(.dj-submitted)>input[type=date]:not(.dj-exempt-feedback):invalid,django-formset.dj-feedback-warnings:not(.dj-feedback-errors) [role=group].dj-dirty:not(.dj-submitted) :not([role=group])>input[type=date]:not(.dj-exempt-feedback):invalid{background-image:var(--django-formset-icon-warning)}django-formset.dj-feedback-warnings:not(.dj-feedback-errors) [role=group].dj-dirty:not(.dj-submitted)>input[type=datetime-local]:not(.dj-exempt-feedback):invalid,django-formset.dj-feedback-warnings:not(.dj-feedback-errors) [role=group].dj-dirty:not(.dj-submitted) :not([role=group])>input[type=datetime-local]:not(.dj-exempt-feedback):invalid{background-image:var(--django-formset-icon-warning)}django-formset.dj-feedback-warnings:not(.dj-feedback-errors) [role=group].dj-dirty:not(.dj-submitted)>input[type=url]:not(.dj-exempt-feedback):invalid,django-formset.dj-feedback-warnings:not(.dj-feedback-errors) [role=group].dj-dirty:not(.dj-submitted) :not([role=group])>input[type=url]:not(.dj-exempt-feedback):invalid{background-image:var(--django-formset-icon-warning)}django-formset.dj-feedback-warnings:not(.dj-feedback-errors) [role=group].dj-dirty:not(.dj-submitted)>input[type=password]:not(.dj-exempt-feedback):invalid,django-formset.dj-feedback-warnings:not(.dj-feedback-errors) [role=group].dj-dirty:not(.dj-submitted) :not([role=group])>input[type=password]:not(.dj-exempt-feedback):invalid{background-image:var(--django-formset-icon-warning)}django-formset.dj-feedback-warnings:not(.dj-feedback-errors) [role=group].dj-dirty:not(.dj-submitted)>select:not(.dj-exempt-feedback):invalid,django-formset.dj-feedback-warnings:not(.dj-feedback-errors) [role=group].dj-dirty:not(.dj-submitted) :not([role=group])>select:not(.dj-exempt-feedback):invalid{background-image:var(--django-formset-icon-warning)}django-formset.dj-feedback-warnings:not(.dj-feedback-errors) [role=group].dj-dirty:not(.dj-submitted)>textarea:not(.dj-exempt-feedback):invalid,django-formset.dj-feedback-warnings:not(.dj-feedback-errors) [role=group].dj-dirty:not(.dj-submitted) :not([role=group])>textarea:not(.dj-exempt-feedback):invalid{background-image:var(--django-formset-icon-warning)}django-formset.dj-feedback-success [role=group].dj-dirty>input[type=email]:not(.dj-exempt-feedback):valid:not(:focus),django-formset.dj-feedback-success [role=group].dj-dirty :not([role=group])>input[type=email]:not(.dj-exempt-feedback):valid:not(:focus){border-color:var(--django-formset-color-valid)}django-formset.dj-feedback-success [role=group].dj-dirty>input[type=text]:not(.dj-exempt-feedback):valid:not(:focus),django-formset.dj-feedback-success [role=group].dj-dirty :not([role=group])>input[type=text]:not(.dj-exempt-feedback):valid:not(:focus){border-color:var(--django-formset-color-valid)}django-formset.dj-feedback-success [role=group].dj-dirty>input[type=number]:not(.dj-exempt-feedback):valid:not(:focus),django-formset.dj-feedback-success [role=group].dj-dirty :not([role=group])>input[type=number]:not(.dj-exempt-feedback):valid:not(:focus){border-color:var(--django-formset-color-valid)}django-formset.dj-feedback-success [role=group].dj-dirty>input[type=regex]:not(.dj-exempt-feedback):valid:not(:focus),django-formset.dj-feedback-success [role=group].dj-dirty :not([role=group])>input[type=regex]:not(.dj-exempt-feedback):valid:not(:focus){border-color:var(--django-formset-color-valid)}django-formset.dj-feedback-success [role=group].dj-dirty>input[type=date]:not(.dj-exempt-feedback):valid:not(:focus),django-formset.dj-feedback-success [role=group].dj-dirty :not([role=group])>input[type=date]:not(.dj-exempt-feedback):valid:not(:focus){border-color:var(--django-formset-color-valid)}django-formset.dj-feedback-success [role=group].dj-dirty>input[type=datetime-local]:not(.dj-exempt-feedback):valid:not(:focus),django-formset.dj-feedback-success [role=group].dj-dirty :not([role=group])>input[type=datetime-local]:not(.dj-exempt-feedback):valid:not(:focus){border-color:var(--django-formset-color-valid)}django-formset.dj-feedback-success [role=group].dj-dirty>input[type=url]:not(.dj-exempt-feedback):valid:not(:focus),django-formset.dj-feedback-success [role=group].dj-dirty :not([role=group])>input[type=url]:not(.dj-exempt-feedback):valid:not(:focus){border-color:var(--django-formset-color-valid)}django-formset.dj-feedback-success [role=group].dj-dirty>input[type=password]:not(.dj-exempt-feedback):valid:not(:focus),django-formset.dj-feedback-success [role=group].dj-dirty :not([role=group])>input[type=password]:not(.dj-exempt-feedback):valid:not(:focus){border-color:var(--django-formset-color-valid)}django-formset.dj-feedback-success [role=group].dj-dirty>select:not(.dj-exempt-feedback):valid:not(:focus),django-formset.dj-feedback-success [role=group].dj-dirty :not([role=group])>select:not(.dj-exempt-feedback):valid:not(:focus){border-color:var(--django-formset-color-valid)}django-formset.dj-feedback-success [role=group].dj-dirty>textarea:not(.dj-exempt-feedback):valid:not(:focus),django-formset.dj-feedback-success [role=group].dj-dirty :not([role=group])>textarea:not(.dj-exempt-feedback):valid:not(:focus){border-color:var(--django-formset-color-valid)}django-formset.dj-feedback-success [role=group].dj-dirty>input[type=email]:not(.dj-exempt-feedback):valid,django-formset.dj-feedback-success [role=group].dj-dirty :not([role=group])>input[type=email]:not(.dj-exempt-feedback):valid{background-image:var(--django-formset-icon-valid) !important}django-formset.dj-feedback-success [role=group].dj-dirty>input[type=text]:not(.dj-exempt-feedback):valid,django-formset.dj-feedback-success [role=group].dj-dirty :not([role=group])>input[type=text]:not(.dj-exempt-feedback):valid{background-image:var(--django-formset-icon-valid) !important}django-formset.dj-feedback-success [role=group].dj-dirty>input[type=number]:not(.dj-exempt-feedback):valid,django-formset.dj-feedback-success [role=group].dj-dirty :not([role=group])>input[type=number]:not(.dj-exempt-feedback):valid{background-image:var(--django-formset-icon-valid) !important}django-formset.dj-feedback-success [role=group].dj-dirty>input[type=regex]:not(.dj-exempt-feedback):valid,django-formset.dj-feedback-success [role=group].dj-dirty :not([role=group])>input[type=regex]:not(.dj-exempt-feedback):valid{background-image:var(--django-formset-icon-valid) !important}django-formset.dj-feedback-success [role=group].dj-dirty>input[type=date]:not(.dj-exempt-feedback):valid,django-formset.dj-feedback-success [role=group].dj-dirty :not([role=group])>input[type=date]:not(.dj-exempt-feedback):valid{background-image:var(--django-formset-icon-valid) !important}django-formset.dj-feedback-success [role=group].dj-dirty>input[type=datetime-local]:not(.dj-exempt-feedback):valid,django-formset.dj-feedback-success [role=group].dj-dirty :not([role=group])>input[type=datetime-local]:not(.dj-exempt-feedback):valid{background-image:var(--django-formset-icon-valid) !important}django-formset.dj-feedback-success [role=group].dj-dirty>input[type=url]:not(.dj-exempt-feedback):valid,django-formset.dj-feedback-success [role=group].dj-dirty :not([role=group])>input[type=url]:not(.dj-exempt-feedback):valid{background-image:var(--django-formset-icon-valid) !important}django-formset.dj-feedback-success [role=group].dj-dirty>input[type=password]:not(.dj-exempt-feedback):valid,django-formset.dj-feedback-success [role=group].dj-dirty :not([role=group])>input[type=password]:not(.dj-exempt-feedback):valid{background-image:var(--django-formset-icon-valid) !important}django-formset.dj-feedback-success [role=group].dj-dirty input[is^=django]:valid+[role=textbox]:not(.focus){border-color:var(--django-formset-color-valid);background-image:var(--django-formset-icon-valid) !important}django-formset [role=group][hidden]{display:none}django-formset [role=group].dj-required>label,django-formset [role=group].dj-required-any>label{font-weight:bolder}django-formset [role=group].dj-submitted>input[type=email]:not(.dj-exempt-feedback):invalid{border-color:var(--django-formset-color-invalid);background-image:var(--django-formset-icon-invalid)}django-formset [role=group].dj-submitted>input[type=email]:not(.dj-exempt-feedback):invalid:focus{box-shadow:0 0 0 .2rem var(--django-formset-shadow-invalid)}django-formset [role=group].dj-submitted>input[type=text]:not(.dj-exempt-feedback):invalid{border-color:var(--django-formset-color-invalid);background-image:var(--django-formset-icon-invalid)}django-formset [role=group].dj-submitted>input[type=text]:not(.dj-exempt-feedback):invalid:focus{box-shadow:0 0 0 .2rem var(--django-formset-shadow-invalid)}django-formset [role=group].dj-submitted>input[type=number]:not(.dj-exempt-feedback):invalid{border-color:var(--django-formset-color-invalid);background-image:var(--django-formset-icon-invalid)}django-formset [role=group].dj-submitted>input[type=number]:not(.dj-exempt-feedback):invalid:focus{box-shadow:0 0 0 .2rem var(--django-formset-shadow-invalid)}django-formset [role=group].dj-submitted>input[type=regex]:not(.dj-exempt-feedback):invalid{border-color:var(--django-formset-color-invalid);background-image:var(--django-formset-icon-invalid)}django-formset [role=group].dj-submitted>input[type=regex]:not(.dj-exempt-feedback):invalid:focus{box-shadow:0 0 0 .2rem var(--django-formset-shadow-invalid)}django-formset [role=group].dj-submitted>input[type=date]:not(.dj-exempt-feedback):invalid{border-color:var(--django-formset-color-invalid);background-image:var(--django-formset-icon-invalid)}django-formset [role=group].dj-submitted>input[type=date]:not(.dj-exempt-feedback):invalid:focus{box-shadow:0 0 0 .2rem var(--django-formset-shadow-invalid)}django-formset [role=group].dj-submitted>input[type=datetime-local]:not(.dj-exempt-feedback):invalid{border-color:var(--django-formset-color-invalid);background-image:var(--django-formset-icon-invalid)}django-formset [role=group].dj-submitted>input[type=datetime-local]:not(.dj-exempt-feedback):invalid:focus{box-shadow:0 0 0 .2rem var(--django-formset-shadow-invalid)}django-formset [role=group].dj-submitted>input[type=url]:not(.dj-exempt-feedback):invalid{border-color:var(--django-formset-color-invalid);background-image:var(--django-formset-icon-invalid)}django-formset [role=group].dj-submitted>input[type=url]:not(.dj-exempt-feedback):invalid:focus{box-shadow:0 0 0 .2rem var(--django-formset-shadow-invalid)}django-formset [role=group].dj-submitted>input[type=password]:not(.dj-exempt-feedback):invalid{border-color:var(--django-formset-color-invalid);background-image:var(--django-formset-icon-invalid)}django-formset [role=group].dj-submitted>input[type=password]:not(.dj-exempt-feedback):invalid:focus{box-shadow:0 0 0 .2rem var(--django-formset-shadow-invalid)}django-formset [role=group].dj-submitted>select:not(.dj-exempt-feedback):invalid{border-color:var(--django-formset-color-invalid);background-image:var(--django-formset-icon-invalid)}django-formset [role=group].dj-submitted>select:not(.dj-exempt-feedback):invalid:focus{box-shadow:0 0 0 .2rem var(--django-formset-shadow-invalid)}django-formset [role=group].dj-submitted>textarea:not(.dj-exempt-feedback):invalid{border-color:var(--django-formset-color-invalid);background-image:var(--django-formset-icon-invalid)}django-formset [role=group].dj-submitted>textarea:not(.dj-exempt-feedback):invalid:focus{box-shadow:0 0 0 .2rem var(--django-formset-shadow-invalid)}django-formset [role=group].dj-submitted input[is^=django]:invalid+[role=textbox]{border-color:var(--django-formset-color-invalid);background-image:var(--django-formset-icon-invalid)}django-formset [role=group].dj-submitted input[is^=django]:focus:invalid+[role=textbox],django-formset [role=group].dj-submitted input[is^=django]:invalid+[role=textbox].focus{box-shadow:0 0 0 .2rem var(--django-formset-shadow-invalid)}django-formset [role=group] input,django-formset [role=group] [role=textbox]{background-repeat:no-repeat !important;background-position:center right !important;background-origin:content-box !important}django-formset [role=group] input[type^=date]{position:relative}django-formset [role=group] input[type^=date]::-webkit-datetime-edit-fields-wrapper{margin-left:1.75em}django-formset [role=group] input[type^=date]::-webkit-calendar-picker-indicator{cursor:pointer;position:absolute;left:.75em}django-formset [role=group] input[type^=date]:hover::-webkit-calendar-picker-indicator{cursor:pointer}django-formset [role=group] select,django-formset [role=group] textarea{background-image:none !important}django-formset [role=group] select.dj-concealed,django-formset [role=group] textarea.dj-concealed{display:block !important;height:1px !important;min-height:initial !important;max-height:initial !important;padding:0 !important;margin:-1px 0 0 0 !important;border:none !important;opacity:0 !important;resize:none}django-formset [role=group] .dj-help-text{font-style:oblique}django-formset [role=group] .dj-form-optgroup{margin-bottom:.5rem}django-formset [role=group] .dj-form-optgroup>em{margin-left:.75rem}django-formset [role=group] .dj-form-inlined{display:inline-block}django-formset [role=group] input[type=file]{width:0 !important;height:0 !important}django-formset [role=group] .dj-control-panel{display:flex}django-formset [role=group] .dj-control-panel>div{height:fit-content;margin-left:.5rem}django-formset [role=group] .dj-control-panel>div progress{width:100%;margin-top:.25rem}django-formset [role=group] figure.dj-dropbox{all:unset;display:inline-flex;align-items:center;justify-content:space-between;background-color:#f5f5f5;margin:0 0 .25rem .25rem;padding:0;list-style:none;height:8rem;min-width:8rem;outline:gray thin dotted}django-formset [role=group] figure.dj-dropbox>div.dj-empty-item{flex-grow:1;text-align:center;height:auto}django-formset [role=group] figure.dj-dropbox>div.dj-empty-item p{padding-left:.5rem;padding-right:.5rem}django-formset [role=group] figure.dj-dropbox>img{all:unset;flex-grow:1;display:block;height:inherit;max-width:calc(100% - 12rem)}django-formset [role=group] figure.dj-dropbox>figcaption{all:unset;padding:.25rem .5rem;background-color:#fff;overflow-x:hidden;min-width:12rem}django-formset [role=group] figure.dj-dropbox>figcaption dl{font-size:small;margin:0 0 .25rem 0}django-formset [role=group] figure.dj-dropbox>figcaption dl dd{margin:0}django-formset [role=group] figure.dj-dropbox>figcaption .dj-delete-file,django-formset [role=group] figure.dj-dropbox>figcaption .dj-download-file{font-weight:bold;display:inline-block;cursor:pointer;text-decoration:none}django-formset [role=group] figure.dj-dropbox>figcaption .dj-delete-file:hover,django-formset [role=group] figure.dj-dropbox>figcaption .dj-download-file:hover{text-decoration:underline}django-formset [role=group] figure.dj-dropbox>figcaption .dj-download-file{margin-left:1rem;float:right}django-formset [role=group] .dj-dual-selector{display:flex}django-formset [role=group] .dj-dual-selector .left-column,django-formset [role=group] .dj-dual-selector .right-column,django-formset [role=group] .dj-dual-selector .control-column,django-formset [role=group] .dj-dual-selector .control-panel{display:flex;flex-direction:column}django-formset [role=group] .dj-dual-selector .control-column{justify-content:center;align-items:center}django-formset [role=group] .dj-dual-selector .control-panel{padding:1rem .5rem}django-formset [role=group] .dj-dual-selector select,django-formset [role=group] .dj-dual-selector django-sortable-select{min-width:10rem}django-formset [role=group] .dj-dual-selector select{height:auto}django-formset [role=group] .dj-dual-selector input{z-index:1}django-formset [role=group] .dj-dual-selector button svg{vertical-align:middle;width:16px;height:16px}django-formset [role=group] .dj-dual-selector.invalid .right-column:has(>input:focus,>select:focus,>django-sortable-select.focus){border-color:var(--django-formset-color-invalid);box-shadow:0 0 0 .2rem var(--django-formset-shadow-invalid)}django-formset [role=group] .dj-dual-selector.invalid .right-column:has(>input:focus,>select:focus,>django-sortable-select.focus)>input,django-formset [role=group] .dj-dual-selector.invalid .right-column:has(>input:focus,>select:focus,>django-sortable-select.focus)>select,django-formset [role=group] .dj-dual-selector.invalid .right-column:has(>input:focus,>select:focus,>django-sortable-select.focus)>django-sortable-select{border-color:var(--django-formset-color-invalid)}django-formset [is^=django-][hidden]{display:block !important;width:0 !important;height:0 !important;padding:0 !important;margin:0 !important;border:none !important;outline:none !important;box-shadow:none !important}django-formset [is^=django-][hidden]::-webkit-calendar-picker-indicator{display:none}django-formset dialog{position:fixed;top:0;z-index:1}django-formset dialog:not([df-modal]) .dialog-header{cursor:pointer}django-formset dialog .dialog-header{display:flex;flex-shrink:0;flex-wrap:wrap;align-items:center;justify-content:space-between}django-formset dialog .dialog-footer{display:flex;flex-shrink:0;flex-wrap:wrap;align-items:center;justify-content:flex-end}.dj-button-decorator{line-height:initial}.dj-button-decorator svg{vertical-align:baseline;width:1rem;height:1rem}.dj-button-decorator svg .path{stroke-dasharray:1000;stroke-dashoffset:0}.dj-button-decorator svg .path.circle{animation:dash .9s ease-in-out}.dj-button-decorator svg .path.line{stroke-dashoffset:1000;animation:dash .9s .35s ease-in-out forwards}.dj-button-decorator svg .path.check{stroke-dashoffset:-100;animation:dash-check .9s .35s ease-in-out forwards}.dj-button-decorator svg .spinner{transform-origin:center;animation:rotate 1.5s infinite linear}@keyframes dash{0%{stroke-dashoffset:1000}100%{stroke-dashoffset:0}}@keyframes dash-check{0%{stroke-dashoffset:-100}100%{stroke-dashoffset:900}}@keyframes rotate{from{transform:rotate(0deg)}to{transform:rotate(360deg)}}.dj-button-decorator .dj-icon{display:inline-block;width:1em;height:1em}`;var He="__all__",Wo="_collection_errors_",Qo="_marked_for_removal_",Xt=document.createElement("style");Xt.innerText=Nt;document.head.appendChild(Xt);var De=class{constructor(e){this.value=e}},Oe=class{constructor(e,t){this.form=e,this.element=t;let r;this.isInitialized=new Promise(m=>r=m),this.errorPlaceholder=t.querySelector(".dj-errorlist > .dj-placeholder"),this.errorMessages=new mt(t);let n=t.classList.contains("dj-required-any"),i=m=>m instanceof HTMLInputElement&&m.name&&m.form===e.element&&m.type!=="hidden",s=Array.from(t.getElementsByTagName("INPUT")).filter(i);for(let m of s)switch(m.type){case"checkbox":case"radio":m.addEventListener("input",()=>{this.touch(),this.inputted()}),m.addEventListener("change",()=>{n?this.validateCheckboxSelectMultiple():this.validate()});break;case"file":this.fileUploader=new he(this,m),m.addEventListener("invalid",()=>this.showErrorMessage(m));break;default:m.addEventListener("focus",()=>this.touch()),m.addEventListener("input",()=>this.inputted()),m.addEventListener("blur",()=>this.validate()),m.addEventListener("invalid",()=>this.showErrorMessage(m));break}this.fieldElements=Array(0).concat(s);let u=m=>m instanceof HTMLSelectElement&&m.name&&m.form===e.element,d=Array.from(t.getElementsByTagName("SELECT")).filter(u).at(0);d instanceof HTMLSelectElement&&(d.addEventListener("focus",()=>this.touch()),d.addEventListener("change",()=>{this.setDirty(),this.clearCustomError(),this.validate()}),d.addEventListener("invalid",()=>this.showErrorMessage(d)),this.fieldElements.push(d));let l=m=>m instanceof HTMLTextAreaElement&&m.name&&m.form===e.element,a=Array.from(t.getElementsByTagName("TEXTAREA")).filter(l).at(0);a instanceof HTMLTextAreaElement&&(a.addEventListener("focus",()=>this.touch()),a.addEventListener("input",()=>this.inputted()),a.addEventListener("blur",()=>this.validate()),a.addEventListener("invalid",()=>this.showErrorMessage(a)),this.fieldElements.push(a)),a&&"isInitialized"in a?a.addEventListener("initialized",()=>r(a.isInitialized)):r(!0),this.name=this.assertUniqueName(),this.initialDisabled=this.fieldElements.map(m=>m.disabled),this.initialRequired=this.fieldElements.map(m=>m.required),n?this.validateCheckboxSelectMultiple():this.validateBoundField(),this.pristineValue=new De(this.aggregateValue()),this.updateVisibility=this.evalVisibility("df-show",!0)??this.evalVisibility("df-hide",!1)??function(){},this.updateDisabled=this.evalDisable(),this.updateRequired=this.evalRequire(),this.untouch(),this.setPristine()}aggregateValue(){var e,t;if(this.fieldElements.length===1){let r=this.fieldElements[0];if(r.type==="checkbox")return r.checked?r.value:"";if(r.type==="select-multiple"){let n=r;return Array.from(n.selectedOptions).map(i=>i.value)}if(r.type==="file")return this.fileUploader.uploadedFiles;if(r instanceof HTMLInputElement){if(window.customElements.get("django-datefield")&&r.getAttribute("is")==="django-datefield"||window.customElements.get("django-datecalendar")&&r.getAttribute("is")==="django-datecalendar"||window.customElements.get("django-datepicker")&&r.getAttribute("is")==="django-datepicker")return((e=r.valueAsDate)==null?void 0:e.toISOString().slice(0,10))??"";if(window.customElements.get("django-datetimefield")&&r.getAttribute("is")==="django-datetimefield"||window.customElements.get("django-datetimecalendar")&&r.getAttribute("is")==="django-datetimecalendar"||window.customElements.get("django-datetimepicker")&&r.getAttribute("is")==="django-datetimepicker")return((t=r.valueAsDate)==null?void 0:t.toISOString().replace("T"," ").slice(0,16))??"";if(window.customElements.get("django-daterangefield")&&r.getAttribute("is")==="django-daterangefield"||window.customElements.get("django-daterangecalendar")&&r.getAttribute("is")==="django-daterangecalendar"||window.customElements.get("django-daterangepicker")&&r.getAttribute("is")==="django-daterangepicker")return r.value?r.value.split(";").map(n=>n.slice(0,10)):["",""];if(window.customElements.get("django-datetimerangefield")&&r.getAttribute("is")==="django-datetimerangefield"||window.customElements.get("django-datetimerangecalendar")&&r.getAttribute("is")==="django-datetimerangecalendar"||window.customElements.get("django-datetimerangepicker")&&r.getAttribute("is")==="django-datetimerangepicker")return r.value?r.value.split(";").map(n=>n.slice(0,16)):["",""]}return r.value}else{let r=[];for(let n of this.fieldElements)if(n.type==="checkbox")n.checked&&r.push(n.value);else if(n.type==="radio"&&n.checked)return n.value;return r}}setFieldValue(e){if(this.fieldElements.length===1){let t=this.fieldElements[0];if(t.type==="checkbox")t.checked=e===t.value;else if(t.type==="select-multiple"){let r=t,n=Array.from(r.options).filter(i=>e.includes(i.value));for(let i of n)i.selected=!0}else t.type!=="file"&&(t.value=e)}else{let t=e;for(let r of this.fieldElements)r.type==="checkbox"&&(r.checked=t.includes(r.value))}this.validate()}updateOperability(...e){this.updateVisibility(),this.updateDisabled(),this.updateRequired(),this.fieldElements.filter(t=>(0,je.default)(t.updateOperability)).forEach(t=>t.updateOperability(...e))}disableRequiredConstraint(){this.fieldElements.forEach(e=>e.required=!1)}restoreRequiredConstraint(){this.fieldElements.forEach((e,t)=>e.required=this.initialRequired[t])}assertUniqueName(){let e="__undefined__";for(let t of this.fieldElements)if(e==="__undefined__")e=t.name;else if(e!==t.name)throw new Error(`Duplicate name '${e}' on multiple input fields on '${t.name}'`);return e}evalVisibility(e,t){var i;function r(s){return Array.isArray(s)?s.length!==0:!!s}let n=(i=this.fieldElements[0])==null?void 0:i.getAttribute(e);if(!(0,L.default)(n))return null;try{let s=new Function(`return ${I(n,{startRule:"OperabilityExpression"})};`);return()=>{let u=t!=r(s.call(this));this.element.hasAttribute("hidden")!==u&&(this.fieldElements.forEach((d,l)=>d.disabled=u||this.initialDisabled[l]),this.element.toggleAttribute("hidden",u))}}catch(s){throw new Error(`Error while parsing <... df-show/hide="${n}">: ${s}.`)}}evalDisable(){var t;let e=(t=this.fieldElements[0])==null?void 0:t.getAttribute("df-disable");if(!(0,L.default)(e))return()=>{};try{let r=new Function("return "+I(e,{startRule:"OperabilityExpression"}));return()=>{let n=r.call(this);this.fieldElements.forEach((i,s)=>i.disabled=n||this.initialDisabled[s])}}catch(r){throw new Error(`Error while parsing <... df-disable="${e}">: ${r}.`)}}evalRequire(){var t;let e=(t=this.fieldElements[0])==null?void 0:t.getAttribute("df-require");if(!(0,L.default)(e))return()=>{};try{let r=new Function("return "+I(e,{startRule:"OperabilityExpression"}));return()=>{let n=r.call(this);this.fieldElements.forEach((i,s)=>i.required=n&&this.initialRequired[s]),this.form.checkValidity()}}catch(r){throw new Error(`Error while parsing <... df-require="${e}">: ${r}.`)}}getDataValue(e){return this.form.getDataValue(e)}inputted(){(0,_.default)(this.pristineValue,this.aggregateValue())?this.setPristine():this.setDirty(),this.clearCustomError(),this.form.restoreRequiredConstraints()}clearCustomError(){this.form.clearCustomErrors(),this.errorPlaceholder&&(this.errorPlaceholder.innerHTML="");for(let e of this.fieldElements)e.validity.customError&&e.setCustomValidity("")}resetToInitial(){var e;(e=this.fileUploader)==null||e.resetToInitial(),this.untouch(),this.setPristine(),this.clearCustomError()}disableAllFields(){this.fieldElements.forEach(e=>e.disabled=!0)}reenableAllFields(){this.fieldElements.forEach((e,t)=>e.disabled=this.initialDisabled[t])}touch(){this.element.classList.remove("dj-untouched","dj-validated"),this.element.classList.add("dj-touched")}untouch(){this.element.classList.remove("dj-submitted","dj-touched"),this.element.classList.add("dj-untouched"),this.errorPlaceholder&&(this.errorPlaceholder.innerHTML="")}setDirty(){this.element.classList.remove("dj-submitted","dj-pristine"),this.element.classList.add("dj-dirty")}setPristine(){this.element.classList.remove("dj-dirty"),this.element.classList.add("dj-pristine")}get isPristine(){return this.element.classList.contains("dj-pristine")}get isTouched(){return this.element.classList.contains("dj-touched")}setSubmitted(){this.element.classList.add("dj-submitted")}showErrorMessage(e){let t=this.element.classList.contains("dj-submitted");if(!(!(this.isTouched||t)||!this.form.formset.showFeedbackMessages||!this.errorPlaceholder))for(let[r,n]of this.errorMessages)e.validity[r]&&(this.errorPlaceholder.innerHTML=n)}validate(){let e=null;for(e of this.fieldElements)if(e instanceof HTMLInputElement&&e.hasAttribute("is")&&e.checkValidity(),!(e!=null&&e.validity.valid))break;e&&!e.validity.valid&&(e.dispatchEvent(new Event("invalid",{bubbles:!0})),e instanceof HTMLInputElement&&e.type==="file"&&this.validateFileInput(e,this.form.formset.showFeedbackMessages)),this.form.validate()}validateCheckboxSelectMultiple(){let e=!1;for(let t of this.fieldElements){if(t.type!=="checkbox")throw new Error("Expected input element of type 'checkbox'.");t.checked?e=!0:t.setCustomValidity(this.errorMessages.get("customError")??"")}if(e)for(let t of this.fieldElements)t.setCustomValidity("");else this.pristineValue!==void 0&&this.errorPlaceholder&&this.form.formset.showFeedbackMessages&&(this.errorPlaceholder.innerHTML=this.errorMessages.get("customError")??"");return this.form.validate(),e}validateFileInput(e,t){return this.fileUploader.inProgress()?(this.errorPlaceholder&&t&&(this.errorPlaceholder.innerHTML=this.errorMessages.get("typeMismatch")??""),!1):!0}validateBoundField(){if(this.fieldElements.length!==1||!(this.fieldElements[0]instanceof HTMLInputElement))return;let e=this.fieldElements[0];if(e.value&&e.type==="text"){if(e.minLength>0&&e.value.length<e.minLength)return e.setCustomValidity(this.errorMessages.get("tooShort")??"");if(e.maxLength>0&&e.value.length>e.maxLength)return e.setCustomValidity(this.errorMessages.get("tooLong")??"")}}setValidationError(){let e=null;for(e of this.fieldElements)if(!e.validity.valid)break;for(let[t,r]of this.errorMessages)if(e&&e.validity[t])return this.errorPlaceholder&&(this.errorPlaceholder.innerHTML=r,e.setCustomValidity(r)),!1;return e instanceof HTMLInputElement&&e.type==="file"?this.validateFileInput(e,!0):!0}reportCustomError(e){this.errorPlaceholder&&(this.errorPlaceholder.innerHTML=e),this.fieldElements[0].setCustomValidity(e)}reportFailedUpload(){this.errorPlaceholder&&(this.errorPlaceholder.innerHTML=this.errorMessages.get("badInput")??"File upload failed")}},Y=class{constructor(e,t){this.func=e,this.args=t}},J=class{constructor(e,t){this.successChain=e,this.rejectChain=t}},Re=class{constructor(e,t,r){this.condition=e,this.fulfilled=t,this.otherwise=r}};var ee=class{constructor(e,t,r){this.clickHandler=()=>{};this.path=[];this.clicked=e=>{e.currentTarget===this.element&&(this.formset.currentActiveButton=this,this.clickHandler())};var n;this.formset=e,this.element=t,this.initialClass=t.getAttribute("class")??"",this.isAutoDisabled=t.hasAttribute("auto-disable"),this.decoratorElement=t.querySelector(".dj-button-decorator"),this.originalDecorator=(n=this.decoratorElement)==null?void 0:n.cloneNode(!0),this.spinnerElement=document.createElement("i"),this.spinnerElement.classList.add("dj-icon","dj-spinner"),this.spinnerElement.innerHTML=Bt,this.okayElement=document.createElement("i"),this.okayElement.classList.add("dj-icon","dj-okay"),this.okayElement.innerHTML=_t,this.bummerElement=document.createElement("i"),this.bummerElement.classList.add("dj-icon","dj-bummer"),this.bummerElement.innerHTML=$t,this.path=r,this.parseActionsQueue(t.getAttribute("df-click")),this.updateVisibility=this.evalVisibility("df-show",!0)??this.evalVisibility("df-hide",!1)??function(){},this.updateDisabled=this.evalDisable(),t.addEventListener("click",this.clicked)}evalVisibility(e,t){let r=this.element.getAttribute(e);if(r===null)return null;try{let n=new Function(`return ${I(r,{startRule:"OperabilityExpression"})}`);return()=>{let i=t!=!!n.call(this);this.element.hasAttribute("hidden")!==i&&this.element.toggleAttribute("hidden",i)}}catch(n){throw new Error(`Error while parsing <button df-show/hide="${r}">: ${n}.`)}}evalDisable(){let e=this.element.getAttribute("df-disable");if(!(0,L.default)(e))return()=>{};try{let t=new Function(`return ${I(e,{startRule:"OperabilityExpression"})}`);return()=>this.element.disabled=t.call(this)}catch(t){throw new Error(`Error while parsing <button df-disable="${e}">: ${t}.`)}}autoDisable(e){this.isAutoDisabled&&(this.element.disabled=!e)}disable(){return e=>(this.element.disabled=!0,Promise.resolve(e))}enable(){return e=>(this.element.disabled=!1,Promise.resolve(e))}submit(e){return()=>new Promise((t,r)=>{this.formset.submit(e).then(n=>n instanceof Response&&n.status===200?t(n):r(n))})}submitPartial(e){return()=>new Promise((t,r)=>{let n=this.path.slice(0,-1);this.formset.submitPartial(n,e).then(i=>i instanceof Response&&i.status===200?t(i):r(i))})}reset(){return e=>(this.formset.resetToInitial(),Promise.resolve(e))}reload(e){return t=>(e?location.reload():location.replace(window.location.pathname),new Promise(r=>window.setTimeout(()=>r(t),3e3)))}proceed(e){return async t=>{if((0,L.default)(e)&&e.length>0)location.href=e;else if(t instanceof Response&&t.status===200){let r=await t.clone().json();r.success_url?location.href=r.success_url:console.warn("Neither a success-, nor a proceed-URL are given.")}return new Promise(r=>window.setTimeout(()=>r(t),3e3))}}delay(e){return t=>new Promise(r=>this.timeoutHandler=window.setTimeout(()=>{this.timeoutHandler=void 0,r(t)},e))}spinner(){return e=>{var t;return(t=this.decoratorElement)==null||t.replaceChildren(this.spinnerElement),Promise.resolve(e)}}okay(e){return this.decorate(this.okayElement,e)}bummer(e){return this.decorate(this.bummerElement,e)}addClass(e){return t=>(this.element.classList.add(e),Promise.resolve(t))}removeClass(e){return t=>(this.element.classList.remove(e),Promise.resolve(t))}toggleClass(e){return t=>(this.element.classList.toggle(e),Promise.resolve(t))}emit(e,t){return r=>{let n={bubbles:!0,cancelable:!0};return t!==void 0?(Object.assign(n,{detail:t}),this.element.dispatchEvent(new CustomEvent(e,n))):this.element.dispatchEvent(new Event(e,n)),Promise.resolve(r)}}intercept(e){return t=>{let r={request:this.formset.buildBody(),response:null},n=e?document.querySelector(e):null;return n?t.clone().json().then(i=>{r.response=i,n.innerHTML=JSON.stringify(r,null,"  ")}):console.info(r),Promise.resolve(t)}}clearErrors(){return e=>(this.formset.clearErrors(),Promise.resolve(e))}scrollToError(){return e=>{let t=this.formset.findFirstErrorReport();return t&&t.scrollIntoView({behavior:"smooth"}),Promise.resolve(e)}}confirm(e){if(!(0,L.default)(e))throw new Error("The confirm() action requires a message.");return t=>window.confirm(e)?Promise.resolve(t):Promise.reject({})}alertOnError(){return e=>(e.status!==422&&window.alert(e.statusText),Promise.resolve(e))}activate(...e){return t=>(this.formset.updateOperability(this,...e),Promise.resolve(t))}setFieldValue(e,t){return r=>(this.formset.setFieldValue(e,t),Promise.resolve(r))}deletePartial(e,t){return r=>((0,L.default)(t)&&parseInt(t)&&this.formset.deletePartial(e,t),Promise.resolve(r))}prefillPartial(e){return t=>{let r=this.formset.prefillPartial(e,t);return Promise.resolve(r)}}noop(){return e=>Promise.resolve(e)}restore(){window.setTimeout(()=>this.restoreToInitial())}decorate(e,t){return r=>{var n;return(n=this.decoratorElement)==null||n.replaceChildren(e),(0,Z.default)(t)?new Promise(i=>this.timeoutHandler=window.setTimeout(()=>{this.timeoutHandler=void 0,i(r)},t)):Promise.resolve(r)}}setClickHandler(e){let t=u=>d=>d instanceof Y?d.func.call(this,...d.args.map(t(u)),u):d,r=u=>{let d;for(let l of u.values())d=d?d.then(async a=>{let m=a?await a.clone().json():{};return l.func.apply(this,l.args.map(t(m)))(a)}):l.func.apply(this,l.args.map(t()))();return d},n=(u,d)=>{let l;for(let a of u.values())l=l?l.then(async m=>{let N=m?await m.clone().json():{};return a.func.apply(this,a.args.map(t(N)))(m)}):a.func.apply(this,a.args.map(t()))(d);return l},i=u=>{var d,l;(l=(d=r(u.successChain))==null?void 0:d.then(()=>{this.restore.apply(this)}))==null||l.catch(a=>{var m;(m=n(u.rejectChain,a))==null||m.finally(()=>{this.restore.apply(this)})})},s=u=>{u.condition.call(this)?u.fulfilled instanceof J?i(u.fulfilled):s(u.fulfilled):u.otherwise instanceof J?i(u.otherwise):s(u.otherwise)};this.clickHandler=()=>{e instanceof J?i(e):s(e)}}parseActionsQueue(e){if(!e)return;let t=i=>{if((0,zt.default)(i)&&(0,L.default)(i._funcName)&&Array.isArray(i._funcArgs)){let s=this[i._funcName];if(!(0,je.default)(s))throw new Error(`Unknown function '${i._funcName}'.`);return new Y(s,i._funcArgs.map(t))}return i},r=i=>{let s=i.map(t);return s.length===0&&s.push(new Y(this.noop,[])),s},n=i=>i.condition===!0?new J(r(i.fulfilled.successChain),r(i.fulfilled.rejectChain)):new Re(Function(i.condition),n(i.fulfilled),n(i.otherwise));try{let i=I(e,{startRule:"Ternary"}),s=n(i);this.setClickHandler(s)}catch(i){throw new Error(`Error while parsing <button df-click="${e}">: ${i}.`)}}restoreToInitial(){var e;this.element.disabled=!1,this.element.setAttribute("class",this.initialClass),this.originalDecorator&&((e=this.decoratorElement)==null||e.replaceChildren(...this.originalDecorator.cloneNode(!0).childNodes)),this.formset.currentActiveButton=null}getDataValue(e){return this.formset.getDataValue(e)}getResponseValue(e,t){return(0,H.default)(t,e)}updateOperability(...e){this.updateVisibility(),this.updateDisabled()}abortAction(){this.timeoutHandler&&(clearTimeout(this.timeoutHandler),this.timeoutHandler=void 0)}},qe=class{constructor(e,t){this.form=e,this.element=t,this.updateVisibility=this.evalVisibility("df-show",!0)??this.evalVisibility("df-hide",!1)??function(){},this.updateDisabled=this.evalDisable()}evalVisibility(e,t){let r=this.element.getAttribute(e);if(r===null)return null;try{let n=new Function(`return ${I(r,{startRule:"OperabilityExpression"})}`);return()=>{let i=t!=!!n.call(this);this.element.hasAttribute("hidden")!==i&&this.element.toggleAttribute("hidden",i)}}catch(n){throw new Error(`Error while parsing <fieldset df-show/hide="${r}">: ${n}.`)}}evalDisable(){let e=this.element.getAttribute("df-disable");if(!(0,L.default)(e))return()=>{};try{let t=new Function(`return ${I(e,{startRule:"OperabilityExpression"})}`);return()=>this.element.disabled=t.call(this)}catch(t){throw new Error(`Error while parsing <fieldset df-disable="${e}">: ${t}.`)}}getDataValue(e){return this.form.getDataValue(e)}updateOperability(...e){this.updateVisibility(),this.updateDisabled()}},Ve=class extends pt{constructor(e,t){super(t),this.form=e}openDialog(...e){this.element.open||(this.form.setPristine(),this.form.untouch(),e[0]instanceof ee&&(0,je.default)(e[1])&&e[1].call(e[0],this.form.path),super.openDialog(...e))}closeDialog(...e){if((0,L.default)(e[1]))switch(e[1]){case"apply":this.form.isValid()&&this.element.close("apply");break;case"close":this.element.blur(),this.element.close("close");break;case"reset":this.form.resetToInitial();break;case"clear":this.form.resetToInitial(),this.element.blur(),this.element.close("clear");break;default:break}}getDataValue(e){return this.form.getDataValue(e)}isButtonActive(e,t){let r=e[0]!==""?e:(()=>{let i=[...this.form.path],s=e.filter(d=>d!==""),u=e.length-s.length;return i.splice(i.length-u+1),i.push(...s),i})(),n=this.form.formset.buttons.find(i=>(0,_.default)(i.path,r));return t==="active"&&n===this.form.formset.currentActiveButton}},Be=class{constructor(e,t){this.errorList=null;this.errorPlaceholder=null;this.fieldGroups=Array(0);this.hiddenInputFields=Array(0);this.parentDialog=null;this.markedForRemoval=!1;this.handleSubmit=e=>{if(e.target instanceof HTMLFormElement&&e.target.method==="dialog"){this.setSubmitted();return}e.preventDefault()};this.handleReset=()=>{for(let e of this.fieldGroups)e.resetToInitial()};var i,s;this.formset=e,this.element=t,this.path=((i=this.name)==null?void 0:i.split("."))??[];let r=t.nextSibling;this.fieldset=r instanceof HTMLFieldSetElement&&r.form===t?new qe(this,r):null;let n=(s=t.nextElementSibling)==null?void 0:s.querySelector(":scope > .dj-form-errors > ul.dj-errorlist > li.dj-placeholder");if(n&&(this.errorList=n.parentElement,this.errorPlaceholder=this.errorList.removeChild(n)),this.isTransient=!!this.element.getAttribute("df-transient"),!this.isTransient){let u=t.closest("dialog");this.parentDialog=u?new Ve(this,u):null}this.element.addEventListener("submit",this.handleSubmit),this.element.addEventListener("reset",this.handleReset)}aggregateValues(){let e=new Map;for(let t of this.fieldGroups)e.set(t.name,t.aggregateValue());for(let t of this.hiddenInputFields.filter(r=>r.type==="hidden"))e.set(t.name,t.value);return e}get name(){return this.element.getAttribute("name")}get formId(){return this.element.getAttribute("id")}getAbsPath(){return["formset_data",...this.path]}getDataValue(e){if(e[0]!=="")return this.formset.getDataValue(e);let t=[...this.path],r=e.filter(i=>i!==""),n=e.length-r.length;return t.splice(t.length-n+1),t.push(...r),this.formset.getDataValue(t)}setFieldValue(e,t){let r=this.fieldGroups.find(n=>n.name===e);r?r.setFieldValue(t):this.element.elements.namedItem(e)?(this.element.elements.namedItem(e).value=t,this.formset.validate()):console.warn(`Field group '${e}' not found.`)}updateOperability(...e){var t,r;(t=this.fieldset)==null||t.updateOperability(...e),this.fieldGroups.forEach(n=>n.updateOperability(...e)),(r=this.parentDialog)==null||r.updateOperability(...e)}setSubmitted(){this.fieldGroups.forEach(e=>e.setSubmitted())}validate(){this.formset.validate()}isValid(){if(this.element.noValidate)return!0;let e=!0;for(let t of this.fieldGroups)e=t.setValidationError()&&e;return e}checkValidity(){return this.element.noValidate||this.isTransient?!0:this.element.checkValidity()}reportValidity(){if(this.element.noValidate||this.isTransient)return;let e=this.element.getBoundingClientRect();(e.width!==0||e.height!==0)&&this.element.reportValidity()}clearCustomErrors(){for(;this.errorList&&this.errorList.lastChild;)this.errorList.removeChild(this.errorList.lastChild)}resetToInitial(){this.element.reset()}toggleForRemoval(e){this.markedForRemoval=e;for(let t of this.fieldGroups)e?(t.resetToInitial(),t.disableAllFields()):t.reenableAllFields()}reportCustomErrors(e){this.clearCustomErrors();let t=e.get(He);if(this.errorList&&Array.isArray(t)&&this.errorPlaceholder)for(let r of t){let n=this.errorPlaceholder.cloneNode();n.innerHTML=r,this.errorList.appendChild(n)}for(let r of this.fieldGroups){let n=e.get(r.name);Array.isArray(n)&&n.length>0&&r.reportCustomError(n[0])}}findFirstErrorReport(){var e,t;if((e=this.errorList)!=null&&e.textContent)return this.element;for(let r of this.fieldGroups)if((t=r.errorPlaceholder)!=null&&t.textContent)return r.element;return null}untouch(){this.fieldGroups.forEach(e=>e.untouch())}setPristine(){this.fieldGroups.forEach(e=>e.setPristine())}get isPristine(){return this.fieldGroups.every(e=>e.isPristine)}disableRequiredConstraints(){this.fieldGroups.forEach(e=>e.disableRequiredConstraint())}restoreRequiredConstraints(){this.fieldGroups.forEach(e=>e.restoreRequiredConstraint())}get isInitialized(){return Promise.all(this.fieldGroups.map(e=>e.isInitialized))}},$=class o{constructor(e,t,r){this.forms=Array(0);this.children=Array(0);this.markedForRemoval=!1;this.formset=e,this.element=t,this.parent=r,this.findFormCollections()}findFormCollections(){for(let e of o.getChildCollections(this.element))this.children.push(new o(this.formset,e,this));for(let[e,t]of o.getChildSiblingsCollections(this.element).entries())this.children.push(new M(this.formset,t,e,this));for(let e of this.children)e.updateRemoveButtonAttrs();this.formCollectionTemplate=ge.findFormCollectionTemplate(this.formset,this.element,this)}assignForms(e){this.forms=e.filter(t=>{var r;return(r=t.element.parentElement)==null?void 0:r.isEqualNode(this.element)});for(let t of this.children)t.assignForms(e)}updateRemoveButtonAttrs(){}get isInitialized(){return Promise.all(this.forms.map(e=>e.isInitialized))}disconnect(){var e;this.forms.forEach(t=>this.formset.removeForm(t)),this.children.forEach(t=>t.disconnect()),(e=this.formCollectionTemplate)==null||e.disconnect(),this.element.remove()}toggleForRemoval(e){this.markedForRemoval=e;for(let t of this.forms)t.toggleForRemoval(e);for(let t of this.children)t.toggleForRemoval(e);this.formCollectionTemplate&&(this.formCollectionTemplate.markedForRemoval=e,this.formCollectionTemplate.updateAddButtonAttrs()),this.element.classList.toggle("dj-marked-for-removal",this.markedForRemoval)}resetToInitial(){if(this.toggleForRemoval(!1),o.resetCollectionsToInitial(this.children),this.formCollectionTemplate){let e=this.formCollectionTemplate.prefix,t=e==="0"?0:e.split(".").length;this.children.forEach((r,n)=>r.repositionForms(t,n)),this.formCollectionTemplate.updateAddButtonAttrs()}return!1}repositionSiblings(){}repositionForms(e,t){this.forms.forEach(r=>{r.path[e]=String(t),r.element.setAttribute("name",r.path.join("."))}),this.children.forEach(r=>r.repositionForms(e,t))}markAsFreshAndEmpty(e){this.children.forEach(t=>t.markAsFreshAndEmpty(e)),e&&this.forms.forEach(t=>t.disableRequiredConstraints())}restoreRequiredConstraint(){this.forms.forEach(e=>e.restoreRequiredConstraints()),this.children.forEach(e=>e.restoreRequiredConstraint())}get isFreshAndEmpty(){return this.forms.every(e=>e.isPristine)&&this.children.every(e=>e.isFreshAndEmpty)}removeFreshAndEmpty(){Array.from(this.children).reverse().forEach(t=>t.removeFreshAndEmpty())}static getChildCollections(e){var r;let t=(r=e.querySelector("django-form-collection"))==null?void 0:r.parentElement;return(t==null?void 0:t.querySelectorAll(":scope > django-form-collection:not([sibling-position])"))??[]}static getChildSiblingsCollections(e){var r;let t=(r=e.querySelector("django-form-collection"))==null?void 0:r.parentElement;return(t==null?void 0:t.querySelectorAll(":scope > django-form-collection[sibling-position]"))??[]}static resetCollectionsToInitial(e){var n;let t=Array(0);for(let i of e)i.resetToInitial()&&t.push(i);t.forEach(i=>e.splice(e.indexOf(i),1)),e.sort((i,s)=>i instanceof M&&s instanceof M?i.initialPosition-s.initialPosition:0);let r=null;for(let i of e)i instanceof M&&(i.initialPosition===0?(n=i.element.parentElement)==null||n.insertAdjacentElement("afterbegin",i.element):r==null||r.insertAdjacentElement("afterend",i.element),r=i.element);e.forEach(i=>i.repositionSiblings())}},M=class o extends ${constructor(t,r,n,i){super(t,r,i);this.siblingId=0;this.minSiblings=0;this.maxSiblings=null;this.justAdded=!1;this.removeCollection=()=>{var n,i;let t=((n=this.parent)==null?void 0:n.children)??this.formset.formCollections;this.justAdded?(this.disconnect(),t.splice(t.indexOf(this),1),this.repositionSiblings()):(this.toggleForRemoval(!this.markedForRemoval),this.removeButton.disabled=!this.markedForRemoval),t.forEach(s=>s.updateRemoveButtonAttrs()),(((i=this.parent)==null?void 0:i.formCollectionTemplate)??this.formset.formCollectionTemplate).updateAddButtonAttrs()};let s=r.getAttribute("sibling-position");if(!s)throw new Error("Missing argument 'sibling-position' in <django-form-collection>");this.position=this.initialPosition=parseInt(s),this.siblingId=n;let u=r.getAttribute("min-siblings");if(!u)throw new Error("Missing argument 'min-siblings' in <django-form-collection>");this.minSiblings=parseInt(u);let d=r.getAttribute("max-siblings");d&&(this.maxSiblings=parseInt(d));let l=r.querySelector(":scope > button.remove-collection");if(!l)throw new Error('<django-form-collection> with siblings requires child element <button class="remove-collection">');this.removeButton=l,this.removeButton.addEventListener("click",this.removeCollection)}disconnect(){this.removeButton.removeEventListener("click",this.removeCollection),super.disconnect()}repositionSiblings(){var r;(((r=this.parent)==null?void 0:r.children)??this.formset.formCollections).forEach((n,i)=>{n instanceof o&&(n.position=i,n.element.setAttribute("sibling-position",String(i)))})}updateRemoveButtonAttrs(){var n;if(!this.removeButton)return;let r=(((n=this.parent)==null?void 0:n.children)??this.formset.formCollections).filter(i=>!i.markedForRemoval).length;this.markedForRemoval?this.maxSiblings?this.removeButton.disabled=r>=this.maxSiblings:this.removeButton.disabled=!1:this.removeButton.disabled=r<=this.minSiblings}markAsFreshAndEmpty(t){this.justAdded=t||this.element.hasAttribute("fresh-and-empty"),super.markAsFreshAndEmpty(this.justAdded)}get isFreshAndEmpty(){return this.justAdded&&super.isFreshAndEmpty}removeFreshAndEmpty(){!this.removeButton.disabled&&this.isFreshAndEmpty?this.removeCollection():super.removeFreshAndEmpty()}resetToInitial(){return this.justAdded&&!this.element.hasAttribute("fresh-and-empty")?(this.disconnect(),!0):(super.resetToInitial(),!1)}},ge=class o{constructor(e,t,r){this.maxSiblings=null;this.baseContext=new Map;this.markedForRemoval=!1;this.resortSiblings=e=>{var i;let t=e.oldDraggableIndex??NaN,r=e.newDraggableIndex??NaN;if(!(0,Z.default)(t)||!(0,Z.default)(r)||t===r)return;let n=((i=this.parent)==null?void 0:i.children)??this.formset.formCollections;if(n.at(t)instanceof M){let s=n.splice(t,1);n.splice(r,0,...s),s.at(0).repositionSiblings();let u=this.prefix==="0"?0:this.prefix.split(".").length;n.forEach((d,l)=>d.repositionForms(u,l)),this.formset.validate()}};this.appendFormCollectionSibling=()=>{var d;let e=Object.fromEntries(this.baseContext),[t,r]=this.getNextPositionAndSiblingId();e.position=t.toString(),e.siblingId=r.toString(),e.position_1="${position}",e.siblingId_1="${siblingId}";for(let l=1;l<10;++l)e[`position_${l+1}`]=`\${position_${l}}`,e[`siblingId_${l+1}`]=`\${siblingId_${l}}`;let n=this.renderEmptyCollection(e);this.element.insertAdjacentHTML("beforebegin",n);let i=this.element.previousElementSibling;if(!(i instanceof HTMLElement))throw new Error("Unable to insert empty <django-form-collection> element.");let s=((d=this.parent)==null?void 0:d.children)??this.formset.formCollections,u=new M(this.formset,i,r,this.parent);s.push(u),this.formset.findForms(i),this.formset.assignFieldsToForms(i),this.formset.assignFormsToCollections(),this.formset.findCollectionErrorsList(),u.markAsFreshAndEmpty(!0),this.formset.validate(),s.forEach(l=>l.updateRemoveButtonAttrs()),this.updateAddButtonAttrs()};var d;this.formset=e,this.element=t,this.parent=r;let n=t.innerHTML.matchAll(/\$\{([^} ]+)}/g);for(let l of n)this.baseContext.set(l[1],l[0]);let i=t.getAttribute("prefix");if(!i)throw new Error('<template class="empty-collection" ...> requires attribute "prefix"');this.prefix=i,e.pushTemplatePrefix(this.prefix),this.renderEmptyCollection=(0,Jt.default)(t.innerHTML),(d=t.nextElementSibling)!=null&&d.matches("button.add-collection")&&(this.addButton=t.nextElementSibling,this.addButton.addEventListener("click",this.appendFormCollectionSibling));let s=this.element.content.querySelector("django-form-collection"),u=s==null?void 0:s.getAttribute("max-siblings");u&&(this.maxSiblings=parseInt(u)),t.hasAttribute("sortable")&&new ft(t.parentElement,{animation:150,handle:"django-form-collection[sibling-position]:not(.dj-marked-for-removal) > .collection-drag-handle",draggable:"django-form-collection[sibling-position]",selectedClass:"selected",ghostClass:"dj-ghost-collection",onEnd:this.resortSiblings})}getNextPositionAndSiblingId(){let e=-1,t=-1,r=this.parent?this.parent.children:this.formset.formCollections;for(let n of r.filter(i=>i instanceof M))e=Math.max(e,n.position),t=Math.max(t,n.siblingId);return[e+1,t+1]}disconnect(){var e;this.formset.popTemplatePrefix(this.prefix),(e=this.addButton)==null||e.removeEventListener("click",this.appendFormCollectionSibling)}updateAddButtonAttrs(){var r;if(!this.addButton)return;if(this.markedForRemoval){this.addButton.disabled=!0;return}let t=(((r=this.parent)==null?void 0:r.children)??this.formset.formCollections).filter(n=>!n.markedForRemoval).length;this.addButton.disabled=this.maxSiblings===null?!1:t>=this.maxSiblings}static findFormCollectionTemplate(e,t,r){let n=t.querySelector(":scope > .collection-siblings > template.empty-collection");if(n){let i=new o(e,n,r);return i.updateAddButtonAttrs(),i}}},_e=class{constructor(e){this.buttons=Array(0);this.currentActiveButton=null;this.forms=Array(0);this.formCollections=Array(0);this.errorList=null;this.errorPlaceholder=null;this.collectionErrorsList=new Map;this.abortController=new AbortController;this.emptyCollectionPrefixes=Array(0);this.data={};this.element=e,this.showFeedbackMessages=this.parseWithholdFeedback(),this.CSRFToken=this.element.getAttribute("csrf-token")}connectedCallback(){this.findErrorsPlaceholder(),this.findForms(),this.findFormCollections(),this.findCollectionErrorsList(),this.assignFieldsToForms(),this.assignFormsToCollections(),this.findDetachedButtons(),this.formCollections.forEach(e=>e.markAsFreshAndEmpty()),Promise.all(this.formCollections.map(e=>e.isInitialized)).then(()=>this.validate())}get endpoint(){return this.element.getAttribute("endpoint")??""}get forceSubmission(){return this.element.hasAttribute("force-submission")}parseWithholdFeedback(){var n;let e=!0,t=((n=this.element.getAttribute("withhold-feedback"))==null?void 0:n.split(" "))??[],r=new Set(["dj-feedback-errors","dj-feedback-warnings","dj-feedback-success"]);for(let i of t)switch(i.toLowerCase()){case"messages":e=!1;break;case"errors":r.delete("dj-feedback-errors");break;case"warnings":r.delete("dj-feedback-warnings");break;case"success":r.delete("dj-feedback-success");break;default:throw new Error(`Unknown value in <django-formset withhold-feedback="${i}">.`)}return r.forEach(i=>this.element.classList.add(i)),e}pushTemplatePrefix(e){this.emptyCollectionPrefixes.push(e)}popTemplatePrefix(e){let t=this.emptyCollectionPrefixes.indexOf(e);t>=0&&this.emptyCollectionPrefixes.splice(t,1)}assignFieldsToForms(e){e=e??this.element;for(let t of e.querySelectorAll("INPUT, SELECT, TEXTAREA, BUTTON")){let r=t.getAttribute("form");if(!r)continue;let n=this.forms.filter(s=>s.formId&&s.formId===r);if(n.length<1)continue;if(n.length>1)throw new Error(`More than one form has id="${r}"`);let i=n[0];if(t instanceof HTMLInputElement&&t.type==="hidden")i.hiddenInputFields.includes(t)||i.hiddenInputFields.push(t);else if(t instanceof HTMLButtonElement){if(t.hasAttribute("df-click")&&t.form===i.element){let s=new ee(i.formset,t,[...i.path,t.name]);this.buttons.push(s)}}else{let s=t.closest('[role="group"]');s&&!i.fieldGroups.find(u=>u.element===s)&&i.fieldGroups.push(new Oe(i,s))}}}findErrorsPlaceholder(){let e=this.element.querySelector(":scope > .dj-form-errors > ul.dj-errorlist > li.dj-placeholder");e&&(this.errorList=e.parentElement,this.errorPlaceholder=this.errorList.removeChild(e))}findForms(e){e=e??this.element;for(let t of e.getElementsByTagName("FORM")){let r=new Be(this,t);this.forms.push(r)}this.checkForUniqueness()}checkForUniqueness(){let e=this.forms.filter(r=>!r.isTransient);if(e.length===1)return;let t=Array();e.forEach(r=>{if(!r.name)throw new Error("Multiple <form>-elements in a <django-formset> require a unique name each.");if(r.name in t)throw new Error(`Duplicate name "${r.name}" used in multiple forms of same <django-formset>.`);t.push(r.name)})}findFormCollections(){for(let e of $.getChildCollections(this.element))this.formCollections.push(new $(this,e));for(let[e,t]of $.getChildSiblingsCollections(this.element).entries())this.formCollections.push(new M(this,t,e));this.formCollections.forEach(e=>e.updateRemoveButtonAttrs()),this.formCollectionTemplate=ge.findFormCollectionTemplate(this,this.element)}findCollectionErrorsList(){this.collectionErrorsList.clear();for(let e of this.element.getElementsByClassName("dj-collection-errors")){let t=e.getAttribute("prefix")??"",r=e.querySelector("ul.dj-errorlist");this.collectionErrorsList.set(t,r)}}findDetachedButtons(){for(let e of this.element.getElementsByTagName("BUTTON"))if(e.hasAttribute("df-click")){let t=e;if(!this.buttons.find(r=>r.element===t)){let r=t.name?[t.name]:[];this.buttons.push(new ee(this,t,r))}}}assignFormsToCollections(){this.formCollections.forEach(e=>e.assignForms(this.forms))}removeForm(e){this.forms.splice(this.forms.indexOf(e),1)}removeFreshCollections(){Array.from(this.formCollections).reverse().forEach(t=>t.removeFreshAndEmpty())}aggregateValues(){this.data={};for(let e of this.forms)(0,Ie.default)(this.data,e.getAbsPath(),Object.fromEntries(e.aggregateValues()));this.updateOperability()}updateOperability(...e){for(let t of this.forms)t.markedForRemoval||t.updateOperability(...e);for(let t of this.buttons)t.updateOperability(...e)}validate(){let e=!0;for(let t of this.forms)e=(t.markedForRemoval||t.checkValidity())&&e;for(let t of this.buttons)t.autoDisable(e);return this.aggregateValues(),e}buildBody(e){let t;function r(i,s){if(s.length===1){Array.isArray(i)?t&&!i.includes(t)&&i.push(t):i[s[0]]=t??[];return}if(isNaN(parseInt(s[1]))){let u=i[s[0]]??{};r(u,s.slice(1));let d=parseInt(s[0]);isNaN(d)?i[s[0]]=u:i[d]={...i[d],...u}}else{if(Array.isArray(i))throw new Error("Invalid form structure: Contains nested arrays.");let u=i[s[0]]??[];if(!Array.isArray(u))throw new Error("Invalid form structure: Inner array is missing.");r(u,s.slice(1)),i[s[0]]=u}}let n={};for(let i of this.emptyCollectionPrefixes){let s=["formset_data",...i.split(".")];t=(0,H.default)(n,s),r(n,s)}for(let i of this.forms){if(!i.name){let u=Object.fromEntries(i.aggregateValues());return Object.assign({},{formset_data:u},{_extra:e})}if(i.isTransient)continue;let s=i.getAbsPath();t=(0,H.default)(this.data,s),i.markedForRemoval&&(t[Qo]=!0),r(n,s)}return Object.assign({},n,{_extra:e})}async submit(e){var r;let t=!0;if(this.setSubmitted(),!this.forceSubmission)for(let n of this.forms)n.markedForRemoval||n.isTransient||((r=n.parentDialog)==null?void 0:r.isOpen())===!1||(t=n.isValid()&&t);if(t){if(!this.endpoint)throw new Error(`<django-formset> requires attribute 'endpoint="server endpoint"' for submission`);this.removeFreshCollections();let n=this.buildBody(e);try{let i=new Headers;i.append("Accept","application/json"),i.append("Content-Type","application/json"),this.CSRFToken&&i.append("X-CSRFToken",this.CSRFToken);let s=await fetch(this.endpoint,{method:"POST",headers:i,body:JSON.stringify(n),signal:this.abortController.signal});switch(s.status){case 200:return this.clearErrors(),this.forms.forEach(d=>d.element.dispatchEvent(new Event("submitted"))),s;case 422:this.clearErrors();let u=await s.clone().json();return this.reportErrors(u),s;default:return console.warn(`Unknown response status: ${s.status}`),this.clearErrors(),this.buttons.forEach(d=>d.restoreToInitial()),s}}catch(i){this.clearErrors(),this.buttons.forEach(s=>s.restoreToInitial()),alert(i)}}else{this.clearErrors();for(let n of this.forms)n.reportValidity()}}async prefillPartial(e,t){if(!this.endpoint)throw new Error(`<django-formset> requires attribute 'endpoint="server endpoint"' for submission`);try{let r=new URLSearchParams({pk:e,path:t.join(".")}),n=new Headers;n.append("Accept","application/json");let i=await fetch(`${this.endpoint}?${r.toString()}`,{headers:n});switch(i.status){case 200:this.clearErrors();let s=await i.json(),u=this.forms.find(d=>(0,_.default)(d.path,t));if(u!=null&&u.element)for(let[d,l]of Object.entries((0,H.default)(s,t,{}))){let a=u.element.elements.namedItem(d);((0,L.default)(l)||(0,Z.default)(l))&&(a instanceof HTMLInputElement||a instanceof HTMLSelectElement||a instanceof HTMLTextAreaElement)&&(a.value=l)}return i;default:return console.warn(`Unknown response status: ${i.status}`),this.clearErrors(),this.buttons.forEach(d=>d.restoreToInitial()),i}}catch(r){this.clearErrors(),this.buttons.forEach(n=>n.restoreToInitial()),alert(r)}}async submitPartial(e,t){var i;if(!this.endpoint)throw new Error(`<django-formset> requires attribute 'endpoint="server endpoint"' for submission`);(i=this.forms.find(s=>(0,_.default)(s.path,e)))==null||i.setSubmitted();let r=["formset_data",...e],n=(0,Ie.default)({},r,(0,H.default)(this.buildBody(t),r));try{let s=new Headers;s.append("Accept","application/json"),s.append("Content-Type","application/json"),this.CSRFToken&&s.append("X-CSRFToken",this.CSRFToken);let u=await fetch(this.endpoint,{method:"PATCH",headers:s,body:JSON.stringify(n)});switch(u.status){case 200:return this.clearErrors(),this.forms.filter(l=>(0,_.default)(l.path,e)).forEach(l=>{l.element.dispatchEvent(new Event("submitted"))}),u;case 422:this.clearErrors();let d=await u.clone().json();return this.reportErrors(d),u;default:return console.warn(`Unknown response status: ${u.status}`),this.clearErrors(),this.buttons.forEach(l=>l.restoreToInitial()),u}}catch(s){this.clearErrors(),this.buttons.forEach(u=>u.restoreToInitial()),alert(s)}}async deletePartial(e,t){if(!this.endpoint)throw new Error(`<django-formset> requires attribute 'endpoint="server endpoint"' for submission`);try{let r=new URLSearchParams({pk:t,path:e.join(".")}),n=new Headers;this.CSRFToken&&n.append("X-CSRFToken",this.CSRFToken);let i=await fetch(`${this.endpoint}?${r.toString()}`,{method:"DELETE",headers:n});switch(i.status){case 204:return this.clearErrors(),i;default:return console.warn(`Unknown response status: ${i.status}`),this.clearErrors(),this.buttons.forEach(s=>s.restoreToInitial()),i}}catch(r){this.clearErrors(),this.buttons.forEach(n=>n.restoreToInitial()),alert(r)}}reportErrors(e){console.info("Response from server:",e);for(let t of this.forms){let r=t.name?(0,H.default)(e,t.name.split("."),null):e;(0,Ut.default)(r)?t.clearCustomErrors():(t.reportCustomErrors(new Map(Object.entries(r))),t.reportValidity())}for(let[t,r]of this.collectionErrorsList){let n=t?t.split("."):[];n=[...n,"0",Wo];for(let i of(0,H.default)(e,n,[])){let s=document.createElement("li");s.classList.add("dj-placeholder"),s.innerText=i,r.appendChild(s)}}if(this.errorList&&this.errorPlaceholder&&Array.isArray(e[He]))for(let t of e[He]){let r=this.errorPlaceholder.cloneNode();r.innerHTML=t,this.errorList.appendChild(r)}}resetToInitial(){var e;$.resetCollectionsToInitial(this.formCollections),(e=this.formCollectionTemplate)==null||e.updateAddButtonAttrs(),this.forms.forEach(t=>t.resetToInitial()),this.validate()}abort(){for(let e of this.buttons)e.abortAction();this.abortController.abort()}setSubmitted(){for(let e of this.forms)e.setSubmitted()}getDataValue(e){let t=["formset_data",...e];return(0,H.default)(this.data,t)}setFieldValue(e,t){let r=e.slice(0,-1),n=this.forms.find(i=>(0,_.default)(i.path,r));n&&e.length>0&&n.setFieldValue(e.slice(-1)[0],t)}findFirstErrorReport(){for(let e of this.forms){let t=e.findFirstErrorReport();if(t)return t}return null}clearErrors(){for(let e of this.forms)e.clearCustomErrors();for(let e of this.collectionErrorsList.values())for(;e.firstElementChild;)e.removeChild(e.firstElementChild);this.errorList&&this.errorList.replaceChildren()}},z=Symbol("DjangoFormset"),Gt,be=class extends(Gt=HTMLElement,z,Gt){constructor(){super(),this[z]=new _e(this)}static get observedAttributes(){return["endpoint","withhold-feedback","force-submission"]}connectedCallback(){this[z].connectedCallback()}async submit(e){return this[z].submit(e)}async abort(){return this[z].abort()}async reset(){return this[z].resetToInitial()}};window.addEventListener("DOMContentLoaded",o=>{let e=ht.convertPseudoClasses(),t=Array();function r(s,u,d,l=void 0){window.customElements.whenDefined(u).then(()=>s()),window.customElements.get(u)instanceof Function||window.customElements.define(u,d,l)}function n(s,u=!1){s.querySelector('select[is="django-selectize"]')&&t.push(new Promise((d,l)=>{import("./DjangoSelectize-ITCWDQNV.js").then(({DjangoSelectizeElement:a})=>{r(d,"django-selectize",a,{extends:"select"})}).catch(a=>l(a))})),s.querySelector('select[is="django-country-selectize"]')&&t.push(new Promise((d,l)=>{import("./CountrySelectize-Y2VEV2JR.js").then(({CountrySelectizeElement:a})=>{r(d,"django-country-selectize",a,{extends:"select"})}).catch(a=>l(a))})),s.querySelector('select[is="django-dual-selector"], django-sortable-select')&&t.push(new Promise((d,l)=>{import("./DualSelector-YZNVS5NX.js").then(({DualSelectorElement:a,SortableSelectElement:m})=>{Promise.all([window.customElements.whenDefined("django-sortable-select"),window.customElements.whenDefined("django-dual-selector")]).then(()=>d()),window.customElements.get("django-sortable-select")instanceof Function||window.customElements.define("django-sortable-select",m),window.customElements.get("django-dual-selector")instanceof Function||window.customElements.define("django-dual-selector",a,{extends:"select"})}).catch(a=>l(a))})),s.querySelector('input[is="django-phone-number"]')&&t.push(new Promise((d,l)=>{import("./PhoneNumber-IOV4KSM3.js").then(({PhoneNumberElement:a})=>{r(d,"django-phone-number",a,{extends:"input"})}).catch(a=>l(a))})),s.querySelector('textarea[is="django-richtext"]')&&t.push(new Promise((d,l)=>{import("./RichtextArea-MFKGBTGN.js").then(({RichTextAreaElement:a})=>{let m=s.querySelectorAll('textarea[is="django-richtext"]');window.customElements.whenDefined("django-richtext").then(()=>{Promise.all(Array.from(m).map(N=>new Promise(te=>{u||N.isInitialized?te():N.addEventListener("connected",()=>te(),{once:!0})}))).then(()=>d())}).then(()=>d()),window.customElements.get("django-richtext")instanceof Function||window.customElements.define("django-richtext",a,{extends:"textarea"})}).catch(a=>l(a))})),s.querySelector('input[is="django-slug"]')&&t.push(new Promise((d,l)=>{import("./DjangoSlug-ELVSHLEG.js").then(({DjangoSlugElement:a})=>{r(d,"django-slug",a,{extends:"input"})}).catch(a=>l(a))})),s.querySelector('input[is="django-datefield"]')&&t.push(new Promise((d,l)=>{import("./DateTime-GJVCLVH2.js").then(({DateFieldElement:a})=>{r(d,"django-datefield",a,{extends:"input"})}).catch(a=>l(a))})),s.querySelector('input[is="django-datecalendar"]')&&t.push(new Promise((d,l)=>{import("./Calendar-CBLA3JYV.js").then(({DateCalendarElement:a})=>{r(d,"django-datecalendar",a,{extends:"input"})}).catch(a=>l(a))})),s.querySelector('input[is="django-datepicker"]')&&t.push(new Promise((d,l)=>{import("./DateTime-GJVCLVH2.js").then(({DatePickerElement:a})=>{r(d,"django-datepicker",a,{extends:"input"})}).catch(a=>l(a))})),s.querySelector('input[is="django-datetimefield"]')&&t.push(new Promise((d,l)=>{import("./DateTime-GJVCLVH2.js").then(({DateTimeFieldElement:a})=>{r(d,"django-datetimefield",a,{extends:"input"})}).catch(a=>l(a))})),s.querySelector('input[is="django-datetimecalendar"]')&&t.push(new Promise((d,l)=>{import("./Calendar-CBLA3JYV.js").then(({DateTimeCalendarElement:a})=>{r(d,"django-datetimecalendar",a,{extends:"input"})}).catch(a=>l(a))})),s.querySelector('input[is="django-datetimepicker"]')&&t.push(new Promise((d,l)=>{import("./DateTime-GJVCLVH2.js").then(({DateTimePickerElement:a})=>{r(d,"django-datetimepicker",a,{extends:"input"})}).catch(a=>l(a))})),s.querySelector('input[is="django-daterangefield"]')&&t.push(new Promise((d,l)=>{import("./DateTime-GJVCLVH2.js").then(({DateRangeFieldElement:a})=>{r(d,"django-daterangefield",a,{extends:"input"})}).catch(a=>l(a))})),s.querySelector('input[is="django-daterangecalendar"]')&&t.push(new Promise((d,l)=>{import("./Calendar-CBLA3JYV.js").then(({DateRangeCalendarElement:a})=>{r(d,"django-daterangecalendar",a,{extends:"input"})}).catch(a=>l(a))})),s.querySelector('input[is="django-daterangepicker"]')&&t.push(new Promise((d,l)=>{import("./DateTime-GJVCLVH2.js").then(({DateRangePickerElement:a})=>{r(d,"django-daterangepicker",a,{extends:"input"})}).catch(a=>l(a))})),s.querySelector('input[is="django-datetimerangefield"]')&&t.push(new Promise((d,l)=>{import("./DateTime-GJVCLVH2.js").then(({DateTimeRangeFieldElement:a})=>{r(d,"django-datetimerangefield",a,{extends:"input"})}).catch(a=>l(a))})),s.querySelector('input[is="django-datetimerangecalendar"]')&&t.push(new Promise((d,l)=>{import("./Calendar-CBLA3JYV.js").then(({DateTimeRangeCalendarElement:a})=>{r(d,"django-datetimerangecalendar",a,{extends:"input"})}).catch(a=>l(a))})),s.querySelector('input[is="django-datetimerangepicker"]')&&t.push(new Promise((d,l)=>{import("./DateTime-GJVCLVH2.js").then(({DateTimeRangePickerElement:a})=>{r(d,"django-datetimerangepicker",a,{extends:"input"})}).catch(a=>l(a))}))}document.querySelectorAll("template.empty-collection").forEach(s=>{s instanceof HTMLTemplateElement&&s.content instanceof DocumentFragment&&n(s.content,!0)}),n(document);let i=new Set;document.querySelectorAll("django-formset [id]").forEach(s=>{let u=s.getAttribute("id");if(i.has(u))throw new Error(`There are at least two elements with attribute id="${u}"`);i.add(u)}),Promise.all(t).then(()=>{window.customElements.define("django-formset",be),window.customElements.whenDefined("django-formset").then(()=>{e.remove()})}).catch(s=>console.error(`Failed to initialize django-formset: ${s}`))});
/*! Bundled license information:

@ungap/custom-elements/index.js:
  (*! (c) Andrea Giammarchi @webreflection ISC *)
  (*! (c) Andrea Giammarchi - ISC *)
*/
