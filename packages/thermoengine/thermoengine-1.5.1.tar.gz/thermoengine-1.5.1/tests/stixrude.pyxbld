import numpy

#            module name specified by `%%cython_pyximport` magic
#            |        just `modname + ".pyx"`
#            |        |
def make_ext(modname, pyxfilename):
    from setuptools.extension import Extension
    return Extension(modname,
                     sources=[pyxfilename, 'Forsterite_stixrude_calc.c'],
                     include_dirs=['.', numpy.get_include()],
                     define_macros=[("NPY_NO_DEPRECATED_API", "NPY_1_7_API_VERSION")],
                     extra_compile_args=['-O3', '-Wno-unused-const-variable', '-Wno-unreachable-code-fallthrough', '-Wno-unused-variable'],
                     libraries=['gsl'],
                     library_dirs=['/usr/local/lib'],
                     runtime_library_dirs=['/usr/local/lib'])
