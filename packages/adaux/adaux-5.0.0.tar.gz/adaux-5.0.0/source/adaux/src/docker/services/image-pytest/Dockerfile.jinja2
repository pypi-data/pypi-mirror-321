# automatically generated by auxilium
{% include 'base_arg.jinja2' -%}
FROM {{ opts.base | default(aux.project.slug~"-pytest", true) }} AS stage

USER container:container
WORKDIR /home/container

ARG PROJECT_DIR
COPY --chown=5000:5000 $PROJECT_DIR .
{% include 'sdist_untar.jinja2' %}

FROM {{ opts.base | default(aux.project.slug~"-pytest", true) }}

USER container:container
WORKDIR /home/container

{% include 'entry_points_rm.jinja2' %}
COPY --chown=container --from=stage /home/container/{{ aux.python_project.second_name }}* /home/container/code/{{ aux.python_project.second_name }}
RUN {% if aux.pip.use_uv %}uv {%endif%}pip install -e /home/container/code/{{ aux.python_project.second_name }} --no-cache
{% block custom %}{% endblock %}
