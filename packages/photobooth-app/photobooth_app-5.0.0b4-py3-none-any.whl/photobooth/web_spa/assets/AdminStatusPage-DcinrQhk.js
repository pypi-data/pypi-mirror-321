import{u as qe,v as le,c as Oe,p as oe,d as Ve,e as Ae,r as ne,s as Be,f as Ee,b as l,Q as f,a as d}from"./position-engine-DGeMvu6T.js";import{x as He,aT as Le,an as X,aH as De,aU as je,B as D,e as j,aV as Ie,aW as Me,aX as Re,aY as Ne,aZ as Fe,w as ue,o as re,a_ as ie,a$ as se,aI as ze,A as de,V as Ue,R as We,P as Ge,ae as Ye,d as Xe,b0 as Ze,r as Je,f as c,l as h,m as t,s as Z,n as e,X as P,$ as Q,F as o,t as a,p as r,Q as v,v as I,g as B,G as E,H,a1 as M,a3 as fe,a0 as ce,D as R,a2 as N,M as me}from"./index-x-yFzLoN.js";import{Q as F}from"./QLinearProgress-Dn6HUlop.js";import{Q as L}from"./QList-BMs7uyU0.js";import{c as _e}from"./selection-cI33PBGq.js";import{Q as pe}from"./QSeparator-VDBhp2qN.js";import{Q as Ke}from"./QPage-mkCqzv_8.js";const ye=He({name:"QTooltip",inheritAttrs:!1,props:{...qe,...Le,...X,maxHeight:{type:String,default:null},maxWidth:{type:String,default:null},transitionShow:{...X.transitionShow,default:"jump-down"},transitionHide:{...X.transitionHide,default:"jump-up"},anchor:{type:String,default:"bottom middle",validator:le},self:{type:String,default:"top middle",validator:le},offset:{type:Array,default:()=>[14,14],validator:Oe},scrollTarget:De,delay:{type:Number,default:0},hideDelay:{type:Number,default:0},persistent:Boolean},emits:[...je],setup(s,{slots:u,emit:S,attrs:b}){let y,k;const q=We(),{proxy:{$q:p}}=q,w=D(null),n=D(!1),m=j(()=>oe(s.anchor,p.lang.rtl)),z=j(()=>oe(s.self,p.lang.rtl)),i=j(()=>s.persistent!==!0),{registerTick:C,removeTick:$}=Ie(),{registerTimeout:O}=Me(),{transitionProps:U,transitionStyle:W}=Re(s),{localScrollTarget:J,changeScrollEvent:he,unconfigureScrollTarget:ve}=Ve(s,te),{anchorEl:g,canShow:ge,anchorEvents:V}=Ae({showing:n,configureAnchorEl:Te}),{show:be,hide:G}=Ne({showing:n,canShow:ge,handleShow:Ce,handleHide:$e,hideOnRouteChange:i,processOnMount:!0});Object.assign(V,{delayShow:Se,delayHide:we});const{showPortal:K,hidePortal:x,renderPortal:ke}=Fe(q,w,Qe,"tooltip");if(p.platform.is.mobile===!0){const _={anchorEl:g,innerRef:w,onClickOutside(T){return G(T),T.target.classList.contains("q-dialog__backdrop")&&Ye(T),!0}},Y=j(()=>s.modelValue===null&&s.persistent!==!0&&n.value===!0);ue(Y,T=>{(T===!0?Ee:ne)(_)}),re(()=>{ne(_)})}function Ce(_){K(),C(()=>{k=new MutationObserver(()=>A()),k.observe(w.value,{attributes:!1,childList:!0,characterData:!0,subtree:!0}),A(),te()}),y===void 0&&(y=ue(()=>p.screen.width+"|"+p.screen.height+"|"+s.self+"|"+s.anchor+"|"+p.lang.rtl,A)),O(()=>{K(!0),S("show",_)},s.transitionDuration)}function $e(_){$(),x(),ee(),O(()=>{x(!0),S("hide",_)},s.transitionDuration)}function ee(){k!==void 0&&(k.disconnect(),k=void 0),y!==void 0&&(y(),y=void 0),ve(),ie(V,"tooltipTemp")}function A(){Be({targetEl:w.value,offset:s.offset,anchorEl:g.value,anchorOrigin:m.value,selfOrigin:z.value,maxHeight:s.maxHeight,maxWidth:s.maxWidth})}function Se(_){if(p.platform.is.mobile===!0){_e(),document.body.classList.add("non-selectable");const Y=g.value,T=["touchmove","touchcancel","touchend","click"].map(ae=>[Y,ae,"delayHide","passiveCapture"]);se(V,"tooltipTemp",T)}O(()=>{be(_)},s.delay)}function we(_){p.platform.is.mobile===!0&&(ie(V,"tooltipTemp"),_e(),setTimeout(()=>{document.body.classList.remove("non-selectable")},10)),O(()=>{G(_)},s.hideDelay)}function Te(){if(s.noParentEvent===!0||g.value===null)return;const _=p.platform.is.mobile===!0?[[g.value,"touchstart","delayShow","passive"]]:[[g.value,"mouseenter","delayShow","passive"],[g.value,"mouseleave","delayHide","passive"]];se(V,"anchor",_)}function te(){if(g.value!==null||s.scrollTarget!==void 0){J.value=ze(g.value,s.scrollTarget);const _=s.noParentEvent===!0?A:G;he(J.value,_)}}function Pe(){return n.value===!0?de("div",{...b,ref:w,class:["q-tooltip q-tooltip--style q-position-engine no-pointer-events",b.class],style:[b.style,W.value],role:"tooltip"},Ge(u.default)):null}function Qe(){return de(Ue,U.value,Pe)}return re(ee),Object.assign(q.proxy,{updatePosition:A}),ke}}),xe={class:"row col-xs-12 col-sm-4 col-md-3 col-lg-3"},et={class:"q-ml-sm"},tt={class:"q-ml-sm"},st=Xe({__name:"AdminStatusPage",setup(s){const u=Ze(),S=D(!1),b=D(!1),y=D(""),k=n=>{y.value=n,S.value=!0},q=n=>{y.value=n,b.value=!0},p=()=>{me("/api/admin/information/cntr/reset/"+y.value),b.value=!1},w=()=>{me("/api/admin/share/cntr/reset/"+y.value),S.value=!1};return(n,m)=>{const z=Je("q-item-sectio");return c(),h(Ke,{id:"status-page",padding:""},{default:t(()=>[Z("div",xe,[e(P,{flat:"",class:"q-mr-md q-mb-md"},{default:t(()=>[e(Q,null,{default:t(()=>[e(L,{separator:""},{default:t(()=>[e(l,{header:""},{default:t(()=>[o(a(n.$t("system information")),1)]),_:1}),e(f,null,{default:t(()=>[e(d,null,{default:t(()=>[e(l,{caption:""},{default:t(()=>[o(a(n.$t("data directory")),1)]),_:1}),e(l,null,{default:t(()=>[o(a(r(u).information.data_directory),1)]),_:1})]),_:1}),e(d,{side:""},{default:t(()=>[e(v,{flat:"",round:"",color:"primary",icon:"sym_o_folder_shared",to:"/admin/files"})]),_:1})]),_:1}),e(f,null,{default:t(()=>[e(d,null,{default:t(()=>[e(l,{caption:""},{default:t(()=>[o(a(n.$t("app version")),1)]),_:1}),e(l,null,{default:t(()=>[o(a(r(u).information.version),1)]),_:1})]),_:1}),e(d,{side:""},{default:t(()=>[e(v,{flat:"",round:"",color:"primary",icon:"sym_o_upgrade",href:"https://pypi.org/project/photobooth-app/",target:"_blank"})]),_:1})]),_:1}),e(f,null,{default:t(()=>[e(d,null,{default:t(()=>[e(l,{caption:""},{default:t(()=>[o(a(n.$t("cpu load")),1)]),_:1}),e(l,null,{default:t(()=>[e(F,{size:"lg",value:r(u).information.cpu1_5_15[0]??0/100},null,8,["value"])]),_:1})]),_:1})]),_:1}),e(f,null,{default:t(()=>[e(d,null,{default:t(()=>[e(l,{caption:""},{default:t(()=>[o(a(n.$t("disk space")),1)]),_:1}),e(l,null,{default:t(()=>[e(F,{size:"lg",value:r(u).information.disk.used/r(u).information.disk.total},null,8,["value"])]),_:1}),e(l,null,{default:t(()=>[o(a((r(u).information.disk.free/1024**3).toFixed(1))+a(n.$t("GB available")),1)]),_:1})]),_:1})]),_:1}),e(f,null,{default:t(()=>[e(d,null,{default:t(()=>[e(l,{caption:""},{default:t(()=>[o(a(n.$t("memory")),1)]),_:1}),e(l,null,{default:t(()=>[e(F,{size:"lg",value:r(u).information.memory.used/r(u).information.memory.total},null,8,["value"])]),_:1}),e(l,null,{default:t(()=>[o(a((r(u).information.memory.available/1024**3).toFixed(1))+a(n.$t("GB available")),1)]),_:1})]),_:1})]),_:1}),r(u).information.battery_percent!==null?(c(),h(f,{key:0},{default:t(()=>[e(d,null,{default:t(()=>[e(l,{caption:""},{default:t(()=>[o(a(n.$t("Battery")),1)]),_:1}),e(l,null,{default:t(()=>[e(F,{size:"lg",value:r(u).information.battery_percent/100},null,8,["value"])]),_:1}),e(l,null,{default:t(()=>[o(a(r(u).information.battery_percent.toFixed(0))+"% ",1)]),_:1})]),_:1})]),_:1})):I("",!0),Object.keys(r(u).information.temperatures).length>0?(c(),h(f,{key:1},{default:t(()=>[e(d,null,{default:t(()=>[e(l,{caption:""},{default:t(()=>[o(a(n.$t("System Temperatures")),1)]),_:1}),(c(!0),B(E,null,H(r(u).information.temperatures,(i,C,$)=>(c(),h(f,{key:$},{default:t(()=>[e(d,null,{default:t(()=>[e(l,{caption:""},{default:t(()=>[o(a(C),1)]),_:2},1024),e(l,null,{default:t(()=>[o(a(i),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})):I("",!0)]),_:1})]),_:1})]),_:1}),e(P,{flat:"",class:"q-mr-md q-mb-md"},{default:t(()=>[e(Q,null,{default:t(()=>[e(L,{separator:""},{default:t(()=>[e(l,{header:""},{default:t(()=>[o(a(n.$t("platform")),1)]),_:1}),e(f,null,{default:t(()=>[e(d,null,{default:t(()=>[e(l,{caption:""},{default:t(()=>[o(a(n.$t("hostname")),1)]),_:1}),e(l,null,{default:t(()=>[o(a(r(u).information.platform_node),1)]),_:1})]),_:1})]),_:1}),e(f,null,{default:t(()=>[e(d,null,{default:t(()=>[e(l,{caption:""},{default:t(()=>[o(a(n.$t("machine")),1)]),_:1}),e(l,null,{default:t(()=>[o(a(n.$t("{platform_machine}, {cpu_count} cores",{platform_machine:r(u).information.platform_machine,cpu_count:r(u).information.platform_cpu_count})),1)]),_:1})]),_:1})]),_:1}),e(f,null,{default:t(()=>[e(d,null,{default:t(()=>[e(l,{caption:""},{default:t(()=>[o(a(n.$t("platform system")),1)]),_:1}),e(l,null,{default:t(()=>[o(a(r(u).information.platform_system)+" "+a(r(u).information.platform_release),1)]),_:1})]),_:1})]),_:1}),e(f,null,{default:t(()=>[e(d,null,{default:t(()=>[e(l,{caption:""},{default:t(()=>[o(a(n.$t("computer model")),1)]),_:1}),e(l,null,{default:t(()=>[o(a(r(u).information.model),1)]),_:1})]),_:1})]),_:1}),e(f,null,{default:t(()=>[e(d,null,{default:t(()=>[e(l,{caption:""},{default:t(()=>[o(a(n.$t("python executable")),1)]),_:1}),e(l,null,{default:t(()=>[o(a(r(u).information.python_executable),1)]),_:1})]),_:1})]),_:1}),e(f,null,{default:t(()=>[e(d,null,{default:t(()=>[e(l,{caption:""},{default:t(()=>[o(a(n.$t("python version")),1)]),_:1}),e(l,null,{default:t(()=>[o(a(r(u).information.platform_python_version),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),(c(!0),B(E,null,H(r(u).information.backends,(i,C,$)=>(c(),h(P,{key:$,flat:"",class:"q-mr-md q-mb-md"},{default:t(()=>[e(Q,null,{default:t(()=>[e(L,{separator:""},{default:t(()=>[e(l,{header:""},{default:t(()=>[o(a(n.$t("Backend Index: "))+a($),1)]),_:2},1024),(c(!0),B(E,null,H(i,(O,U,W)=>(c(),h(f,{key:W},{default:t(()=>[e(d,null,{default:t(()=>[e(l,{caption:""},{default:t(()=>[o(a(U),1)]),_:2},1024),e(l,null,{default:t(()=>[o(a(O),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:2},1024)]),_:2},1024)]),_:2},1024))),128)),e(P,{flat:"",class:"q-mr-md q-mb-md"},{default:t(()=>[e(Q,null,{default:t(()=>[e(L,{separator:""},{default:t(()=>[e(l,{header:""},{default:t(()=>[o(a(n.$t("Stats counter")),1)]),_:1}),Object.keys(r(u).information.stats_counter).length==0?(c(),h(f,{key:0},{default:t(()=>[o(a(n.$t("Currently no item to display.")),1)]),_:1})):I("",!0),(c(!0),B(E,null,H(r(u).information.stats_counter,(i,C)=>(c(),h(f,{key:C},{default:t(()=>[e(d,null,{default:t(()=>[e(l,{caption:""},{default:t(()=>[o(a(i.action),1)]),_:2},1024),e(l,null,{default:t(()=>[e(ye,null,{default:t(()=>[o(" last used at: "+a(i.last_used_at),1)]),_:2},1024),e(l,null,{default:t(()=>[o(a(i.count),1)]),_:2},1024)]),_:2},1024)]),_:2},1024),e(d,{side:""},{default:t(()=>[e(v,{flat:"",color:"primary",icon:"sym_o_history",onClick:$=>q(i.action)},null,8,["onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1}),e(pe),e(M,{align:"right"},{default:t(()=>[e(v,{flat:"",color:"primary",icon:"sym_o_history",label:"reset",onClick:m[0]||(m[0]=i=>q(""))})]),_:1})]),_:1}),e(P,{flat:"",class:"q-mr-md q-mb-md"},{default:t(()=>[e(Q,null,{default:t(()=>[e(L,{separator:""},{default:t(()=>[e(l,{header:""},{default:t(()=>[o(a(n.$t("Limits counter")),1)]),_:1}),Object.keys(r(u).information.limits_counter).length==0?(c(),h(f,{key:0},{default:t(()=>[o(a(n.$t("Currently no item to display.")),1)]),_:1})):I("",!0),(c(!0),B(E,null,H(r(u).information.limits_counter,(i,C)=>(c(),h(f,{key:C},{default:t(()=>[e(d,null,{default:t(()=>[e(l,{caption:""},{default:t(()=>[o(a(i.action),1)]),_:2},1024),e(l,null,{default:t(()=>[e(ye,null,{default:t(()=>[o(" last used at: "+a(i.last_used_at),1)]),_:2},1024),e(l,null,{default:t(()=>[o(a(i.count),1)]),_:2},1024)]),_:2},1024)]),_:2},1024),e(z,{side:""},{default:t(()=>[e(v,{flat:"",color:"primary",icon:"sym_o_history",onClick:$=>k(i.action)},null,8,["onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1}),e(pe),e(M,{align:"right"},{default:t(()=>[e(v,{flat:"",color:"primary",icon:"sym_o_history",label:"reset",onClick:m[1]||(m[1]=i=>k(""))})]),_:1})]),_:1})]),e(fe,{modelValue:b.value,"onUpdate:modelValue":m[3]||(m[3]=i=>b.value=i)},{default:t(()=>[e(P,{class:"q-pa-sm"},{default:t(()=>[e(Q,{class:"row items-center",style:{"flex-wrap":"nowrap"}},{default:t(()=>[e(ce,{icon:"sym_o_history",color:"primary","text-color":"white"}),Z("span",et,a(n.$t("Are you sure you want to reset the usage statistics counter?")),1)]),_:1}),e(M,{align:"right"},{default:t(()=>[R(e(v,{flat:"",label:"Cancel",color:"primary"},null,512),[[N]]),R(e(v,{label:"Yes, reset!",color:"primary",onClick:m[2]||(m[2]=i=>p())},null,512),[[N]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(fe,{modelValue:S.value,"onUpdate:modelValue":m[5]||(m[5]=i=>S.value=i)},{default:t(()=>[e(P,{class:"q-pa-sm"},{default:t(()=>[e(Q,{class:"row items-center",style:{"flex-wrap":"nowrap"}},{default:t(()=>[e(ce,{icon:"sym_o_history",color:"primary","text-color":"white"}),Z("span",tt,a(n.$t("Are you sure you want to reset the share limits counter?")),1)]),_:1}),e(M,{align:"right"},{default:t(()=>[R(e(v,{flat:"",label:"Cancel",color:"primary"},null,512),[[N]]),R(e(v,{label:"Yes, reset!",color:"primary",onClick:m[4]||(m[4]=i=>w())},null,512),[[N]])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})}}});export{st as default};
