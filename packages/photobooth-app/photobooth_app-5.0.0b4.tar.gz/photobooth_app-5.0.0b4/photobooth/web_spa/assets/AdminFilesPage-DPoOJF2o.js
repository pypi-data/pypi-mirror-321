import{x as re,ak as Nt,al as Dt,e as h,A as o,q as ne,a8 as it,ax as $t,ay as jt,az as Qt,P as Ce,B as A,R as Fe,ap as ut,ae as st,aA as It,N as dt,O as ct,ad as Vt,aa as Mt,w as oe,o as ft,ar as Ht,aB as ge,aC as vt,aD as Je,aE as Wt,Q as M,aF as gt,aG as Gt,aH as Kt,aI as Xt,aJ as Ze,a9 as Jt,C as mt,ac as Zt,ab as Yt,_ as Ve,aK as Ye,af as bt,d as el,u as tl,aL as _e,f as he,l as Le,m as D,s as fe,n as L,g as ll,G as al,H as nl,F as ol,t as ye,a3 as $e,X as je,$ as Se,aM as rl,a1 as Qe,D as we,a2 as qe,p as il,aN as ul,a0 as sl}from"./index-x-yFzLoN.js";import{Q as et}from"./QInput-SaA8hYnQ.js";import{Q as dl}from"./QCircularProgress-BRQgdaxi.js";import{h as tt}from"./format-CJebrXOQ.js";import{Q as cl}from"./QSeparator-VDBhp2qN.js";import{Q as fl}from"./QList-BMs7uyU0.js";import{Q as vl}from"./QMarkupTable-DFv90Qun.js";import{u as gl,a as ml,c as pt,Q as bl}from"./QSelect-B42_9ejy.js";import{Q as pl}from"./QLinearProgress-Dn6HUlop.js";import{u as _l,a as hl,b as yl}from"./use-checkbox-DXoIzdLA.js";import{u as Sl,a as wl,b as ql}from"./use-fullscreen-BFzG7Dx9.js";import{Q as Cl}from"./QPage-mkCqzv_8.js";import"./use-key-composition-Cg2lLw86.js";import"./use-id-Dd4s8hID.js";import"./position-engine-DGeMvu6T.js";import"./selection-cI33PBGq.js";import"./rtl-DluBzGS8.js";const lt=re({name:"QBreadcrumbsEl",props:{...Nt,label:String,icon:String,tag:{type:String,default:"span"}},emits:["click"],setup(e,{slots:n}){const{linkTag:a,linkAttrs:i,linkClass:r,navigateOnClick:f}=Dt(),d=h(()=>({class:"q-breadcrumbs__el q-link flex inline items-center relative-position "+(e.disable!==!0?"q-link--focusable"+r.value:"q-breadcrumbs__el--disable"),...i.value,onClick:f})),b=h(()=>"q-breadcrumbs__el-icon"+(e.label!==void 0?" q-breadcrumbs__el-icon--with-label":""));return()=>{const m=[];return e.icon!==void 0&&m.push(o(ne,{class:b.value,name:e.icon})),e.label!==void 0&&m.push(e.label),o(a.value,{...d.value},it(n.default,m))}}}),Fl=["",!0],kl=re({name:"QBreadcrumbs",props:{...$t,separator:{type:String,default:"/"},separatorColor:String,activeColor:{type:String,default:"primary"},gutter:{type:String,validator:e=>["none","xs","sm","md","lg","xl"].includes(e),default:"sm"}},setup(e,{slots:n}){const a=jt(e),i=h(()=>`flex items-center ${a.value}${e.gutter==="none"?"":` q-gutter-${e.gutter}`}`),r=h(()=>e.separatorColor?` text-${e.separatorColor}`:""),f=h(()=>` text-${e.activeColor}`);return()=>{if(n.default===void 0)return;const d=Qt(Ce(n.default));if(d.length===0)return;let b=1;const m=[],q=d.filter(y=>y.type!==void 0&&y.type.name==="QBreadcrumbsEl").length,s=n.separator!==void 0?n.separator:()=>e.separator;return d.forEach(y=>{if(y.type!==void 0&&y.type.name==="QBreadcrumbsEl"){const x=b<q,B=y.props!==null&&Fl.includes(y.props.disable),l=(x===!0?"":" q-breadcrumbs--last")+(B!==!0&&x===!0?f.value:"");b++,m.push(o("div",{class:`flex items-center${l}`},[y])),x===!0&&m.push(o("div",{class:"q-breadcrumbs__separator"+r.value},s()))}else m.push(y)}),o("div",{class:"q-breadcrumbs"},[o("div",{class:i.value},m)])}}});function ve(e,n,a,i){const r=[];return e.forEach(f=>{i(f)===!0?r.push(f):n.push({failedPropValidation:a,file:f})}),r}function Re(e){e&&e.dataTransfer&&(e.dataTransfer.dropEffect="copy"),st(e)}const Pl={multiple:Boolean,accept:String,capture:String,maxFileSize:[Number,String],maxTotalSize:[Number,String],maxFiles:[Number,String],filter:Function},xl=["rejected"];function Bl({editable:e,dnd:n,getFileInput:a,addFilesToQueue:i}){const{props:r,emit:f,proxy:d}=Fe(),b=A(null),m=h(()=>r.accept!==void 0?r.accept.split(",").map(v=>(v=v.trim(),v==="*"?"*/":(v.endsWith("/*")&&(v=v.slice(0,v.length-1)),v.toUpperCase()))):null),q=h(()=>parseInt(r.maxFiles,10)),s=h(()=>parseInt(r.maxTotalSize,10));function y(v){if(e.value)if(v!==Object(v)&&(v={target:null}),v.target!==null&&v.target.matches('input[type="file"]')===!0)v.clientX===0&&v.clientY===0&&ut(v);else{const U=a();U&&U!==v.target&&U.click(v)}}function x(v){e.value&&v&&i(null,v)}function B(v,U,z,N){let c=Array.from(U||v.target.files);const u=[],p=()=>{u.length!==0&&f("rejected",u)};if(r.accept!==void 0&&m.value.indexOf("*/")===-1&&(c=ve(c,u,"accept",k=>m.value.some(E=>k.type.toUpperCase().startsWith(E)||k.name.toUpperCase().endsWith(E))),c.length===0))return p();if(r.maxFileSize!==void 0){const k=parseInt(r.maxFileSize,10);if(c=ve(c,u,"max-file-size",E=>E.size<=k),c.length===0)return p()}if(r.multiple!==!0&&c.length!==0&&(c=[c[0]]),c.forEach(k=>{k.__key=k.webkitRelativePath+k.lastModified+k.name+k.size}),N===!0){const k=z.map(E=>E.__key);c=ve(c,u,"duplicate",E=>k.includes(E.__key)===!1)}if(c.length===0)return p();if(r.maxTotalSize!==void 0){let k=N===!0?z.reduce((E,I)=>E+I.size,0):0;if(c=ve(c,u,"max-total-size",E=>(k+=E.size,k<=s.value)),c.length===0)return p()}if(typeof r.filter=="function"){const k=r.filter(c);c=ve(c,u,"filter",E=>k.includes(E))}if(r.maxFiles!==void 0){let k=N===!0?z.length:0;if(c=ve(c,u,"max-files",()=>(k++,k<=q.value)),c.length===0)return p()}if(p(),c.length!==0)return c}function l(v){Re(v),n.value!==!0&&(n.value=!0)}function S(v){st(v),(v.relatedTarget!==null||It.is.safari!==!0?v.relatedTarget!==b.value:document.elementsFromPoint(v.clientX,v.clientY).includes(b.value)===!1)===!0&&(n.value=!1)}function w(v){Re(v);const U=v.dataTransfer.files;U.length!==0&&i(null,U),n.value=!1}function F(v){if(n.value===!0)return o("div",{ref:b,class:`q-${v}__dnd absolute-full`,onDragenter:Re,onDragover:Re,onDragleave:S,onDrop:w})}return Object.assign(d,{pickFiles:y,addFiles:x}),{pickFiles:y,addFiles:x,onDragover:l,onDragleave:S,processFiles:B,getDndNode:F,maxFilesNumber:q,maxTotalSizeNumber:s}}function at(e){return(e*100).toFixed(2)+"%"}const Tl={...dt,...Pl,label:String,color:String,textColor:String,square:Boolean,flat:Boolean,bordered:Boolean,noThumbnails:Boolean,thumbnailFit:{type:String,default:"cover"},autoUpload:Boolean,hideUploadBtn:Boolean,disable:Boolean,readonly:Boolean},_t=[...xl,"start","finish","added","removed"];function El(e,n){const a=Fe(),{props:i,slots:r,emit:f,proxy:d}=a,{$q:b}=d,m=ct(i,b);function q(g,O,Q){if(g.__status=O,O==="idle"){g.__uploaded=0,g.__progress=0,g.__sizeLabel=tt(g.size),g.__progressLabel="0.00%";return}if(O==="failed"){d.$forceUpdate();return}g.__uploaded=O==="uploaded"?g.size:Q,g.__progress=O==="uploaded"?1:Math.min(.9999,g.__uploaded/g.size),g.__progressLabel=at(g.__progress),d.$forceUpdate()}const s=h(()=>i.disable!==!0&&i.readonly!==!0),y=A(!1),x=A(null),B=A(null),l={files:A([]),queuedFiles:A([]),uploadedFiles:A([]),uploadedSize:A(0),updateFileStatus:q,isAlive:()=>Vt(a)===!1},{pickFiles:S,addFiles:w,onDragover:F,onDragleave:v,processFiles:U,getDndNode:z,maxFilesNumber:N,maxTotalSizeNumber:c}=Bl({editable:s,dnd:y,getFileInput:G,addFilesToQueue:me});Object.assign(l,e({props:i,slots:r,emit:f,helpers:l,exposeApi:g=>{Object.assign(l,g)}})),l.isBusy===void 0&&(l.isBusy=A(!1));const u=A(0),p=h(()=>u.value===0?0:l.uploadedSize.value/u.value),k=h(()=>at(p.value)),E=h(()=>tt(u.value)),I=h(()=>s.value===!0&&l.isUploading.value!==!0&&(i.multiple===!0||l.queuedFiles.value.length===0)&&(i.maxFiles===void 0||l.files.value.length<N.value)&&(i.maxTotalSize===void 0||u.value<c.value)),R=h(()=>s.value===!0&&l.isBusy.value!==!0&&l.isUploading.value!==!0&&l.queuedFiles.value.length!==0);Mt(Wt,xe);const J=h(()=>"q-uploader column no-wrap"+(m.value===!0?" q-uploader--dark q-dark":"")+(i.bordered===!0?" q-uploader--bordered":"")+(i.square===!0?" q-uploader--square no-border-radius":"")+(i.flat===!0?" q-uploader--flat no-shadow":"")+(i.disable===!0?" disabled q-uploader--disable":"")+(y.value===!0?" q-uploader--dnd":"")),te=h(()=>"q-uploader__header"+(i.color!==void 0?` bg-${i.color}`:"")+(i.textColor!==void 0?` text-${i.textColor}`:""));oe(l.isUploading,(g,O)=>{O===!1&&g===!0?f("start"):O===!0&&g===!1&&f("finish")});function Z(){i.disable===!1&&(l.abort(),l.uploadedSize.value=0,u.value=0,Pe(),l.files.value=[],l.queuedFiles.value=[],l.uploadedFiles.value=[])}function H(){i.disable===!1&&ke(["uploaded"],()=>{l.uploadedFiles.value=[]})}function le(){ke(["idle","failed"],({size:g})=>{u.value-=g,l.queuedFiles.value=[]})}function ke(g,O){if(i.disable===!0)return;const Q={files:[],size:0},X=l.files.value.filter(V=>g.indexOf(V.__status)===-1?!0:(Q.size+=V.size,Q.files.push(V),V.__img!==void 0&&window.URL.revokeObjectURL(V.__img.src),!1));Q.files.length!==0&&(l.files.value=X,O(Q),f("removed",Q.files))}function ae(g){i.disable||(g.__status==="uploaded"?l.uploadedFiles.value=l.uploadedFiles.value.filter(O=>O.__key!==g.__key):g.__status==="uploading"?g.__abort():u.value-=g.size,l.files.value=l.files.value.filter(O=>O.__key!==g.__key?!0:(O.__img!==void 0&&window.URL.revokeObjectURL(O.__img.src),!1)),l.queuedFiles.value=l.queuedFiles.value.filter(O=>O.__key!==g.__key),f("removed",[g]))}function Pe(){l.files.value.forEach(g=>{g.__img!==void 0&&window.URL.revokeObjectURL(g.__img.src)})}function G(){return B.value||x.value.getElementsByClassName("q-uploader__input")[0]}function me(g,O){const Q=U(g,O,l.files.value,!0),X=G();X!=null&&(X.value=""),Q!==void 0&&(Q.forEach(V=>{if(l.updateFileStatus(V,"idle"),u.value+=V.size,i.noThumbnails!==!0&&V.type.toUpperCase().startsWith("IMAGE")){const se=new Image;se.src=window.URL.createObjectURL(V),V.__img=se}}),l.files.value=l.files.value.concat(Q),l.queuedFiles.value=l.queuedFiles.value.concat(Q),f("added",Q),i.autoUpload===!0&&l.upload())}function be(){R.value===!0&&l.upload()}function ie(g,O,Q){if(g===!0){const X={type:"a",key:O,icon:b.iconSet.uploader[O],flat:!0,dense:!0};let V;return O==="add"?(X.onClick=S,V=xe):X.onClick=Q,o(M,X,V)}}function xe(){return o("input",{ref:B,class:"q-uploader__input overflow-hidden absolute-full",tabindex:-1,type:"file",title:"",accept:i.accept,multiple:i.multiple===!0?"multiple":void 0,capture:i.capture,onMousedown:ut,onClick:S,onChange:me})}function pe(){return r.header!==void 0?r.header(K):[o("div",{class:"q-uploader__header-content column"},[o("div",{class:"flex flex-center no-wrap q-gutter-xs"},[ie(l.queuedFiles.value.length!==0,"removeQueue",le),ie(l.uploadedFiles.value.length!==0,"removeUploaded",H),l.isUploading.value===!0?o(Je,{class:"q-uploader__spinner"}):null,o("div",{class:"col column justify-center"},[i.label!==void 0?o("div",{class:"q-uploader__title"},[i.label]):null,o("div",{class:"q-uploader__subtitle"},[E.value+" / "+k.value])]),ie(I.value,"add"),ie(i.hideUploadBtn===!1&&R.value===!0,"upload",l.upload),ie(l.isUploading.value,"clear",l.abort)])])]}function ue(){return r.list!==void 0?r.list(K):l.files.value.map(g=>o("div",{key:g.__key,class:"q-uploader__file relative-position"+(i.noThumbnails!==!0&&g.__img!==void 0?" q-uploader__file--img":"")+(g.__status==="failed"?" q-uploader__file--failed":g.__status==="uploaded"?" q-uploader__file--uploaded":""),style:i.noThumbnails!==!0&&g.__img!==void 0?{backgroundImage:'url("'+g.__img.src+'")',backgroundSize:i.thumbnailFit}:null},[o("div",{class:"q-uploader__file-header row flex-center no-wrap"},[g.__status==="failed"?o(ne,{class:"q-uploader__file-status",name:b.iconSet.type.negative,color:"negative"}):null,o("div",{class:"q-uploader__file-header-content col"},[o("div",{class:"q-uploader__title"},[g.name]),o("div",{class:"q-uploader__subtitle row items-center no-wrap"},[g.__sizeLabel+" / "+g.__progressLabel])]),g.__status==="uploading"?o(dl,{value:g.__progress,min:0,max:1,indeterminate:g.__progress===0}):o(M,{round:!0,dense:!0,flat:!0,icon:b.iconSet.uploader[g.__status==="uploaded"?"done":"clear"],onClick:()=>{ae(g)}})])]))}ft(()=>{l.isUploading.value===!0&&l.abort(),l.files.value.length!==0&&Pe()});const K={};for(const g in l)Ht(l[g])===!0?ge(K,g,()=>l[g].value):K[g]=l[g];return Object.assign(K,{upload:be,reset:Z,removeUploadedFiles:H,removeQueuedFiles:le,removeFile:ae,pickFiles:S,addFiles:w}),vt(K,{canAddFiles:()=>I.value,canUpload:()=>R.value,uploadSizeLabel:()=>E.value,uploadProgressLabel:()=>k.value}),n({...l,upload:be,reset:Z,removeUploadedFiles:H,removeQueuedFiles:le,removeFile:ae,pickFiles:S,addFiles:w,canAddFiles:I,canUpload:R,uploadSizeLabel:E,uploadProgressLabel:k}),()=>{const g=[o("div",{class:te.value},pe()),o("div",{class:"q-uploader__list scroll"},ue()),z("uploader")];l.isBusy.value===!0&&g.push(o("div",{class:"q-uploader__overlay absolute-full flex flex-center"},[o(Je)]));const O={ref:x,class:J.value};return I.value===!0&&Object.assign(O,{onDragover:F,onDragleave:v}),o("div",O,g)}}const Ll=()=>!0;function Rl(e){const n={};return e.forEach(a=>{n[a]=Ll}),n}const Ol=Rl(_t),zl=({name:e,props:n,emits:a,injectPlugin:i})=>re({name:e,props:{...Tl,...n},emits:gt(a)===!0?{...Ol,...a}:[..._t,...a],setup(r,{expose:f}){return El(i,f)}});function ee(e){return typeof e=="function"?e:()=>e}const Ul="QUploader",Al={url:[Function,String],method:{type:[Function,String],default:"POST"},fieldName:{type:[Function,String],default:()=>e=>e.name},headers:[Function,Array],formFields:[Function,Array],withCredentials:[Function,Boolean],sendRaw:[Function,Boolean],batch:[Function,Boolean],factory:Function},Nl=["factoryFailed","uploaded","failed","uploading"];function Dl({props:e,emit:n,helpers:a}){const i=A([]),r=A([]),f=A(0),d=h(()=>({url:ee(e.url),method:ee(e.method),headers:ee(e.headers),formFields:ee(e.formFields),fieldName:ee(e.fieldName),withCredentials:ee(e.withCredentials),sendRaw:ee(e.sendRaw),batch:ee(e.batch)})),b=h(()=>f.value>0),m=h(()=>r.value.length!==0);let q;function s(){i.value.forEach(l=>{l.abort()}),r.value.length!==0&&(q=!0)}function y(){const l=a.queuedFiles.value.slice(0);a.queuedFiles.value=[],d.value.batch(l)?x(l):l.forEach(S=>{x([S])})}function x(l){if(f.value++,typeof e.factory!="function"){B(l,{});return}const S=e.factory(l);if(!S)n("factoryFailed",new Error("QUploader: factory() does not return properly"),l),f.value--;else if(typeof S.catch=="function"&&typeof S.then=="function"){r.value.push(S);const w=F=>{a.isAlive()===!0&&(r.value=r.value.filter(v=>v!==S),r.value.length===0&&(q=!1),a.queuedFiles.value=a.queuedFiles.value.concat(l),l.forEach(v=>{a.updateFileStatus(v,"failed")}),n("factoryFailed",F,l),f.value--)};S.then(F=>{q===!0?w(new Error("Aborted")):a.isAlive()===!0&&(r.value=r.value.filter(v=>v!==S),B(l,F))}).catch(w)}else B(l,S||{})}function B(l,S){const w=new FormData,F=new XMLHttpRequest,v=(R,J)=>S[R]!==void 0?ee(S[R])(J):d.value[R](J),U=v("url",l);if(!U){console.error("q-uploader: invalid or no URL specified"),f.value--;return}const z=v("formFields",l);z!==void 0&&z.forEach(R=>{w.append(R.name,R.value)});let N=0,c=0,u=0,p=0,k;F.upload.addEventListener("progress",R=>{if(k===!0)return;const J=Math.min(p,R.loaded);a.uploadedSize.value+=J-u,u=J;let te=u-c;for(let Z=N;te>0&&Z<l.length;Z++){const H=l[Z];if(te>H.size)te-=H.size,N++,c+=H.size,a.updateFileStatus(H,"uploading",H.size);else{a.updateFileStatus(H,"uploading",te);return}}},!1),F.onreadystatechange=()=>{F.readyState<4||(F.status&&F.status<400?(a.uploadedFiles.value=a.uploadedFiles.value.concat(l),l.forEach(R=>{a.updateFileStatus(R,"uploaded")}),n("uploaded",{files:l,xhr:F})):(k=!0,a.uploadedSize.value-=u,a.queuedFiles.value=a.queuedFiles.value.concat(l),l.forEach(R=>{a.updateFileStatus(R,"failed")}),n("failed",{files:l,xhr:F})),f.value--,i.value=i.value.filter(R=>R!==F))},F.open(v("method",l),U),v("withCredentials",l)===!0&&(F.withCredentials=!0);const E=v("headers",l);E!==void 0&&E.forEach(R=>{F.setRequestHeader(R.name,R.value)});const I=v("sendRaw",l);l.forEach(R=>{a.updateFileStatus(R,"uploading",0),I!==!0&&w.append(v("fieldName",R),R,R.name),R.xhr=F,R.__abort=()=>{F.abort()},p+=R.size}),n("uploading",{files:l,xhr:F}),i.value.push(F),I===!0?F.send(new Blob(l)):F.send(w)}return{isUploading:b,isBusy:m,abort:s,upload:y}}const $l={name:Ul,props:Al,emits:Nl,injectPlugin:Dl},jl=zl($l),nt=re({name:"QTd",props:{props:Object,autoWidth:Boolean,noHover:Boolean},setup(e,{slots:n}){const a=Fe(),i=h(()=>"q-td"+(e.autoWidth===!0?" q-table--col-auto-width":"")+(e.noHover===!0?" q-td--no-hover":"")+" ");return()=>{if(e.props===void 0)return o("td",{class:i.value},Ce(n.default));const r=a.vnode.key,f=(e.props.colsMap!==void 0?e.props.colsMap[r]:null)||e.props.col;if(f===void 0)return;const{row:d}=e.props;return o("td",{class:i.value+f.__tdClass(d),style:f.__tdStyle(d)},Ce(n.default))}}}),Ql=re({name:"QTh",props:{props:Object,autoWidth:Boolean},emits:["click"],setup(e,{slots:n,emit:a}){const i=Fe(),{proxy:{$q:r}}=i,f=d=>{a("click",d)};return()=>{if(e.props===void 0)return o("th",{class:e.autoWidth===!0?"q-table--col-auto-width":"",onClick:f},Ce(n.default));let d,b;const m=i.vnode.key;if(m){if(d=e.props.colsMap[m],d===void 0)return}else d=e.props.col;if(d.sortable===!0){const s=d.align==="right"?"unshift":"push";b=Gt(n.default,[]),b[s](o(ne,{class:d.__iconClass,name:r.iconSet.table.arrowUp}))}else b=Ce(n.default);const q={class:d.__thClass+(e.autoWidth===!0?" q-table--col-auto-width":""),style:d.headerStyle,onClick:s=>{d.sortable===!0&&e.props.sort(d),f(s)}};return o("th",q,b)}}});function ht(e,n){return o("div",e,[o("table",{class:"q-table"},n)])}const Il={list:fl,table:vl},Vl=["list","table","__qtable"],Ml=re({name:"QVirtualScroll",props:{...gl,type:{type:String,default:"list",validator:e=>Vl.includes(e)},items:{type:Array,default:()=>[]},itemsFn:Function,itemsSize:Number,scrollTarget:Kt},setup(e,{slots:n,attrs:a}){let i;const r=A(null),f=h(()=>e.itemsSize>=0&&e.itemsFn!==void 0?parseInt(e.itemsSize,10):Array.isArray(e.items)?e.items.length:0),{virtualScrollSliceRange:d,localResetVirtualScroll:b,padVirtualScroll:m,onVirtualScrollEvt:q}=ml({virtualScrollLength:f,getVirtualScrollTarget:l,getVirtualScrollEl:B}),s=h(()=>{if(f.value===0)return[];const v=(U,z)=>({index:d.value.from+z,item:U});return e.itemsFn===void 0?e.items.slice(d.value.from,d.value.to).map(v):e.itemsFn(d.value.from,d.value.to-d.value.from).map(v)}),y=h(()=>"q-virtual-scroll q-virtual-scroll"+(e.virtualScrollHorizontal===!0?"--horizontal":"--vertical")+(e.scrollTarget!==void 0?"":" scroll")),x=h(()=>e.scrollTarget!==void 0?{}:{tabindex:0});oe(f,()=>{b()}),oe(()=>e.scrollTarget,()=>{w(),S()});function B(){return r.value.$el||r.value}function l(){return i}function S(){i=Xt(B(),e.scrollTarget),i.addEventListener("scroll",q,Ze.passive)}function w(){i!==void 0&&(i.removeEventListener("scroll",q,Ze.passive),i=void 0)}function F(){let v=m(e.type==="list"?"div":"tbody",s.value.map(n.default));return n.before!==void 0&&(v=n.before().concat(v)),it(n.after,v)}return Jt(()=>{b()}),mt(()=>{S()}),Zt(()=>{S()}),Yt(()=>{w()}),ft(()=>{w()}),()=>{if(n.default===void 0){console.error("QVirtualScroll: default scoped slot is required for rendering");return}return e.type==="__qtable"?ht({ref:r,class:"q-table__middle "+y.value},F()):o(Il[e.type],{...a,ref:r,class:[a.class,y.value],...x.value},F)}}}),Hl=()=>o("div",{key:"svg",class:"q-checkbox__bg absolute"},[o("svg",{class:"q-checkbox__svg fit absolute-full",viewBox:"0 0 24 24"},[o("path",{class:"q-checkbox__truthy",fill:"none",d:"M1.73,12.91 8.1,19.28 22.79,4.59"}),o("path",{class:"q-checkbox__indet",d:"M4,14H20V10H4"})])]),Ie=re({name:"QCheckbox",props:_l,emits:hl,setup(e){const n=Hl();function a(i,r){const f=h(()=>(i.value===!0?e.checkedIcon:r.value===!0?e.indeterminateIcon:e.uncheckedIcon)||null);return()=>f.value!==null?[o("div",{key:"icon",class:"q-checkbox__icon-container absolute-full flex flex-center no-wrap"},[o(ne,{class:"q-checkbox__icon",name:f.value})])]:[n]}return yl("checkbox",a)}});function Wl(e,n){return new Date(e)-new Date(n)}const Gl={sortMethod:Function,binaryStateSort:Boolean,columnSortOrder:{type:String,validator:e=>e==="ad"||e==="da",default:"ad"}};function Kl(e,n,a,i){const r=h(()=>{const{sortBy:b}=n.value;return b&&a.value.find(m=>m.name===b)||null}),f=h(()=>e.sortMethod!==void 0?e.sortMethod:(b,m,q)=>{const s=a.value.find(B=>B.name===m);if(s===void 0||s.field===void 0)return b;const y=q===!0?-1:1,x=typeof s.field=="function"?B=>s.field(B):B=>B[s.field];return b.sort((B,l)=>{let S=x(B),w=x(l);return s.rawSort!==void 0?s.rawSort(S,w,B,l)*y:S==null?-1*y:w==null?1*y:s.sort!==void 0?s.sort(S,w,B,l)*y:Ve(S)===!0&&Ve(w)===!0?(S-w)*y:Ye(S)===!0&&Ye(w)===!0?Wl(S,w)*y:typeof S=="boolean"&&typeof w=="boolean"?(S-w)*y:([S,w]=[S,w].map(F=>(F+"").toLocaleString().toLowerCase()),S<w?-1*y:S===w?0:y)})});function d(b){let m=e.columnSortOrder;if(gt(b)===!0)b.sortOrder&&(m=b.sortOrder),b=b.name;else{const y=a.value.find(x=>x.name===b);y!==void 0&&y.sortOrder&&(m=y.sortOrder)}let{sortBy:q,descending:s}=n.value;q!==b?(q=b,s=m==="da"):e.binaryStateSort===!0?s=!s:s===!0?m==="ad"?q=null:s=!1:m==="ad"?s=!0:q=null,i({sortBy:q,descending:s,page:1})}return{columnToSort:r,computedSortMethod:f,sort:d}}const Xl={filter:[String,Object],filterMethod:Function};function Jl(e,n){const a=h(()=>e.filterMethod!==void 0?e.filterMethod:(i,r,f,d)=>{const b=r?r.toLowerCase():"";return i.filter(m=>f.some(q=>{const s=d(q,m)+"";return(s==="undefined"||s==="null"?"":s.toLowerCase()).indexOf(b)!==-1}))});return oe(()=>e.filter,()=>{bt(()=>{n({page:1},!0)})},{deep:!0}),{computedFilterMethod:a}}function Zl(e,n){for(const a in n)if(n[a]!==e[a])return!1;return!0}function ot(e){return e.page<1&&(e.page=1),e.rowsPerPage!==void 0&&e.rowsPerPage<1&&(e.rowsPerPage=0),e}const Yl={pagination:Object,rowsPerPageOptions:{type:Array,default:()=>[5,7,10,15,20,25,50,0]},"onUpdate:pagination":[Function,Array]};function ea(e,n){const{props:a,emit:i}=e,r=A(Object.assign({sortBy:null,descending:!1,page:1,rowsPerPage:a.rowsPerPageOptions.length!==0?a.rowsPerPageOptions[0]:5},a.pagination)),f=h(()=>{const s=a["onUpdate:pagination"]!==void 0?{...r.value,...a.pagination}:r.value;return ot(s)}),d=h(()=>f.value.rowsNumber!==void 0);function b(s){m({pagination:s,filter:a.filter})}function m(s={}){bt(()=>{i("request",{pagination:s.pagination||f.value,filter:s.filter||a.filter,getCellValue:n})})}function q(s,y){const x=ot({...f.value,...s});if(Zl(f.value,x)===!0){d.value===!0&&y===!0&&b(x);return}if(d.value===!0){b(x);return}a.pagination!==void 0&&a["onUpdate:pagination"]!==void 0?i("update:pagination",x):r.value=x}return{innerPagination:r,computedPagination:f,isServerSide:d,requestServerInteraction:m,setPagination:q}}function ta(e,n,a,i,r,f){const{props:d,emit:b,proxy:{$q:m}}=e,q=h(()=>i.value===!0?a.value.rowsNumber||0:f.value),s=h(()=>{const{page:z,rowsPerPage:N}=a.value;return(z-1)*N}),y=h(()=>{const{page:z,rowsPerPage:N}=a.value;return z*N}),x=h(()=>a.value.page===1),B=h(()=>a.value.rowsPerPage===0?1:Math.max(1,Math.ceil(q.value/a.value.rowsPerPage))),l=h(()=>y.value===0?!0:a.value.page>=B.value),S=h(()=>(d.rowsPerPageOptions.includes(n.value.rowsPerPage)?d.rowsPerPageOptions:[n.value.rowsPerPage].concat(d.rowsPerPageOptions)).map(N=>({label:N===0?m.lang.table.allRows:""+N,value:N})));oe(B,(z,N)=>{if(z===N)return;const c=a.value.page;z&&!c?r({page:1}):z<c&&r({page:z})});function w(){r({page:1})}function F(){const{page:z}=a.value;z>1&&r({page:z-1})}function v(){const{page:z,rowsPerPage:N}=a.value;y.value>0&&z*N<q.value&&r({page:z+1})}function U(){r({page:B.value})}return d["onUpdate:pagination"]!==void 0&&b("update:pagination",{...a.value}),{firstRowIndex:s,lastRowIndex:y,isFirstPage:x,isLastPage:l,pagesNumber:B,computedRowsPerPageOptions:S,computedRowsNumber:q,firstPage:w,prevPage:F,nextPage:v,lastPage:U}}const la={selection:{type:String,default:"none",validator:e=>["single","multiple","none"].includes(e)},selected:{type:Array,default:()=>[]}},aa=["update:selected","selection"];function na(e,n,a,i){const r=h(()=>{const l={};return e.selected.map(i.value).forEach(S=>{l[S]=!0}),l}),f=h(()=>e.selection!=="none"),d=h(()=>e.selection==="single"),b=h(()=>e.selection==="multiple"),m=h(()=>a.value.length!==0&&a.value.every(l=>r.value[i.value(l)]===!0)),q=h(()=>m.value!==!0&&a.value.some(l=>r.value[i.value(l)]===!0)),s=h(()=>e.selected.length);function y(l){return r.value[l]===!0}function x(){n("update:selected",[])}function B(l,S,w,F){n("selection",{rows:S,added:w,keys:l,evt:F});const v=d.value===!0?w===!0?S:[]:w===!0?e.selected.concat(S):e.selected.filter(U=>l.includes(i.value(U))===!1);n("update:selected",v)}return{hasSelectionMode:f,singleSelection:d,multipleSelection:b,allRowsSelected:m,someRowsSelected:q,rowsSelectedNumber:s,isRowSelected:y,clearSelection:x,updateSelection:B}}function rt(e){return Array.isArray(e)?e.slice():[]}const oa={expanded:Array},ra=["update:expanded"];function ia(e,n){const a=A(rt(e.expanded));oe(()=>e.expanded,d=>{a.value=rt(d)});function i(d){return a.value.includes(d)}function r(d){e.expanded!==void 0?n("update:expanded",d):a.value=d}function f(d,b){const m=a.value.slice(),q=m.indexOf(d);b===!0?q===-1&&(m.push(d),r(m)):q!==-1&&(m.splice(q,1),r(m))}return{isRowExpanded:i,setExpanded:r,updateExpanded:f}}const ua={visibleColumns:Array};function sa(e,n,a){const i=h(()=>{if(e.columns!==void 0)return e.columns;const b=e.rows[0];return b!==void 0?Object.keys(b).map(m=>({name:m,label:m.toUpperCase(),field:m,align:Ve(b[m])?"right":"left",sortable:!0})):[]}),r=h(()=>{const{sortBy:b,descending:m}=n.value;return(e.visibleColumns!==void 0?i.value.filter(s=>s.required===!0||e.visibleColumns.includes(s.name)===!0):i.value).map(s=>{const y=s.align||"right",x=`text-${y}`;return{...s,align:y,__iconClass:`q-table__sort-icon q-table__sort-icon--${y}`,__thClass:x+(s.headerClasses!==void 0?" "+s.headerClasses:"")+(s.sortable===!0?" sortable":"")+(s.name===b?` sorted ${m===!0?"sort-desc":""}`:""),__tdStyle:s.style!==void 0?typeof s.style!="function"?()=>s.style:s.style:()=>null,__tdClass:s.classes!==void 0?typeof s.classes!="function"?()=>x+" "+s.classes:B=>x+" "+s.classes(B):()=>x}})}),f=h(()=>{const b={};return r.value.forEach(m=>{b[m.name]=m}),b}),d=h(()=>e.tableColspan!==void 0?e.tableColspan:r.value.length+(a.value===!0?1:0));return{colList:i,computedCols:r,computedColsMap:f,computedColspan:d}}const Oe="q-table__bottom row items-center",yt={};pt.forEach(e=>{yt[e]={}});const da=re({name:"QTable",props:{rows:{type:Array,required:!0},rowKey:{type:[String,Function],default:"id"},columns:Array,loading:Boolean,iconFirstPage:String,iconPrevPage:String,iconNextPage:String,iconLastPage:String,title:String,hideHeader:Boolean,grid:Boolean,gridHeader:Boolean,dense:Boolean,flat:Boolean,bordered:Boolean,square:Boolean,separator:{type:String,default:"horizontal",validator:e=>["horizontal","vertical","cell","none"].includes(e)},wrapCells:Boolean,virtualScroll:Boolean,virtualScrollTarget:{},...yt,noDataLabel:String,noResultsLabel:String,loadingLabel:String,selectedRowsLabel:Function,rowsPerPageLabel:String,paginationLabel:Function,color:{type:String,default:"grey-8"},titleClass:[String,Array,Object],tableStyle:[String,Array,Object],tableClass:[String,Array,Object],tableHeaderStyle:[String,Array,Object],tableHeaderClass:[String,Array,Object],cardContainerClass:[String,Array,Object],cardContainerStyle:[String,Array,Object],cardStyle:[String,Array,Object],cardClass:[String,Array,Object],hideBottom:Boolean,hideSelectedBanner:Boolean,hideNoData:Boolean,hidePagination:Boolean,onRowClick:Function,onRowDblclick:Function,onRowContextmenu:Function,...dt,...Sl,...ua,...Xl,...Yl,...oa,...la,...Gl},emits:["request","virtualScroll",...wl,...ra,...aa],setup(e,{slots:n,emit:a}){const i=Fe(),{proxy:{$q:r}}=i,f=ct(e,r),{inFullscreen:d,toggleFullscreen:b}=ql(),m=h(()=>typeof e.rowKey=="function"?e.rowKey:t=>t[e.rowKey]),q=A(null),s=A(null),y=h(()=>e.grid!==!0&&e.virtualScroll===!0),x=h(()=>" q-table__card"+(f.value===!0?" q-table__card--dark q-dark":"")+(e.square===!0?" q-table--square":"")+(e.flat===!0?" q-table--flat":"")+(e.bordered===!0?" q-table--bordered":"")),B=h(()=>`q-table__container q-table--${e.separator}-separator column no-wrap`+(e.grid===!0?" q-table--grid":x.value)+(f.value===!0?" q-table--dark":"")+(e.dense===!0?" q-table--dense":"")+(e.wrapCells===!1?" q-table--no-wrap":"")+(d.value===!0?" fullscreen scroll":"")),l=h(()=>B.value+(e.loading===!0?" q-table--loading":""));oe(()=>e.tableStyle+e.tableClass+e.tableHeaderStyle+e.tableHeaderClass+B.value,()=>{y.value===!0&&s.value!==null&&s.value.reset()});const{innerPagination:S,computedPagination:w,isServerSide:F,requestServerInteraction:v,setPagination:U}=ea(i,de),{computedFilterMethod:z}=Jl(e,U),{isRowExpanded:N,setExpanded:c,updateExpanded:u}=ia(e,a),p=h(()=>{let t=e.rows;if(F.value===!0||t.length===0)return t;const{sortBy:_,descending:C}=w.value;return e.filter&&(t=z.value(t,e.filter,G.value,de)),ie.value!==null&&(t=xe.value(e.rows===t?t.slice():t,_,C)),t}),k=h(()=>p.value.length),E=h(()=>{let t=p.value;if(F.value===!0)return t;const{rowsPerPage:_}=w.value;return _!==0&&(ue.value===0&&e.rows!==t?t.length>K.value&&(t=t.slice(0,K.value)):t=t.slice(ue.value,K.value)),t}),{hasSelectionMode:I,singleSelection:R,multipleSelection:J,allRowsSelected:te,someRowsSelected:Z,rowsSelectedNumber:H,isRowSelected:le,clearSelection:ke,updateSelection:ae}=na(e,a,E,m),{colList:Pe,computedCols:G,computedColsMap:me,computedColspan:be}=sa(e,w,I),{columnToSort:ie,computedSortMethod:xe,sort:pe}=Kl(e,w,Pe,U),{firstRowIndex:ue,lastRowIndex:K,isFirstPage:g,isLastPage:O,pagesNumber:Q,computedRowsPerPageOptions:X,computedRowsNumber:V,firstPage:se,prevPage:ze,nextPage:Ue,lastPage:Ae}=ta(i,S,w,F,U,k),St=h(()=>E.value.length===0),wt=h(()=>{const t={};return pt.forEach(_=>{t[_]=e[_]}),t.virtualScrollItemSize===void 0&&(t.virtualScrollItemSize=e.dense===!0?28:48),t});function qt(){y.value===!0&&s.value.reset()}function Ct(){if(e.grid===!0)return Ut();const t=e.hideHeader!==!0?Ke:null;if(y.value===!0){const C=n["top-row"],P=n["bottom-row"],T={default:j=>He(j.item,n.body,j.index)};if(C!==void 0){const j=o("tbody",C({cols:G.value}));T.before=t===null?()=>j:()=>[t()].concat(j)}else t!==null&&(T.before=t);return P!==void 0&&(T.after=()=>o("tbody",P({cols:G.value}))),o(Ml,{ref:s,class:e.tableClass,style:e.tableStyle,...wt.value,scrollTarget:e.virtualScrollTarget,items:E.value,type:"__qtable",tableColspan:be.value,onVirtualScroll:kt},T)}const _=[Pt()];return t!==null&&_.unshift(t()),ht({class:["q-table__middle scroll",e.tableClass],style:e.tableStyle},_)}function Ft(t,_){if(s.value!==null){s.value.scrollTo(t,_);return}t=parseInt(t,10);const C=q.value.querySelector(`tbody tr:nth-of-type(${t+1})`);if(C!==null){const P=q.value.querySelector(".q-table__middle.scroll"),T=C.offsetTop-e.virtualScrollStickySizeStart,j=T<P.scrollTop?"decrease":"increase";P.scrollTop=T,a("virtualScroll",{index:t,from:0,to:S.value.rowsPerPage-1,direction:j})}}function kt(t){a("virtualScroll",t)}function Me(){return[o(pl,{class:"q-table__linear-progress",color:e.color,dark:f.value,indeterminate:!0,trackColor:"transparent"})]}function He(t,_,C){const P=m.value(t),T=le(P);if(_!==void 0)return _(We({key:P,row:t,pageIndex:C,__trClass:T?"selected":""}));const j=n["body-cell"],$=G.value.map(W=>{const Te=n[`body-cell-${W.name}`],Ee=Te!==void 0?Te:j;return Ee!==void 0?Ee(xt({key:P,row:t,pageIndex:C,col:W})):o("td",{class:W.__tdClass(t),style:W.__tdStyle(t)},de(W,t))});if(I.value===!0){const W=n["body-selection"],Te=W!==void 0?W(Bt({key:P,row:t,pageIndex:C})):[o(Ie,{modelValue:T,color:e.color,dark:f.value,dense:e.dense,"onUpdate:modelValue":(Ee,At)=>{ae([P],[t],Ee,At)}})];$.unshift(o("td",{class:"q-table--col-auto-width"},Te))}const Y={key:P,class:{selected:T}};return e.onRowClick!==void 0&&(Y.class["cursor-pointer"]=!0,Y.onClick=W=>{a("rowClick",W,t,C)}),e.onRowDblclick!==void 0&&(Y.class["cursor-pointer"]=!0,Y.onDblclick=W=>{a("rowDblclick",W,t,C)}),e.onRowContextmenu!==void 0&&(Y.class["cursor-pointer"]=!0,Y.onContextmenu=W=>{a("rowContextmenu",W,t,C)}),o("tr",Y,$)}function Pt(){const t=n.body,_=n["top-row"],C=n["bottom-row"];let P=E.value.map((T,j)=>He(T,t,j));return _!==void 0&&(P=_({cols:G.value}).concat(P)),C!==void 0&&(P=P.concat(C({cols:G.value}))),o("tbody",P)}function We(t){return Ne(t),t.cols=t.cols.map(_=>ge({..._},"value",()=>de(_,t.row))),t}function xt(t){return Ne(t),ge(t,"value",()=>de(t.col,t.row)),t}function Bt(t){return Ne(t),t}function Ne(t){Object.assign(t,{cols:G.value,colsMap:me.value,sort:pe,rowIndex:ue.value+t.pageIndex,color:e.color,dark:f.value,dense:e.dense}),I.value===!0&&ge(t,"selected",()=>le(t.key),(_,C)=>{ae([t.key],[t.row],_,C)}),ge(t,"expand",()=>N(t.key),_=>{u(t.key,_)})}function de(t,_){const C=typeof t.field=="function"?t.field(_):_[t.field];return t.format!==void 0?t.format(C,_):C}const ce=h(()=>({pagination:w.value,pagesNumber:Q.value,isFirstPage:g.value,isLastPage:O.value,firstPage:se,prevPage:ze,nextPage:Ue,lastPage:Ae,inFullscreen:d.value,toggleFullscreen:b}));function Tt(){const t=n.top,_=n["top-left"],C=n["top-right"],P=n["top-selection"],T=I.value===!0&&P!==void 0&&H.value>0,j="q-table__top relative-position row items-center";if(t!==void 0)return o("div",{class:j},[t(ce.value)]);let $;if(T===!0?$=P(ce.value).slice():($=[],_!==void 0?$.push(o("div",{class:"q-table__control"},[_(ce.value)])):e.title&&$.push(o("div",{class:"q-table__control"},[o("div",{class:["q-table__title",e.titleClass]},e.title)]))),C!==void 0&&($.push(o("div",{class:"q-table__separator col"})),$.push(o("div",{class:"q-table__control"},[C(ce.value)]))),$.length!==0)return o("div",{class:j},$)}const Ge=h(()=>Z.value===!0?null:te.value);function Ke(){const t=Et();return e.loading===!0&&n.loading===void 0&&t.push(o("tr",{class:"q-table__progress"},[o("th",{class:"relative-position",colspan:be.value},Me())])),o("thead",t)}function Et(){const t=n.header,_=n["header-cell"];if(t!==void 0)return t(De({header:!0})).slice();const C=G.value.map(P=>{const T=n[`header-cell-${P.name}`],j=T!==void 0?T:_,$=De({col:P});return j!==void 0?j($):o(Ql,{key:P.name,props:$},()=>P.label)});if(R.value===!0&&e.grid!==!0)C.unshift(o("th",{class:"q-table--col-auto-width"}," "));else if(J.value===!0){const P=n["header-selection"],T=P!==void 0?P(De({})):[o(Ie,{color:e.color,modelValue:Ge.value,dark:f.value,dense:e.dense,"onUpdate:modelValue":Xe})];C.unshift(o("th",{class:"q-table--col-auto-width"},T))}return[o("tr",{class:e.tableHeaderClass,style:e.tableHeaderStyle},C)]}function De(t){return Object.assign(t,{cols:G.value,sort:pe,colsMap:me.value,color:e.color,dark:f.value,dense:e.dense}),J.value===!0&&ge(t,"selected",()=>Ge.value,Xe),t}function Xe(t){Z.value===!0&&(t=!1),ae(E.value.map(m.value),E.value,t)}const Be=h(()=>{const t=[e.iconFirstPage||r.iconSet.table.firstPage,e.iconPrevPage||r.iconSet.table.prevPage,e.iconNextPage||r.iconSet.table.nextPage,e.iconLastPage||r.iconSet.table.lastPage];return r.lang.rtl===!0?t.reverse():t});function Lt(){if(e.hideBottom===!0)return;if(St.value===!0){if(e.hideNoData===!0)return;const C=e.loading===!0?e.loadingLabel||r.lang.table.loading:e.filter?e.noResultsLabel||r.lang.table.noResults:e.noDataLabel||r.lang.table.noData,P=n["no-data"],T=P!==void 0?[P({message:C,icon:r.iconSet.table.warning,filter:e.filter})]:[o(ne,{class:"q-table__bottom-nodata-icon",name:r.iconSet.table.warning}),C];return o("div",{class:Oe+" q-table__bottom--nodata"},T)}const t=n.bottom;if(t!==void 0)return o("div",{class:Oe},[t(ce.value)]);const _=e.hideSelectedBanner!==!0&&I.value===!0&&H.value>0?[o("div",{class:"q-table__control"},[o("div",[(e.selectedRowsLabel||r.lang.table.selectedRecords)(H.value)])])]:[];if(e.hidePagination!==!0)return o("div",{class:Oe+" justify-end"},Ot(_));if(_.length!==0)return o("div",{class:Oe},_)}function Rt(t){U({page:1,rowsPerPage:t.value})}function Ot(t){let _;const{rowsPerPage:C}=w.value,P=e.paginationLabel||r.lang.table.pagination,T=n.pagination,j=e.rowsPerPageOptions.length>1;if(t.push(o("div",{class:"q-table__separator col"})),j===!0&&t.push(o("div",{class:"q-table__control"},[o("span",{class:"q-table__bottom-item"},[e.rowsPerPageLabel||r.lang.table.recordsPerPage]),o(bl,{class:"q-table__select inline q-table__bottom-item",color:e.color,modelValue:C,options:X.value,displayValue:C===0?r.lang.table.allRows:C,dark:f.value,borderless:!0,dense:!0,optionsDense:!0,optionsCover:!0,"onUpdate:modelValue":Rt})])),T!==void 0)_=T(ce.value);else if(_=[o("span",C!==0?{class:"q-table__bottom-item"}:{},[C?P(ue.value+1,Math.min(K.value,V.value),V.value):P(1,k.value,V.value)])],C!==0&&Q.value>1){const $={color:e.color,round:!0,dense:!0,flat:!0};e.dense===!0&&($.size="sm"),Q.value>2&&_.push(o(M,{key:"pgFirst",...$,icon:Be.value[0],disable:g.value,onClick:se})),_.push(o(M,{key:"pgPrev",...$,icon:Be.value[1],disable:g.value,onClick:ze}),o(M,{key:"pgNext",...$,icon:Be.value[2],disable:O.value,onClick:Ue})),Q.value>2&&_.push(o(M,{key:"pgLast",...$,icon:Be.value[3],disable:O.value,onClick:Ae}))}return t.push(o("div",{class:"q-table__control"},_)),t}function zt(){const t=e.gridHeader===!0?[o("table",{class:"q-table"},[Ke()])]:e.loading===!0&&n.loading===void 0?Me():void 0;return o("div",{class:"q-table__middle"},t)}function Ut(){const t=n.item!==void 0?n.item:_=>{const C=_.cols.map(T=>o("div",{class:"q-table__grid-item-row"},[o("div",{class:"q-table__grid-item-title"},[T.label]),o("div",{class:"q-table__grid-item-value"},[T.value])]));if(I.value===!0){const T=n["body-selection"],j=T!==void 0?T(_):[o(Ie,{modelValue:_.selected,color:e.color,dark:f.value,dense:e.dense,"onUpdate:modelValue":($,Y)=>{ae([_.key],[_.row],$,Y)}})];C.unshift(o("div",{class:"q-table__grid-item-row"},j),o(cl,{dark:f.value}))}const P={class:["q-table__grid-item-card"+x.value,e.cardClass],style:e.cardStyle};return(e.onRowClick!==void 0||e.onRowDblclick!==void 0)&&(P.class[0]+=" cursor-pointer",e.onRowClick!==void 0&&(P.onClick=T=>{a("RowClick",T,_.row,_.pageIndex)}),e.onRowDblclick!==void 0&&(P.onDblclick=T=>{a("RowDblclick",T,_.row,_.pageIndex)})),o("div",{class:"q-table__grid-item col-xs-12 col-sm-6 col-md-4 col-lg-3"+(_.selected===!0?" q-table__grid-item--selected":"")},[o("div",P,C)])};return o("div",{class:["q-table__grid-content row",e.cardContainerClass],style:e.cardContainerStyle},E.value.map((_,C)=>t(We({key:m.value(_),row:_,pageIndex:C}))))}return Object.assign(i.proxy,{requestServerInteraction:v,setPagination:U,firstPage:se,prevPage:ze,nextPage:Ue,lastPage:Ae,isRowSelected:le,clearSelection:ke,isRowExpanded:N,setExpanded:c,sort:pe,resetVirtualScroll:qt,scrollTo:Ft,getCellValue:de}),vt(i.proxy,{filteredSortedRows:()=>p.value,computedRows:()=>E.value,computedRowsNumber:()=>V.value}),()=>{const t=[Tt()],_={ref:q,class:l.value};return e.grid===!0?t.push(zt()):Object.assign(_,{class:[_.class,e.cardClass],style:e.cardStyle}),t.push(Ct(),Lt()),e.loading===!0&&n.loading!==void 0&&t.push(n.loading()),o("div",_,t)}}}),ca={class:"q-pa-md"},fa={class:"text-h6"},va={class:"text-h6"},ga=["onClick"],ma={class:"q-ml-sm"},Ra=el({__name:"AdminFilesPage",setup(e){const n=tl(),a=A(""),i=A(!1),r=A([]),f=[{label:"Type",name:"type",required:!0,align:"left",field:"is_dir",style:"width: 25px"},{label:"Name",name:"name",required:!0,align:"left",field:"name"},{label:"Path",name:"filepath",required:!0,align:"left",field:"filepath"},{label:"Size",name:"size",required:!0,align:"left",field:"size",format:c=>N(c,0)}],d=A([]),b=A(""),m=A(!1),q=A(""),s=A(!1),y=A(!1),x=A({rowsPerPage:0});mt(()=>{w()}),oe(a,c=>{w(c)});const B=h(()=>a.value?z(a.value).split("/"):[]),l=c=>{c.is_dir?a.value=c.filepath:_e(`/api/admin/files/file/${c.filepath}`,{}).then(u=>u.blob()).then(u=>window.open(URL.createObjectURL(u)))},S=(c=-1)=>{a.value=B.value.slice(0,c+1).join("/")};async function w(c=""){i.value=!0,d.value=[];try{const u=await _e(`/api/admin/files/list/${c}`,{method:"GET",headers:{"Content-Type":"application/json"}}),p=await u.json();if(u.ok)r.value=p;else throw console.error(p),`Error ${u.status} getting listing. Please check logs.`}catch(u){console.error(u),n.notify({message:String(u),caption:"Request Error!",color:"negative"})}i.value=!1}async function F(c=[]){try{const u=await _e("/api/admin/files/zip",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)});if(u.ok){n.notify({message:"Downloading ZIP file",caption:"Files",type:"positive"});const p=await u.blob(),k=window.URL.createObjectURL(p);window.location.assign(k)}else{const p=await u.json();throw console.error(p),`Error ${u.status} creating zip. Please check logs.`}}catch(u){console.error(u),n.notify({message:String(u),caption:"Request Error!",color:"negative"})}}async function v(c=[]){try{const u=await _e("/api/admin/files/delete",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)});if(u.ok)n.notify({message:"Selected items deleted.",caption:"Files",type:"positive"});else throw console.error(u),`Error ${u.status} deleting items. Please check logs.`}catch(u){console.error(u),n.notify({message:String(u),caption:"Request Error!",color:"negative"})}w(a.value)}async function U(c){let u=c;a.value&&(u=a.value+"/"+u),console.log(u);try{const p=await _e("/api/admin/files/folder/new",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(u)}),k=await p.json();if(p.ok)n.notify({message:`Folder "${c}" created.`,caption:"Files",type:"positive"}),w(a.value);else throw console.error(k),`Error ${p.status} while creating folder. Please check logs.`}catch(p){console.error(p),n.notify({message:String(p),caption:"Request Error!",color:"negative"})}}const z=c=>c.split("/").filter(u=>u!=="").join("/"),N=(c,u=2)=>{if(!+c)return"0 Bytes";const p=1024,k=u<0?0:u,E=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],I=Math.floor(Math.log(c)/Math.log(p));return`${parseFloat((c/Math.pow(p,I)).toFixed(k))} ${E[I]}`};return(c,u)=>(he(),Le(Cl,{id:"admin-files-page",padding:""},{default:D(()=>[fe("div",ca,[L(kl,{gutter:"sm",style:{cursor:"pointer"}},{default:D(()=>[L(lt,{label:c.$t("TITLE_FILES_WORKING_DIR"),icon:"sym_o_home",onClick:u[0]||(u[0]=p=>S(-1))},null,8,["label"]),(he(!0),ll(al,null,nl(B.value,(p,k)=>(he(),Le(lt,{key:k,onClick:E=>S(k)},{default:D(()=>[ol(ye(p),1)]),_:2},1032,["onClick"]))),128))]),_:1}),L($e,{modelValue:m.value,"onUpdate:modelValue":u[4]||(u[4]=p=>m.value=p)},{default:D(()=>[L(je,{style:{"min-width":"350px"}},{default:D(()=>[L(Se,null,{default:D(()=>[fe("div",fa,ye(c.$t("TITLE_FILES_NEW_FOLDER_DIALOG")),1)]),_:1}),L(Se,{class:"q-pt-none"},{default:D(()=>[L(et,{modelValue:q.value,"onUpdate:modelValue":u[1]||(u[1]=p=>q.value=p),dense:"",autofocus:"",onKeyup:u[2]||(u[2]=rl(p=>[U(q.value),m.value=!1],["enter"]))},null,8,["modelValue"])]),_:1}),L(Qe,{align:"right",class:"text-primary"},{default:D(()=>[we(L(M,{flat:"",label:c.$t("BTN_LABEL_CANCEL")},null,8,["label"]),[[qe]]),we(L(M,{flat:"",label:c.$t("BTN_LABEL_FILES_CREATE_NEW_FOLDER"),onClick:u[3]||(u[3]=p=>U(q.value))},null,8,["label"]),[[qe]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),L($e,{modelValue:y.value,"onUpdate:modelValue":u[7]||(u[7]=p=>y.value=p)},{default:D(()=>[L(je,{style:{"min-width":"350px"}},{default:D(()=>[L(Se,null,{default:D(()=>[fe("div",va,ye(c.$t("TITLE_FILES_UPLOAD_FILES_DIALOG")),1)]),_:1}),L(Se,{class:"q-pt-none"},{default:D(()=>[L(jl,{label:"Upload Files",url:"/api/admin/files/file/upload","form-fields":[{name:"upload_target_folder",value:a.value}],headers:[{name:"authorization",value:`Bearer ${il(ul)()}`}],"field-name":"uploaded_files",batch:"",multiple:"",onFinish:u[5]||(u[5]=p=>w(a.value)),onUploaded:u[6]||(u[6]=p=>y.value=!1)},null,8,["form-fields","headers"])]),_:1}),L(Qe,{align:"right",class:"text-primary"},{default:D(()=>[we(L(M,{flat:"",label:"Cancel"},null,512),[[qe]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),L(da,{selected:d.value,"onUpdate:selected":u[15]||(u[15]=p=>d.value=p),class:"full-height",flat:"",bordered:"",title:"File Browser",pagination:x.value,rows:r.value,filter:b.value,columns:f,color:"primary","row-key":"filepath",dense:"",loading:i.value,selection:"multiple","virtual-scroll":"","rows-per-page-options":[0]},{"body-cell-type":D(p=>[L(nt,{props:p},{default:D(()=>[p.value?(he(),Le(ne,{key:0,name:"sym_o_folder"})):(he(),Le(ne,{key:1,name:"sym_o_description"}))]),_:2},1032,["props"])]),"body-cell-name":D(p=>[L(nt,{props:p,style:{cursor:"pointer"}},{default:D(()=>[fe("div",{onClick:k=>l(p.row)},ye(p.value),9,ga)]),_:2},1032,["props"])]),"top-left":D(()=>[L($e,{modelValue:s.value,"onUpdate:modelValue":u[9]||(u[9]=p=>s.value=p)},{default:D(()=>[L(je,{class:"q-pa-sm",style:{"min-width":"350px"}},{default:D(()=>[L(Se,{class:"row items-center",style:{"flex-wrap":"nowrap"}},{default:D(()=>[L(sl,{icon:"sym_o_delete",color:"negative","text-color":"white"}),fe("span",ma,ye(c.$t("Are you sure you want to delete the selected files and subfolders?")),1)]),_:1}),L(Qe,{align:"right"},{default:D(()=>[we(L(M,{flat:"",label:c.$t("BTN_LABEL_CANCEL"),color:"primary"},null,8,["label"]),[[qe]]),we(L(M,{label:c.$t("yes, delete"),color:"negative",onClick:u[8]||(u[8]=p=>v(d.value))},null,8,["label"]),[[qe]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),fe("div",null,[L(M,{disable:i.value,label:c.$t("BTN_LABEL_FILES_NEW_FOLDER"),onClick:u[10]||(u[10]=p=>m.value=!0)},null,8,["disable","label"]),L(M,{class:"q-ml-sm",disable:i.value,label:c.$t("BTN_LABEL_FILES_UPLOAD_FILE"),onClick:u[11]||(u[11]=p=>y.value=!0)},null,8,["disable","label"]),L(M,{class:"q-ml-sm",disable:d.value.length==0,label:c.$t("BTN_LABEL_FILES_DOWNLOAD_ZIP"),onClick:u[12]||(u[12]=p=>F(d.value))},null,8,["disable","label"]),L(M,{class:"q-ml-sm",color:"negative",disable:d.value.length==0,label:c.$t("BTN_LABEL_FILES_DELETE_SELECTED"),onClick:u[13]||(u[13]=p=>s.value=!0)},null,8,["disable","label"])])]),"top-right":D(()=>[L(et,{modelValue:b.value,"onUpdate:modelValue":u[14]||(u[14]=p=>b.value=p),borderless:"",dense:"",debounce:"300",placeholder:c.$t("TEXT_PLACEHOLDER_SEARCH")},{append:D(()=>[L(ne,{name:"sym_o_search"})]),_:1},8,["modelValue","placeholder"])]),_:1},8,["selected","pagination","rows","filter","loading"])])]),_:1}))}});export{Ra as default};
