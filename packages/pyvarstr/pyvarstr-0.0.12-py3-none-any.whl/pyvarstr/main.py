def help():
  return "ms5i1 ms5i2 ms5i3 ms_terver ms_sem_8_15 dec exdec exlist exsort exclass sort list numpy pandas json visualization kr1"

def ms_sem_8_15():
  return """
#—ç–º–ø–∏—Ä–∏—á–µ—Å–∫–∏–π –∫–≤–∞–Ω—Ç–∏–ª—å –ø–æ—Ä—è–¥–∫–∞ a = 0.3 - Y[int(n*0.5)-1], –≥–¥–µ n = len(Y), Y = array([ 2,  2,  2,  3,  5,  5, 10, 10, 10, 10, 10, 12, 18, 18, 18, 18, 18, 18, 20, 20])

–î–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤–∞

X —Å—Ä–µ–¥–Ω–µ–µ –æ–±–æ–∑–Ω–∞—á–∞—Ç—å –±—É–¥—É X_, 
—Å—É–º–º—É –±—É–¥—É –æ–±–æ–∑–Ω–∞—á–∞—Ç—å –∫–∞–∫ S,
–≤—ã–±–æ—Ä–æ—á–Ω—É—é –¥–∏—Å–ø–µ—Ä—Å–∏—é - –∫–∞–∫ sigma2
–∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—É—é –≤—ã–±–æ—Ä–æ—á–Ω—É—é –¥–∏—Å–ø–µ—Ä—Å–∏—é –∫–∞–∫ S2

–î–æ–∫–∞–∂–µ–º, —á—Ç–æ E(X_) = E(X)
E(X_) = E((1/n)*S(Xi)) = (1/n)*E(S(Xi)) = (1/n)*E(X1 + ... + Xn) = (1/n)*n*E(Xi) = (1/n)*n*E(X) = E(X)

–î–æ–∫–∞–∂–µ–º, —á—Ç–æ Var(X_) = sigma2/n
Var(X_) = Var((1/n)*S(Xi)) = (1/n^2)*Var(X1 + ... + Xn) = (1/n^2)*n*Var(X) = Var(X)/n = sigma2/n

–î–æ–∫–∞–∂–µ–º, —á—Ç–æ E(S2) = sigma2
E(S2) = E(n/(n-1)*(1/n)*S((Xi - X_)^2)) = (n/(n-1))*E((1/n)*S((Xi - X_)^2)) =
= (n/(n-1))*E((1/n)*S(Xi^2) - X_^2) = (n/(n-1))*(E((1/n)*S(Xi^2)) - E(X_^2)) = 
= (1/(n-1))*E(S(Xi^2)) - (n/(n-1))*E(X_^2)) ==
1) E(S(Xi^2)) = E(X1^2 + ... + Xn^2) = n*E(Xi^2) = n*(Var(Xi) + E^2(Xi)) = n*(Var(X) + E^2(X)) = n*E(X^2)
2) E(X_^2) = E((1/n^2)*S^2(Xi)) = (1/n^2)*E((X1 + ... + Xn)^2) = (1/n^2)*(Var(X1 + ... + Xn) + E^2(X1 + ... + Xn)) =
= (1/n^2)*(n*Var(X) + (n*E(X))^2) = (1/n)*Var(X) + E(X)^2
== (1/(n-1))*n*E(X^2) - (n/(n-1))*((1/n)*Var(X) + E(X)^2) = n/(n-1)*E(X^2) - 1/(n-1)*Var(X) - n/(n-1)*E(X)^2 =
= n/(n-1)*(E(X^2) - E(X)^2) - 1/(n-1)*Var(X) = n/(n-1)*Var(X) - 1/(n-1)*Var(X) = Var(X) = sigma2

–î–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤–∞ mu3(X_) = mu3(X)/n^2, mu4(X_) = mu4(X)/n^3 + 3*(n-1)/n^3*mu2^2(X) –≤ —Ñ–æ—Ç–æ
Cov(X_, S^2) –∏ Cov(X_, mu3) –≤ —Ñ–æ—Ç–æ

–î–æ–∫–∞–∂–µ–º, —á—Ç–æ mu3(X_) = mu3(X)/n^2
mu3(X_) = v3(X_) - 3*v2(X_)*v1(X_) + 2*v1(X_)^3 = E(X_^3) - 3*E(X_^2)*E(X_) + 2*E^3(X_) ==
1) E(X_) = E(X) = v1 (—É–∂–µ –¥–æ–∫–∞–∑–∞–Ω–æ –≤—ã—à–µ)
2) E(X_^2) = (1/n)*Var(X) + E(X)^2 (–¥–æ–∫–∞–∑–∞–Ω–æ –≤—ã—à–µ) = (1/n)*(E(X^2) - E^2(X)) + E(X)^2 = (1/n)*v2 + (n-1)/n*v1
3) E(X_^3) = E((1/n)^3*S(Xi)^3) = (1/n^3)*(n*E(Xi^3)+n*(n-1)*3*E(Xi^2)*E(X) + (n^3 - 3n^2 + 2n)*E^3(X)) =
= v3/n^2 + 3(n-1)/n^2*v2*v1 + (n^2 - 3n + 2)/n^2*v1^3
== –ø–æ–¥—Å—Ç–∞–≤–ª—è–µ–º, —Ä–∞—Å–∫—Ä—ã–≤–∞–µ–º —Å–∫–æ–±–∫–∏, –ø—Ä–∏–≤–æ–¥–∏–º –ø–æ–¥–æ–±–Ω—ã–µ, —Å–æ–∫—Ä–∞—â–∞–µ–º, –ø–æ–ª—É—á–∞–µ–º == (v3 - 3v1v2 + 2v1^3)/n^2 = mu3(X)/n^2

Cov(X_, S2) = E(X_*S2) - E(X_)*E(S2) == 
E(X_) = E(X)
E(S2) = sigma2 = v2 - v1^2
E(X_*S2) = E(X_*(1/(n-1))*S((Xi - X_)^2)) = 1/(n-1)*E(X_*(S(Xi^2) - n*X_^2)) = 1/(n-1)*E(X_*S(Xi^2) - n*X_^3) = 
= 1/(n-1)*(E(X^3) + (n-1)*E(X^2)*E(X) - n*E(X_^3)) = 1/(n-1)*(v3 + (n-1)*v2*v1 - n*v3(X_)) =
= –ø–æ–¥—Å—Ç–∞–≤–ª—è–µ–º v3(X_), –≤—ã–¥–µ–ª—è–µ–º mu3, –ø–æ–ª—É—á–∞–µ–º mu3/n + v1v2 - v1^3
== –ø–æ–¥—Å—Ç–∞–≤–ª—è–µ–º, –ø–æ–ª—É—á–∞–µ–º mu3/n

## 2) –°–ª–µ–¥—É—é—â–∏–µ 36 —á–∏—Å–µ–ª ‚Äì —ç—Ç–æ —É–º–Ω–æ–∂–µ–Ω–Ω—ã–µ –Ω–∞ 10000 –∏ –æ–∫—Ä—É–≥–ª–µ–Ω–Ω—ã–µ –¥–æ –±–ª–∏–∂–∞–π—à–µ–≥–æ —Ü–µ–ª–æ–≥–æ –¥–Ω–µ–≤–Ω—ã–µ –ª–æ–≥–∞—Ä–∏—Ñ–º–∏—á–µ—Å–∫–∏–µ –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç–∏ –∞–∫—Ü–∏–∏ –∫–æ–º–ø–∞–Ω–∏–∏ –ê–í–°: 295, -158, -51, 34, 109, -53, -185, 233, -251, -320, -274, -116, 370, -83, 149, 66, -108, -236, -87, -30, 113, -35, 56, -220, 20, -339, 90, 240, 100, -115, -137, 129, 99, -102, 299, -145. –ë—É–¥–µ–º –Ω–∞–∑—ã–≤–∞—Ç—å –∏—Ö –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–Ω—ã–º–∏ –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç—è–º–∏ (–ü–î). –§–∏–Ω–∞–Ω—Å–æ–≤—ã–π –∞–Ω–∞–ª–∏—Ç–∏–∫ –ì–ª–µ–± –ø—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ—Ç, —á—Ç–æ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–Ω—ã–µ –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç–∏(–∫–∞–∫ –∏ –∏—Å—Ö–æ–¥–Ω—ã–µ) –ø—Ä–∏–±–ª–∏–∂–µ–Ω–Ω–æ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω—ã –ø–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ–º—É –∑–∞–∫–æ–Ω—É. –ß—Ç–æ–±—ã –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–≤–æ–µ –ø—Ä–µ–¥–ø–æ–ª–æ–∂–µ–Ω–∏–µ –ì–ª–µ–± –Ω–∞—à–µ–ª –Ω–∏–∂–Ω—é—é –∫–≤–∞—Ä—Ç–∏–ª—å L –∏ –≤–µ—Ä—Ö–Ω—é—é –∫–≤–∞—Ä—Ç–∏–ª—å H –Ω–æ—Ä–º–∞–ª—å–Ω–æ–≥–æ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è N(Œº,œÉ2), –¥–ª—è –∫–æ—Ç–æ—Ä–æ–≥–æ Œº ‚Äì —ç—Ç–æ —Å—Ä–µ–¥–Ω–µ–µ –∞—Ä–∏—Ñ–º–µ—Ç–∏—á–µ—Å–∫–æ–µ –ü–î, –∞ œÉ ‚Äì —ç–º–ø–∏—Ä–∏—á–µ—Å–∫–æ–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–µ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ –ü–î. –ó–∞—Ç–µ–º –ì–ª–µ–± –ø–æ–¥—Å—á–∏—Ç–∞–ª –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ü–î, –ø–æ–ø–∞–≤—à–∏—Ö –≤ –∏–Ω—Ç–µ—Ä–≤–∞–ª –æ—Ç L –¥–æ H (–Ω–∞–¥–µ—è—Å—å, —á—Ç–æ –≤ —ç—Ç–æ—Ç –∏–Ω—Ç–µ—Ä–≤–∞–ª –ø–æ–ø–∞–¥–µ—Ç –ø–æ–ª–æ–≤–∏–Ω–∞ –ü–î). –†–µ–∑—É–ª—å—Ç–∞—Ç —ç—Ç–æ–≥–æ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è –ø–æ–∫–∞–∑–∞–ª—Å—è –µ–º—É –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —É–±–µ–¥–∏—Ç–µ–ª—å–Ω—ã–º. –ß—Ç–æ–±—ã –æ–∫–æ–Ω—á–∞—Ç–µ–ª—å–Ω–æ —Ä–∞–∑–≤–µ—è—Ç—å —Å–æ–º–Ω–µ–Ω–∏—è –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ—Å—Ç–∏ –ü–î, –ì–ª–µ–± –ø–æ—Å—Ç—Ä–æ–∏–ª –Ω–∞ –æ–¥–Ω–æ–º —Ä–∏—Å—É–Ω–∫–µ –≥—Ä–∞—Ñ–∏–∫–∏ —Ñ—É–Ω–∫—Ü–∏–π: FÃÇ(x) –∏ N(Œº,œÉ2), –≥–¥–µ FÃÇ(x) ‚Äì —ç–º–ø–∏—Ä–∏—á–µ—Å–∫–∞—è —Ñ—É–Ω–∫—Ü–∏—è —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –ü–î, –∞ F(x) ‚Äì —Ñ—É–Ω–∫—Ü–∏—è —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è N(Œº,œÉ2). –í –∫–∞—á–µ—Å—Ç–≤–µ –º–µ—Ä—ã —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è –¥–≤—É—Ö –≥—Ä–∞—Ñ–∏–∫–æ–≤ –ì–ª–µ–± —Ä–µ—à–∏–ª –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ d –º–µ–∂–¥—É —Ñ—É–Ω–∫—Ü–∏—è–º–∏ FÃÇ(x) –∏ F(x), –∫–æ—Ç–æ—Ä–æ–µ –æ–Ω –≤—ã—á–∏—Å–ª–∏–ª, –∏—Å—Ö–æ–¥—è –∏–∑ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è: d = sup|FÃÇ(x)‚àí F(x) |. 

–í –æ—Ç–≤–µ—Ç–µ —É–∫–∞–∂–∏—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤—ã—á–∏—Å–ª–µ–Ω–∏–π –ì–ª–µ–±–∞: 

1) —Å—Ä–µ–¥–Ω–µ–µ –∞—Ä–∏—Ñ–º–µ—Ç–∏—á–µ—Å–∫–æ–µ –ü–î;
2) —ç–º–ø–∏—Ä–∏—á–µ—Å–∫–æ–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–µ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ –ü–î;
3) –∫–≤–∞—Ä—Ç–∏–ª–∏ L –∏ H;
4) –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ü–î, –ø–æ–ø–∞–≤—à–∏—Ö –≤ –∏–Ω—Ç–µ—Ä–≤–∞–ª –æ—Ç L –¥–æ H;
5) —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ –º–µ–∂–¥—É —Ñ—É–Ω–∫—Ü–∏—è–º–∏ FÃÇ(x) –∏ F(x).

import numpy as np
import scipy.stats as sts
import matplotlib.pyplot as plt

ABC=np.array([295, -158, -51, 34, 109, -53, -185, 233, -251, -320, -274, -116, 370, -83, 149, 66, -108, -236, -87, -30, 113, -35, 56, -220, 20, -339, 90, 240, 100, -115, -137, 129, 99, -102, 299, -145])
mu=ABC.mean()
print('1) –°—Ä–µ–¥–Ω–µ–µ –∞—Ä–∏—Ñ–º–µ—Ç–∏—á–µ—Å–∫–æ–µ –ü–î =', mu)
sigma=ABC.std()
print('2) –≠–º–ø–∏—Ä–∏—á–µ—Å–∫–æ–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–µ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ –ü–î =', sigma)
X=sts.norm(mu,sigma)
L=X.ppf(0.25)
H=X.ppf(0.75)
print(f'3) –ö–≤–∞—Ä—Ç–∏–ª—å L = {L}, –∫–≤–∞—Ä—Ç–∏–ª—å H = {H}')
N=len(ABC[(ABC>=L)&(ABC<=H)])
print('4) –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ü–î, –ø–æ–ø–∞–≤—à–∏—Ö –≤ –∏–Ω—Ç–µ—Ä–≤–∞–ª –æ—Ç L –¥–æ H =', N)

from statsmodels.distributions.empirical_distribution import ECDF

Fexp=ECDF(ABC)

plt.figure(figsize=(6,5))
x=np.linspace(X.ppf(0.01),X.ppf(0.99),500)
plt.plot(x,X.cdf(x))
plt.plot(x,Fexp(x))
plt.show()

x_sort=sorted(ABC)
n=len(x_sort)

d=[]
for i in range(n):
    maxx=max(abs((i+1)/n-X.cdf(x_sort[i])),abs((i)/n-X.cdf(x_sort[i])))
    d.append(maxx)

d1=sts.kstest(ABC,X.cdf)[0]
print('5) –†–∞—Å—Å—Ç–æ—è–Ω–∏–µ –º–µ–∂–¥—É —Ñ—É–Ω–∫—Ü–∏—è–º–∏ FÃÇ(x) –∏ F(x) =', d1)

'''
–ü—É—Å—Ç—å X1, . . . , X8 ‚Äî –≤—ã–±–æ—Ä–∫–∞ –∏–∑ —Ä–∞–≤–Ω–æ–º–µ—Ä–Ω–æ–≥–æ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –Ω–∞ –æ—Ç—Ä–µ–∑–∫–µ [2; 11],
FÃÇ(x) ‚Äî —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∞—è —ç–º–ø–∏—Ä–∏—á–µ—Å–∫–∞—è —Ñ—É–Ω–∫—Ü–∏—è —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è.
–ù–∞–π–¥–∏—Ç–µ:
–∞) –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å P({FÃÇ(7) = FÃÇ(10)})
–±) –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å P({FÃÇ(8) = 1/4}).
'''
# –ü—É—Å—Ç—å —Å–ª—É—á–∞–π–Ω–∞—è –≤–µ–ª–∏—á–∏–Ω–∞ Hi = n * F^(X) ~ Bin(n, F(X)) - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ X-–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–ø–∞–¥—É—Ç –≤ –∏–Ω—Ç–µ—Ä–≤–∞–ª [2; 10]
# F^(7) = n7/n
# F^(10) = n10/n => A = {n7 = n10}

# H0 - 0 —Ç–æ—á–µ–∫ –ø–æ–ø–∞–ª–æ –≤ [2; 10] P(A|H0) = 1
# H1 - 1 —Ç–æ—á–µ–∫ –ø–æ–ø–∞–ª–æ –≤ [2; 10] P(A|H0) = (7-2)/(10-2) = 5/8
# H2 - 2 —Ç–æ—á–µ–∫ –ø–æ–ø–∞–ª–æ –≤ [2; 10] P(A|H0) = 5/8 * 5/8 = (5/8)^2
#...
# H8 - 8 —Ç–æ—á–µ–∫ –ø–æ–ø–∞–ª–æ –≤ [2; 10] P(A|H0) = (5/8)^8

# P(H0) = comb(8, 0)*(8/9)^0*(1/9)^8 
#...
# P(H8) = comb(8, 8)*(8/9)^8*(1/9)^1

#P(A) = P(H0)*P(A|H0) + ... + P(H8)*P(A|H8)

import math
n = 8 #–∫–æ–ª-–≤–æ X-–æ–≤ –≤—Å–µ–≥–æ
a = 2 #–≥—Ä–∞–Ω–∏—Ü–∞ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è
b = 11 #–≥—Ä–∞–Ω–∏—Ü–∞ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è
a1 = 7 #–≥—Ä–∞–Ω–∏—Ü–∞ –ø—É–Ω–∫—Ç–∞ –∞)
b1 = 10 #–≥—Ä–∞–Ω–∏—Ü–∞ –ø—É–Ω–∫—Ç–∞ –∞)
c2 = 8 #–≥—Ä–∞–Ω–∏—Ü–∞ –ø—É–Ω–∫—Ç–∞ –±)
p2 = 1/4 #–≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å –∏–∑ –ø—É–Ω–∫—Ç–∞ –±)

s = 0
for i in range(0, n+1):
    s += ((a1-a)/(b1-a))**i * math.comb(n, i) * ((b1-a)/(b-a))**i * ((b-b1)/(b-a))**(n-i)
print('a)', s)

#H = 8 * F^(8)
#P(F^(8) = 1/4) = P(Y/8 = 1/4) = P(Y=2) = comb(8, 2) * p^2 * q^6
print('–±)', math.comb(n, int(p2*n)) * ((c2 - a)/(b - a))**(p2*n) * ((b - c2)/(b - a))**(n - p2*n))

'''
–ü—É—Å—Ç—å S ‚Äì —Å–æ–≤–æ–∫—É–ø–Ω–æ—Å—Ç—å –¥–≤—É–∑–Ω–∞—á–Ω—ã—Ö –ø—Ä–æ—Å—Ç—ã—Ö —á–∏—Å–µ–ª, –∞ X ‚Äì —Ç–æ–∂–¥–µ—Å—Ç–≤–µ–Ω–Ω—ã–π
–ø—Ä–∏–∑–Ω–∞–∫, X(s) = s –¥–ª—è –∫–∞–∂–¥–æ–≥–æ s –∏–∑ S. –ù–∞–π–¥–∏—Ç–µ –¥–ª—è –ø—Ä–∏–∑–Ω–∞–∫–∞ X —Å–ª–µ–¥—É—é—â–∏–µ
–≤–∏–¥—ã —ç–º–ø–∏—Ä–∏—á–µ—Å–∫–∏—Ö —Å—Ä–µ–¥–Ω–∏—Ö: —Å—Ä–µ–¥–Ω–µ–µ –≥–µ–æ–º–µ—Ç—Ä–∏—á–µ—Å–∫–æ–µ (G), —Å—Ä–µ–¥–Ω–µ–µ
–≥–∞—Ä–º–æ–Ω–∏—á–µ—Å–∫–æ–µ (H) –∏ —Å—Ä–µ–¥–Ω–µ–µ —Å—Ç–µ–ø–µ–Ω–Ω–æ–µ (Q) —Å –ø–æ–∫–∞–∑–∞—Ç–µ–ª–µ–º 3 (—Å—Ä–µ–¥–Ω–µ–µ
–∫—É–±–∏—á–µ—Å–∫–æ–µ). –î–ª—è –≤—ã—á–∏—Å–ª–µ–Ω–∏–µ —Å—Ä–µ–¥–Ω–∏—Ö –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ Python.
'''

import sympy as sp
import numpy as np
import scipy.stats as sts
import matplotlib.pyplot as plt  
import pandas as pd
 
S = np.array([i for i in range(10,100) if sp.isprime(i) == True])
print('S=',S)
n = len(S)
print('n=',n)
X = np.random.choice(S,n,replace = True)
print('X=',X)
print('–°—Ä–µ–¥–Ω–µ–µ –≥–µ–æ–º–µ—Ç—Ä–∏—á–µ—Å–∫–æ–µ G(X): ', sts.gmean(X))
print('–°—Ä–µ–¥–Ω–µ–µ –≥–∞—Ä–º–æ–Ω–∏—á–µ—Å–∫–æ–µ H(X): ', sts.hmean(X))
# –í—ã—á–∏—Å–ª–µ–Ω–∏–µ –ø–æ —Ñ–æ—Ä–º—É–ª–µ
print('–°—Ä–µ–¥–Ω–µ–µ –≥–∞—Ä–º–æ–Ω–∏—á–µ—Å–∫–æ–µ H(X): ', len(X)/sum(1/X))
print('–°—Ä–µ–¥–Ω–µ–µ —Å—Ç–µ–ø–µ–Ω–Ω–æ–µ Q(X) c –ø–æ–∫–∞–∑–∞—Ç–µ–ª–µ–º 3: ', (sum(X**3)/len(X))**(1/3))

'''
–°–æ–∑–¥–∞–π—Ç–µ —Å–æ–≤–æ–∫—É–ø–Ω–æ—Å—Ç–∏ sin –≤–∏–¥–∞ sin(1), sin(2), ..., sin(100) –∏ cos –≤–∏–¥–∞ cos(1), cos(2), ..., cos(100)
a) –ù–∞–π–¥–∏—Ç–µ —ç–º–ø–∏—Ä–∏—á–µ—Å–∫–æ–µ —Å—Ä–µ–¥–Ω–µ–µ –∏ —ç–º–ø–∏—Ä–∏—á–µ—Å–∫–æ–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–µ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ —Å–æ–≤–æ–∫—É–ø–Ω–æ—Å—Ç–∏ sin;
b) –ù–∞–π–¥–∏—Ç–µ —á–µ—Ç–≤—ë—Ä—Ç—ã–π —ç–º–ø–∏—Ä–∏—á–µ—Å–∫–∏–π —Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–π –º–æ–º–µ–Ω—Ç –∏ —ç–º–ø–∏—Ä–∏—á–µ—Å–∫–∏–π —ç–∫—Å—Ü–µ—Å—Å
c) –ü–æ—Å—Ç—Ä–æ–π—Ç–µ –≥—Ä–∞—Ñ–∏–∫ —ç–º–ø–∏—Ä–∏—á–µ—Å–∫–æ–π —Ñ—É–Ω–∫—Ü–∏–∏ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Å–æ–≤–æ–∫—É–ø–Ω–æ—Å—Ç–∏ sin;
d) –ü–æ—Å—Ç—Ä–æ–π—Ç–µ –Ω–∞ –æ–¥–Ω–æ–º —Ä–∏—Å—É–Ω–∫–µ –≥—Ä–∞—Ñ–∏–∫–∏ —ç–º–ø–∏—Ä–∏—á–µ—Å–∫–∏—Ö —Ñ—É–Ω–∫—Ü–∏–π —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Å–æ–≤–æ–∫—É–ø–Ω–æ—Å—Ç–∏ sin –∏ cos;
'''

x = np.linspace(1,100, 100)
a_sin = np.sin(x)
a_cos = np.cos(x)
mean_sin = a_sin.mean()
std_sin = a_sin.std()
print('a)')
print(f'—ç–º–ø–∏—Ä–∏—á–µ—Å–∫–æ–µ —Å—Ä–µ–¥–Ω–µ–µ —Å–æ–≤–æ–∫—É–ø–Ω–æ—Å—Ç–∏ sin: {mean_sin}')
print(f'—ç–º–ø–∏—Ä–∏—á–µ—Å–∫–æ–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–µ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ —Å–æ–≤–æ–∫—É–ø–Ω–æ—Å—Ç–∏ sin: {std_sin}')
centr_monent_4 = sts.moment(a_sin, moment=4)
kurt = sts.kurtosis(a_sin)
print('b)')
print(f'—á–µ—Ç–≤–µ—Ä—Ç—ã–π —ç–º–ø–∏—Ä–∏—á–µ—Å–∫–∏–π —Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–π –º–æ–º–µ–Ω—Ç —Å–æ–≤–æ–∫—É–ø–Ω–æ—Å—Ç–∏ sin: {centr_monent_4}')
print(f'—ç–º–ø–∏—Ä–∏—á–µ—Å–∫–∏–π —ç–∫—Å—Ü–µ—Å—Å —Å–æ–≤–æ–∫—É–ø–Ω–æ—Å—Ç–∏ sin: {kurt} ')
 
# –í—Å—Ç–∞–≤–∫–∞ —Ñ—É–Ω–∫—Ü–∏–∏ Python –∏–∑ —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ–≥–æ –º–æ–¥—É–ª—è –¥–ª—è –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è —ç.—Ñ.—Ä.
# Empirical cumulative distribution function  (ECDF)

from statsmodels.distributions.empirical_distribution import ECDF

a_sin.sort()
ecdf = ECDF(a_sin)
y_sin = ecdf(a_sin) # –í—ã—á–∏—Å–ª–µ–Ω–∏–µ —ç.—Ñ.—Ä.

a_cos.sort()
ecdf2 = ECDF(a_cos)
y_cos = ecdf2(a_cos) # –í—ã—á–∏—Å–ª–µ–Ω–∏–µ —ç.—Ñ.—Ä.

# –ü–µ—Ä–µ–¥ —Ñ—É–Ω–∫—Ü–∏–µ–π —Ä–∏—Å–æ–≤–∞–Ω–∏—è –≥—Ä–∞—Ñ–∏–∫–∞ —ç.—Ñ.—Ä. –≤—ã –¥–æ–ª–∂–Ω—ã –ø–æ–º–Ω–∏—Ç—å –æ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–µ, –∏–Ω–∞—á–µ —ç—Ç–æ –±—É–¥–µ—Ç –ø–æ–ª–Ω–∞—è –µ—Ä—É–Ω–¥–∞!

fig,ax =plt.subplots(figsize=(25, 10))
plt.tick_params(labelsize = 20)
plt.tick_params(labelsize = 20)
plt.title("–ì—Ä–∞—Ñ–∏–∫ —ç–º–ø–∏—Ä–∏—á–µ—Å–∫–æ–π —Ñ—É–Ω–∫—Ü–∏–∏ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Å–æ–≤–æ–∫—É–ø–Ω–æ—Å—Ç–∏ sin.")
plt.xlabel('$x$')
plt.step(a_sin, y_sin, color = 'r', label = 'sin')
plt.step(a_cos, y_cos, color = 'b', label = 'cos')
plt.show()

#–ü–µ—Ä–≤—ã–π —Å–ø–æ—Å–æ–±
 
cov = sum((a_cos - np.mean(a_cos)) * (a_sin - mean_sin))/len(x)
corr1 = cov/(np.std(a_sin)*np.std(a_cos))
print(f'–≠–º–ø–∏—Ä–∏—á–µ—Å–∫–∏–π –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –∫–æ—Ä—Ä–µ–ª—è—Ü–∏–∏ {corr1}')

#–í—Ç–æ—Ä–æ–π —Å–ø–æ—Å–æ–±
 
print(np.corrcoef(a_sin,a_cos))
 
#–¢—Ä–µ—Ç–∏–π —Å–ø–æ—Å–æ–±
 
df = pd.DataFrame({'a_sin':a_sin,'a_cos':a_cos})
df
r_sc = df['a_sin'].corr(df['a_cos'])
r_cs = df['a_cos'].corr(df['a_sin'])
print(f'–†–∞—Å—á–µ—Ç —ç–º–ø–∏—Ä–∏—á–µ—Å–∫–æ–≥–æ –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç–∞ –∫–æ—Ä—Ä–µ–ª—è—Ü–∏–∏ –º–µ—Ç–æ–¥–æ–º .corr() –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ Pandas:\n {r_sc} –∏ {r_cs}')

'''
–í –∏—Ç–æ–≥–µ —Ç—Ä—ë—Ö –∏–∑–º–µ—Ä–µ–Ω–∏–π –¥–ª–∏–Ω—ã —Å—Ç–µ—Ä–∂–Ω—è –æ–¥–Ω–∏–º –ø—Ä–∏–±–æ—Ä–æ–º –ø–æ–ª—É—á–µ–Ω—ã —Å–ª–µ–¥—É—é—â–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã 3, 5, 21.
–ò–∑ —ç—Ç–∏—Ö –∏–∑–º–µ—Ä–µ–Ω–∏–π —Å–ª—É—á–∞–π–Ω—ã–º –æ–±—Ä–∞–∑–æ–º –±–µ–∑ –≤–æ–∑–≤—Ä–∞—â–µ–Ω–∏—è –≤—ã–±–∏—Ä–∞—é—Ç n (n ‚â§ 3) –∏–∑–º–µ—Ä–µ–Ω–∏–π. 
–ü—É—Å—Ç—å Xi ‚Äì i-–º –≤—ã–±—Ä–∞–Ω–Ω—ã–º –∏–∑ –∏–∑–º–µ—Ä–µ–Ω–∏–π –±—É–¥–µ—Ç 3, 5 –∏–ª–∏ 21, –µ—Å–ª–∏ –≤—ã–±—Ä–∞–Ω–æ i –∏–∑–º–µ—Ä–µ–Ω–∏–π (i ‚â§ 3). 
–û–±–æ–∑–Ω–∞—á–∏–º XÃÖn = 1/n*(X1 + X2 + ‚ãØ + Xn) - —Å—Ä–µ–¥–Ω–µ–µ –∞—Ä–∏—Ñ–º–µ—Ç–∏—á–µ—Å–∫–æ–µ –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö n —á–∏—Å–µ–ª (n ‚â§ 3).
–ß–µ–º—É —Ä–∞–≤–Ω—ã E(XÃÖn) –∏ Var(XÃÖn)?
'''
# Xi = [3, 5, 21]
# ni = [1/3, 1/3, 1/3] –¥–ª—è i = 1, [2/6, 2/6, 2/6] –¥–ª—è i = 2,3

# E(XÃÖn) = E(X) = 3*(1/3) + ... = 29/3
# Var(Xi) = E(Xi^2) - E(Xi)^2 - –¥–ª—è –° –í–û–ó–í–†–ê–©–ï–ù–ò–Ø–ú–ò —Ç–∞–∫ –∂–µ
# Var(XÃÖn) = (1/9)*(3*Var(X1) + 2*comb(3, 2)*Cov(Xi, Xj)) ==

# Cov(X1, X1+X2+X3) = Var(X1) + 2*Cov(X1, X2) 
# Cov(X1, X1+X2+X3) = 0 => Var(X1) + 2*Cov(X1, X2) = 0 => Cov(X1, X2) = -Var(X1)/2

#== –ø–æ–¥—Å—Ç–∞–≤–ª—è–µ–º –∏ –ø–æ–ª—É—á–∞–µ–º 0
# –§–æ—Ä–º—É–ª–∞ Var(XÃÖn) –≤ –æ–±—â–µ–º –≤–∏–¥–µ: (1/n)*Var(X1) + (1/n^2)*2/(1-n)*Var(X1)*n*(n-1)/2
# –§–æ—Ä–º—É–ª–∞ Var(XÃÖn) –≤ –æ–±—â–µ–º –≤–∏–¥–µ –° –í–û–ó–í–†–ê–©–ï–ù–ò–Ø–ú–ò: (1/n^2)*n*Var(Xi) = Var(Xi)/n
print()

'''
–ü—Ä–∏–∑–Ω–∞–∫ X(k) –∑–∞–¥–∞–Ω –Ω–∞ –º–Ω–æ–∂–µ—Å—Ç–≤–µ Œ© = {1,2, . . . ,10} —Å–ª–µ–¥—É—é—â–µ–π —Ç–∞–±–ª–∏—Ü–µ–π:
k 1 2 3 4 5 6 7 8 9 10
X(k) 2 1 1 2 1 2 2 3 2 2
–ò–∑ Œ© –∏–∑–≤–ª–µ–∫–∞–µ—Ç—Å—è —Å–ª—É—á–∞–π–Ω–∞—è –±–µ—Å–ø–æ–≤—Ç–æ—Ä–Ω–∞—è –≤—ã–±–æ—Ä–∫–∞ –æ–±—ä—ë–º–∞ 5. –ù–∞–π–¥–∏—Ç–µ
–º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–∂–∏–¥–∞–Ω–∏–µ –∏ –¥–∏—Å–ø–µ—Ä—Å–∏—é —Å—Ä–µ–¥–Ω–µ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è XÃÖ –ø—Ä–∏–∑–Ω–∞–∫–∞ X –≤
–≤—ã–±–æ—Ä–∫–µ.
'''
str = '2 1 1 2 1 2 2 3 2 2'
x = np.array(list(map(int, str.split(' '))))
n = 5
N = len(x)

print('–º–∞—Ç–æ–∂–∏–¥–∞–Ω–∏–µ =', x.mean())
print('–¥–∏—Å–ø–µ—Ä—Å–∏—è =', x.var()/n*(N-n)/(N-1))

'''
–ò—Ç–æ–≥–æ–≤–æ–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –±–∞–ª–ª–æ–≤ –Ω–∞ –Ω–µ–∫–æ—Ç–æ—Ä–æ–º –ø–∏—Å—å–º–µ–Ω–Ω–æ–º —ç–∫–∑–∞–º–µ–Ω–µ –∑–∞–¥–∞–Ω–æ —Ç–∞–±–ª–∏—Ü–µ–π
–û—Ü–µ–Ω–∫–∞ —Ä–∞–±–æ—Ç—ã 2 3 4 5
–ß–∏—Å–ª–æ —Ä–∞–±–æ—Ç 16 16 24 40
–†–∞–±–æ—Ç—ã –ø—Ä–æ–≤–µ—Ä—è–ª–∏ 8 –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª–µ–π, –∫–æ—Ç–æ—Ä—ã–µ —Ä–∞–∑–¥–µ–ª–∏–ª–∏ –≤—Å–µ —Ä–∞–±–æ—Ç—ã –º–µ–∂–¥—É —Å–æ–±–æ–π –ø–æ—Ä–æ–≤–Ω—É —Å–ª—É—á–∞–π–Ω—ã–º –æ–±—Ä–∞–∑–æ–º. 
–ü—Ä–µ–¥–ø–æ–ª–∞–≥–∞—è –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –æ—Ü–µ–Ω–∫–∏ –æ—Ç –ª–∏—á–Ω–æ—Å—Ç–∏ –ø—Ä–æ–≤–µ—Ä—è—é—â–µ–≥–æ, –Ω–∞–π–¥–∏—Ç–µ –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–∂–∏–¥–∞–Ω–∏–µ –∏ –¥–∏—Å–ø–µ—Ä—Å–∏—é
—Å—Ä–µ–¥–Ω–µ–≥–æ –±–∞–ª–ª–∞ –ø–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º –æ–¥–Ω–æ–≥–æ –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—è.
'''
k = 8 #–∫–æ–ª-–≤–æ –ø—Ä–µ–ø–æ–¥–æ–≤
xi_str = '2 3 4 5'
xi = np.array(list(map(int, xi_str.split(' '))))
xi2 = xi**2
ni_str = '16 16 24 40'
ni = np.array(list(map(int, ni_str.split(' '))))
x = xi.repeat(ni)

N = sum(ni)
n = sum(ni)/k

print('–º–∞—Ç–æ–∂–∏–¥–∞–Ω–∏–µ =', xi.dot(ni)/N, '–∏–ª–∏', x.mean())
print('–¥–∏—Å–ø–µ—Ä—Å–∏—è =', (xi2.dot(ni)/N - (xi.dot(ni)/N)**2)/n*(N-n)/(N-1), '–∏–ª–∏', x.var()/n*(N-n)/(N-1))

'''
–í –≥—Ä—É–ø–ø–µ Œ© —É—á–∞—Ç—Å—è 10 —Å—Ç—É–¥–µ–Ω—Ç–æ–≤, Œ© = {1,2, . . . ,10}. –ü—É—Å—Ç—å X(i) ‚Äì 100-–±–∞–ª–ª—å–Ω–∞—è –æ—Ü–µ–Ω–∫–∞ —Å—Ç—É–¥–µ–Ω—Ç–∞ i ‚àà Œ©. –ò–∑ –≥—Ä—É–ø–ø—ã Œ© —Å–ª—É—á–∞–π–Ω—ã–º –æ–±—Ä–∞–∑–æ–º 5 —Ä–∞–∑
–≤—ã–±–∏—Ä–∞–µ—Ç—Å—è —Å—Ç—É–¥–µ–Ω—Ç œâ ‚àà Œ©. –ü–æ–≤—Ç–æ—Ä–Ω—ã–π –≤—ã–±–æ—Ä –¥–æ–ø—É—Å–∫–∞–µ—Ç—Å—è. –ü—É—Å—Ç—å œâj ‚Äì —Å—Ç—É–¥–µ–Ω—Ç, –ø–æ–ª—É—á–µ–Ω–Ω—ã–π –ø–æ—Å–ª–µ –≤—ã–±–æ—Ä–∞ j = 1, . . . ,5, X(œâj) ‚Äì –µ–≥–æ –æ—Ü–µ–Ω–∫–∞.
–°—Ä–µ–¥–Ω—é—é –æ—Ü–µ–Ω–∫—É –Ω–∞ —Å–ª—É—á–∞–π–Ω–æ–π –≤—ã–±–æ—Ä–∫–µ –æ–±–æ–∑–Ω–∞—á–∏–º XÃÖ = 1/5*‚àë X(œâj). –û—Ü–µ–Ω–∫–∏ –≤ –≥—Ä—É–ø–ø–µ –¥–∞–Ω—ã: 53, 34, 61, 58, 83, 74, 0, 87, 0, 79.
–¢—Ä–µ–±—É–µ—Ç—Å—è –Ω–∞–π—Ç–∏: 1) –¥–∏—Å–ø–µ—Ä—Å–∏—é Var(XÃÖ); 2) —Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–π –º–æ–º–µ–Ω—Ç Œº3(XÃÖ).
'''

N = 10
n = 5
str = '53, 34, 61, 58, 83, 74, 0, 87, 0, 79'
x = np.array(list(map(int, str.split(', '))))

print('–¥–∏—Å–ø–µ—Ä—Å–∏—è =', x.var()/n)
print('—Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–π –º–æ–º–µ–Ω—Ç =', sts.moment(x, moment=3)/n**2)

'''
–ò–º–µ–µ—Ç—Å—è 10 –ø—Ä–æ–Ω—É–º–µ—Ä–æ–≤–∞–Ω–Ω—ã—Ö –º–æ–Ω–µ—Ç. –ú–æ–Ω–µ—Ç—ã –ø–æ–¥–±—Ä–∞—Å—ã–≤–∞—é—Ç—Å—è –¥–æ —Ç–µ—Ö –ø–æ—Ä, –ø–æ–∫–∞ –Ω–µ –≤—ã–ø–∞–¥–µ—Ç 20 —Ä–∞–∑–ª–∏—á–Ω—ã—Ö (—Å —É—á–µ—Ç–æ–º –Ω–æ–º–µ—Ä–∞ –º–æ–Ω–µ—Ç—ã) –∫–æ–º–±–∏–Ω–∞—Ü–∏–π –æ—Ä–µ–ª-—Ä–µ—à–∫–∞.
–ü—É—Å—Ç—å Xi ‚Äì —á–∏—Å–ª–æ –æ—Ä–ª–æ–≤ –≤ –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏ —Å –Ω–æ–º–µ—Ä–æ–º i; –∞ XÃÖ = 1/20 * ‚àë Xi ‚Äì —Å—Ä–µ–¥–Ω–µ–µ —á–∏—Å–ª–æ –æ—Ä–ª–æ–≤ –≤ –ø–æ–ª—É—á–µ–Ω–Ω—ã—Ö —Ç–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º –∫–æ–º–±–∏–Ω–∞—Ü–∏—è—Ö.
–¢—Ä–µ–±—É–µ—Ç—Å—è –Ω–∞–π—Ç–∏: 1) –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–∂–∏–¥–∞–Ω–∏–µ E(XÃÖ); 2) –¥–∏—Å–ø–µ—Ä—Å–∏—é Var(XÃÖ).
'''
# Xi ~ Bin(10, 1/2)
n_x = 10
n = 20
N = 2**n_x
p = 1/2
q = 1 - p
E_X = n_x*p
Var_X = n_x*p*q/n*(N-n)/(N-1)

print('–º–∞—Ç–æ–∂–∏–¥–∞–Ω–∏–µ =', E_X)
print('–¥–∏—Å–ø–µ—Ä—Å–∏—è =', Var_X)

'''
–î–≤–µ –∏–≥—Ä–∞–ª—å–Ω—ã–µ –∫–æ—Å—Ç–∏, –∫—Ä–∞—Å–Ω–∞—è –∏ —Å–∏–Ω—è—è, –ø–æ–¥–±—Ä–∞—Å—ã–≤–∞—é—Ç—Å—è –¥–æ —Ç–µ—Ö –ø–æ—Ä, –ø–æ–∫–∞ –Ω–µ –≤—ã–ø–∞–¥–µ—Ç 19 —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Å —É—á–µ—Ç–æ–º —Ü–≤–µ—Ç–∞ –∫–æ–º–±–∏–Ω–∞—Ü–∏–π –æ—á–∫–æ–≤.
–ü—É—Å—Ç—å Si ‚Äî —Å—É–º–º–∞ –æ—á–∫–æ–≤ –Ω–∞ –∫—Ä–∞—Å–Ω–æ–π –∏ —Å–∏–Ω–µ–π –∫–æ—Å—Ç–∏ –≤ i-—Ç–æ–π –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏, SÃÖ - —Å—Ä–µ–¥–Ω–µ–µ –∞—Ä–∏—Ñ–º–µ—Ç–∏—á–µ—Å–∫–æ–µ –≤—Å–µ—Ö —ç—Ç–∏—Ö —Å—É–º–º, i = 1, . . . , 19.
–ù–∞–π–¥–∏—Ç–µ –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–∂–∏–¥–∞–Ω–∏–µ –∏ –¥–∏—Å–ø–µ—Ä—Å–∏—é —Å—Ä–µ–¥–Ω–µ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è SÃÖ.
'''
si = np.array([2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12])
ni = np.array([1/36, 2/36, 3/36, 4/36, 5/36, 6/36, 5/36, 4/36, 3/36, 2/36, 1/36])

n = 19
N = 36

E_S = si.dot(ni)
Var_S = ((si**2).dot(ni) - E_S**2)/n*(N-n)/(N-1)

print('–º–∞—Ç–æ–∂–∏–¥–∞–Ω–∏–µ =', E_S)
print('–¥–∏—Å–ø–µ—Ä—Å–∏—è =', Var_S)

#–ò–ó–í–ï–°–¢–ù–ê –ì–ï–ù–ï–†–ê–õ–¨–ù–ê–Ø –î–ò–°–ü–ï–†–°–ò–Ø - –ù–û–†–ú–ê–õ–¨–ù–û–ï

'''
–ú–µ–Ω–µ–¥–∂–µ—Ä –ø–æ –ø–µ—Ä—Å–æ–Ω–∞–ª—É –Ω–∞ –æ—Å–Ω–æ–≤–∞–Ω–∏–∏ —Å–≤–æ–µ–≥–æ –æ–ø—ã—Ç–∞ –∑–Ω–∞–µ—Ç, —á—Ç–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Ç–µ—Å—Ç–∞,
–∫–æ—Ç–æ—Ä—ã–π –ø—Ä–æ—Ö–æ–¥—è—Ç –∫–∞–Ω–¥–∏–¥–∞—Ç—ã –ø—Ä–∏ –ø—Ä–∏—ë–º–µ –Ω–∞ —Ä–∞–±–æ—Ç—É, –∏–º–µ–µ—Ç –Ω–æ—Ä–º–∞–ª—å–Ω–æ–µ
—Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–º —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ–º 32,4. –í –≤—ã–±–æ—Ä–∫–µ –∏–∑ –¥–µ–≤—è—Ç–∏
—Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –≥—Ä—É–ø–ø—ã –∫–∞–Ω–¥–∏–¥–∞—Ç–æ–≤ —Å—Ä–µ–¥–Ω–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ —Ç–µ—Å—Ç–∞ –æ–∫–∞–∑–∞–ª–æ—Å—å
—Ä–∞–≤–Ω—ã–º 187,9.
–∞) –ù–∞–π–¥–∏—Ç–µ 80%-–Ω—ã–π –¥–æ–≤–µ—Ä–∏—Ç–µ–ª—å–Ω—ã–π –∏–Ω—Ç–µ—Ä–≤–∞–ª –¥–ª—è —Å—Ä–µ–¥–Ω–µ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è —Ç–µ—Å—Ç–∞.
–±) –û—Å–Ω–æ–≤—ã–≤–∞—è—Å—å –Ω–∞ –¥–∞–Ω–Ω—ã—Ö —ç—Ç–æ–π –≤—ã–±–æ—Ä–∫–∏, –º–µ–Ω–µ–¥–∂–µ—Ä –ø–æ—Å—Ç—Ä–æ–∏–ª —Å–ª–µ–¥—É—é—â–∏–π –∏–Ω—Ç–µ—Ä–≤–∞–ª
–¥–ª—è —Å—Ä–µ–¥–Ω–µ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ —Ç–µ—Å—Ç–∞: (165,8;210,0). –ù–∞–π–¥–∏—Ç–µ —É—Ä–æ–≤–µ–Ω—å –¥–æ–≤–µ—Ä–∏—è,
–∫–æ—Ç–æ—Ä—ã–π –æ—Ç–≤–µ—á–∞–µ—Ç —ç—Ç–æ–º—É –∏–Ω—Ç–µ—Ä–≤–∞–ª—É.
'''
gamma = 0.8
n = 9
x_sr = 187.9
sigma = 32.4

z_gamma = sts.norm.ppf((1+gamma)/2)
delta = z_gamma*sigma/np.sqrt(n)
print(x_sr-delta, x_sr+delta)
print(sts.norm.interval(gamma, x_sr, sigma/np.sqrt(n)))

# x_sr - delta = 165,8 => delta = x_sr - 165,8 = z((1+gamma)/2)*sigma/n**0.5 => z((1+gamma)/2) = (x_sr - 165,8)*n**0.5/sigma =>
# => F(z((1+gamma)/2)) = F((x_sr - 165,8)*n**0.5/sigma) => (1+gamma)/2 = F((x_sr - 165,8)*n**0.5/sigma) => gamma = 2*F((x_sr - 165,8)*n**0.5/sigma) - 1

a=np.sqrt(n)*(x_sr-165.8)/sigma
gamma1=2*sts.norm.cdf(a)-1
print(gamma1)
# –ü—Ä–æ–≤–µ—Ä–∫–∞
sts.norm.interval(gamma1, x_sr, sigma/np.sqrt(n))

#–ù–ï–ò–ó–í–ï–°–¢–ù–ê –ì–ï–ù–ï–†–ê–õ–¨–ù–ê–Ø –î–ò–°–ü–ï–†–°–ò–Ø - –°–¢–¨–Æ–î–ï–ù–¢

'''
–ò–∑ –≥–µ–Ω–µ—Ä–∞–ª—å–Ω–æ–π —Å–æ–≤–æ–∫—É–ø–Ω–æ—Å—Ç–∏ –∏–∑–≤–ª–µ—á–µ–Ω–∞ –≤—ã–±–æ—Ä–∫–∞ –æ–±—ä—ë–º–∞ n=10:
xi -2 1 2 3 4 5
ni 2 1 2 2 2 1

–ù–∞–π—Ç–∏ –¥–æ–≤–µ—Ä–∏—Ç–µ–ª—å–Ω—ã–π –∏–Ω—Ç–µ—Ä–≤–∞–ª (vÃÇ1, vÃÇ2), –∫–æ—Ç–æ—Ä—ã–π —Å –Ω–∞–¥—ë–∂–Ω–æ—Å—Ç—å—é 0,95 –ø–æ–∫—Ä—ã–≤–∞–µ—Ç
–Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–æ–µ –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–∂–∏–¥–∞–Ω–∏–µ Œº —Ä–∞—Å—Å–º–∞—Ç—Ä–∏–≤–∞–µ–º–æ–π —Å–ª—É—á–∞–π–Ω–æ–π –≤–µ–ª–∏—á–∏–Ω—ã,
–µ—Å–ª–∏ –∏–∑–≤–µ—Å—Ç–Ω–æ, —á—Ç–æ –ø–æ—Å–ª–µ–¥–Ω—è—è —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∞ –ø–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ–º—É –∑–∞–∫–æ–Ω—É.
'''
xi=np.array([-2,1,2,3,4,5])
ni=np.array([2,1,2,2,2,1])
gamma=0.95
n=sum(ni)

x_sr=np.dot(xi,ni)/n
s = xi.repeat(ni).std(ddof=1)
t_gamma=sts.t.ppf((1+gamma)/2, n-1)
delta = t_gamma*s/np.sqrt(n)
print(x_sr-delta, x_sr+delta)
print(sts.t.interval(gamma, n-1, x_sr, s/np.sqrt(n)))

'''
–û–±—Å–ª–µ–¥—É–µ—Ç—Å—è —Å—Ä–µ–¥–Ω—è—è –ø—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Ç–µ–ª–µ—Ñ–æ–Ω–Ω–æ–≥–æ —Ä–∞–∑–≥–æ–≤–æ—Ä–∞. –°–∫–æ–ª—å–∫–æ
—Ç–µ–ª–µ—Ñ–æ–Ω–Ω—ã—Ö —Ä–∞–∑–≥–æ–≤–æ—Ä–æ–≤ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–æ, —á—Ç–æ–±—ã —Å –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å—é 0.90
–º–æ–∂–Ω–æ –±—ã–ª–æ –±—ã —É—Ç–≤–µ—Ä–∂–¥–∞—Ç—å, —á—Ç–æ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ —Å—Ä–µ–¥–Ω–µ–π –ø—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
–∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Ä–∞–∑–≥–æ–≤–æ—Ä–æ–≤ –æ—Ç –≥–µ–Ω–µ—Ä–∞–ª—å–Ω–æ–π —Å—Ä–µ–¥–Ω–µ–π –Ω–µ –ø—Ä–µ–≤–æ—Å—Ö–æ–¥–∏—Ç 10 —Å–µ–∫—É–Ω–¥,
–µ—Å–ª–∏ –≥–µ–Ω–µ—Ä–∞–ª—å–Ω–æ–µ —Å—Ä–µ–¥–Ω–µ–µ –∫–≤–∞–¥—Ä–∞—Ç–∏—á–Ω–æ–µ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –æ–¥–Ω–æ–≥–æ
—Ä–∞–∑–≥–æ–≤–æ—Ä–∞ —Ä–∞–≤–Ω–æ 2 –º–∏–Ω—É—Ç–∞–º?
'''
import math
gamma = 0.9
sigma = 120
delta = 10
# delta <= 10
z_gamma = sts.norm.ppf((1+gamma)/2)

# z_gamma*sigma/n**0.5 <= delta => z_gamma <= n**0.5*delta/sigma => n**0.5 >= z_gamma*sigma/delta
n = (z_gamma*sigma/delta)**2
math.ceil(n)


# –î–ª—è —Å—Ç—å—é–¥–µ–Ω—Ç–∞: n = (t_gamma*s/delta)**2

'''
–ë—Ä–æ–∫–µ—Ä –Ω–∞ –±–∏—Ä–∂–µ –∂–µ–ª–∞–µ—Ç –Ω–∞–π—Ç–∏ 0.95-–¥–æ–≤–µ—Ä–∏—Ç–µ–ª—å–Ω—ã–π –∏–Ω—Ç–µ—Ä–≤–∞–ª –¥–ª—è
–º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –æ–∂–∏–¥–∞–Ω–∏—è –Ω–µ–¥–µ–ª—å–Ω–æ–π –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç–∏ –≤—ã–±—Ä–∞–Ω–Ω–æ–π –∞–∫—Ü–∏–∏. –ò–∑–≤–µ—Å—Ç–Ω–æ, —á—Ç–æ
–≤—ã–±–æ—Ä–æ—á–Ω–∞—è —Å—Ä–µ–¥–Ω—è—è –Ω–µ–¥–µ–ª—å–Ω–∞—è –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç–∏ –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–π –≥–æ–¥ (52 –Ω–µ–¥–µ–ª–∏) —Å–æ—Å—Ç–∞–≤–∏–ª–∞
0.007. –ù–∞–π–¥–∏—Ç–µ –∏—Å–∫–æ–º—ã–π –¥–æ–≤–µ—Ä–∏—Ç–µ–ª—å–Ω—ã–π –∏–Ω—Ç–µ—Ä–≤–∞–ª –≤ –ø—Ä–µ–¥–ø–æ–ª–æ–∂–µ–Ω–∏–∏, —á—Ç–æ –Ω–µ–¥–µ–ª—å–Ω—ã–µ
–¥–æ—Ö–æ–¥–Ω–æ—Å—Ç–∏ –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã –∏ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω—ã –Ω–æ—Ä–º–∞–ª—å–Ω–æ —Å –ø–æ—Å—Ç–æ—è–Ω–Ω—ã–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏,
–ø—Ä–∏—á–µ–º –≤—ã–±–æ—Ä–æ—á–Ω–æ–µ —Å—Ä–µ–¥–Ω–µ–∫–≤–∞–¥—Ä–∞—Ç–∏—á–Ω–æ–µ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ –Ω–µ–¥–µ–ª—å–Ω–æ–π –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç–∏ —Ä–∞–≤–Ω–æ
0.04. –° –∫–∞–∫–æ–π –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å—é –±—Ä–æ–∫–µ—Ä –º–æ–∂–µ—Ç –æ–∂–∏–¥–∞—Ç—å, —á—Ç–æ —Å—Ä–µ–¥–Ω—è—è –Ω–µ–¥–µ–ª—å–Ω–∞—è
–¥–æ—Ö–æ–¥–Ω–æ—Å—Ç—å –∞–∫—Ü–∏–∏ –Ω–µ –±—É–¥–µ—Ç —É–±—ã—Ç–æ—á–Ω–æ–π?
'''
gamma = 0.95
mu = 0.007
s = 0.04
n = 52
print(sts.t.interval(gamma, n-1, mu, s/n**0.5))

# x_sr - delta = 0 => delta = x_sr => s*t/n**0.5 = x_sr => t(1-a, n-1) = x_sr*n**0.5/s => F(t_gamma, n-1) = F(x_sr*n**0.5/s)
g_1 = sts.t.cdf(n**0.5/s*mu, (n-1))
print(g_1)

#–ü—Ä–æ–≤–µ—Ä–∫–∞
print(mu - s/n**0.5 * sts.t.ppf(g_1, n-1))

'''
–ü–æ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ —Å–ª—É—á–∞–π–Ω–æ–π –≤—ã–±–æ—Ä–∫–∏ –æ–±—ä—ë–º–∞ n = 20
x = (29, 23, 25, 24, 9, 18, 36, 27, 33, 20, 12, 40, 29, 22, 30, 9, 39, 5, 20, 59).
–ø—Ä–∏ –¥–æ–≤–µ—Ä–∏—Ç–µ–ª—å–Ω–æ–π –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–∏ Œ≥=0,95 –ø–æ—Å—Ç—Ä–æ–∏—Ç—å –¥–æ–≤–µ—Ä–∏—Ç–µ–ª—å–Ω—ã–µ –∏–Ω—Ç–µ—Ä–≤–∞–ª—ã
(–≥–µ–Ω–µ—Ä–∞–ª—å–Ω–∞—è —Å–æ–≤–æ–∫—É–ø–Ω–æ—Å—Ç—å –∏–º–µ–µ—Ç –Ω–æ—Ä–º–∞–ª—å–Ω—ã–π –∑–∞–∫–æ–Ω —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è):
c) –¥–ª—è –¥–∏—Å–ø–µ—Ä—Å–∏–∏ –≥–µ–Ω–µ—Ä–∞–ª—å–Ω–æ–π —Å–æ–≤–æ–∫—É–ø–Ω–æ—Å—Ç–∏ –ø—Ä–∏ –∏–∑–≤–µ—Å—Ç–Ω–æ–º –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–æ–º
–æ–∂–∏–¥–∞–Ω–∏–∏ E(X) = 25;
d) –¥–ª—è –¥–∏—Å–ø–µ—Ä—Å–∏–∏ –ø—Ä–∏ –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–æ–º –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–æ–º –æ–∂–∏–¥–∞–Ω–∏–∏.
'''
x=np.array([29, 23, 25, 24, 9, 18, 36, 27, 33, 20, 12, 40, 29, 22, 30, 9, 39, 5, 20, 59])
gamma = 0.95
n = 20

mu=25
s02=sum((x-mu)**2)/n
chi2_gamma1 = sts.chi2.ppf((1-gamma)/2, n)
chi2_gamma2 = sts.chi2.ppf((1+gamma)/2, n)
print('left:', n*s02/chi2_gamma2)
print('right:', n*s02/chi2_gamma1)

s2 = np.var(x, ddof=1)
chi2_gamma1 = sts.chi2.ppf((1-gamma)/2, n-1)
chi2_gamma2 = sts.chi2.ppf((1+gamma)/2, n-1)
print('left:', (n-1)*s2/chi2_gamma2)
print('right:', (n-1)*s2/chi2_gamma1)

'''
–ò–∑ –≥–µ–Ω–µ—Ä–∞–ª—å–Ω–æ–π —Å–æ–≤–æ–∫—É–ø–Ω–æ—Å—Ç–∏ —Å—É–ø—Ä—É–∂–µ—Å–∫–∏—Ö –ø–∞—Ä –±—ã–ª–∞ —Å–¥–µ–ª–∞–Ω–∞ –≤—ã–±–æ—Ä–∫–∞ –æ–±—ä—ë–º–∞
400. –ò–∑–≤–µ—Å—Ç–Ω–æ, —á—Ç–æ
- —Ä–æ—Å—Ç –∂–µ–Ω–∞—Ç–æ–≥–æ –º—É–∂—á–∏–Ω—ã –∏–º–µ–µ—Ç –Ω–æ—Ä–º–∞–ª—å–Ω–æ–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å–æ —Å—Ä–µ–¥–Ω–∏–º 177,8 —Å–º –∏
—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–º –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ–º 7,62 —Å–º;
- —Ä–æ—Å—Ç –∑–∞–º—É–∂–Ω–µ–π –∂–µ–Ω—â–∏–Ω—ã –∏–º–µ–µ—Ç —Ç–∞–∫–∂–µ –Ω–æ—Ä–º–∞–ª—å–Ω–æ–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å–æ —Å—Ä–µ–¥–Ω–∏–º
165,1 —Å–º –∏ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–º –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ–º 6,35 —Å–º;
- –≤ –≤—ã–±–æ—Ä–∫–µ - 20 –ø–∞—Ä, –≤ –∫–æ—Ç–æ—Ä—ã—Ö –∂–µ–Ω–∞ –≤—ã—à–µ –º—É–∂–∞, –∏ 380 –ø–∞—Ä, –≤ –∫–æ—Ç–æ—Ä—ã—Ö –º—É–∂ –≤—ã—à–µ
–∂–µ–Ω—ã.
–∞) –ù–∞–π–¥–∏—Ç–µ 95%-–Ω—ã–π –¥–æ–≤–µ—Ä–∏—Ç–µ–ª—å–Ω—ã–π –∏–Ω—Ç–µ—Ä–≤–∞–ª –¥–ª—è –¥–æ–ª–∏ –ø–∞—Ä, –≤ –∫–æ—Ç–æ—Ä—ã—Ö –∂–µ–Ω–∞ –≤—ã—à–µ
–º—É–∂–∞, —Å—Ä–µ–¥–∏ –≤—Å–µ–π –≥–µ–Ω–µ—Ä–∞–ª—å–Ω–æ–π —Å–æ–≤–æ–∫—É–ø–Ω–æ—Å—Ç–∏.
–±) –ï—Å–ª–∏ –∂–µ–Ω–∞—Ç—ã–π –º—É–∂—á–∏–Ω–∞ –∏ –∑–∞–º—É–∂–Ω—è—è –∂–µ–Ω—â–∏–Ω–∞ –≤—ã–±—Ä–∞–Ω—ã —Å–ª—É—á–∞–π–Ω—ã–º –æ–±—Ä–∞–∑–æ–º,
–∫–∞–∫–æ–≤–∞ –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å, —á—Ç–æ –∂–µ–Ω—â–∏–Ω–∞ –æ–∫–∞–∂–µ—Ç—Å—è –≤—ã—à–µ –º—É–∂—á–∏–Ω—ã?
'''
mu1 = 165.1
mu2 = 177.8
mu3 = mu1-mu2

std1=6.35
std2=7.62
std3 = (std1**2 + std2**2)**(1/2)

gamma = 0.95
n=400
k=20
p_obs=k/n
q_obs=1-p_obs
z_gamma=sts.norm.ppf((1+gamma)/2)
delta = z_gamma*np.sqrt(p_obs*q_obs/n)
print(p_obs-delta, p_obs+delta)

#–±)
Z=sts.norm(mu3, std3)
P_A=Z.sf(0)
P_A

'''
–í —Å–ª—É—á–∞–π–Ω–æ–π –≤—ã–±–æ—Ä–∫–µ –∏–∑ n= 200 –∞—Å–ø–∏—Ä–∞–Ω—Ç–æ–≤, —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä—É—é—â–∏—Ö—Å—è –≤ —Ñ–∏–Ω—Ç–µ—Ö-
–ø—Ä–µ–¥–ø—Ä–∏–Ω–∏–º–∞—Ç–µ–ª—å—Å—Ç–≤–µ, —Å–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω–æ–π –ø–æ –Ω–µ—Å–∫–æ–ª—å–∫–∏–º –≤–µ–¥—É—â–∏–º —Ä–æ—Å—Å–∏–π—Å–∫–∏–º

—É–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç–∞–º, m = 90 —á–µ–ª–æ–≤–µ–∫ –æ–∫–∞–∑–∞–ª–∏—Å—å —Å—ã–Ω–æ–≤—å—è–º–∏ –±–∞–Ω–∫–∏—Ä–æ–≤. –û—Ü–µ–Ω–∏—Ç–µ —Å 90%-
–Ω–æ–π –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç—å—é: –∞) –¥–æ–ª—é –∞—Å–ø–∏—Ä–∞–Ω—Ç–æ–≤ –æ–±—Å–ª–µ–¥–æ–≤–∞–Ω–Ω—ã—Ö —É–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç–æ–≤,
—Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä—É—é—â–∏—Ö—Å—è –≤ —Ñ–∏–Ω—Ç–µ—Ö-–ø—Ä–µ–¥–ø—Ä–∏–Ω–∏–º–∞—Ç–µ–ª—å—Å—Ç–≤–µ, –æ—Ç—Ü—ã –∫–æ—Ç–æ—Ä—ã—Ö —è–≤–ª—è—é—Ç—Å—è
–±–∞–Ω–∫–∏—Ä–∞–º–∏; –±) —á–∏—Å–ª–æ —Ç–∞–∫–∏—Ö –∞—Å–ø–∏—Ä–∞–Ω—Ç–æ–≤ —Å—Ä–µ–¥–∏ N = 2000 –∞—Å–ø–∏—Ä–∞–Ω—Ç–æ–≤.
'''
n = 200
N = 2000
m = 90
gamma = 0.9

p_obs=m/n
q_obs=1-p_obs
z_gamma=sts.norm.ppf((1+gamma)/2)
delta = z_gamma*np.sqrt(p_obs*q_obs/n)
print(p_obs-delta, p_obs+delta)

N*(p_obs-delta), N*(p_obs+delta)

'''
–ó–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 5 –ª–µ—Ç –≥–æ–¥–æ–≤–æ–π —Ä–æ—Å—Ç —Ü–µ–Ω—ã –∞–∫—Ç–∏–≤–∞ A —Å–æ—Å—Ç–∞–≤–ª—è–ª –≤ —Å—Ä–µ–¥–Ω–µ–º 20% —Å–æ
—Å—Ä–µ–¥–Ω–∏–º –∫–≤–∞–¥—Ä–∞—Ç–∏—á–Ω—ã–º (–∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–º) –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ–º 5%. –ü–æ—Å—Ç—Ä–æ–∏—Ç—å 97%-—ã–π
–¥–æ–≤–µ—Ä–∏—Ç–µ–ª—å–Ω—ã–π –∏–Ω—Ç–µ—Ä–≤–∞–ª –¥–ª—è —Ü–µ–Ω—ã –∞–∫—Ç–∏–≤–∞ –≤ –∫–æ–Ω—Ü–µ —Å–ª–µ–¥—É—é—â–µ–≥–æ –≥–æ–¥–∞, –µ—Å–ª–∏ –≤ –Ω–∞—á–∞–ª–µ
–≥–æ–¥–∞ –æ–Ω–∞ —Ä–∞–≤–Ω–∞ 100 –¥.–µ.
'''
n = 5
x_sr = 0.2
s = 0.05
gamma = 0.97

delta = sts.t.ppf((1+gamma)/2, n-1)*s*(1+1/n)**(1/2)
print(x_sr - delta, x_sr + delta)

#$S_0 + S_0\cdot(\bar x-\delta) < S <  S_0 + S_0\cdot(\bar x-\delta), \qquad S_0=100$ #—ç—Ç–æ –≤ –º–∞—Ä–∫–¥–∞—É–Ω

s1 = 100 + 100*(x_sr - delta)
s2 = 100 + 100*(x_sr + delta)
s1, s2

'''
–ü—É—Å—Ç—å (x1, y1); ... ; (x31, y31) ‚Äì —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è —Å–ª—É—á–∞–π–Ω–æ–π –≤—ã–±–æ—Ä–∫–∏ (X1, Y1); ... ; (X31, Y31) –∏–∑ –¥–≤—É–º–µ—Ä–Ω–æ–≥–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ–≥–æ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è
N(Œºx; Œºy; œÉx^2; œÉy^2; œÅ). –ò—Å–ø–æ–ª—å–∑—É—è –≤–µ–∫—Ç–æ—Ä—ã x =(x1;...; x31) –∏ y =(y1;...; y31), –ø–æ—Å—Ç—Ä–æ–π—Ç–µ –∞—Å–∏–º–ø—Ç–æ—Ç–∏—á–µ—Å–∫–∏–π 0,93-–¥–æ–≤–µ—Ä–∏—Ç–µ–ª—å–Ω—ã–π –∏–Ω—Ç–µ—Ä–≤–∞–ª
(Œ∏ÃÇ1; Œ∏ÃÇ2) –¥–ª—è –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç–∞ –∫–æ—Ä—Ä–µ–ª—è—Ü–∏–∏ œÅ. –í –æ—Ç–≤–µ—Ç–µ —É–∫–∞–∂–∏—Ç–µ:
1) –≤—ã–±–æ—Ä–æ—á–Ω—ã–π –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –∫–æ—Ä—Ä–µ–ª—è—Ü–∏–∏ œÅÃÇ; 
2) –≤–µ—Ä—Ö–Ω—é—é –≥—Ä–∞–Ω–∏—Ü—É Œ∏ÃÇ2 –ø–æ—Å—Ç—Ä–æ–µ–Ω–Ω–æ–≥–æ –¥–æ–≤–µ—Ä–∏—Ç–µ–ª—å–Ω–æ–≥–æ –∏–Ω—Ç–µ—Ä–≤–∞–ª–∞ –¥–ª—è œÅ.

–ò—Å—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:
x‚Éó = (-0,616; -0,238; 0,173; -0,255; 0,531; 0,718; -0,161; 0,371; -1,014; -0,413; -1,571;
0,485; 0,486; 0,688; -0,944; 0,155; 0,003; 0,111; 0,752; 0,783; -0,102; -0,74; -2,097;
1,349; -0,044; -0,617; -0,782; -0,873; -0,995; -1,256; -0,596),
y‚Éó = (-1,34; -0,25; 0,101; -0,626; -0,088; 0,539; -0,451; 0,233; -1,186; -0,423; -1,329;
0,231; 0,209; 0,638; -0,274; -0,491; -0,319; 0,294; 0,895; 1,164; -0,57; -1,078; -1,526;
1,491; 0,182; -0,31; -1,001; -0,969; -0,918; -0,904; -0,595).
'''
gamma=0.93
x_data ='-0,616; -0,238; 0,173; -0,255; 0,531; 0,718; -0,161; 0,371; \
-1,014; -0,413; -1,571; 0,485; 0,486; 0,688; -0,944; 0,155; 0,003; \
0,111; 0,752; 0,783; -0,102; -0,74; -2,097; 1,349; -0,044; -0,617; \
-0,782; -0,873; -0,995; -1,256; -0,596' 
y_data ='-1,34; -0,25; 0,101; -0,626; -0,088; 0,539; -0,451; 0,233; \
-1,186; -0,423; -1,329; 0,231; 0,209; 0,638; -0,274; -0,491; -0,319; \
0,294; 0,895; 1,164; -0,57; -1,078; -1,526; 1,491; 0,182; -0,31; -1,001;\
-0,969; -0,918; -0,904; -0,595'

x=np.array(list(map(float, x_data.replace(',', '.').split(';'))))
y=np.array(list(map(float, y_data.replace(',', '.').split(';'))))
n = len(x)

rho = np.corrcoef(x, y)[0][1]
print(rho)
z_gamma = sts.norm.ppf((1+gamma)/2)
math.tanh(math.atanh(rho) + z_gamma/np.sqrt(n-3))

'''
–ù–∞–±–ª—é–¥–∞—Ç–µ–ª—å –ê–ª–µ–∫—Å–µ–π –ù–µ–¥–æ–ø—É—Å–∫–∞–ª—å–Ω—ã–π —Ä–µ—à–∏–ª –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —á–µ—Å—Ç–Ω–æ—Å—Ç—å –≤—ã–±–æ—Ä–æ–≤.
–ï–º—É —É–¥–∞–ª–æ—Å—å –ø–æ–¥–≥–ª—è–¥–µ—Ç—å, –∫–∞–∫ –ø—Ä–æ–≥–æ–ª–æ—Å–æ–≤–∞–ª–∏ 60 –∏–∑–±–∏—Ä–∞—Ç–µ–ª–µ–π. –ò–∑ –Ω–∏—Ö 42 –≤—ã–±—Ä–∞–ª–∏
–¥–µ–π—Å—Ç–≤—É—é—â–µ–≥–æ –ø—Ä–µ–∑–∏–¥–µ–Ω—Ç–∞.
–∞) –ü–æ—Å—Ç—Ä–æ–π—Ç–µ 95%-–π –¥–æ–≤–µ—Ä–∏—Ç–µ–ª—å–Ω—ã–π –∏–Ω—Ç–µ—Ä–≤–∞–ª –¥–ª—è –∏—Å—Ç–∏–Ω–Ω–æ–π –¥–æ–ª–∏ –∏–∑–±–∏—Ä–∞—Ç–µ–ª–µ–π,
–ø—Ä–æ–≥–æ–ª–æ—Å–æ–≤–∞–≤—à–∏—Ö ¬´–∑–∞¬ª –¥–µ–π—Å—Ç–≤—É—é—â–µ–≥–æ –ø—Ä–µ–∑–∏–¥–µ–Ω—Ç–∞.
–±) –ü–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º –¶–µ–Ω—Ç—Ä–ò–∑–±–µ—Ä–ö–æ–º–∞ ¬´–∑–∞¬ª –¥–µ–π—Å—Ç–≤—É—é—â–µ–≥–æ –ø—Ä–µ–∑–∏–¥–µ–Ω—Ç–∞ –ø—Ä–æ–≥–æ–ª–æ—Å–æ–≤–∞–ª–æ
76.67% –Ω–∞—Å–µ–ª–µ–Ω–∏—è. –°–æ–≥–ª–∞—Å—É—é—Ç—Å—è –ª–∏ —ç—Ç–∏ –¥–∞–Ω–Ω—ã–µ —Å –¥–∞–Ω–Ω—ã–º–∏ –ê–ª–µ–∫—Å–µ—è?
–≤) –°–∫–æ–ª—å–∫–æ –±—é–ª–ª–µ—Ç–µ–Ω–µ–π –Ω—É–∂–Ω–æ –ø–æ–¥–≥–ª—è–¥–µ—Ç—å –ê–ª–µ–∫—Å–µ—é, —á—Ç–æ–±—ã —Å –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å—é 0.95
–æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ –æ—Ç –≤—ã–±–æ—Ä–æ—á–Ω–æ–π –¥–æ–ª–∏ –ø—Ä–æ–≥–æ–ª–æ—Å–æ–≤–∞–≤—à–∏—Ö ¬´–∑–∞¬ª –¥–µ–π—Å—Ç–≤—É—é—â–µ–≥–æ –ø—Ä–µ–∑–∏–¥–µ–Ω—Ç–∞
–æ—Ç –∏—Å—Ç–∏–Ω–Ω–æ–π –Ω–µ –ø—Ä–µ–≤—ã—à–∞–ª–æ 0.01?
'''
gamma = 0.95
n = 60
k = 42

p_obs=k/n
q_obs=1-p_obs
z_gamma=sts.norm.ppf((1+gamma)/2)
delta = z_gamma*np.sqrt(p_obs*q_obs/n)

print(p_obs - delta, p_obs + delta)

gamma = 0.95
d = 0.01
#P(|p^ - p|<0.01) = 0.95

z_gamma=sts.norm.ppf((1+gamma)/2)
z_gamma

'''
$P(|\hat p-p|<0,01)=0,95$

$\frac{|\hat p-p|}{\sqrt{\frac{\hat p\hat q}{n}}}\sim N(0,1)$

$P(\frac{|\hat p-p|}{\sqrt{\frac{\hat p\hat q}{n}}}<\frac{0,01}{\sqrt{\frac{\hat p\hat q}{n}}})=0,95$

$\frac{0,01}{\sqrt{\frac{\hat p\hat q}{n}}}\approx 1,96$

${\sqrt{\frac{\hat p\hat q}{n}}}\approx \frac{0,01}{1,96}$

${\frac{\hat p\hat q}{n}}\approx (\frac{0,01}{1,96})^2$

${n}\approx {\frac{\hat p\hat q}{(\frac{0,01}{1,96})^2}}$
'''

n = p_obs*q_obs/(0.01/1.96)**2
n

'''
–°–æ–∑–¥–∞–π—Ç–µ —Å–æ–≤–æ–∫—É–ø–Ω–æ—Å—Ç–∏ sin –≤–∏–¥–∞ sin(1), sin(2), ..., sin(100) –∏ cos –≤–∏–¥–∞ cos(1),
cos(2), ..., cos(100). –ù–∞–π–¥–∏—Ç–µ —ç–º–ø–∏—Ä–∏—á–µ—Å–∫–∏–π –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –∫–æ—Ä—Ä–µ–ª—è—Ü–∏–∏ –ø—Ä–∏–∑–Ω–∞–∫–æ–≤
sin –∏ cos –Ω–∞ —Å–æ–≤–æ–∫—É–ø–Ω–æ—Å—Ç–∏ –Ω–∞—Ç—É—Ä–∞–ª—å–Ω—ã—Ö —á–∏—Å–µ–ª –æ—Ç 1 –¥–æ 100.
'''
omega = np.linspace(1, 100, 100)
x_sin = np.sin(omega)
x_cos = np.cos(omega)

mean_sin = np.mean(x_sin)
mean_cos = np.mean(x_cos)
sigma_sin= np.std(x_sin)
sigma_cos= np.std(x_cos)
n=len(omega)

# –ü–æ —Ñ–æ—Ä–º—É–ª–µ
cov = sum((x_cos - mean_cos) * (x_sin - mean_sin)) / n
corr1 = cov / (sigma_cos * sigma_sin)
print(f'–≠–º–ø–∏—Ä–∏—á–µ—Å–∫–∏–π –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –∫–æ—Ä—Ä–µ–ª—è—Ü–∏–∏ {corr1}')

#–∏–ª–∏
print(np.corrcoef(x_sin,x_cos))

'''
–í –≥—Ä—É–ø–ø–µ Œ© —É—á–∞—Ç—Å—è —Å—Ç—É–¥–µ–Ω—Ç—ã: œâ1, œâ2, ... , œâ30. –ü—É—Å—Ç—å X –∏ Y - 100¬≠–±–∞–ª–ª—å–Ω—ã–µ
—ç–∫–∑–∞–º–µ–Ω–∞—Ü–∏–æ–Ω–Ω—ã–µ –æ—Ü–µ–Ω–∫–∏ –ø–æ –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–æ–º—É –∞–Ω–∞–ª–∏–∑—É –∏ —Ç–µ–æ—Ä–∏–∏ –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–µ–π.
–û—Ü–µ–Ω–∫–∏ —Å—Ç—É–¥–µ–Ω—Ç–∞ œâi –æ–±–æ–∑–Ω–∞—á–∞—é—Ç—Å—è: xi = X(œâi) –∏ yi = Y(œâi), i = 1, ..., 30. 
–í—Å–µ –æ—Ü–µ–Ω–∫–∏ –∏–∑–≤–µ—Å—Ç–Ω—ã:
x1 = 71, y1 = 71, x2 = 52, y2 = 58, x3 = 72, y3 = 81, x4 = 87, y4 = 92, x5 = 81,
y5 = 81, x6 = 100, y6 = 94, x7 = 90, y7 = 96, x8 = 54, y8 = 46, x9 = 54, y9 = 60,
x10 = 58, y10 = 62, x11 = 56, y11 = 49, x12 = 70, y12 = 60, x13 = 93, y13 = 86,
x14 = 46, y14 = 48, x15 = 56, y15 = 61, x16 = 59, y16 = 52, x17 = 42, y17 = 40,
x18 = 60, y18 = 60, x19 = 33, y19 = 37, x20 = 83, y20 = 92, x21 = 50, y21 = 57,
x22 = 93, y22 = 93, x23 = 41, y23 = 42, x24 = 55, y24 = 64, x25 = 60, y25 = 59,
x26 = 37, y26 = 30, x27 = 71, y27 = 71, x28 = 42, y28 = 44, x29 = 85, y29 = 82,
x30 = 39, y30 = 39.
–¢—Ä–µ–±—É–µ—Ç—Å—è –Ω–∞–π—Ç–∏ —Å–ª–µ–¥—É—é—â–∏–µ —É—Å–ª–æ–≤–Ω—ã–µ —ç–º–ø–∏—Ä–∏—á–µ—Å–∫–∏–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏:
1) –∫–æ–≤–∞—Ä–∏–∞—Ü–∏—é X –∏ Y –ø—Ä–∏ —É—Å–ª–æ–≤–∏–∏, —á—Ç–æ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ X ‚â• 50 –∏ Y ‚â• 50; 
2) –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –∫–æ—Ä—Ä–µ–ª—è—Ü–∏–∏ X –∏ Y –ø—Ä–∏ —Ç–æ–º –∂–µ —É—Å–ª–æ–≤–∏–∏.
'''
import re
data = '''ùë•1 = 71, ùë¶1 = 71, ùë•2 = 52, ùë¶2 = 58, ùë•3 = 72, ùë¶3 = 81, ùë•4 = 87, ùë¶4 = 92, ùë•5 = 81,
ùë¶5 = 81, ùë•6 = 100, ùë¶6 = 94, ùë•7 = 90, ùë¶7 = 96, ùë•8 = 54, ùë¶8 = 46, ùë•9 = 54, ùë¶9 = 60, 
ùë•10 = 58, ùë¶10 = 62, ùë•11 = 56, ùë¶11 = 49, ùë•12 = 70, ùë¶12 = 60, ùë•13 = 93, ùë¶13 = 86, 
ùë•14 = 46, ùë¶14 = 48, ùë•15 = 56, ùë¶15 = 61, ùë•16 = 59, ùë¶16 = 52, ùë•17 = 42, ùë¶17 = 40,
ùë•18 = 60, ùë¶18 = 60, ùë•19 = 33, ùë¶19 = 37, ùë•20 = 83, ùë¶20 = 92, ùë•21 = 50, ùë¶21 = 57,
ùë•22 = 93, ùë¶22 = 93, ùë•23 = 41, ùë¶23 = 42, ùë•24 = 55, ùë¶24 = 64, ùë•25 = 60, ùë¶25 = 59,
ùë•26 = 37, ùë¶26 = 30, ùë•27 = 71, ùë¶27 = 71, ùë•28 = 42, ùë¶28 = 44, ùë•29 = 85, ùë¶29 = 82,
ùë•30 = 39, ùë¶30 = 39'''

raz = re.split('=|,|=', data)
x = np.array([int(raz[i+1]) for i in range(len(raz)) if 'ùë•' in raz[i]])
y = np.array([int(raz[i+1]) for i in range(len(raz)) if 'ùë¶' in raz[i]])
xy = np.array(list(zip(x, y)))
xy = xy[(xy[:, 0] >= 50) & (xy[:, 1] >= 50)]
x = xy[:, 0]
y = xy[:, 1]

print(f'–ö–æ–≤–∞—Ä–∏–∞—Ü–∏—è ùëã –∏ ùëå –ø—Ä–∏ —É—Å–ª–æ–≤–∏–∏, —á—Ç–æ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ ùëã ‚â• 50 –∏ ùëå ‚â• 50: {round(np.cov(x, y,ddof=0)[0, 1], 3)}')
print(f'–ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –∫–æ—Ä—Ä–µ–ª—è—Ü–∏–∏ ùëã –∏ ùëå –ø—Ä–∏ —Ç–æ–º –∂–µ —É—Å–ª–æ–≤–∏–∏: {round(np.corrcoef(x, y)[0, 1], 4)}')

'''
–≠–º–ø–∏—Ä–∏—á–µ—Å–∫–æ–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø—Ä–∏–∑–Ω–∞–∫–æ–≤ X –∏ Y –Ω–∞ –≥–µ–Ω–µ—Ä–∞–ª—å–Ω–æ–π —Å–æ–≤–æ–∫—É–ø–Ω–æ—Å—Ç–∏ Œ© = {1,2, . . . ,100}
        Y = 1   Y = 3   Y = 5
X = 100  13       16     20
X = 300  12       28     11

–ò–∑ Œ© —Å–ª—É—á–∞–π–Ω—ã–º –æ–±—Ä–∞–∑–æ–º –±–µ–∑ –≤–æ–∑–≤—Ä–∞—â–µ–Ω–∏—è –∏–∑–≤–ª–µ–∫–∞—é—Ç—Å—è 10 —ç–ª–µ–º–µ–Ω—Ç–æ–≤. –ü—É—Å—Ç—å
XÃÖ –∏ YÃÖ ‚Äì —Å—Ä–µ–¥–Ω–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è –ø—Ä–∏–∑–Ω–∞–∫–æ–≤ –Ω–∞ –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–∞—Ö. –¢—Ä–µ–±—É–µ—Ç—Å—è –Ω–∞–π—Ç–∏:
1) –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–∂–∏–¥–∞–Ω–∏–µ E(XÃÖ); 2) –¥–∏—Å–ø–µ—Ä—Å–∏—é Var(YÃÖ); 3) –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –∫–æ—Ä—Ä–µ–ª—è—Ü–∏–∏ œÅ(XÃÖ, YÃÖ).
'''
X = np.array([100, 300])
Y = np.array([1, 3, 5])
n_XY = np.array([[13, 16, 20], [12, 28, 11]])
N = n_XY.sum()
n = 10 # –±–µ—Å–ø–æ–≤—Ç–æ—Ä–Ω–∞—è –≤—ã–±–æ—Ä–∫–∞

n_X = np.sum(n_XY, axis=1)
n_Y = np.sum(n_XY, axis=0)
x0_gen = np.dot(X, n_X) / N
print('–ú–∞—Ç–æ–∂–∏–¥–∞–Ω–∏–µ –≤—ã–±–æ—Ä–æ—á–Ω–æ–≥–æ —Å—Ä–µ–¥–Ω–µ–≥–æ X =', x0_gen)
y0_gen = np.dot(Y, n_Y) / N
print('–ú–∞—Ç–æ–∂–∏–¥–∞–Ω–∏–µ –≤—ã–±–æ—Ä–æ—á–Ω–æ–≥–æ —Å—Ä–µ–¥–Ω–µ–≥–æ Y =', y0_gen)

E_Y2 = np.dot(Y**2, n_Y)/N
Var_Y = E_Y2 - y0_gen**2
Var_Y_sr = Var_Y/n * (N-n)/(N-1)

E_X2 = np.dot(X**2, n_X)/N
Var_X = E_X2 - x0_gen**2
Var_X_sr = Var_X/n * (N-n)/(N-1)

#print("–î–∏—Å–ø–µ—Ä—Å–∏—è Y =", Var_Y)
print("–î–∏—Å–ø–µ—Ä—Å–∏—è –≤—ã–±–æ—Ä–æ—á–Ω–æ–≥–æ —Å—Ä–µ–¥–Ω–µ–≥–æ Y =", Var_Y_sr)
#print("–î–∏—Å–ø–µ—Ä—Å–∏—è X =", Var_X)
print("–î–∏—Å–ø–µ—Ä—Å–∏—è –≤—ã–±–æ—Ä–æ—á–Ω–æ–≥–æ —Å—Ä–µ–¥–Ω–µ–≥–æ X =", Var_X_sr)

Cov_gen = np.dot(X, np.dot(Y, n_XY.T))/N-x0_gen*y0_gen
#Cov_gen = XY_sr - x0_gen * y0_gen
Cov_XY_sr = Cov_gen/n * (N-n)/(N-1)
print('–ö–æ–≤–∞—Ä–∏–∞—Ü–∏—è =', Cov_XY_sr)

p = Cov_XY_sr/(Var_Y_sr**0.5*Var_X_sr**0.5)
print('–ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –∫–æ—Ä—Ä–µ–ª—è—Ü–∏–∏ =', p)

'''
–ü–æ—Å—Ç—Ä–æ–∏—Ç—å –¥–∏–∞–≥—Ä–∞–º–º—É —Ä–∞—Å—Å–µ–∏–≤–∞–Ω–∏—è —Ç–æ—á–µ–∫ (–Ω–∞–±–ª—é–¥–µ–Ω–∏–π). –ú–æ–∂–Ω–æ –ª–∏ —Å—á–∏—Ç–∞—Ç—å
–ø—Ä–µ–¥–ª–æ–∂–µ–Ω–Ω—ã–µ –≤ –∑–∞–¥–∞—á–∞—Ö —Å–æ—Ü–∏–∞–ª—å–Ω—ã–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ –∫–æ—Ä—Ä–µ–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏?
'''
title=["–¶–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–π","–°–µ–≤–µ—Ä–æ-–í–æ—Å—Ç–æ—á–Ω—ã–π","–Æ–∂–Ω—ã–π","–°–µ–≤–µ—Ä–æ-–ö–∞–≤–∫–∞–∑—Å–∫–∏–π","–ü—Ä–∏–≤–æ–ª–∂—Å–∫–∏–π","–£—Ä–∞–ª—å—Å–∫–∏–π","–°–∏–±–∏—Ä—Å–∫–∏–π","–î–∞–ª—å–Ω–µ–≤–æ—Å—Ç–æ—á–Ω—ã–π"]
data1 = [262,279,123,90,210,209,239,185]
data2 = [4.7,6.2,7.7,16.9,7.6,8,8.7,8.7]
df = pd.DataFrame({"–§–µ–¥–µ—Ä–∞–ª—å–Ω—ã–π –æ–∫—Ä—É–≥": title,"–ß–∏—Å–ª–µ–Ω–Ω–æ—Å—Ç—å –∑—Ä–∏—Ç–µ–ª–µ–π —Ç–µ–∞—Ç—Ä–æ–≤,X": data1, "–£—Ä–æ–≤–µ–Ω—å –±–µ–∑—Ä–∞–±–æ—Ç–∏—Ü—ã, %,Y": data2})
df

r_AB = df["–ß–∏—Å–ª–µ–Ω–Ω–æ—Å—Ç—å –∑—Ä–∏—Ç–µ–ª–µ–π —Ç–µ–∞—Ç—Ä–æ–≤,X"].corr(df["–£—Ä–æ–≤–µ–Ω—å –±–µ–∑—Ä–∞–±–æ—Ç–∏—Ü—ã, %,Y"])
print(f'–ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –∫–æ—Ä—Ä–µ–ª—è—Ü–∏–∏ –ü–∏—Ä—Å–æ–Ω–∞ –º–µ—Ç–æ–¥–æ–º .corr() –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ Pandas:', r_AB)

#–∏–ª–∏
sts.pearsonr(df["–ß–∏—Å–ª–µ–Ω–Ω–æ—Å—Ç—å –∑—Ä–∏—Ç–µ–ª–µ–π —Ç–µ–∞—Ç—Ä–æ–≤,X"],df["–£—Ä–æ–≤–µ–Ω—å –±–µ–∑—Ä–∞–±–æ—Ç–∏—Ü—ã, %,Y"])[0]

#–ì—Ä—É–ø–ø–æ–≤—ã–µ –∏ –æ–±—â–∞—è —Å—Ä–µ–¥–Ω–∏–µ, –≥—Ä—É–ø–ø–æ–≤—ã–µ, —Å—Ä–µ–¥–Ω—è—è –≥—Ä—É–ø–ø–æ–≤–∞—è, –º–µ–∂–≥—Ä—É–ø–ø–æ–≤–∞—è –∏ –æ–±—â–∞—è –≥—Ä—É–ø–ø–æ–≤–∞—è –¥–∏—Å–ø–µ—Ä—Å–∏—è

'''
–ù–∞ —É—Ä–æ–∫–µ —Ñ–∏–∑–∫—É–ª—å—Ç—É—Ä—ã –º–∞–ª—å—á–∏–∫–∏ –∏ –¥–µ–≤–æ—á–∫–∏ —Å–¥–∞–≤–∞–ª–∏ –Ω–æ—Ä–º–∞—Ç–∏–≤ –ø–æ –±–µ–≥—É.
–í gr1 —Ö—Ä–∞–Ω—è—Ç—Å—è –¥–∞–Ω–Ω—ã–µ –¥–ª—è –¥–µ–≤–æ—á–µ–∫(–∑–∞ —Å–∫–æ–ª—å–∫–æ —Å–µ–∫—É–Ω–¥ –∫–∞–∂–¥–∞—è –ø—Ä–µ–æ–¥–æ–ª–µ–ª–∞ –Ω—É–∂–Ω—É—é –¥–∏—Å—Ç–∞–Ω—Ü–∏—é), –≤ gr2 - –¥–∞–Ω–Ω—ã–µ –¥–ª—è –º–∞–ª—å—á–∏–∫–æ–≤. 
–û–ø—Ä–µ–¥–µ–ª–∏—Ç—å 1) –≥—Ä—É–ø–ø–æ–≤—ã–µ –∏ –æ–±—â—É—é —Å—Ä–µ–¥–Ω—é—é; 2) –≤–Ω—É—Ç—Ä–∏–≥—Ä—É–ø–ø–æ–≤—ã–µ –∏ –º–µ–∂–≥—Ä—É–ø–ø–æ–≤—É—é –¥–∏—Å–ø–µ—Ä—Å–∏—é, –æ–±—â—É—é –¥–∏—Å–ø–µ—Ä—Å–∏—é –ø–æ –ø—Ä–∞–≤–∏–ª—É —Å–ª–æ–∂–µ–Ω–∏—è.
–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, –∏—Å—á–∏—Å–ª–∏–≤ –æ–±—â—É—é —Å—Ä–µ–¥–Ω—é—é –∏ –æ–±—â—É—é –¥–∏—Å–ø–µ—Ä—Å–∏—é –æ–±—ã—á–Ω—ã–º —Å–ø–æ—Å–æ–±–æ–º.
'''
gr1 = np.array([20, 25, 24, 31, 18, 19, 26, 30, 25, 29])
gr2 = np.array([17, 15, 21, 25, 16, 19, 22, 20, 24, 21])

ni = np.array([len(gr1), len(gr2)])
n=sum(ni)

gr_sr=np.array([np.mean(gr1), np.mean(gr2)])
print('–ì—Ä—É–ø–ø–æ–≤—ã–µ —Å—Ä–µ–¥–Ω–∏–µ:', gr_sr)

all_sr=np.dot(gr_sr, ni)/n
print('–û–±—â–∞—è —Å—Ä–µ–¥–Ω—è—è:', all_sr)

gr_Var = np.array([np.var(gr1), np.var(gr2)])
print('–í–Ω—É—Ç—Ä–∏–≥—Ä—É–ø–ø–æ–≤—ã–µ –¥–∏—Å–ø–µ—Ä—Å–∏–∏:', gr_Var)

sigma2_sr=np.dot(gr_Var, ni)/n
print('–°—Ä–µ–¥–Ω—è—è –≥—Ä—É–ø–ø–æ–≤–∞—è –¥–∏—Å–ø–µ—Ä—Å–∏—è:', sigma2_sr)

delta2 = np.dot((gr_sr - all_sr)**2, ni)/n
print('–ú–µ–∂–≥—Ä—É–ø–ø–æ–≤–∞—è –¥–∏—Å–ø–µ—Ä—Å–∏—è:', delta2)

var_all = delta2 + sigma2_sr
print('–û–±—â–∞—è –¥–∏—Å–ø–µ—Ä—Å–∏—è:', var_all)

print()
gr = np.array([20, 25, 24, 31, 18, 19, 26, 30, 25, 29, 17, 15, 21, 25, 16, 19, 22, 20, 24, 21])
print('–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ä–µ–¥–Ω–µ–π:', np.mean(gr))
print('–ü—Ä–æ–≤–µ—Ä–∫–∞ var:', np.var(gr))

'''
–í –≥—Ä—É–ø–ø–µ —É—á–∏—Ç—Å—è 29 —Å—Ç—É–¥–µ–Ω—Ç–æ–≤. –ò–º–∏ –±—ã–ª–∏ –ø–æ–ª—É—á–µ–Ω—ã —Å–ª–µ–¥—É—é—â–∏–µ 100-–±–∞–ª–ª—å–Ω—ã–µ –æ—Ü–µ–Ω–∫–∏: 90, 79, 53, 62, 66, 68, 75, 0, 82, 29, 0, 29, 68, 90, 0, 60, 44, 44, 70, 68, 70, 89, 0, 68, 0, 66, 0, 59, 70.
–ù–∞–π–¥–∏—Ç–µ: 1) A ‚Äì —Å—Ä–µ–¥–Ω—é—é –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—É—é –æ—Ü–µ–Ω–∫—É –≤ –≥—Ä—É–ø–ø–µ; 2) M ‚Äì –º–µ–¥–∏–∞–Ω—É –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã—Ö –æ—Ü–µ–Ω–æ–∫ –≤ –≥—Ä—É–ø–ø–µ; 
3) H ‚Äì —Å—Ä–µ–¥–Ω–µ–µ –≥–∞—Ä–º–æ–Ω–∏—á–µ—Å–∫–æ–µ –∏ G ‚Äì —Å—Ä–µ–¥–Ω–µ–µ –≥–µ–æ–º–µ—Ç—Ä–∏—á–µ—Å–∫–æ–µ –æ—Ü–µ–Ω–æ–∫, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ –º–µ–Ω–µ–µ M; 
4) Q ‚Äì –º–µ–¥–∏–∞–Ω–Ω—É—é –æ—Ü–µ–Ω–∫—É –≤ —Ç–æ–π —á–∞—Å—Ç–∏ –≥—Ä—É–ø–ø—ã, –≤ –∫–æ—Ç–æ—Ä–æ–π —Å—Ç—É–¥–µ–Ω—Ç—ã –Ω–∞–±—Ä–∞–ª–∏ –Ω–µ –º–µ–Ω–µ–µ M –±–∞–ª–ª–æ–≤; 
5) N ‚Äì –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ç—É–¥–µ–Ω—Ç–æ–≤, –æ—Ü–µ–Ω–∫–∏ –∫–æ—Ç–æ—Ä—ã—Ö –æ–∫–∞–∑–∞–ª–∏—Å—å –º–µ–∂–¥—É H –∏ Q (–≤–∫–ª—é—á–∞—è –≥—Ä–∞–Ω–∏—Ü—ã).
'''
x = [90, 79, 53, 62, 66, 68, 75, 0, 82, 29, 0, 29, 68, 90, 0, 60, 44, 44, 70, 68, 70, 89, 0, 68, 0, 66, 0, 59, 70]
x = np.array(x)
x1= x[np.where(x>0)]

o1  = x1.mean()
o2  = np.median(x1)
# harmonic mean
o31 = st.hmean(x[np.where(x>=o2)])
# geometric mean
o32 = st.gmean(x[np.where(x>=o2)])
o4  = np.median(x[np.where(x>=o2)])
o5  = x[np.where(((x>=o31)&(x<=o4))|((x<=o31)&(x>=o4)))].shape[0]

print(o1,o2,o31,o32,o4,o5,sep='\n')

'''
–ü–æ—Ç–æ–∫ Œ© —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ k –≥—Ä—É–ø–ø: Œ©1, ..., Œ©k, k = 3. –ù–∞ –ø–æ—Ç–æ–∫–µ —É—á–∞—Ç—Å—è
n = n1 + ‚ãØ + nk —Å—Ç—É–¥–µ–Ω—Ç–æ–≤, –≥–¥–µ ni ‚Äì —á–∏—Å–ª–æ —Å—Ç—É–¥–µ–Ω—Ç–æ–≤ –≤ –≥—Ä—É–ø–ø–µ Œ©i

, i = 1, ... , k.
–ü—É—Å—Ç—å X(œâ) ‚Äì 100-–±–∞–ª–ª—å–Ω–∞—è –æ—Ü–µ–Ω–∫–∞ —Å—Ç—É–¥–µ–Ω—Ç–∞ œâ ‚àà Œ©. –î–∞–ª–µ–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è
—Å–ª–µ–¥—É—é—â–∏–µ –æ–±–æ–∑–Ω–∞—á–µ–Ω–∏—è: xÃÖi ‚Äì —Å—Ä–µ–¥–Ω–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ, œÉi ‚Äì (—ç–º–ø–∏—Ä–∏—á–µ—Å–∫–æ–µ)
—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–µ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ –ø—Ä–∏–∑–Ω–∞–∫–∞ X –Ω–∞ –≥—Ä—É–ø–ø–µ Œ©i

. –î–∞–Ω–æ: n1 = 24, n2 = 26,
n3 = 30, x1ÃÖ = 70, xÃÖ2=76, xÃÖ3=77, œÉ1=4, œÉ2=6, œÉ3=8. –¢—Ä–µ–±—É–µ—Ç—Å—è –Ω–∞–π—Ç–∏: 1) —Å—Ä–µ–¥–Ω–µ–µ
–∑–Ω–∞—á–µ–Ω–∏–µ X –Ω–∞ –ø–æ—Ç–æ–∫–µ Œ©; 2) (—ç–º–ø–∏—Ä–∏—á–µ—Å–∫–æ–µ) —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–µ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ X –Ω–∞ –ø–æ—Ç–æ–∫–µ Œ©.
'''

n1 = 24
n2 = 26
n3 = 30
n = n1 + n2 + n3
ni = np.array([24, 26, 30])

x_1 = 70
x_2 = 76
x_3 = 77
gr_sr = np.array([70, 76, 77])

sigma1 = 4
sigma2 = 6
sigma3 = 8
var_gr = np.array([4**2, 6**2, 8**2])

all_sr = (n1*x_1 + n2*x_2 + n3*x_3)/n
print('–°—Ä–µ–¥–Ω–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ =', all_sr)

var_g_sr = np.dot(var_gr, ni)/n
delta2 = np.dot((gr_sr - all_sr)**2, ni)/n
print('–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–µ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ =', (var_g_sr+delta2)**0.5)

'''
–í –≥—Ä—É–ø–ø–µ Œ© —É—á–∞—Ç—Å—è 27 —Å—Ç—É–¥–µ–Ω—Ç–æ–≤, Œ©={1,2,...,27}. –ü—É—Å—Ç—å X(i) ‚Äì 100-–±–∞–ª–ª—å–Ω–∞—è –æ—Ü–µ–Ω–∫–∞ —Å—Ç—É–¥–µ–Ω—Ç–∞ i‚ààŒ©.
–ò–∑ –≥—Ä—É–ø–ø—ã Œ© —Å–ª—É—á–∞–π–Ω—ã–º –æ–±—Ä–∞–∑–æ–º 6 —Ä–∞–∑ –≤—ã–±–∏—Ä–∞–µ—Ç—Å—è —Å—Ç—É–¥–µ–Ω—Ç œâ‚ààŒ©. –ü–æ–≤—Ç–æ—Ä–Ω—ã–π –≤—ã–±–æ—Ä –Ω–µ –¥–æ–ø—É—Å–∫–∞–µ—Ç—Å—è.
–ü—É—Å—Ç—å œâj ‚Äì —Å—Ç—É–¥–µ–Ω—Ç, –ø–æ–ª—É—á–µ–Ω–Ω—ã–π –ø–æ—Å–ª–µ –≤—ã–±–æ—Ä–∞ j=1,...,6, X(œâj) ‚Äì –µ–≥–æ –æ—Ü–µ–Ω–∫–∞. –°—Ä–µ–¥–Ω—é—é –æ—Ü–µ–Ω–∫—É –Ω–∞ —Å–ª—É—á–∞–π–Ω–æ–π –≤—ã–±–æ—Ä–∫–µ –æ–±–æ–∑–Ω–∞—á–∏–º X¬Ø¬Ø¬Ø¬Ø=1/6‚àëX(œâj).
–û—Ü–µ–Ω–∫–∏ –≤ –≥—Ä—É–ø–ø–µ –¥–∞–Ω—ã: 100, 78, 77, 51, 82, 100, 73, 53, 78, 55, 7, 0, 81, 15, 96, 12, 71, 70, 53, 0, 73, 100, 55, 100, 59, 89, 81.
–¢—Ä–µ–±—É–µ—Ç—Å—è –Ω–∞–π—Ç–∏: 1) –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–∂–∏–¥–∞–Ω–∏–µ E(X¬Ø¬Ø¬Ø¬Ø); 2) –¥–∏—Å–ø–µ—Ä—Å–∏—é Var(X¬Ø¬Ø¬Ø¬Ø).
'''
N = 27
n = 6
str = '100, 78, 77, 51, 82, 100, 73, 53, 78, 55, 7, 0, 81, 15, 96, 12, 71, 70, 53, 0, 73, 100, 55, 100, 59, 89, 81'
x = np.array(list(map(int, str.split(', '))))

print('–¥–∏—Å–ø–µ—Ä—Å–∏—è =', x.var()/n*(N-n)/(N-1))
print('–º–∞—Ç–æ–∂–∏–¥–∞–Ω–∏–µ =', x.mean())

'''
–î–≤–µ –∏–≥—Ä–∞–ª—å–Ω—ã–µ –∫–æ—Å—Ç–∏, –∫—Ä–∞—Å–Ω–∞—è –∏ —Å–∏–Ω—è—è, –ø–æ–¥–±—Ä–∞—Å—ã–≤–∞—é—Ç—Å—è –¥–æ —Ç–µ—Ö –ø–æ—Ä, –ø–æ–∫–∞ –Ω–µ –≤—ã–ø–∞–¥–µ—Ç 19 —Ä–∞–∑–ª–∏—á–Ω—ã—Ö (—Å —É—á–µ—Ç–æ–º —Ü–≤–µ—Ç–∞) –∫–æ–º–±–∏–Ω–∞—Ü–∏–π –æ—á–∫–æ–≤.
–ü—É—Å—Ç—å Ri ‚Äì —á–∏—Å–ª–æ –æ—á–∫–æ–≤ –Ω–∞ –∫—Ä–∞—Å–Ω–æ–π –∫–æ—Å—Ç–∏, –∞ Bi ‚Äì —á–∏—Å–ª–æ –æ—á–∫–æ–≤ –Ω–∞ —Å–∏–Ω–µ–π –∫–æ—Å—Ç–∏ –≤ –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏ —Å –Ω–æ–º–µ—Ä–æ–º i.
–°–ª—É—á–∞–π–Ω—ã–µ –≤–µ–ª–∏—á–∏–Ω—ã Xi –∑–∞–¥–∞—é—Ç—Å—è —Å–æ–æ—Ç–Ω–æ—à–µ–Ω–∏—è–º–∏: Xi=11Ri‚àí9Bi,i=1,...,19. –°—Ä–µ–¥–Ω–µ–µ –∞—Ä–∏—Ñ–º–µ—Ç–∏—á–µ—Å–∫–æ–µ —ç—Ç–∏—Ö –≤–µ–ª–∏—á–∏–Ω –æ–±–æ–∑–Ω–∞—á–∏–º X¬Ø¬Ø¬Ø¬Ø=1/19‚àëXi.
–¢—Ä–µ–±—É–µ—Ç—Å—è –Ω–∞–π—Ç–∏: 1) –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–∂–∏–¥–∞–Ω–∏–µ E(X¬Ø¬Ø¬Ø¬Ø); 2) —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–µ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ œÉ(X¬Ø¬Ø¬Ø¬Ø).
'''
Ri = Bi = np.array([1, 2, 3, 4, 5, 6])
p = 1/6
N = 36
n = 19
# Xi = 11 * Ri - 9 * Bi
mean_R = mean_B = Ri.sum() * p
var_R = var_B = (Ri**2).sum() * p - mean_R**2
x_sr = 11 * mean_R - 9 * mean_B
sigma2 = (121 * var_R + 81 * var_B) / n * (N - n) / (N - 1)
print(f'–ú–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–∂–∏–¥–∞–Ω–∏–µ = {x_sr}')
print(f'–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–µ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ = {np.sqrt(sigma2)}')

'''
–ì–ª–µ–± –∏ –ê–Ω–Ω–∞ –∏—Å—Å–ª–µ–¥—É—é—Ç —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –ª–µ–∫–∞—Ä—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –ø—Ä–µ–ø–∞—Ä–∞—Ç–∞ –ê–í–°. –ì–ª–µ–±, –∏—Å–ø–æ–ª—å–∑—É—è –º–æ–¥–µ–ª—å –ê–Ω–Ω—ã, —Å–æ–∑–¥–∞–ª –∫–æ–º–ø—å—é—Ç–µ—Ä–Ω—É—é –ø—Ä–æ–≥—Ä–∞–º–º—É, –≤—ã—á–∏—Å–ª—è—é—â—É—é –ø–æ –∑–∞–¥–∞–Ω–Ω—ã–º –≥–µ–Ω–µ—Ç–∏—á–µ—Å–∫–∏–º —Ñ–∞–∫—Ç–æ—Ä–∞–º –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å (–≤ –ø—Ä–æ—Ü–µ–Ω—Ç–∞—Ö) —É—Å–ø–µ—à–Ω–æ–≥–æ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –ê–í–°.
–ü—Ä–æ–≥—Ä–∞–º–º–∞ –ì–ª–µ–±–∞ –Ω–∞–∫–∞–ø–ª–∏–≤–∞–µ—Ç –ø–æ–ª—É—á–µ–Ω–Ω—ã–µ –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–∏ –∏ –≤ –∏—Ç–æ–≥–µ –≤—ã–¥–∞–µ—Ç –Ω–∞–±–æ—Ä —á–∞—Å—Ç–æ—Ç: n0,n1,...,n100. –ù–∞–ø—Ä–∏–º–µ—Ä, n75 ‚Äì —ç—Ç–æ —á–∏—Å–ª–æ —Å–ª—É—á–∞–µ–≤, –≤ –∫–æ—Ç–æ—Ä—ã—Ö –ø—Ä–æ–≥—Ä–∞–º–º–∞ –ì–ª–µ–±–∞ –ø–æ–ª—É—á–∏–ª–∞ –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å 75%.
–û–±—Ä–∞–±–æ—Ç–∞–≤ 1000 –æ–±—Ä–∞–∑—Ü–æ–≤ –≥–µ–Ω–µ—Ç–∏—á–µ—Å–∫–æ–≥–æ –º–∞—Ç–µ—Ä–∏–∞–ª–∞, –ê–Ω–Ω–∞ –Ω–∞—à–ª–∞ –∑–Ω–∞—á–µ–Ω–∏—è —Ñ–∞–∫—Ç–æ—Ä–æ–≤ –∏ –≤–≤–µ–ª–∞ –∏—Ö –≤ –ø—Ä–æ–≥—Ä–∞–º–º—É. –í —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ –±—ã–ª –ø–æ–ª—É—á–µ–Ω —Å–ª–µ–¥—É—é—â–∏–π –Ω–∞–±–æ—Ä —á–∞—Å—Ç–æ—Ç: 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 2, 0, 0, 1, 1, 3, 4, 4, 5, 4, 6, 6, 11, 9, 19, 23, 25, 33, 36, 36, 46, 46, 49, 58, 90, 76, 66, 69, 75, 68, 44, 39, 21, 16, 5, 2, 1, 0, 0, 0.
–î–ª—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —ç—Ç–∞–ø–∞ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –±—ã–ª–æ –ø–æ–¥–æ–±—Ä–∞—Ç—å —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ, —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–µ –ø–æ–ª—É—á–µ–Ω–Ω—ã–º —á–∞—Å—Ç–æ—Ç–∞–º. –ê–Ω–Ω–∞ —Ä–µ—à–∏–ª–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å
—Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –Ω–∞ –æ—Ç—Ä–µ–∑–∫–µ [0,1] —Å –ø–ª–æ—Ç–Ω–æ—Å—Ç—å—é f(x)=f(x;a,b)=abx^(a‚àí1)*(1‚àíx^a)^(b‚àí1) –∏ —Ü–µ–ª–æ—á–∏—Å–ª–µ–Ω–Ω—ã–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ a,b –≤ –¥–∏–∞–ø–∞–∑–æ–Ω–µ –æ—Ç 1 –¥–æ 20.
–í —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ –º–∞–∫—Å–∏–º–∏–∑–∞—Ü–∏–∏ —Ñ—É–Ω–∫—Ü–∏–∏ –ø—Ä–∞–≤–¥–æ–ø–æ–¥–æ–±–∏—è (–ø—Ä–∏ —É–∫–∞–∑–∞–Ω–Ω—ã—Ö –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è—Ö) –ì–ª–µ–±–æ–º –±—ã–ª–∏ –ø–æ–ª—É—á–µ–Ω—ã –∑–Ω–∞—á–µ–Ω–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤: a^=A –∏ b^=B.
–ó–∞–¥–∞—á–∞: –ø—É—Å—Ç—å X ‚Äì —Å–ª—É—á–∞–π–Ω–∞—è –≤–µ–ª–∏—á–∏–Ω–∞, —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –Ω–∞ –æ—Ç—Ä–µ–∑–∫–µ [0,1] —Å –ø–ª–æ—Ç–Ω–æ—Å—Ç—å—é f(x)=f(x;a^,b^), F(x) ‚Äì –µ–µ —Ñ—É–Ω–∫—Ü–∏—è —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è.
–¢—Ä–µ–±—É–µ—Ç—Å—è –Ω–∞–π—Ç–∏ –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–∂–∏–¥–∞–Ω–∏–µ E(X) –∏ X0, 2=F‚àí1(0,2) ‚Äì –∫–≤–∞–Ω—Ç–∏–ª—å —É—Ä–æ–≤–Ω—è 0,2. –ö–∞–∫–æ–π —Å–º—ã—Å–ª –¥–ª—è –≤—Å–µ–π –ø–æ–ø—É–ª—è—Ü–∏–∏ –∏–º–µ—é—Ç E(X) –∏ X0, 2?
–í –æ—Ç–≤–µ—Ç–µ —É–∫–∞–∂–∏—Ç–µ: 1) –∑–Ω–∞—á–µ–Ω–∏–µ A; 2) –∑–Ω–∞—á–µ–Ω–∏–µ B; 3) –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–∂–∏–¥–∞–Ω–∏–µ E(X); 4) –∫–≤–∞–Ω—Ç–∏–ª—å X0, 2.
'''
import numpy as np
import pandas as pd
import sympy as sp
from sympy import symbols as sym
from scipy import optimize
from scipy.optimize import root_scalar

data = np.array([np.float64(i) for i in '0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 2, 0, 0, 1, 1, 3, 4, 4, 5, 4, 6, 6, 11, 9, 19, 23, 25, 33, 36, 36, 46, 46, 49, 58, 90, 76, 66, 69, 75, 68, 44, 39, 21, 16, 5, 2, 1, 0, 0, 0'.split(',')])
data

a, b, x, n = sym('a b x n', real = True)
f = a*b*x**(a - 1)*(1 - x**a)**(b - 1)

L = 0
for i, j in zip(data, np.linspace(0, 1, len(data))):
    L += i*sp.log(f.subs({x : j}))

print(f'L –ø–æ –≤—ã–±–æ—Ä–∫–µ:')
display(L)

g = lambda ab: -L.subs({a : ab[0], b : ab[1]})
out = optimize.minimize(g, [1, 1], bounds = ([1, 20], [1, 20]))
A, B = [round(i) for i in out.x]
print(f'–û—Ç–≤–µ—Ç: \nA = {A} \nB = {B}')

E = sp.integrate(x * f.subs({a : A, b : B}), (x, 0, 1))
print(f'E(X) = {round(E, 3)}')

F = sp.integrate(f.subs({a : A, b : B}), (x, 0, x))
f_test = lambda l: np.float64(F.subs({x : l}) - 0.2)
q = root_scalar(f_test, bracket = [0, 1]).root
print(f'–ö–≤–∞–Ω—Ç–∏–ª—å X(0.2) = {round(q, 3)}')
"""
  
def ms_terver():
  return """
–í –ø–µ—Ä–≤–æ–º –±—Ä–æ—Å–∫–µ —É—á–∞—Å—Ç–≤—É—é—Ç 160 –Ω–µ—Å–∏–º–º–µ—Ç—Ä–∏—á–Ω—ã—Ö –º–æ–Ω–µ—Ç. –í–æ –≤—Ç–æ—Ä–æ–º –±—Ä–æ—Å–∫–µ —É—á–∞—Å—Ç–≤—É—é—Ç —Ç–æ–ª—å–∫–æ —Ç–µ –º–æ–Ω–µ—Ç—ã, –Ω–∞ –∫–æ—Ç–æ—Ä—ã—Ö –≤ –ø–µ—Ä–≤–æ–º –±—Ä–æ—Å–∫–µ –≤—ã–ø–∞–ª "–æ—Ä–µ–ª". –ò–∑–≤–µ—Å—Ç–Ω–æ, —á—Ç–æ –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å –≤—ã–ø–∞–¥–µ–Ω–∏—è "–æ—Ä–ª–∞" –¥–ª—è –¥–∞–Ω–Ω—ã—Ö –Ω–µ—Å–∏–º–º–µ—Ç—Ä–∏—á–Ω—ã—Ö –º–æ–Ω–µ—Ç —Ä–∞–≤–Ω–∞ 0,55. –ù–∞–π–¥–∏—Ç–µ: 1) –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–∂–∏–¥–∞–Ω–∏–µ —á–∏—Å–ª–∞ "–æ—Ä–ª–æ–≤", –≤—ã–ø–∞–≤—à–∏—Ö –≤–æ –≤—Ç–æ—Ä–æ–º –±—Ä–æ—Å–∫–µ; 2) –¥–∏—Å–ø–µ—Ä—Å–∏—é —É—Å–ª–æ–≤–Ω–æ–≥–æ –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –æ–∂–∏–¥–∞–Ω–∏—è —á–∏—Å–ª–∞ "–æ—Ä–ª–æ–≤", –≤—ã–ø–∞–≤—à–∏—Ö –≤–æ –≤—Ç–æ—Ä–æ–º –±—Ä–æ—Å–∫–µ, –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ —á–∏—Å–ª–∞ "–æ—Ä–ª–æ–≤", –≤—ã–ø–∞–≤—à–∏—Ö –≤ –ø–µ—Ä–≤–æ–º –±—Ä–æ—Å–∫–µ.

# X - –∫–æ–ª-–≤–æ –º–æ–Ω–µ—Ç –≤ –ø–µ—Ä–≤–æ–º –±—Ä–æ—Å–∫–µ, –Ω–∞ –∫–æ—Ç–æ—Ä—ã—Ö –≤—ã–ø–∞–ª –æ—Ä—ë–ª
# Yi(0 –∏–ª–∏ 1) - –∫–æ–ª-–≤–æ –æ—Ä–ª–æ–≤ –Ω–∞ i-—Ç–æ–π –º–æ–Ω–µ—Ç–µ –ø—Ä–∏ –≤—Ç–æ—Ä–æ–º –±—Ä–æ—Å–∫–µ
# Y = Y1 + Y2 + ... + Yx - –∫–æ–ª-–≤–æ –æ—Ä–ª–æ–≤, –≤—ã–ø–∞–≤—à–∏—Ö –≤–æ –≤—Ç–æ—Ä–æ–º –±—Ä–æ—Å–∫–µ
n = 160
p = 0.55
q = 1 - p

# X ~ Bin(n, p)
E_X = n*p
Var_X = n*p*q

# P(Yi = 0) = 1 - p, P(Yi = 1) = p
E_Yi = p
Var_Yi = p - p**2

# –ú–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–∂–∏–¥–∞–Ω–∏–µ —á–∏—Å–ª–∞ "–æ—Ä–ª–æ–≤", –≤—ã–ø–∞–≤—à–∏—Ö –≤–æ –≤—Ç–æ—Ä–æ–º –±—Ä–æ—Å–∫–µ:
# E(Y) = E(E(Y|X)) = E(E(Y1 + ... + Yx|X)) = E(X*E(Yi)) = E(Yi)*E(X)
E_Y = E_Yi * E_X
print('–ú–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–∂–∏–¥–∞–Ω–∏–µ —á–∏—Å–ª–∞ "–æ—Ä–ª–æ–≤", –≤—ã–ø–∞–≤—à–∏—Ö –≤–æ –≤—Ç–æ—Ä–æ–º –±—Ä–æ—Å–∫–µ:', E_Y)

# –î–∏—Å–ø–µ—Ä—Å–∏—è —É—Å–ª–æ–≤–Ω–æ–≥–æ –º–∞—Ç.–æ–∂–∏–¥–∞–Ω–∏—è —á–∏—Å–ª–∞ "–æ—Ä–ª–æ–≤", –≤—ã–ø–∞–≤—à–∏—Ö –≤–æ 2 –±—Ä–æ—Å–∫–µ, –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ —á–∏—Å–ª–∞ "–æ—Ä–ª–æ–≤", –≤—ã–ø–∞–≤—à–∏—Ö –≤ 1 –±—Ä–æ—Å–∫–µ:
# Var(E(Y|X)) = Var(X*E(Yi)) = E(Yi)^2*Var(X)
Var_E_YIX = E_Yi**2 * Var_X
print('–î–∏—Å–ø–µ—Ä—Å–∏—è —É—Å–ª–æ–≤–Ω–æ–≥–æ –º–∞—Ç.–æ–∂–∏–¥–∞–Ω–∏—è —á–∏—Å–ª–∞ "–æ—Ä–ª–æ–≤", –≤—ã–ø–∞–≤—à–∏—Ö –≤–æ 2 –±—Ä–æ—Å–∫–µ, –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ —á–∏—Å–ª–∞ "–æ—Ä–ª–æ–≤", –≤—ã–ø–∞–≤—à–∏—Ö –≤ 1 –±—Ä–æ—Å–∫–µ:', Var_E_YIX)

–í –ø–µ—Ä–≤–æ–º –±—Ä–æ—Å–∫–µ —É—á–∞—Å—Ç–≤—É—é—Ç 79 –Ω–µ—Å–∏–º–º–µ—Ç—Ä–∏—á–Ω—ã—Ö –º–æ–Ω–µ—Ç. –í–æ –≤—Ç–æ—Ä–æ–º –±—Ä–æ—Å–∫–µ —É—á–∞—Å—Ç–≤—É—é—Ç —Ç–æ–ª—å–∫–æ —Ç–µ –º–æ–Ω–µ—Ç—ã, –Ω–∞ –∫–æ—Ç–æ—Ä—ã—Ö –≤ –ø–µ—Ä–≤–æ–º –±—Ä–æ—Å–∫–µ –≤—ã–ø–∞–ª "–æ—Ä–µ–ª". –ò–∑–≤–µ—Å—Ç–Ω–æ, —á—Ç–æ –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å –≤—ã–ø–∞–¥–µ–Ω–∏—è "–æ—Ä–ª–∞" –¥–ª—è –¥–∞–Ω–Ω—ã—Ö –Ω–µ—Å–∏–º–º–µ—Ç—Ä–∏—á–Ω—ã—Ö –º–æ–Ω–µ—Ç —Ä–∞–≤–Ω–∞ 0,6. –ù–∞–π–¥–∏—Ç–µ: 1) –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–∂–∏–¥–∞–Ω–∏–µ —á–∏—Å–ª–∞ "–æ—Ä–ª–æ–≤", –≤—ã–ø–∞–≤—à–∏—Ö –≤–æ –≤—Ç–æ—Ä–æ–º –±—Ä–æ—Å–∫–µ; 2) –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–∂–∏–¥–∞–Ω–∏–µ —É—Å–ª–æ–≤–Ω–æ–π –¥–∏—Å–ø–µ—Ä—Å–∏–∏ —á–∏—Å–ª–∞ "–æ—Ä–ª–æ–≤", –≤—ã–ø–∞–≤—à–∏—Ö –≤–æ –≤—Ç–æ—Ä–æ–º –±—Ä–æ—Å–∫–µ, –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ —á–∏—Å–ª–∞ "–æ—Ä–ª–æ–≤", –≤—ã–ø–∞–≤—à–∏—Ö –≤ –ø–µ—Ä–≤–æ–º –±—Ä–æ—Å–∫–µ.

# X - –∫–æ–ª-–≤–æ –º–æ–Ω–µ—Ç –≤ –ø–µ—Ä–≤–æ–º –±—Ä–æ—Å–∫–µ, –Ω–∞ –∫–æ—Ç–æ—Ä—ã—Ö –≤—ã–ø–∞–ª –æ—Ä—ë–ª
# Yi(0 –∏–ª–∏ 1) - –∫–æ–ª-–≤–æ –æ—Ä–ª–æ–≤ –Ω–∞ i-—Ç–æ–π –º–æ–Ω–µ—Ç–µ –ø—Ä–∏ –≤—Ç–æ—Ä–æ–º –±—Ä–æ—Å–∫–µ
# Y = Y1 + Y2 + ... + Yx - –∫–æ–ª-–≤–æ –æ—Ä–ª–æ–≤, –≤—ã–ø–∞–≤—à–∏—Ö –≤–æ –≤—Ç–æ—Ä–æ–º –±—Ä–æ—Å–∫–µ
n = 79
p = 0.6
q = 1 - p

# X ~ Bin(n, p)
E_X = n*p
Var_X = n*p*q

# P(Yi = 0) = 1 - p, P(Yi = 1) = p
E_Yi = p
Var_Yi = p - p**2

# –ú–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–∂–∏–¥–∞–Ω–∏–µ —á–∏—Å–ª–∞ "–æ—Ä–ª–æ–≤", –≤—ã–ø–∞–≤—à–∏—Ö –≤–æ –≤—Ç–æ—Ä–æ–º –±—Ä–æ—Å–∫–µ:
# E(Y) = E(E(Y|X)) = E(E(Y1 + ... + Yx|X)) = E(X*E(Yi)) = E(Yi)*E(X)
E_Y = E_Yi * E_X
print('–ú–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–∂–∏–¥–∞–Ω–∏–µ —á–∏—Å–ª–∞ "–æ—Ä–ª–æ–≤", –≤—ã–ø–∞–≤—à–∏—Ö –≤–æ –≤—Ç–æ—Ä–æ–º –±—Ä–æ—Å–∫–µ:', E_Y)

# –î–∏—Å–ø–µ—Ä—Å–∏—è —É—Å–ª–æ–≤–Ω–æ–≥–æ –º–∞—Ç.–æ–∂–∏–¥–∞–Ω–∏—è —á–∏—Å–ª–∞ "–æ—Ä–ª–æ–≤", –≤—ã–ø–∞–≤—à–∏—Ö –≤–æ 2 –±—Ä–æ—Å–∫–µ, –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ —á–∏—Å–ª–∞ "–æ—Ä–ª–æ–≤", –≤—ã–ø–∞–≤—à–∏—Ö –≤ 1 –±—Ä–æ—Å–∫–µ:
# Var(E(Y|X)) = Var(X*E(Yi)) = E(Yi)^2*Var(X)
Var_E_YIX = E_Yi**2 * Var_X
print('–î–∏—Å–ø–µ—Ä—Å–∏—è —É—Å–ª–æ–≤–Ω–æ–≥–æ –º–∞—Ç.–æ–∂–∏–¥–∞–Ω–∏—è —á–∏—Å–ª–∞ "–æ—Ä–ª–æ–≤", –≤—ã–ø–∞–≤—à–∏—Ö –≤–æ 2 –±—Ä–æ—Å–∫–µ, –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ —á–∏—Å–ª–∞ "–æ—Ä–ª–æ–≤", –≤—ã–ø–∞–≤—à–∏—Ö –≤ 1 –±—Ä–æ—Å–∫–µ:', Var_E_YIX)

# –ú–∞—Ç–æ–∂–∏–¥–∞–Ω–∏–µ —É—Å–ª–æ–≤–Ω–æ–π –¥–∏—Å–ø–µ—Ä—Å–∏–∏ —á–∏—Å–ª–∞ "–æ—Ä–ª–æ–≤", –≤—ã–ø–∞–≤—à–∏—Ö –≤–æ 2 –±—Ä–æ—Å–∫–µ, –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ —á–∏—Å–ª–∞ "–æ—Ä–ª–æ–≤", –≤—ã–ø–∞–≤—à–∏—Ö –≤ 1 –±—Ä–æ—Å–∫–µ:
# E(Var(Y|X)) = E(Var(Y1 + ... + Yx|X)) = E(Var(Y1|X) + ... + Var(Yx|X)) = E(X*Var(Yi)) = Var(Yi)*E(X)
E_Var_YIX = Var_Yi * E_X
print('–ú–∞—Ç–æ–∂–∏–¥–∞–Ω–∏–µ —É—Å–ª–æ–≤–Ω–æ–π –¥–∏—Å–ø–µ—Ä—Å–∏–∏ —á–∏—Å–ª–∞ "–æ—Ä–ª–æ–≤", –≤—ã–ø–∞–≤—à–∏—Ö –≤–æ 2 –±—Ä–æ—Å–∫–µ, –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ —á–∏—Å–ª–∞ "–æ—Ä–ª–æ–≤", –≤—ã–ø–∞–≤—à–∏—Ö –≤ 1 –±—Ä–æ—Å–∫–µ:', E_Var_YIX)

–°—Ä–µ–¥–Ω–∏–π —É—â–µ—Ä–± –æ—Ç –æ–¥–Ω–æ–≥–æ –ø–æ–∂–∞—Ä–∞ —Å–æ—Å—Ç–∞–≤–ª—è–µ—Ç 4,4 –º–ª–Ω. —Ä—É–±. –ü—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ—Ç—Å—è, —á—Ç–æ —É—â–µ—Ä–± —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω –ø–æ –ø–æ–∫–∞–∑–∞—Ç–µ–ª—å–Ω–æ–º—É –∑–∞–∫–æ–Ω—É, –∞ —á–∏—Å–ª–æ –ø–æ–∂–∞—Ä–æ–≤ –∑–∞ –≥–æ–¥ - –ø–æ –∑–∞–∫–æ–Ω—É –ü—É–∞—Å—Å–æ–Ω–∞. –¢–∞–∫–∂–µ –∏–∑–≤–µ—Å—Ç–Ω–æ, —á—Ç–æ –∑–∞ 5 –ª–µ—Ç –≤ —Å—Ä–µ–¥–Ω–µ–º –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç 14 –ø–æ–∂–∞—Ä–æ–≤. –ù–∞–π–¥–∏—Ç–µ: 1) –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–∂–∏–¥–∞–Ω–∏–µ —Å—É–º–º–∞—Ä–Ω–æ–≥–æ —É—â–µ—Ä–±–∞ –æ—Ç –≤—Å–µ—Ö –ø–æ–∂–∞—Ä–æ–≤ –∑–∞ –æ–¥–∏–Ω –≥–æ–¥; 2) —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–µ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ —Å—É–º–º–∞—Ä–Ω–æ–≥–æ —É—â–µ—Ä–±–∞ –æ—Ç –ø–æ–∂–∞—Ä–æ–≤ –∑–∞ –≥–æ–¥.

mu = 4.4
n = 5 #–∑–∞ —Å—Ç–æ–ª—å–∫–æ –ª–µ—Ç
k = 14 #–ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Å—Ç–æ–ª—å–∫–æ –ø–æ–∂–∞—Ä–æ–≤

# Xi - —É—â–µ—Ä–± –æ—Ç i-—Ç–æ–≥–æ –ø–æ–∂–∞—Ä–∞, Xi ~ Exp(1/mu)
# Y - —á–∏—Å–ª–æ –ø–æ–∂–∞—Ä–æ–≤ –≤ –≥–æ–¥, Y ~ Pois(k/n)
# X - —Å—É–º–º–∞—Ä–Ω—ã–π —É—â–µ—Ä–±, X = X1 + ... + Xy

E_Y = k/n
Var_Y = k/n
E_Xi = mu
Var_Xi = mu**2

#–ú–∞—Ç–æ–∂–∏–¥–∞–Ω–∏–µ —Å—É–º–º–∞—Ä–Ω–æ–≥–æ —É—â–µ—Ä–±–∞ –æ—Ç –≤—Å–µ—Ö –ø–æ–∂–∞—Ä–æ–≤ –∑–∞ –≥–æ–¥
#E(X) = E(E(X|Y)) = E(E(X1 + ... + Xy|Y)) = E(Y*E(Xi)) = E(Xi)*E(Y)
E_X = E_Xi * E_Y
print('–ú–∞—Ç–æ–∂–∏–¥–∞–Ω–∏–µ —Å—É–º–º–∞—Ä–Ω–æ–≥–æ —É—â–µ—Ä–±–∞ –æ—Ç –≤—Å–µ—Ö –ø–æ–∂–∞—Ä–æ–≤ –∑–∞ –≥–æ–¥:', E_X)

#–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–µ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ —Å—É–º–º–∞—Ä–Ω–æ–≥–æ —É—â–µ—Ä–±–∞ –æ—Ç –≤—Å–µ—Ö –ø–æ–∂–∞—Ä–æ–≤ –∑–∞ –≥–æ–¥
#Var(X) = Var(E(X|Y)) + E(Var(X|Y))= Var(Y*E(Xi)) + E(Var(Xi)*Y)= E(Xi)^2*Var(Y) + Var(Xi)*E(Y)
Var_X = E_Xi**2 * Var_Y + Var_Xi * E_Y
std_X = Var_X**0.5
print('–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–µ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ —Å—É–º–º–∞—Ä–Ω–æ–≥–æ —É—â–µ—Ä–±–∞ –æ—Ç –≤—Å–µ—Ö –ø–æ–∂–∞—Ä–æ–≤ –∑–∞ –≥–æ–¥:', std_X)

–ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —É—â–µ—Ä–± –æ—Ç —Å—Ç—Ä–∞—Ö–æ–≤–æ–≥–æ —Å–ª—É—á–∞—è —Å–æ—Å—Ç–∞–≤–ª—è–µ—Ç 3,3 –º–ª–Ω. —Ä—É–±. –ü—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ—Ç—Å—è, —á—Ç–æ —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏–π —É—â–µ—Ä–± —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω —Ä–∞–≤–Ω–æ–º–µ—Ä–Ω–æ –æ—Ç 0 –¥–æ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–≥–æ —É—â–µ—Ä–±–∞, –∞ —á–∏—Å–ª–æ —Å—Ç—Ä–∞—Ö–æ–≤—ã—Ö —Å–ª—É—á–∞–µ–≤ –∑–∞ –≥–æ–¥ - –ø–æ –∑–∞–∫–æ–Ω—É –ü—É–∞—Å—Å–æ–Ω–∞. –¢–∞–∫–∂–µ –∏–∑–≤–µ—Å—Ç–Ω–æ, —á—Ç–æ –∑–∞ 10 –ª–µ—Ç –≤ —Å—Ä–µ–¥–Ω–µ–º –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç 12 —Å—Ç—Ä–∞—Ö–æ–≤—ã—Ö —Å–ª—É—á–∞–µ–≤. –ù–∞–π–¥–∏—Ç–µ: 1) –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–∂–∏–¥–∞–Ω–∏–µ —Å—É–º–º–∞—Ä–Ω–æ–≥–æ —É—â–µ—Ä–±–∞ –æ—Ç –≤—Å–µ—Ö —Å—Ç—Ä–∞—Ö–æ–≤—ã—Ö —Å–ª—É—á–∞–µ–≤ –∑–∞ –æ–¥–∏–Ω –≥–æ–¥; 2) —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–µ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ —Å—É–º–º–∞—Ä–Ω–æ–≥–æ —É—â–µ—Ä–±–∞ –æ—Ç —Å—Ç—Ä–∞—Ö–æ–≤—ã—Ö —Å–ª—É—á–∞–µ–≤ –∑–∞ –≥–æ–¥.

a = 0
b = 3.3 #–º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —É—â–µ—Ä–±
n = 10 #–∑–∞ —Å—Ç–æ–ª—å–∫–æ –ª–µ—Ç
k = 12 #–ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Å—Ç–æ–ª—å–∫–æ —Å–ª—É—á–∞–µ–≤

# Xi - —É—â–µ—Ä–± –æ—Ç i-—Ç–æ–≥–æ —Å–ª—É—á–∞—è, Xi ~ Unif(a, b)
# Y - —á–∏—Å–ª–æ —Å–ª—É—á–∞–µ–≤ –≤ –≥–æ–¥, Y ~ Pois(k/n)
# X - —Å—É–º–º–∞—Ä–Ω—ã–π —É—â–µ—Ä–±, X = X1 + ... + Xy

E_Y = k/n
Var_Y = k/n
E_Xi = (a+b)/2
Var_Xi = (b-a)**2/12

#–ú–∞—Ç–æ–∂–∏–¥–∞–Ω–∏–µ —Å—É–º–º–∞—Ä–Ω–æ–≥–æ —É—â–µ—Ä–±–∞ –æ—Ç –≤—Å–µ—Ö —Å—Ç—Ä–∞—Ö–æ–≤—ã—Ö —Å–ª—É—á–∞–µ–≤ –∑–∞ –≥–æ–¥
#E(X) = E(E(X|Y)) = E(E(X1 + ... + Xy|Y)) = E(Y*E(Xi)) = E(Xi)*E(Y)
E_X = E_Xi * E_Y
print('–ú–∞—Ç–æ–∂–∏–¥–∞–Ω–∏–µ —Å—É–º–º–∞—Ä–Ω–æ–≥–æ —É—â–µ—Ä–±–∞ –æ—Ç –≤—Å–µ—Ö —Å—Ç—Ä–∞—Ö–æ–≤—ã—Ö —Å–ª—É—á–∞–µ–≤ –∑–∞ –≥–æ–¥:', E_X)

#–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–µ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ —Å—É–º–º–∞—Ä–Ω–æ–≥–æ —É—â–µ—Ä–±–∞ –æ—Ç –≤—Å–µ—Ö —Å—Ç—Ä–∞—Ö–æ–≤—ã—Ö —Å–ª—É—á–∞–µ–≤ –∑–∞ –≥–æ–¥
#Var(X) = Var(E(X|Y)) + E(Var(X|Y))= Var(Y*E(Xi)) + E(Var(Xi)*Y)= E(Xi)^2*Var(Y) + Var(Xi)*E(Y)
Var_X = E_Xi**2 * Var_Y + Var_Xi * E_Y
std_X = Var_X**0.5
print('–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–µ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ —Å—É–º–º–∞—Ä–Ω–æ–≥–æ —É—â–µ—Ä–±–∞ –æ—Ç –≤—Å–µ—Ö —Å—Ç—Ä–∞—Ö–æ–≤—ã—Ö —Å–ª—É—á–∞–µ–≤ –∑–∞ –≥–æ–¥:', std_X)

–î–ª—è —Å–ª—É—á–∞–π–Ω–æ–π —Ü–µ–Ω—ã Y –∏–∑–≤–µ—Å—Ç–Ω—ã –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–∏: P(Y=2)=0,6 –∏ P(Y=15)=0,4. –ü—Ä–∏ —É—Å–ª–æ–≤–∏–∏, —á—Ç–æ Y=y, —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –≤—ã—Ä—É—á–∫–∏ X —è–≤–ª—è–µ—Ç—Å—è —Ä–∞–≤–Ω–æ–º–µ—Ä–Ω—ã–º –Ω–∞ –æ—Ç—Ä–µ–∑–∫–µ [0, 7y]. –ù–∞–π–¥–∏—Ç–µ: 1) –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–∂–∏–¥–∞–Ω–∏–µ E(XY); 2) –∫–æ–≤–∞—Ä–∏–∞—Ü–∏—é Cov(X,Y).

y1 = 2
y2 = 15
p1 = 0.6
p2 = 0.4
E_Y = y1*p1 + y2*p2

y = 7
# X|Y=y1 ~ Unif(0, y*y1)
# X|Y=y2 ~ Unif(0, y*y2)
E_XIY_y1 = y*y1/2
E_XIY_y2 = y*y2/2

E_X = E_XIY_y1*p1 + E_XIY_y2*p2
E_XY = E_XIY_y1*y1*p1 + E_XIY_y2*y2*p2
print('E(XY) =', E_XY)

Cov_XY = E_XY - E_X*E_Y
print('Cov(X, Y) =', Cov_XY)

–ò–≥—Ä–∞–ª—å–Ω–∞—è –∫–æ—Å—Ç—å –∏ 29 –º–æ–Ω–µ—Ç –ø–æ–¥–±—Ä–∞—Å—ã–≤–∞—é—Ç—Å—è –¥–æ —Ç–µ—Ö –ø–æ—Ä, –ø–æ–∫–∞ –≤ –æ—á–µ—Ä–µ–¥–Ω–æ–º –±—Ä–æ—Å–∫–µ –Ω–µ –≤—ã–ø–∞–¥–µ—Ç —Ä–æ–≤–Ω–æ 8 "–æ—Ä–ª–æ–≤". –ü—É—Å—Ç—å S ‚Äì —Å—É–º–º–∞—Ä–Ω–æ–µ —á–∏—Å–ª–æ –æ—á–∫–æ–≤, –≤—ã–ø–∞–≤—à–∏—Ö –Ω–∞ –∏–≥—Ä–∞–ª—å–Ω–æ–π –∫–æ—Å—Ç–∏ –ø—Ä–∏ –≤—Å–µ—Ö –±—Ä–æ—Å–∫–∞—Ö. –ù–∞–π–¥–∏—Ç–µ: 1) –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–∂–∏–¥–∞–Ω–∏–µ E(S); 2) —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–µ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ œÉS.

import math

n = 29 #–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –º–æ–Ω–µ—Ç
o = 8 #–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—Ä–ª–æ–≤
p = math.comb(n, o)*(0.5)**o*(0.5)**(n-o)

# X - –∫–æ–ª-–≤–æ –±—Ä–æ—Å–∫–æ–≤ –¥–æ –ø–æ—è–≤–ª–µ–Ω–∏—è o –æ—Ä–ª–æ–≤, X ~ Geom(p)
# Yi - —á–∏—Å–ª–æ –æ—á–∫–æ–≤ –Ω–∞ i-—Ç–æ–π –∫–æ—Å—Ç–∏
# S - —Å—É–º–º–∞—Ä–Ω–æ–µ —á–∏—Å–ª–æ –æ—á–∫–æ–≤ –ø—Ä–∏ –≤—Å–µ—Ö –±—Ä–æ—Å–∫–∞—Ö, S = Y1 + ... + Yx

E_X = 1/p
Var_X = (1-p)/(p**2)
E_Yi = (1/6)*(1+2+3+4+5+6)
Var_Yi = (1/6)*(1+4+9+16+25+36) - E_Yi**2

#E(S) = E(E(S|X)) = E(Yi)*E(X)
E_S = E_Yi * E_X
print('–ú–∞—Ç–æ–∂–∏–¥–∞–Ω–∏–µ E(S):', E_S)

#Var(S) = Var(E(S|X)) + E(Var(S|X)) = E(Yi)^2*Var(X) + Var(Yi)*E(X)
Var_X = E_Yi**2 * Var_X + Var_Yi * E_X
std_X = math.sqrt(Var_X)
print('–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–µ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ:', std_X)

–ß–∏—Å–ª–æ Y —Ä–∞–¥–∏–æ—Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏—Ö –ø—Ä–∏–±–æ—Ä–æ–≤, —Å–¥–∞–≤–∞–µ–º—ã—Ö –ø–æ–∫—É–ø–∞—Ç–µ–ª—è–º–∏ –≤ –≥–∞—Ä–∞–Ω—Ç–∏–π–Ω—É—é
–º–∞—Å—Ç–µ—Ä—Å–∫—É—é –≤ —Ç–µ—á–µ–Ω–∏–∏ –¥–Ω—è, –º–æ–∂–Ω–æ –ø—Ä–µ–¥—Å—Ç–∞–≤–∏—Ç—å –≤ –≤–∏–¥–µ —Å–ª—É—á–∞–π–Ω–æ–π –≤–µ–ª–∏—á–∏–Ω—ã,
—Ö–æ—Ä–æ—à–æ –æ–ø–∏—Å—ã–≤–∞–µ–º–æ–π —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ–º –ü—É–∞—Å—Å–æ–Ω–∞ pois(Œª), –≥–¥–µ Œª —è–≤–ª—è–µ—Ç—Å—è —Å—Ä–µ–¥–Ω–∏–º
—á–∏—Å–ª–æ–º —Ä–∞–¥–∏–æ–ø—Ä–∏–±–æ—Ä–æ–≤, —Å–¥–∞–Ω–Ω—ã—Ö –∑–∞ –¥–µ–Ω—å. –í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å —Ç–æ–≥–æ, —á—Ç–æ —Å–¥–∞–Ω–Ω—ã–π –ø—Ä–∏–±–æ—Ä
–ø–æ—Ç—Ä–µ–±—É–µ—Ç –¥–ª–∏—Ç–µ–ª—å–Ω–æ–≥–æ —Ä–µ–º–æ–Ω—Ç–∞, —Ä–∞–≤–Ω–∞ p. –ù–∞–π–¥–∏—Ç–µ —Å—Ä–µ–¥–Ω–µ–µ —á–∏—Å–ª–æ —Å–¥–∞–Ω–Ω—ã—Ö
–ø—Ä–∏–±–æ—Ä–æ–≤, —Ç—Ä–µ–±—É—é—â–∏—Ö –¥–ª–∏—Ç–µ–ª—å–Ω–æ–≥–æ —Ä–µ–º–æ–Ω—Ç–∞.

# X - —á–∏—Å–ª–æ —Å–¥–∞–Ω–Ω—ã—Ö –ø—Ä–∏–±–æ—Ä–æ–≤, —Ç—Ä–µ–±—É—é—â–∏—Ö –¥–ª–∏—Ç–µ–ª—å–Ω–æ–≥–æ —Ä–µ–º–æ–Ω—Ç–∞
# Y - —á–∏—Å–ª–æ —Å–¥–∞–Ω–Ω—ã—Ö –ø—Ä–∏–±–æ—Ä–æ–≤
# Y ~ pois(l)
#p =
#l =

#X|Y ~ Bin(Y, p)
#E(Y) = l
#E(X) = E(E(X|Y)) = E(Y*p) = p*E(Y) = p*l

E_X = p*l
print(E_X)

–ï–∂–µ–¥–Ω–µ–≤–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–∫—É–ø–∞—Ç–µ–ª–µ–π –º–∞–≥–∞–∑–∏–Ω–∞, —Å–æ–≤–µ—Ä—à–∏–≤—à–∏—Ö –ø–æ–∫—É–ø–∫—É, –æ–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è —Å–ª—É—á–∞–π–Ω–æ–π –≤–µ–ª–∏—á–∏–Ω–æ–π X, —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–π –ø–æ –±–∏–Ω–æ–º–∏–∞–ª—å–Ω–æ–º—É –∑–∞–∫–æ–Ω—É —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ n = 500 –∏ p = 0.54. –ê —Å—É–º–º–∞ —á–µ–∫–∞ (–≤ —Ä—É–±–ª—è—Ö) –∫–∞–∂–¥–æ–≥–æ –∏–∑ –ø–æ–∫—É–ø–∞—Ç–µ–ª–µ–π –æ–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è —Å–ª—É—á–∞–π–Ω–æ–π –≤–µ–ª–∏—á–∏–Ω–æ–π Y, —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–π –ø–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ–º—É –∑–∞–∫–æ–Ω—É —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ m = 5500 –∏ œÉ = 80. –í—ã—á–∏—Å–ª–∏—Ç–µ –∑–Ω–∞—á–µ–Ω–∏—è –¥–ª—è —Å—Ä–µ–¥–Ω–µ–≥–æ (E) –∏ –¥–∏—Å–ø–µ—Ä—Å–∏–∏ –≤—ã—Ä—É—á–∫–∏ –º–∞–≥–∞–∑–∏–Ω–∞. –û—Ü–µ–Ω–∏—Ç–µ –º–µ—Ç–æ–¥–æ–º –ú–æ–Ω—Ç–µ-–ö–∞—Ä–ª–æ –µ–∂–µ–¥–Ω–µ–≤–Ω—É—é —Å—Ä–µ–¥–Ω—é—é –≤—ã—Ä—É—á–∫—É –º–∞–≥–∞–∑–∏–Ω–∞ –∏ –µ–µ –¥–∏—Å–ø–µ—Ä—Å–∏—é.

#X - –∫–æ–ª-–≤–æ–ª –ø–æ–∫—É–ø–∞—Ç–µ–ª–µ–π –≤ –¥–µ–Ω—å X ~ Bin(n, p)
#Yi - —Å—É–º–º–∞ —á–µ–∫–∞ Yi ~ N(mu, sigma)
#Y = Y1 + ... + Yx - –µ–∂–µ–¥–Ω–µ–≤–Ω–∞—è –≤—ã—Ä—É—á–∫–∞

#E(Y) = E(E(Y|X)) = E(X)*E(Yi) = n*p*mu
#Var(Y) = Var(E(Y|X)) + E(Var(Y|X)) = E(Yi)^2 * Var(X) + E(X) * Var(Yi) = mu**2 * n*p*q + n*p * sigma**2

n = 500
p = 0.54
q = 1 - p
mu = 5500
sigma = 80

E_Y = n*p*mu
Var_Y = mu**2 * n*p*q + n*p * sigma**2
print('E(Y)', E_Y)
print('Var(Y)', Var_Y)

–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–ø–æ–∑–¥–∞–≤—à–∏—Ö –Ω–∞ —Å–∞–º–æ–ª–µ—Ç –ø–∞—Å—Å–∞–∂–∏—Ä–æ–≤ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ä–µ–π—Å–∞ –æ–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è —Å–ª—É—á–∞–π–Ω–æ–π –≤–µ–ª–∏—á–∏–Ω–æ–π X, —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–π –ø–æ –∑–∞–∫–æ–Ω—É –ü—É–∞—Å—Å–æ–Ω–∞ —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º Œª = 4. –ü—Ä–∏ —ç—Ç–æ–º —Å—Ç–æ–∏–º–æ—Å—Ç—å –±–∏–ª–µ—Ç–∞, –∫–æ—Ç–æ—Ä—ã–π –Ω–µ –ø–æ–¥–ª–µ–∂–∏—Ç –≤–æ–∑–≤—Ä–∞—Ç—É, –æ–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –Ω–æ—Ä–º–∞–ª—å–Ω–æ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–π —Å–ª—É—á–∞–π–Ω–æ–π –≤–µ–ª–∏—á–∏–Ω–æ–π Y —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ m=3500 –∏ œÉ=207.9. –í—ã—á–∏—Å–ª–∏—Ç–µ –∑–Ω–∞—á–µ–Ω–∏—è –¥–ª—è —Å—Ä–µ–¥–Ω–µ–≥–æ (E) –∏ —Å—Ä–µ–¥–Ω–µ–∫–≤–∞–¥—Ä–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏—è (œÉ) —Å—É–º–º—ã —Å—Ç–æ–∏–º–æ—Å—Ç–∏ –ø—Ä–æ–ø–∞–≤—à–∏—Ö –±–∏–ª–µ—Ç–æ–≤ –Ω–∞ —Ä–µ–π—Å. –û—Ü–µ–Ω–∏—Ç–µ –º–µ—Ç–æ–¥–æ–º –ú–æ–Ω—Ç–µ-–ö–∞—Ä–ª–æ —Å—Ä–µ–¥–Ω—é—é —Å—É–º–º—É —Å—Ç–æ–∏–º–æ—Å—Ç–∏ –ø—Ä–æ–ø–∞–≤—à–∏—Ö –±–∏–ª–µ—Ç–æ–≤ –∏ –µ–µ —Å—Ä–µ–¥–Ω–µ–∫–≤–∞–¥—Ä–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ, –ø—Ä–∏—Ö–æ–¥—è—â–∏–µ—Å—è –Ω–∞ –∫–∞–∂–¥—ã–π —Ä–µ–π—Å.

#X - –∫–æ–ª-–≤–æ–ª –æ–ø–æ–∑–¥–∞–≤—à–∏—Ö –∑–∞ —Ä–µ–π—Å X ~ Pois(l)
#Yi - —Å—Ç–æ–∏–º–æ—Å—Ç—å 1 –Ω–µ–≤–æ–∑–≤—Ä–∞—Ç–Ω–æ–≥–æ –±–∏–ª–µ—Ç–∞ Yi ~ N(mu, sigma)
#Y = Y1 + ... + Yx - –æ–±—â–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å –ø—Ä–æ–ø–∞–≤—à–∏—Ö –±–∏–ª–µ—Ç–æ–≤

#E(Y) = E(E(Y|X)) = E(X)*E(Yi) = l*mu
#Var(Y) = Var(E(Y|X)) + E(Var(Y|X)) = E(Yi)^2 * Var(X) + E(X) * Var(Yi) = mu**2 * l + l * sigma**2

l = 4
mu = 3500
sigma = 207.9

E_Y = l*mu
Var_Y = mu**2 * l + l * sigma**2
std_Y = Var_Y**0.5

print('E(Y)', E_Y)
print('std_Y =', std_Y)

–ò–º–µ–µ—Ç—Å—è 12 –∏–≥—Ä–∞–ª—å–Ω—ã—Ö –∫–æ—Å—Ç–µ–π. –í –ø–µ—Ä–≤—ã–π —Ä–∞–∑ –±—Ä–æ—Å–∞—é—Ç—Å—è –≤—Å–µ –∏–≥—Ä–∞–ª—å–Ω—ã–µ –∫–æ—Å—Ç–∏, –≤–æ
–≤—Ç–æ—Ä–æ–π —Ä–∞–∑ ‚Äì —Ç–æ–ª—å–∫–æ —Ç–µ, –Ω–∞ –∫–æ—Ç–æ—Ä—ã—Ö –≤ –ø–µ—Ä–≤—ã–π —Ä–∞–∑ –≤—ã–ø–∞–ª–æ —á–µ—Ç–Ω–æ–µ —á–∏—Å–ª–æ –æ—á–∫–æ–≤. –ü—É—Å—Ç—å
S ‚Äì —Å—É–º–º–∞ –æ—á–∫–æ–≤ –ø—Ä–∏ –≤—Ç–æ—Ä–æ–º –±—Ä–æ—Å–∫–µ. –ù–∞–π–¥–∏—Ç–µ E(S) –∏ D(S). (–û—Ç–≤–µ—Ç. 21 –∏ 54,25)

#X - –∫–æ–ª-–≤–æ–ª –∫–æ—Å—Ç–µ–π –Ω–∞ –∫–æ—Ç–æ—Ä—ã—Ö –≤ 1 —Ä–∞–∑ –≤—ã–ø–∞–ª–æ —á–µ—Ç–Ω–æ–µ —á–∏—Å–ª–æ X ~ Bin(n, p)
#Si - –∫–æ–ª-–≤–æ –æ—á–∫–æ–≤ –Ω–∞ 1 –∏–≥—Ä–∞–ª—å–Ω–æ–π –∫–æ—Å—Ç–∏ –ø—Ä–∏ 2 –±—Ä–æ—Å–∫–µ E(Si) = (1/6)*(1+2+3+4+5+6), Var(Si) = (1/6)*(1+4+9+16+25+36) - E(Si)**2
#S = S1 + ... + Sx - –æ–±—â–µ–µ –∫–æ–ª-–≤–æ –æ—á–∫–æ–≤ –ø—Ä–∏ –≤—Ç–æ—Ä–æ–º –±—Ä–æ—Å–∫–µ

#E(S) = E(E(S|X)) = E(X)*E(Si) = E_Si * n * p
#Var(S) = Var(E(S|X)) + E(Var(S|X)) = E(Si)^2 * Var(X) + E(X) * Var(Si) = E_Si**2 * n*p*q + n*p * Var_Si

n = 12
p = 1/2
q = 1 - p

E_Si = (1/6)*(1+2+3+4+5+6)
Var_Si = (1/6)*(1+4+9+16+25+36) - E_Si**2

E_S = E_Si * n * p
Var_S = E_Si**2 * n*p*q + n*p * Var_Si

print('E(S)', E_S)
print('Var(S)', Var_S)

–ò–≥—Ä–∞–ª—å–Ω–∞—è –∫–æ—Å—Ç—å –ø–æ–¥–±—Ä–∞—Å—ã–≤–∞–µ—Ç—Å—è –¥–æ —Ç–µ—Ö –ø–æ—Ä, –ø–æ–∫–∞ –Ω–µ –≤—ã–ø–∞–¥–µ—Ç 6 –æ—á–∫–æ–≤. –ü—É—Å—Ç—å S ‚Äì —Å—É–º–º–∞ –æ—á–∫–æ–≤ –≤–æ –≤—Å–µ—Ö –±—Ä–æ—Å–∫–∞—Ö, –∫—Ä–æ–º–µ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ (S=0, –µ—Å–ª–∏ 6 –æ—á–∫–æ–≤ –≤—ã–ø–∞–ª–æ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –±—Ä–æ—Å–∫–µ). –ù–∞–π–¥–∏—Ç–µ E(S) –∏ D(S). (–û—Ç–≤–µ—Ç. 15 –∏ 280)

#X - –ß–ò–°–õ–û –ë–†–û–°–ö–û–í –ö–û–°–¢–ò –î–û –ü–ï–†–í–û–ô 6 –í–ö–õ–Æ–ß–ò–¢–ï–õ–¨–ù–û X ~ Geom(p=1/6)
#Si - –∫–æ–ª-–≤–æ –æ—á–∫–æ–≤ –Ω–∞ –∫–æ—Å—Ç–∏ –ø—Ä–∏ i-—Ç–æ–º –±—Ä–æ—Å–∫–µ E(Si) = (1/5)*(1+2+3+4+5), Var(Si) = (1/5)*(1+4+9+16+25) - E(Si)**2
#S = S1 + ... + S_x-1 - –æ–±—â–µ–µ –∫–æ–ª-–≤–æ –æ—á–∫–æ–≤ –ø—Ä–∏ –≤—Ç–æ—Ä–æ–º –±—Ä–æ—Å–∫–µ

#E(S) = E(E(S|X)) = E((X-1)*E(Si)) = E(X-1)*E(Si) = (E(X)-1)*E(Si)
#Var(S) = Var(E(S|X)) + E(Var(S|X)) = E(Si)^2 * Var(X-1) + E(X-1) * Var(Si) = E_Si**2 * Var(X) + (E(X)-1) * Var_Si

p=1/6
q=1-p
E_X = 1/p
Var_X = q/p**2

E_Si = (1/5)*(1+2+3+4+5)
Var_Si = (1/5)*(1+4+9+16+25) - E_Si**2

E_S = E_Si * (E_X-1)
Var_S = E_Si**2 * Var_X + (E_X-1) * Var_Si

print('E(S)', E_S)
print('Var(S)', Var_S)

–î–∞–Ω–∞ –ø–ª–æ—Ç–Ω–æ—Å—Ç—å —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–∏ –¥–≤—É–º–µ—Ä–Ω–æ–π —Å–ª—É—á–∞–π–Ω–æ–π –≤–µ–ª–∏—á–∏–Ω—ã fX,Y(x, y) = {C(x2 + y2), 0 ‚â§ x ‚â§ 1, 0 ‚â§ y ‚â§ 1; {0, (x, y) ‚àâ [0,1] √ó [0,1].

–ù–∞–π–¥–∏—Ç–µ C, fX(x), fY(y), E(X), E(Y), œÉX, œÉY. –í—ã—è—Å–Ω–∏—Ç—å, –∑–∞–≤–∏—Å–∏–º—ã –ª–∏ X –∏ Y –∏ –ø—Ä–∏ –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω–æ–º –æ—Ç–≤–µ—Ç–µ –Ω–∞–π—Ç–∏ Cov(X, Y).

import sympy as sp
x, y, C=sp.symbols('x y C', real=True)
f=C*(x**2+y**2)

inner_integral=sp.integrate(f,(y,0,1))
#print(inner_integral)
outer_integral=sp.integrate(inner_integral,(x,0,1))
#print(outer_integral)
C0=sp.solve(outer_integral-1,C)
C0=C0[0]
print(C0)

f=f.subs(C,C0)
#print(f)
f_x=sp.integrate(f,(y,0,1))
print(f_x)
f_y=sp.integrate(f,(x,0,1))
print(f_y)
E_X=sp.integrate(x*f_x,(x,0,1))
print(E_X)
E_Y=sp.integrate(y*f_y,(y,0,1))
print(E_Y)
E_X2=sp.integrate(x**2*f_x,(x,0,1))
#print(E_X2)
Var_X=E_X2-E_X**2
print(Var_X**0.5)
E_XY_inner=sp.integrate(x*y*f,(y,0,1))
#print(E_XY_inner)
E_XY=sp.integrate(E_XY_inner,(x,0,1))
print(E_XY)
# –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å: f_x * f_y == f => –ï—Å–ª–∏ True, —Ç–æ X –∏ Y –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã
Cov_XY=E_XY-E_X*E_Y
Cov_XY

–°–∏—Å—Ç–µ–º–∞ –¥–≤—É—Ö –Ω–µ–ø—Ä–µ—Ä—ã–≤–Ω—ã—Ö —Å–ª—É—á–∞–π–Ω—ã—Ö –≤–µ–ª–∏—á–∏–Ω (X, Y) –∏–º–µ–µ—Ç –ø–ª–æ—Ç–Ω–æ—Å—Ç—å —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è:
fX,Y(x, y) = {Cxy, (x, y) ‚àà D; 0, (x, y) ‚àâ D,
–≥–¥–µ D –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–∏—Ç {(x, y): x ‚â• 0, y ‚â• 0, x + y ‚àí 1 ‚â§ 0}. 
–ù–∞–π–¥–∏—Ç–µ C, E(X), E(Y), œÉX, œÉY, œÅ(X, Y).

x, y, C=sp.symbols('x y C', real=True)
f = C*x*y

inner_integral=sp.integrate(f,(y, 0, 1-x))
inner_integral

outer_integral=sp.integrate(inner_integral,(x,0,1))
outer_integral

C1 = sp.solve(outer_integral-1)[0]
C1

f = 24*x*y
f

fx = sp.integrate(f, (y, 0, 1-x))
fx

EX = sp.integrate(x*fx, (x, 0, 1))
EX

fy = sp.integrate(f, (x, 0, 1-y))
fy

EY = sp.integrate(y*fy, (y, 0, 1))
EY

EX2 = sp.integrate(x**2*fx, (x, 0, 1))
EX2

EY2 = sp.integrate(y**2*fy, (y, 0, 1))
EY2

sigmaX = (EX2 - EX**2)**0.5
sigmaX

sigmaY = (EY2 - EY**2)**0.5
sigmaY

inner = sp.integrate(x*y*f, (y, 0, 1-x))
inner

EXY = sp.integrate(inner, (x, 0, 1))
EXY

roXY = (EXY - EX * EY)/(sigmaX * sigmaY)
roXY

–î–ª—è —Å–ª—É—á–∞–π–Ω–æ–≥–æ –≤–µ–∫—Ç–æ—Ä–∞ (X, Y) —Å –ø–ª–æ—Ç–Ω–æ—Å—Ç—å—é —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è
fX,Y(x, y) = {1/œÄ*x + C, x^2 + y^2 ‚â§ 1,0, x^2 + y^2 > 1
–ù–∞–π–¥–∏—Ç–µ –°, –ø–ª–æ—Ç–Ω–æ—Å—Ç–∏ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç fX(x), fY(y),E(X), E(Y).

x, y, C=sp.symbols('x y C', real=True)
f=1/sp.pi*x+C
f

r, phi, C=sp.symbols('r, phi, C', real=True)
f1=(1/sp.pi*r*sp.cos(phi)+C)

inner = sp.integrate(f1*r,(r, 0, 1))
inner

outer = sp.integrate(inner,(phi, 0, 2*sp.pi))
outer

C0=sp.solve(outer-1,C)[0]
C0

f = f.subs(C, C0)
f

fx = sp.integrate(f, (y, -(1-x**2)**0.5, (1-x**2)**0.5))
fx

fy = sp.integrate(f, (x, -(1-y**2)**0.5, (1-y**2)**0.5))
fy

EX= sp.integrate(x*fx, (x, -1, 1))
EX

EY= sp.integrate(y*fy, (y, -1, 1))
EY

fX_Y = f/fy
fX_Y

EX_Y = sp.integrate(x*fX_Y, (x, -1, 1))
EX_Y

–î–≤—É–º–µ—Ä–Ω—ã–π —Å–ª—É—á–∞–π–Ω—ã–π –≤–µ–∫—Ç–æ—Ä (X, Y) —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω —Ä–∞–≤–Ω–æ–º–µ—Ä–Ω–æ –≤ –æ–±–ª–∞—Å—Ç–∏ D, –≥–¥–µ D = {‚àí2 ‚â§ x ‚â§ 2, ‚àí2 ‚â§ y ‚â§ 2}. –ù–∞–π—Ç–∏ –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å —Å–æ–±—ã—Ç–∏—è {X^2 - Y^2 ‚â• 1}.

x, y = sp.symbols('x y', real=True)
f = 1/16

inner_integral = sp.integrate(1/16, (y, 0, sp.sqrt(x**2-1)))
outer_integral = sp.integrate(inner_integral, (x, 1, 2))

outer_integral*4

–ü–ª–æ—Ç–Ω–æ—Å—Ç—å —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Å–ª—É—á–∞–π–Ω–æ–≥–æ –≤–µ–∫—Ç–æ—Ä–∞ (X, Y) –∏–º–µ–µ—Ç –≤–∏–¥:
fX,Y(x, y) = {C*cos(x + y) , x + 2y ‚â§ œÄ/2, x ‚â• 0, y ‚â• 0; 0, –≤ –æ—Å—Ç–∞–ª—å–Ω—ã—Ö —Å–ª—É—á–∞—è—Ö.
–ù–∞–π–¥–∏—Ç–µ C, fX(x), fY(y) –∏ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, –±—É–¥—É—Ç –ª–∏ —Å–ª—É—á–∞–π–Ω—ã–µ –≤–µ–ª–∏—á–∏–Ω—ã –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã–º–∏. –í—ã—á–∏—Å–ª–∏—Ç–µ –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å –ø–æ–ø–∞–¥–∞–Ω–∏—è –≤ –∫–≤–∞–¥—Ä–∞—Ç, –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–π –ª–∏–Ω–∏—è–º–∏ x = 0, y = 0, x =œÄ/4, y =œÄ/4.

import sympy as sp

x, y, C = sp.symbols('x y C', real = True)
f=C*sp.cos(x+y)

inner_integral=sp.integrate(f,(y,0,sp.pi/4-x/2))
outer_integral = sp.integrate(inner_integral, (x, 0, sp.pi/2))
outer_integral

C0=sp.solve(outer_integral-1, C)
C0=C0[0]
print(C0.evalf()) #–Ω–∞—à–ª–∏ C
C0

f=f.subs(C, C0)
f

f_x = sp.integrate(f, (y, 0, sp.pi/4-x/2))
f_x #–Ω–∞—à–ª–∏ f(x)

f_y = sp.integrate(f, (x, 0, sp.pi/2 - 2*y))
f_y #–Ω–∞—à–ª–∏ f(y)

f_x * f_y == f #X –∏ Y –∑–∞–≤–∏—Å–∏–º—ã

inner = sp.integrate(f, (y, 0, sp.pi/4-x/2))
outer = sp.integrate(inner,(x, 0, sp.pi/4))
outer.evalf() #–Ω–∞—à–ª–∏ P –ø–æ–ø–∞–¥–∞–Ω–∏—è –≤ –∫–≤–∞–¥—Ä–∞—Ç

–°–ª—É—á–∞–π–Ω—ã–π –≤–µ–∫—Ç–æ—Ä (X, Y) —Ä–∞–≤–Ω–æ–º–µ—Ä–Ω–æ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—ë–Ω –≤ —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫–µ x ‚â• 0; y ‚â• 0; 33x + y ‚â§ 33. –ù–∞–π–¥–∏—Ç–µ E(X*10Y).

import sympy as sp
f = sp.Rational(1, (1/2*33*1)) #—Ç–∞–∫ –∫–∞–∫ —Å–ª—É—á–∞–π–Ω—ã–π –≤–µ–∫—Ç–æ—Ä —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—ë–Ω —Ä–∞–≤–Ω–æ–º–µ—Ä–Ω–æ, –ø–ª–æ—Ç–Ω–æ—Å—Ç—å —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Ä–∞–≤–Ω–∞ 1/–ø–ª–æ—â–∞–¥—å —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫–∞
f

inner = sp.integrate(x**10*y*f, (y, 0, 33-33*x))
E_X10Y = sp.integrate(inner, (x, 0, 1))
E_X10Y #–Ω–∞—à–ª–∏ E(X^10Y)

–î–ª—è —Å–ª—É—á–∞–π–Ω–æ–≥–æ –≤–µ–∫—Ç–æ—Ä–∞ (X,Y) —Å –ø–ª–æ—Ç–Ω–æ—Å—Ç—å—é —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è
fX,Y(x, y) ={C, x^2/9+y^2/4 ‚â§ 1; 0, x^2/9+y^2/4 > 1
–ù–∞–π—Ç–∏ –°, –ø–ª–æ—Ç–Ω–æ—Å—Ç–∏ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç fX(x), fY(y), –∏ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å Var(X|Y = y), Var(Y|X = x).
–ó–∞–ø–∏—Å–∞—Ç—å —Ä–µ–≥—Ä–µ—Å—Å–∏–∏ Y –Ω–∞ x –∏ X –Ω–∞ y.

import sympy as sp

r, phi, C = sp.symbols('r, phi, C', real=True)
f = C

inner = sp.integrate(f*6*r,(r, 0, 1))
outer = sp.integrate(inner,(phi, 0, 2*sp.pi))
outer

C0=sp.solve(outer-1,C)[0]
C0 #–Ω–∞—à–ª–∏ C

f = f.subs(C, C0)
f

f_x = sp.integrate(f, (y, -sp.sqrt(4 - 4*x**2/9), sp.sqrt(4 - 4*x**2/9)))
f_x #–Ω–∞—à–ª–∏ f(x)

f_y = sp.integrate(f, (x, -3*sp.sqrt(1 - y**2/4), 3*sp.sqrt(1 - y**2/4)))
f_y #–Ω–∞—à–ª–∏ f(y)

E_XIY = sp.integrate(x*f/f_y, (x, -3*sp.sqrt(1 - y**2/4), 3*sp.sqrt(1 - y**2/4)))
E_X2IY = sp.integrate(x**2*f/f_y, (x, -3*sp.sqrt(1 - y**2/4), 3*sp.sqrt(1 - y**2/4)))
Var_XIY = E_X2IY - E_XIY**2
Var_XIY #–Ω–∞—à–ª–∏ Var(X|Y=y)

E_YIX = sp.integrate(y*f/f_x, (y, -2*sp.sqrt(1 - x**2/9), 2*sp.sqrt(1 - x**2/9)))
E_Y2IX = sp.integrate(y**2*f/f_x, (y, -2*sp.sqrt(1 - x**2/9), 2*sp.sqrt(1 - x**2/9)))
Var_YIX = E_Y2IX - E_YIX**2
Var_YIX #–Ω–∞—à–ª–∏ Var(Y|X=x)

E_XIY = sp.integrate(x*f/f_y, (x, -3*sp.sqrt(1 - y**2/4), 3*sp.sqrt(1 - y**2/4)))
E_XIY #–Ω–∞—à–ª–∏ —Ä–µ–≥—Ä–µ—Å—Å–∏—é X –Ω–∞ —É

E_YIX = sp.integrate(y*f/f_x, (y, -2*sp.sqrt(1 - x**2/9), 2*sp.sqrt(1 - x**2/9)))
E_YIX #–Ω–∞—à–ª–∏ —Ä–µ–≥—Ä–µ—Å—Å–∏—é Y –Ω–∞ x

–ù–µ–ø—Ä–µ—Ä—ã–≤–Ω—ã–π —Å–ª—É—á–∞–π–Ω—ã–π –≤–µ–∫—Ç–æ—Ä (X, Y) –∏–º–µ–µ—Ç —Ä–∞–≤–Ω–æ–º–µ—Ä–Ω–æ–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –≤
—Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫–µ ABC, –≥–¥–µ A(‚àí3; 0), B(0; 1), C(3; 0). –ù–∞–π–¥–∏—Ç–µ E(Var(Y | X)).

import sympy as sp
f = sp.Rational(1, (1/2*6*1)) #—Ç–∞–∫ –∫–∞–∫ —Å–ª—É—á–∞–π–Ω—ã–π –≤–µ–∫—Ç–æ—Ä —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—ë–Ω —Ä–∞–≤–Ω–æ–º–µ—Ä–Ω–æ, –ø–ª–æ—Ç–Ω–æ—Å—Ç—å —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Ä–∞–≤–Ω–∞ 1/–ø–ª–æ—â–∞–¥—å —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫–∞
f

f_x1 = sp.integrate(f, (y, 0, x/3 + 1)) #–ø—Ä–∏ -3 <= x <= 0
f_x2 = sp.integrate(f, (y, 0, 1 - x/3)) #–ø—Ä–∏ 0 <= x <= 3

f_y_x1 = f / f_x1 #–ø—Ä–∏ -3 <= x <= 0
f_y_x2 = f / f_x2 #–ø—Ä–∏ 0 <= x <= 3

EY_X1 = sp.integrate(y*f_y_x1, (y, 0, x/3 + 1)) #–ø—Ä–∏ -3 <= x <= 0
EY_X2 = sp.integrate(y*f_y_x2, (y, 0, 1 - x/3)) #–ø—Ä–∏ 0 <= x <= 3

VarY_X1 = sp.integrate((y - EY_X1) ** 2 * f_y_x1, (y, 0, x/3 + 1)) #–ø—Ä–∏ -3 <= x <= 0
VarY_X2 = sp.integrate((y - EY_X2) ** 2 * f_y_x2, (y, 0, -x/3 + 1)) #–ø—Ä–∏ 0 <= x <= 3

EVarY_X = sp.integrate(VarY_X1*f_x1, (x, -3, 0)) + sp.integrate(VarY_X2*f_x2, (x, 0, 3))
EVarY_X #–Ω–∞—à–ª–∏ E(Var(Y|X))

–ù–µ–±–æ–ª—å—à–∞—è –∑–∞–≥–æ—Ç–æ–≤–∫–∞ –ø–æ–¥ 4 —Å–µ–º–∏–Ω–∞—Ä
import scipy.stats as st
s = st.norm(101, 29**0.5)
s.cdf(90)

x = st.norm(0.45, (0.144)**0.5)
x.sf(1/2)
"""

def dec():
  return """
#1 –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç –≤—ã–≤–æ–¥–∏—Ç—å –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Ñ—É–Ω–∫—Ü–∏–∏ –∏ —Å–æ—Ö—Ä–∞-–Ω—è—Ç—å –µ–≥–æ –≤ —Ñ–∞–π–ª

import time

def measure_running_time(function):
    def wrapper(*args, **kwargs):
      bt = time.time()
      result = function(*args, **kwargs)
      et = time.time()
      f = open("01-log.txt", "a")
      f.write(f'{function.__name__}: –ö–æ–¥ –≤—ã–ø–æ–ª–Ω—è–ª—Å—è {et-bt} —Å–µ–∫—É–Ω–¥(—ã)\n')
      f.close()
      return result
    return wrapper

@measure_running_time
def api_call():
  time.sleep(1)  
  print("API call")

api_call()

#2 –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç –≤—ã–≤–æ–¥–∏—Ç—å –Ω–∞ —ç–∫—Ä–∞–Ω —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è—Ñ—É–Ω–∫—Ü–∏–∏

def print_result(function):
    def wrapper(*args, **kwargs):
      result = function(*args, **kwargs)
      print(result)
      return result
    return wrapper

@print_result
def api_call():
  return "API called successfully!"

api_call()

#3 –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç –≤—ã–≤–æ–¥–∏—Ç—å –Ω–∞ —ç–∫—Ä–∞–Ω –∞—Ä–≥—É–º–µ–Ω—Ç—ã —Ñ—É–Ω–∫—Ü–∏–∏ –∏ –∏—Ö—Ç–∏–ø—ã

def print_args(function):
    def wrapper(*args, **kwargs):
      result = function(*args, **kwargs)
      for a in args:
        print(a, type(a))            
      for k,v in kwargs.items():
        print(v, type(v))
      return result
    return wrapper

@print_args
def api_call(a, b, c, flag):
  return True

api_call(1, "a", 0.1, flag=True)

#4 –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç –≤—ã–≤–æ–¥–∏—Ç—å –Ω–∞ —ç–∫—Ä–∞–Ω –∏–º—è —Ñ—É–Ω–∫—Ü–∏–∏ –∏ –º–æ–¥—É–ª—å, –≥–¥–µ–æ–Ω–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∞

def print_function_name(function):
    def wrapper(*args, **kwargs):
      result = function(*args, **kwargs)
      print(function.__name__, function.__module__)
      return result
    return wrapper

@print_function_name
def api_call():
  return True

api_call()

#5 –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç –≤—ã–≤–æ–¥–∏—Ç—å –Ω–∞ —ç–∫—Ä–∞–Ω –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤—ã–∑–æ–≤–æ–≤ —Ñ—É–Ω–∫-—Ü–∏–∏ –∑–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–π –ø–µ—Ä–∏–æ–¥ –≤—Ä–µ–º–µ–Ω–∏.

import functools
import time

def num_calls_per_period(period_sec):
  calls = []
  def decorator(function):
    @functools.wraps(function)
    def wrapper(*args, **kwargs):
      nonlocal calls
      now = time.time()
      calls.insert(0, now)
      result = function(*args, **kwargs)
      num_calls = 0
      for c in calls:
        if now - c > period_sec:
          break
        num_calls += 1
      print(f"Function called {num_calls} times during last {period_sec} seconds")
      return result
    return wrapper
  return decorator

@num_calls_per_period(period_sec=5)
def api_call():
  time.sleep(1)
  return 1

for i in range(10):
  api_call()

#7 –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç –∫—ç—à–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Ñ—É–Ω–∫—Ü–∏–∏–∏ –æ—á–∏—â–∞—Ç—å –∫—ç—à –ø—Ä–∏ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–∏ –∑–∞–¥–∞–Ω–Ω–æ–≥–æ —Ä–∞–∑–º–µ—Ä–∞

import functools
import math

def use_cache(max_entries):
    cache_dict = {}
    def decorator(function):
      @functools.wraps(function)
      def wrapper(*args, **kwargs):
        nonlocal cache_dict
        if len(args) != 1 or len(kwargs) !=0:
          raise ArgumentError("wrong number of arguments! only functions with 1 argument are supported!")
        arg = args[0]
        if arg in cache_dict:
          print("cache hit!")
          return cache_dict[arg]
        else:
          print("cache miss!")
          result = function(arg)
          if len(cache_dict) > max_entries:
            print("cache emptied!")
            cache_dict = {}
          cache_dict[arg] = result
          return result
      return wrapper
    return decorator

@use_cache(max_entries=5)
def calc_exp(x):
  return math.exp(x)

print(calc_exp(100))
print(calc_exp(100))

print('first run')
for i in range(6):
  calc_exp(i)
print('second run')
for i in range(6):
  calc_exp(i)

#8 –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç –ª–æ–≥–∏—Ä–æ–≤–∞—Ç—å –æ—à–∏–±–∫–∏, –≤–æ–∑–Ω–∏–∫–∞—é—â–∏–µ –ø—Ä–∏ –≤—ã–ø–æ–ª-–Ω–µ–Ω–∏–∏ —Ñ—É–Ω–∫—Ü–∏–∏, –∏ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ–± —ç—Ç–∏—Ö –æ—à–∏–±–∫–∞—Ö

import functools
import smtplib

def exception_handler(function):
    @functools.wraps(function)
    def wrapper(*args, **kwargs):
      try:
        result = function(*args, **kwargs)
        return result
      except Exception as e:
        print("–û–®–ò–ë–ö–ê!", repr(e))
        f = open("08-log.txt", "a")
        f.write(f"–û–®–ò–ë–ö–ê! {repr(e)}\n")
        f.close()
        try:
          # –Ω–∏–∂–µ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —É–∫–∞–∑–∞–Ω –Ω–∞—Å—Ç–æ—è—â–∏–π IP –∞–¥—Ä–µ—Å –ø–æ—á—Ç–æ–≤–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞
          # –∏ –Ω–∞—Å—Ç–æ—è—â–∏–π e-mail –∞–¥—Ä–µ—Å –ø–æ–ª—É—á–∞—Ç–µ–ª—è
          s = smtplib.SMTP('localhost')
          s.sendmail('robot@nowhere.nn', ['admin@nowhere.nn'], repr(e))
          s.quit()
        except:
          print("–ù–µ —É–¥–∞–ª–æ—Å—å –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ –Ω–∞ e-mail –∞–¥—Ä–µ—Å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞!")
        return None
    return wrapper

@exception_handler
def div2(a, b):
  return a / b

print(div2(10,2))
print(div2(10,0))

#9 –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç –ø—Ä–æ–≤–µ—Ä—è—Ç—å –∞—Ä–≥—É–º–µ–Ω—Ç—ã —Ñ—É–Ω–∫—Ü–∏–∏ –Ω–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å–∏ –≤—ã–±—Ä–∞—Å—ã–≤–∞—Ç—å –∏—Å–∫–ª—é—á–µ–Ω–∏–µ –ø—Ä–∏ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–∏ –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

import functools

def validate_arguments(check_function):
  def decorator(function):
    @functools.wraps(function)
    def wrapper(*args, **kwargs):
      for a in args:
        if not check_function(a):
          raise ValueError('function argument check failed!')
      for k,v in kwargs.items():
        if not check_function(v):
          raise ValueError('function argument check failed!')
      result = function(*args, **kwargs)
      return result
    return wrapper
  return decorator

@validate_arguments(lambda x: x > 0)
def calculate_cube_volume(x):
  return x**3

print(calculate_cube_volume(3))
print(calculate_cube_volume(-3))

#10 –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç –ø—Ä–æ–≤–µ—Ä—è—Ç—å –≤–æ–∑–≤—Ä–∞—â–∞–µ–º–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ –Ω–∞–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å –∏ –∑–∞–º–µ–Ω—è—Ç—å –µ–≥–æ –Ω–∞ –ø—Ä–µ–¥–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –ø—Ä–∏ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–∏ –Ω–µ-–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

import functools

def validate_return_value(check_function):
  def decorator(function):
    @functools.wraps(function)
    def wrapper(*args, **kwargs):
      result = function(*args, **kwargs)
      if not check_function(result):
        return 0
      return result
    return wrapper
  return decorator

@validate_return_value(lambda x: x > 0)
def calculate_cube_volume(x):
  return x**3

print(calculate_cube_volume(3))
print(calculate_cube_volume(-3))

#11 –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç –∑–∞–º–µ–Ω—è—Ç—å –∏—Å–∫–ª—é—á–µ–Ω–∏—è, –≤–æ–∑–Ω–∏–∫–∞—é—â–∏–µ –ø—Ä–∏ –≤—ã-–ø–æ–ª–Ω–µ–Ω–∏–∏ —Ñ—É–Ω–∫—Ü–∏–∏, –Ω–∞ –∑–∞–¥–∞–Ω–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞—Ç—å —ç—Ç–∏ –∑–∞–º–µ–Ω—ã

import functools
import smtplib

def exception_handler(exception_retvalue):
  def decorator(function):
    @functools.wraps(function)
    def wrapper(*args, **kwargs):
      try:
        result = function(*args, **kwargs)
        return result
      except Exception as e:
        print("–û–®–ò–ë–ö–ê!", repr(e))
        f = open("11-log.txt", "a")
        f.write(f"–û–®–ò–ë–ö–ê! {repr(e)}\n")
        f.close()
        return exception_retvalue
    return wrapper
  return decorator

@exception_handler(exception_retvalue = 0)
def div2(a, b):
  return a / b

print(div2(10,2))
print(div2(10,0))

#13 –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤—ã–∑–æ–≤–æ–≤ —Ñ—É–Ω–∫—Ü–∏–∏–∑–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–π –ø–µ—Ä–∏–æ–¥ –≤—Ä–µ–º–µ–Ω–∏

import functools
import time

def limit_calls_per_period(max_calls, period_sec):
  calls = []
  def decorator(function):
    @functools.wraps(function)
    def wrapper(*args, **kwargs):
      nonlocal calls
      now = time.time()
      calls.insert(0, now)
      num_calls = 0
      for c in calls:
        if now - c > period_sec:
          break
        num_calls += 1
      print(f"Function called {num_calls} times during last {period_sec} seconds")
      if (num_calls <= max_calls):
        print("Calling the function...")
        result = function(*args, **kwargs)
        return result
      else:
        print("Function call limit reached!")
        return None
    return wrapper
  return decorator

@limit_calls_per_period(max_calls = 5, period_sec=1)
def api_call():
  return 1

for i in range(10):
  api_call()

#14 –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç –ø—Ä–∏–Ω–∏–º–∞—Ç—å –∞—Ä–≥—É–º–µ–Ω—Ç—ã –∏ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –∏—Ö –≤ —Ñ—É–Ω–∫-—Ü–∏—é –≤ –û–ë–†–ê–¢–ù–û–ú –ø–æ—Ä—è–¥–∫–µ

def reverse_args(function):
    def wrapper(*args):
      aa = []
      for a in args:
        aa.insert(0, a)
      result = function(*aa)
      return result
    return wrapper

@reverse_args
def api_call(a, b, c):
  print(a, b, c)

api_call(1, 2, 3)

#15 –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç –ø—Ä–∏–Ω–∏–º–∞—Ç—å –∞—Ä–≥—É–º–µ–Ω—Ç—ã –∏ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –∏—Ö –≤ —Ñ—É–Ω–∫-—Ü–∏—é –≤ –∫–∞—á–µ—Å—Ç–≤–µ –∫–ª—é—á–µ–≤—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ —Å –∑–∞–¥–∞–Ω–Ω—ã–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é

def kvargs_default(default_value):
  def decorator(function):
    def wrapper(*args):
      a = default_value
      b = default_value
      c = default_value
      if len(args) > 0:
        a = args[0]
      if len(args) > 1:
        b = args[1]
      if len(args) > 2:
        c = args[2]
      result = function(a=a, b=b, c=c)
      return result
    return wrapper
  return decorator

@kvargs_default(-1)
def api_call(a, b, c):
  print(a, b, c)

api_call(4, 2)

#16 –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç –ø—Ä–∏–Ω–∏–º–∞—Ç—å –∞—Ä–≥—É–º–µ–Ω—Ç—ã –∏ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –∏—Ö –≤ —Ñ—É–Ω–∫-—Ü–∏—é –≤ –∫–∞—á–µ—Å—Ç–≤–µ –ø–æ–∑–∏—Ü–∏–æ–Ω–Ω—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ —Å –∑–∞–¥–∞–Ω–Ω—ã–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é

from inspect import signature

def args_default(default_value):
  def decorator(function):
    def wrapper(*args):
      sig = signature(function)
      num_args = len(sig.parameters)
      aa = [default_value]*num_args
      for i in range(num_args):
        if i < len(args):
          aa[i] = args[i]
      result = function(*aa)
      return result
    return wrapper
  return decorator

@args_default(-1)
def api_call(a, b, c):
  print(a, b, c)

api_call(4, 2)

#22 –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç –ø—Ä–∏–Ω–∏–º–∞—Ç—å —Å–ø–∏—Å–æ–∫ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤ –∏ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –µ–≥–æ–≤ —Ñ—É–Ω–∫—Ü–∏—é –≤ –û–ë–†–ê–¢–ù–û–ú –ø–æ—Ä—è–¥–∫–µ

from inspect import signature

def args_list_reverse(function):
    def wrapper(*args):
      aa = list(args[0])
      aa.reverse()
      result = function(*aa)
      return result
    return wrapper

@args_list_reverse
def api_call(a, b, c):
  print(a, b, c)

api_call([3, 2, 1])

#23 –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç –ø—Ä–∏–Ω–∏–º–∞—Ç—å —Å–ª–æ–≤–∞—Ä—å –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤ –∏ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å–µ–≥–æ –≤ —Ñ—É–Ω–∫—Ü–∏—é —Å –∑–∞–¥–∞–Ω–Ω—ã–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é.

from inspect import signature

def args_dict(function):
    def wrapper(*args):
      result = function(**args[0])
      return result
    return wrapper

@args_dict
def api_call(a, b, c):
  print(a, b, c)

api_call({'a':3, 'b':2, 'c':1})

#25 –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç –∑–∞–º–µ–Ω—è—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ –∞—Ä–≥—É–º–µ–Ω—Ç–∞ –Ω–∞ –∑–∞–¥–∞–Ω–Ω–æ–µ –∑–Ω–∞-—á–µ–Ω–∏–µ —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –æ–Ω–æ —É–¥–æ–≤–ª–µ—Ç–≤–æ—Ä—è–µ—Ç –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–º—É —É—Å–ª–æ–≤–∏—é

import functools

def fix_arguments(check_function, fix_value):
  def decorator(function):
    @functools.wraps(function)
    def wrapper(*args, **kwargs):
      aa = []
      for a in args:
        if not check_function(a):
          aa.append(fix_value)
        else:
          aa.append(a)
      kv = {}
      for k, v in kwargs.items():
        if not check_function(v):
          kv[k] = fix_value
        else:
          kv[k] = v
      result = function(*aa, **kv)
      return result
    return wrapper
  return decorator

@fix_arguments(lambda x: x > 0, 1)
def calculate_cube_volume(x):
  return x**3

print(calculate_cube_volume(3))
print(calculate_cube_volume(-3))
"""

def exdec():
  return """

#1-2 –ø–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç –∏—Å–∫–ª—é—á–µ–Ω–∏—è –∏ –≤—ã–¥–∞—ë—Ç —Å–≤–æ—ë —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ

import functools

def exception_handler(def_response="An error occurred!"):
  def decorator(function):
    @functools.wraps(function)
    def wrapper(*args, **kwargs):
      try:
        result = function(*args, **kwargs)
        return result
      except:
        print(def_response)
        return None
    return wrapper
  return decorator

@exception_handler(def_response="Division failed!")
def div2(a, b):
  return a / b

@exception_handler()
def sum2(a, b):
  return a + b

print(div2(10,2))
print(div2(10,0))

print(sum2(2, 2))
print(sum2(2, "a"))

#2-2 –≤—ã–¥–∞—ë—Ç –∏—Å–∫–ª—é—á–µ–Ω–∏–µ, –µ—Å–ª–∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –Ω–µ –ø—Ä–æ—Ö–æ–¥–∏—Ç –ø—Ä–æ–≤–µ—Ä–∫—É

import functools

def validate_arguments(check_function):
  def decorator(function):
    @functools.wraps(function)
    def wrapper(*args, **kwargs):
      result = function(*args, **kwargs)
      if not check_function(result):
        raise ValueError('function return value check failed!')
      return result
    return wrapper
  return decorator

@validate_arguments(lambda x: x > 0)
def calculate_cube_volume(x):
  return x**3

print(calculate_cube_volume(3))
print(calculate_cube_volume(-3))

#8-2 –∑–∞–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ –Ω–∞ –∑–∞–¥–∞–Ω–Ω–æ–µ –≤—Ä–µ–º—è

import functools
import time

def delay_execution(delay):
  def decorator(function):
    @functools.wraps(function)
    def wrapper(*args, **kwargs):
      time.sleep(delay)
      result = function(*args, **kwargs)
      return result
    return wrapper
  return decorator

@delay_execution(delay=10)
def api_call():
  print("API call delayed...")

api_call()

#21-2 –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ—Ç –∫–æ–ª-–≤–æ –≤—ã–∑–æ–≤–æ–≤ —Ñ—É–Ω–∫—Ü–∏–∏

import functools

def limit_calls(max_calls):
  calls = 0
  def decorator(function):
    @functools.wraps(function)
    def wrapper(*args, **kwargs):
      nonlocal calls
      calls += 1
      if calls <= max_calls:
        result = function(*args, **kwargs)
        return result
      return None
    return wrapper
  return decorator

@limit_calls(max_calls=6)
def api_call():
  print("API call executed succesfully...")

for i in range(10):
  api_call()

#24-2 - –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç —Ç–∏–ø –≤–æ–∑–≤—Ä–∞—â–∞–µ–º–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è —Ñ—É–Ω–∫—Ü–∏–∏

import functools

def convert_to_data_type(dt_func):
  def decorator(function):
    @functools.wraps(function)
    def wrapper(*args, **kwargs):
      result = function(*args, **kwargs)
      return dt_func(result)
    return wrapper
  return decorator

@convert_to_data_type(str)
def concatenate_strings(x, y):
  return x + y

@convert_to_data_type(int)
def sum2(x, y):
  return x + y

a = concatenate_strings("1","2")
print(a, type(a))
b = sum2("1","2")
print(b, type(b))

#15-2 - –Ω–æ–≤—ã–π - –≤—ã–∑—ã–≤–∞–µ—Ç –¥–µ–∫–æ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—É—é —Ñ—É–Ω–∫—Ü–∏—é –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑, –ø–æ–∫–∞ –Ω–µ –ø–æ–ª—É—á–∏—Ç –≤–æ–∑–≤—Ä–∞—â–∞–µ–º–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –Ω–µ None

import functools
import random

def retry_on_failure(max_retries=3):
  def decorator(function):
    @functools.wraps(function)
    def wrapper(*args, **kwargs):
      for i in range(max_retries):
        result = function(*args, **kwargs)
        if result is not None:
          return result
      return None
    return wrapper
  return decorator

@retry_on_failure()
def api_call():
  print("API call")
  return None if random.randint(0, 1)==0 else 1

api_call()
"""

def exlist():
  return """
#1-3 —Å—Ç—ç–∫

class Stack():
  def __init__(self):
    self.stack = []

  def print(self):
    print(self.stack)

  def push(self, item):
    self.stack.append(item)

  def pop(self):
    return self.stack.pop()

s = Stack()
s.push(1)
s.push(2)
s.push(3)
s.print()
a = s.pop()
print(a)
s.print()

#2-3 –¥–≤—É—Å–≤—è–∑–Ω—ã–π —Å–ø–∏—Å–æ–∫ (–∑–∞–∫–∞–∑—ã –≤ –∏–Ω–µ—Ç–º–∞–≥–∞–∑–∏–Ω–µ)

from datetime import date

class Item:
  def __init__(self, name, quantity, cost):
    self.name = name
    self.quantity = quantity
    self.cost = cost
  def print(self):
    print(self.name, self.quantity, self.cost)

class Order:
  def __init__(self, number, date, items):
    self.number = number
    self.date = date
    self.items = items
    self.next = None
    self.prev = None
  def print(self):
    print(self.number, self.date)
    for item in self.items:
      item.print()
    print()

class Orders:
  def __init__(self):
    self.head = None
    self.tail = None

  def append(self, order):
    if self.head is None:
      self.head = order
    order.prev = self.tail
    if self.tail is not None:
      self.tail.next = order
    self.tail = order

orders = Orders()
orders.append(Order(1, date.today(), [Item("–ë–æ–ª—Ç—ã", 10, 20), Item("–ì–∞–π–∫–∏", 10, 30)]))
orders.append(Order(2, date.today(), [Item("–°–∞–º–æ—Ä–µ–∑—ã", 20, 40)]))
orders.append(Order(3, date.today(), [Item("–®–∞–π–±—ã", 20, 30), Item("–í—Ç—É–ª–∫–∏", 10, 50), Item("–°–∫–æ–±—ã", 15, 35)]))

order = orders.head
while order is not None:
  order.print()
  order = order.next

#25-3 –æ–¥–Ω–æ—Å–≤—è–∑–Ω—ã–π —Å–ø–∏—Å–æ–∫
class Item:
  def __init__(self, value):
    self.value = value
    self.next = None

class LinkedList:
  def __init__(self):
    self.head = None

  def append(self, value):
    if self.head is None:
      self.head = Item(value)
    else:
      item = self.head
      while item.next is not None:
        item = item.next
      item.next = Item(value)

  def delete_last(self):
    if self.head is None:
      return
    elif self.head.next is None:
      self.head = None
    else:
      prev = None
      item = self.head
      while item.next is not None:
        prev = item
        item = item.next
      prev.next = None

  def print(self):
    item = self.head
    while item is not None:
      print(item.value)
      item = item.next

l = LinkedList()
l.append(1)
l.append(2)
l.append(3)
l.append(4)
l.print()
print("\n")
l.delete_last()
l.delete_last()
l.print()
"""

def exsort():
  return """
#8-3 —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ —Ñ–∏–ª—å–º–æ–≤ –ø–æ –≥–æ–¥–∞–º –ø–æ –≤–æ–∑—Ä–∞—Å—Ç–∞–Ω–∏—é –∏ –ø–æ —É–±—ã–≤–∞–Ω–∏—é –±—ã—Å—Ç—Ä–æ–π —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–æ–π

def quick_sort(arr, compare_function):
  quick_sort_helper(arr, 0, len(arr) - 1, compare_function)
  return arr

def quick_sort_helper(arr, first, last, compare_function):
  if first < last:
    split_point = partition(arr, first, last, compare_function)
    quick_sort_helper(arr, first, split_point - 1, compare_function)
    quick_sort_helper(arr, split_point + 1, last, compare_function)

def partition(arr, first, last, compare_function):
  pivot_value = arr[first]
  left_mark = first + 1
  right_mark = last
  done = False
  
  while not done:
    while left_mark <= right_mark and compare_function(arr[left_mark], pivot_value) <= 0:
      left_mark += 1
    while compare_function(arr[right_mark], pivot_value) >= 0 and right_mark >= left_mark:
      right_mark -= 1

    if right_mark < left_mark:
      done = True
    else:
      arr[left_mark], arr[right_mark] = arr[right_mark], arr[left_mark]

  arr[first], arr[right_mark] = arr[right_mark], arr[first]

  return right_mark

def compare_movies_by_year(a, b):
  an, ay = a
  bn, by = b
  return ay - by

def compare_movies_by_year_descending(a, b):
  an, ay = a
  bn, by = b
  return by - ay

List = [("Inception", 2010), ("The Matrix", 1999), ('Pulp Fiction', 1994),
("The Godfather", 1972), ("The Dark Knight", 2008),("Forrest Gump", 1994), 
("Fight Club", 1999), ('Interstellar', 2014), ('The Shawshank Redemption', 1994),
('Gladiator', 2000), ('Avatar', 2009), ('Titanic', 1997), 
('The Lord of the Rings', 2001), ('Star Wars', 1977), ('Jurassic Park', 1993)]

print(f'Sorted list ascending: {quick_sort(List, compare_movies_by_year)}\n')
print(f'Sorted list descending: {quick_sort(List, compare_movies_by_year_descending)}\n')

#23-3 —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ —Å—Ç—Ä–æ–∫ –ø–æ –≤–æ–∑—Ä–∞—Å—Ç–∞–Ω–∏—é –∏ —É–±—ã–≤–∞–Ω–∏—é –¥–ª–∏–Ω—ã –±—ã—Å—Ç—Ä–æ–π —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–æ–π —Å –∏–∑–º–µ—Ä–µ–Ω–∏–µ–º –≤—Ä–µ–º–µ–Ω–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

import time

def measure_running_time(function):
    def wrapper(*args, **kwargs):
      bt = time.time()
      result = function(*args, **kwargs)
      et = time.time()
      print(f'–ö–æ–¥ –≤—ã–ø–æ–ª–Ω—è–ª—Å—è {et-bt} —Å–µ–∫—É–Ω–¥(—ã)')
      return result
    return wrapper

@measure_running_time
def selection_sort(arr, compare_function):
  n = len(arr)
  for i in range(n):
    min_idx = i
    for j in range(i + 1, n):
      if compare_function(arr[j], arr[min_idx]) < 0:
        min_idx = j
    arr[i], arr[min_idx] = arr[min_idx], arr[i]
  return arr

@measure_running_time
def quick_sort(arr, compare_function):
  quick_sort_helper(arr, 0, len(arr) - 1, compare_function)
  return arr

def quick_sort_helper(arr, first, last, compare_function):
  if first < last:
    split_point = partition(arr, first, last, compare_function)
    quick_sort_helper(arr, first, split_point - 1, compare_function)
    quick_sort_helper(arr, split_point + 1, last, compare_function)

def partition(arr, first, last, compare_function):
  pivot_value = arr[first]
  left_mark = first + 1
  right_mark = last
  done = False
  
  while not done:
    while left_mark <= right_mark and compare_function(arr[left_mark], pivot_value) <= 0:
      left_mark += 1
    while compare_function(arr[right_mark], pivot_value) >= 0 and right_mark >= left_mark:
      right_mark -= 1

    if right_mark < left_mark:
      done = True
    else:
      arr[left_mark], arr[right_mark] = arr[right_mark], arr[left_mark]

  arr[first], arr[right_mark] = arr[right_mark], arr[first]

  return right_mark

def compare_strings_by_len(a, b):
  return len(a) - len(b)

def compare_strings_by_len_descending(a, b):
  return len(b) - len(a)

List = ["Inception", "The Matrix", 'Pulp Fiction', "The Godfather", "The Dark Knight", 
"Forrest Gump", "Fight Club", 'Interstellar', 'The Shawshank Redemption',
'Gladiator', 'Avatar', 'Titanic', 'The Lord of the Rings', 'Star Wars', 'Jurassic Park']

print(f'Quicksorted list ascending: {quick_sort(List, compare_strings_by_len)}\n')
print(f'Quicksorted list descending: {quick_sort(List, compare_strings_by_len_descending)}\n')

print(f'Selectionsorted list ascending: {selection_sort(List, compare_strings_by_len)}\n')
print(f'Selectionsorted list descending: {selection_sort(List, compare_strings_by_len_descending)}\n')

List *= 100
print("Quick sort")
quick_sort(List, compare_strings_by_len)
print("Selection sort")
selection_sort(List, compare_strings_by_len)

#24-3 –±–∏–Ω–∞—Ä–Ω—ã–π –ø–æ–∏—Å–∫

import random

def binary_search(arr, x):
  low = 0
  high = len(a) - 1
  while low <= high:
    mid = (low + high) // 2
    if arr[mid] == x:
      return mid
    elif arr[mid] < x:
      low = mid + 1
    else:
      high = mid - 1
  return -1

a = []
for i in range(10):
    a.append(random.randint(1, 50))
a.sort()
print(a)

v = random.choice(a)
print(v)

print(binary_search(a, v))

#1-3 - –Ω–æ–≤—ã–π - —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –≤—Å—Ç–∞–≤–∫–∞–º–∏ —Ç–æ–≤–∞—Ä–æ–≤ –ø–æ –ø—Ä–æ–¥–∞–∂–∞–º

import time

def measure_running_time(function):
    def wrapper(*args, **kwargs):
      bt = time.time()
      result = function(*args, **kwargs)
      et = time.time()
      print(f'–ö–æ–¥ –≤—ã–ø–æ–ª–Ω—è–ª—Å—è {et-bt} —Å–µ–∫—É–Ω–¥(—ã)')
      return result
    return wrapper

@measure_running_time
def insertion_sort(arr, compare_function):
    for i in range(1, len(arr)):
        val = arr[i]
        j = i - 1
        while j >= 0 and compare_function(arr[j], val) > 0:
            arr[j + 1] = arr[j]
            j -= 1
        arr[j + 1] = val
    return arr

def compare_goods_by_sales(a, b):
  a1, a2 = a
  b1, b2 = b
  return a2 - b2

def compare_goods_by_sales_descending(a, b):
  a1, a2 = a
  b1, b2 = b
  return b2 - a2

List = [('–¢–æ–≤–∞—Ä1', 53), ('–¢–æ–≤–∞—Ä2', 72), ('–¢–æ–≤–∞—Ä3', 30), ('–¢–æ–≤–∞—Ä4', 85), ('–¢–æ–≤–∞—Ä5', 47)]

print(f'Insertion sorted list ascending: {insertion_sort(List, compare_goods_by_sales)}\n')
print(f'Insertion sorted list descending: {insertion_sort(List, compare_goods_by_sales_descending)}\n')

#13-3 - –Ω–æ–≤—ã–π - —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø—É–∑—ã—Ä—å–∫–æ–º –∏ —à–µ–π–∫–µ—Ä–Ω–∞—è —á–∏—Å–µ–ª –ø–æ —Å—É–º–º–µ —Ü–∏—Ñ—Ä

import time
import random

def measure_running_time(function):
    def wrapper(*args, **kwargs):
      bt = time.time()
      result = function(*args, **kwargs)
      et = time.time()
      print(f'–ö–æ–¥ –≤—ã–ø–æ–ª–Ω—è–ª—Å—è {et-bt} —Å–µ–∫—É–Ω–¥(—ã)')
      return result
    return wrapper

@measure_running_time
def bubble_sort(arr, compare_function):
  n = len(arr)
  for i in range(n):
    for j in range(0, n-i-1):
      if compare_function(arr[j], arr[j+1]) > 0:
        arr[j], arr[j+1] = arr[j+1], arr[j]
  return arr

@measure_running_time
def cocktail_sort(arr, compare_function):
  n = len(arr)
  start = 0
  end = n - 1
  swapped = True
  while swapped:
    swapped = False
    for i in range(start, end):
      if (compare_function(arr[i], arr[i + 1]) > 0):
        arr[i], arr[i + 1] = arr[i + 1], arr[i]
        swapped = True
    if not swapped:
      break
    swapped = False
    end = end - 1
    for i in range(end - 1, start - 1, -1):
      if (compare_function(arr[i], arr[i + 1]) > 0):
        arr[i], arr[i + 1] = arr[i + 1], arr[i]
        swapped = True
    start = start + 1
  return arr

def sum_digits(number):
  return sum(int(digit) for digit in str(number))

def compare_numbers_by_sum_of_digits(a, b):
  return sum_digits(a) - sum_digits(b)

def compare_numbers_by_sum_of_digits_descending(a, b):
  return sum_digits(b) - sum_digits(a)

List = []
for i in range(100):
    List.append(random.randint(1, 12))


print(f'Bubble sorted list ascending: {bubble_sort(List, compare_numbers_by_sum_of_digits)}\n')
print(f'Bubble sorted list descending: {bubble_sort(List, compare_numbers_by_sum_of_digits_descending)}\n')

print(f'Cocktail sorted list ascending: {cocktail_sort(List, compare_numbers_by_sum_of_digits)}\n')
print(f'Cocktail sorted list descending: {cocktail_sort(List, compare_numbers_by_sum_of_digits_descending)}\n')

#5-3 - –Ω–æ–≤—ã–π - —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ —á–∏—Å–µ–ª –≤—ã–±–æ—Ä–æ–º –ø–æ —Å—É–º–º–µ —Ü–∏—Ñ—Ä

import time

def selection_sort(arr, compare_function):
  n = len(arr)
  for i in range(n):
    min_idx = i
    for j in range(i + 1, n):
      if compare_function(arr[j], arr[min_idx]) < 0:
        min_idx = j
    arr[i], arr[min_idx] = arr[min_idx], arr[i]
  return arr

def sum_digits(number):
  return sum(int(digit) for digit in str(number))

def compare_numbers_by_sum_of_digits(a, b):
  return sum_digits(a) - sum_digits(b)

List = [12,45,67,23,89,12,77,54,31,90,68,35,101,211,13,17]

print(f'Selection sorted list: {selection_sort(List, compare_numbers_by_sum_of_digits)}\n')

#15-3 - –Ω–æ–≤—ã–π - —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ —á–∏—Å–µ–ª –≤—ã–±–æ—Ä–æ–º –ø–æ —Å—É–º–º–µ —Ü–∏—Ñ—Ä. –°–ü–ò–°–û–ö –ù–ï –î–ê–ù!!!

import random

def selection_sort(arr, compare_function):
  n = len(arr)
  for i in range(n):
    min_idx = i
    for j in range(i + 1, n):
      if compare_function(arr[j], arr[min_idx]) < 0:
        min_idx = j
    arr[i], arr[min_idx] = arr[min_idx], arr[i]
  return arr

def sum_digits(number):
  return sum(int(digit) for digit in str(number))

def compare_numbers_by_sum_of_digits(a, b):
  return sum_digits(a) - sum_digits(b)

List = []
for i in range(100):
    List.append(random.randint(1, 12))

print(f'Selection sorted list: {selection_sort(List, compare_numbers_by_sum_of_digits)}\n')
"""

def exclass():
  return """

#19-3 —Å—Ç—É–¥–µ–Ω—Ç—ã —Å –æ—Ü–µ–Ω–∫–∞–º–∏

class Student:
  def __init__(self, firstname, lastname, age, marks):
    self.firstname = firstname
    self.lastname = lastname
    self.age = age
    self.marks = marks
  def __len__(self):
    return len(self.marks)
  def add_mark(self, mark):
    self.marks.append(mark)
  def mean_mark(self):
    if len(self):
      return sum(self.marks) / len(self)
    else:
      return 0
  def print(self):
    print(f'–°—Ç—É–¥–µ–Ω—Ç {self.firstname} {self.lastname}, –≤–æ–∑—Ä–∞—Å—Ç - {self.age}, c—Ä.–±–∞–ª–ª - {self.mean_mark()}')

a = Student('Ivan', 'Ivanov', 18, [5,4,4,4])
a.print()
a.add_mark(5)
a.print()

#21-3 –∞–≤—Ç–æ–º–æ–±–∏–ª–∏ —Å–æ —Å–∫–æ—Ä–æ—Å—Ç—å—é

class Car:
  def __init__(self, brand, model, year, speed):
    self.brand = brand
    self.model = model
    self.year = year
    self.speed = speed
  def speed_up(self, speed_increment):
    self.speed += speed_increment
  def speed_down(self, speed_decrement):
    self.speed -= speed_decrement
  def __eq__(self, other):
    return self.speed == other.speed
  def print(self):
    print(f'–ê–≤—Ç–æ–º–æ–±–∏–ª—å {self.brand} {self.model}, –≥–æ–¥ –≤—ã–ø—É—Å–∫–∞ - {self.year}, —Å–∫–æ—Ä–æ—Å—Ç—å - {self.speed}')

a = Car('Ford', 'Focus', 2008, 90)
a.print()
a.speed_up(10)
a.print()
a.speed_down(10)
a.print()
b = Car('Lada', 'Vesta', 2022, 90)
b.print()
if a == b:
  print('–£ –¥–≤—É—Ö –∞–≤—Ç–æ–º–æ–±–∏–ª–µ–π —Å–∫–æ—Ä–æ—Å—Ç—å –æ–¥–∏–Ω–∞–∫–æ–≤–∞')
else:
  print('–£ –¥–≤—É—Ö –∞–≤—Ç–æ–º–æ–±–∏–ª–µ–π —Å–∫–æ—Ä–æ—Å—Ç—å —Ä–∞–∑–Ω–∞—è')

#23-2 –≥–µ–æ–º–µ—Ç—Ä–∏—á–µ—Å–∫–∏–µ —Ñ–∏–≥—É—Ä—ã —Å –≤—ã—á–∏—Å–ª–µ–Ω–∏–µ–º –ø–ª–æ—â–∞–¥–∏

import math

class Shape:
  def area(self):
    raise NotImplementedError("Method not implemented")

class Rectangle(Shape):
  def __init__(self, a, b):
    self.a = a
    self.b = b
  def area(self):
    return self.a*self.b

class Circle(Shape):
  def __init__(self, r):
    self.r = r
  def area(self):
    return math.pi*self.r**2

objects = [Rectangle(2,2), Circle(1)]
for o in objects:
  print(o.area())

#12-3 - –Ω–æ–≤—ã–π - –ø–µ—Ä—Å–æ–Ω—ã —Å –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ–º –≤–æ–∑—Ä–∞—Å—Ç–∞

from datetime import datetime
from dateutil.relativedelta import relativedelta

class Person:
  def __init__(self, name, country, birthdate):
    self.name = name
    self.country = country
    self.birthdate = birthdate
  def get_age(self):
    delta = relativedelta(datetime.utcnow(), self.birthdate)
    return delta.years
  def print(self):
    print(f'–ò–º—è - {self.name}; —Å—Ç—Ä–∞–Ω–∞ - {self.country}, –¥–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è - {self.birthdate}, –≤–æ–∑—Ä–∞—Å—Ç - {self.get_age()}')

a = Person('–ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤', 'Russia', datetime(1981, 12, 2))
b = Person('Jean Dubois', 'France', datetime(1958, 6, 15))
a.print()
b.print()
"""

def sort():
  return """
import time

def measure_time(func):
  def wrapper(*args, **kwargs):
    start = time.time()
    result = func(*args, **kwargs)
    end = time.time()
    print(f"–í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Ñ—É–Ω–∫—Ü–∏–∏ {func.__name__}: {end - start:.6f} ce–∫.\n")
    return result
  return wrapper

#—Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –≤—ã–±–æ—Ä–æ–º

students = {3.25 : 'Ivanov', 4.2 : 'Petrov', 2.1 : 'Sidorov', 5.0 : 'Losev'}

@measure_time
def selection_sort(a_dict):
  lst = list(a_dict.keys())
  for i in range(len(lst) - 1):
    pos_of_min = i
    for j in range(i + 1, len(lst)):
      if lst[j] < lst[pos_of_min]:
        pos_of_min = j
    lst[pos_of_min], lst[i] = lst[i], lst[pos_of_min]

  new_dict = dict()
  for i in range(len(lst)):
    new_dict[lst[i]] = a_dict[lst[i]]
  return new_dict

print(selection_sort(students))

#–±—ã—Å—Ç—Ä–∞—è —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞

students = {3.25 : 'Ivanov', 4.2 : 'Petrov', 2.1 : 'Sidorov', 5.0 : 'Losev'}

@measure_time
def sort_quick(ss):
  arr = list(ss.keys())
  l = quick_sort(arr)
  d = dict()
  for i in range(len(l)):
    d[l[i]] = ss[l[i]]
  return d

def quick_sort(arr):
  quick_sort_helper(arr, 0, len(arr) - 1)
  return arr

def quick_sort_helper(arr, first, last):
  if first < last:
    split_point = partition(arr, first, last)
    quick_sort_helper(arr, first, split_point - 1)
    quick_sort_helper(arr, split_point + 1, last)

def partition(arr, first, last):
  pivot_value = arr[first]
  left_mark = first + 1
  right_mark = last
  done = False

  while not done:
    while left_mark <= right_mark and arr[left_mark] <= pivot_value:
      left_mark += 1
    while arr[right_mark] >= pivot_value and right_mark >= left_mark:
      right_mark -= 1
    if right_mark < left_mark:
      done = True
    else:
      arr[left_mark], arr[right_mark] = arr[right_mark], arr[left_mark]

  arr[first], arr[right_mark] = arr[right_mark], arr[first]

  return right_mark

sort_quick(students)

#—Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –®–µ–ª–ª–∞

students = {3.25 : 'Ivanov', 4.2 : 'Petrov', 2.1 : 'Sidorov', 5.0 : 'Losev'}

@measure_time
def sort_shell(ss):
   arr = list(ss.keys())
   l = shell_sort(arr)
   d = dict()
   for i in range(len(l)):
       d[l[i]] = ss[l[i]]
   return d

def shell_sort(arr):
  gap = len(arr) // 2
  while gap > 0:
    for i in range(gap, len(arr)):
      temp = arr[i]
      j = i
      while j >= gap and arr[j - gap] > temp:
        arr[j] = arr[j - gap]
        j -= gap
      arr[j] = temp
    gap //= 2
  return arr

arr = [64, 34, 25, 12, 22, 11, 90]
print(sort_shell(students))

#—Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ —Å–ª–∏—è–Ω–∏–µ–º

students = {3.25 : 'Ivanov', 4.2 : 'Petrov', 2.1 : 'Sidorov', 5.0 : 'Losev'}

@measure_time
def sort_sliyanie(ss):
  arr = list(ss.keys())
  l = merge_sort(arr)
  d = dict()
  for i in range(len(l)):
    d[l[i]] = ss[l[i]]
  return d

def merge_sort(arr):
  if len(arr) <= 1:
    return arr
  mid = len(arr) // 2
  left_half = arr[:mid]
  right_half = arr[mid:]
  left_half = merge_sort(left_half)
  right_half = merge_sort(right_half)
  return merge(left_half, right_half)

def merge(left_half, right_half):
  result = []
  i = 0
  j = 0
  while i < len(left_half) and j < len(right_half):
    if left_half[i] <= right_half[j]:
      result.append(left_half[i])
      i += 1
    else:
      result.append(right_half[j])
      j += 1
  result += left_half[i:]
  result += right_half[j:]
  return result

print(sort_sliyanie(students))

#2

class Book():
  def __init__(self, author, name, year):
    self.author = author
    self.name = name
    self.year = year

  def __info__(self):
        return f"Book(author='{self.author}', title='{self.name}', year={self.year})"

books = [
    Book("George Orwell", "1984", 1949),
    Book("Fyodor Dostoevsky", "Crime and Punishment", 1866),
    Book("Leo Tolstoy", "War and Peace", 1869),
    Book("Mark Twain", "Adventures of Huckleberry Finn", 1885),
    Book("Gabriel Garcia Marquez", "One Hundred Years of Solitude", 1967),
    Book('Steven King', 'It', 1986),
    Book('Alexander Pushkin', 'Evgeniy Onegin', 1830),
    Book('Fyodor Dostoevski', 'The Brothers Karamazov', 1880),
    Book('Natalia Makuni', 'Ikarus', 2013)
]

#–ø—É–∑—ã—Ä—å–∫–æ–≤–∞—è —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞

@measure_time
def bubble_sort(arr, key):
    n = len(arr)
    for i in range(n):
        for j in range(0, n-i-1):
            if key(arr[j]) > key(arr[j+1]):
                arr[j], arr[j+1] = arr[j+1], arr[j]
    return arr

# —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –∞–ª–≥–æ—Ä–∏—Ç–º–∞ —à–µ–π–∫–µ—Ä–Ω–æ–π —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏
def cocktail_sort(arr):
  n = len(arr)
  start = 0
  end = n - 1
  swapped = True
  while swapped:
    swapped = False
    for i in range(start, end):
      if (arr[i] > arr[i + 1]):
        arr[i], arr[i + 1] = arr[i + 1], arr[i]
        swapped = True
    if not swapped:
      break
    swapped = False
    end = end - 1
    for i in range(end - 1, start - 1, -1):
      if (arr[i] > arr[i + 1]):
        arr[i], arr[i + 1] = arr[i + 1], arr[i]
        swapped = True
    start = start + 1
  return arr

# —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –∞–ª–≥–æ—Ä–∏—Ç–º–∞ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏ —Ä–∞—Å—á—ë—Å–∫–æ–π
def comb_sort(arr):
  n = len(arr)
  gap = n
  shrink = 1.3
  swapped = True
  while swapped:
    gap = int(gap/shrink)
    if gap < 1:
      gap = 1
    i = 6
    swapped = False
    while i + gap < n:
      if arr[i] > arr[i + gap]:
        arr[i], arr[i + gap] = arr[i + gap], arr[i]
        swapped = True
      l += 1
  return arr

#—Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –≤—Å—Ç–∞–≤–∫–∞–º–∏

@measure_time
def insertion_sort(arr, key):
    for i in range(1, len(arr)):
        current_book = arr[i]
        j = i - 1
        while j >= 0 and key(arr[j]) > key(current_book):
            arr[j + 1] = arr[j]
            j -= 1
        arr[j + 1] = current_book
    return arr

#–±—ã—Å—Ç—Ä–∞—è —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞

@measure_time
def quick_sort(arr, key):
  quick_sort_helper(arr, 0, len(arr) - 1, key)
  return arr

def quick_sort_helper(arr, first, last, key):
  if first < last:
    split_point = partition(arr, first, last, key)
    quick_sort_helper(arr, first, split_point - 1, key)
    quick_sort_helper(arr, split_point + 1, last, key)

def partition(arr, first, last, key):
  pivot_value = key(arr[first])
  left_mark = first + 1
  right_mark = last
  done = False

  while not done:
    while left_mark <= right_mark and key(arr[left_mark]) <= pivot_value:
      left_mark += 1
    while key(arr[right_mark]) >= pivot_value and right_mark >= left_mark:
      right_mark -= 1
    if right_mark < left_mark:
      done = True
    else:
      arr[left_mark], arr[right_mark] = arr[right_mark], arr[left_mark]

  arr[first], arr[right_mark] = arr[right_mark], arr[first]

  return right_mark

#—Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –®–µ–ª–ª–∞

@measure_time
def shell_sort(arr, key):
  gap = len(arr) // 2
  while gap > 0:
    for i in range(gap, len(arr)):
      temp = arr[i]
      j = i
      while j >= gap and key(arr[j - gap]) > key(temp):
        arr[j] = arr[j - gap]
        j -= gap
      arr[j] = temp
    gap //= 2
  return arr

#—Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ —Å–ª–∏—è–Ω–∏–µ–º

@measure_time
def sort_merge(arr, key):
  return merge_sort(arr, key)

def merge_sort(arr, key):
  if len(arr) <= 1:
    return arr
  mid = len(arr) // 2
  left_half = arr[:mid]
  right_half = arr[mid:]
  left_half = merge_sort(left_half, key)
  right_half = merge_sort(right_half, key)
  return merge(left_half, right_half, key)

def merge(left_half, right_half, key):
  result = []
  i = 0
  j = 0
  while i < len(left_half) and j < len(right_half):
    if key(left_half[i]) <= key(right_half[j]):
      result.append(left_half[i])
      i += 1
    else:
      result.append(right_half[j])
      j += 1
  result += left_half[i:]
  result += right_half[j:]
  return result

sort_criteria = input("–í–≤–µ–¥–∏—Ç–µ –∫—Ä–∏—Ç–µ—Ä–∏–π —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏ (author, name, year): ")

if sort_criteria == "author":
    sorted_books_bubble = bubble_sort(books.copy(), key=lambda x: x.author)
    print(sorted_books_bubble)
    sorted_books_insertion = insertion_sort(books.copy(), key=lambda x: x.author)
    print(sorted_books_insertion)
    sorted_books_quick = quick_sort(books.copy(), key=lambda x: x.author)
    print(sorted_books_quick)
    sorted_books_shell = shell_sort(books.copy(), key=lambda x: x.author)
    print(sorted_books_shell)
    sorted_books_merge = sort_merge(books.copy(), key=lambda x: x.author)
    print(sorted_books_merge)
elif sort_criteria == "name":
    sorted_books_bubble = bubble_sort(books.copy(), key=lambda x: x.name)
    print(sorted_books_bubble)
    sorted_books_insertion = insertion_sort(books.copy(), key=lambda x: x.name)
    print(sorted_books_insertion)
    sorted_books_quick = quick_sort(books.copy(), key=lambda x: x.name)
    print(sorted_books_quick)
    sorted_books_shell = shell_sort(books.copy(), key=lambda x: x.name)
    print(sorted_books_shell)
    sorted_books_merge = sort_merge(books.copy(), key=lambda x: x.name)
    print(sorted_books_merge)
elif sort_criteria == "year":
    sorted_books_bubble = bubble_sort(books.copy(), key=lambda x: x.year)
    print(sorted_books_bubble)
    sorted_books_insertion = insertion_sort(books.copy(), key=lambda x: x.year)
    print(sorted_books_insertion)
    sorted_books_quick = quick_sort(books.copy(), key=lambda x: x.year)
    print(sorted_books_quick)
    sorted_books_shell = shell_sort(books.copy(), key=lambda x: x.year)
    print(sorted_books_shell)
    sorted_books_merge = sort_merge(books.copy(), key=lambda x: x.year)
    print(sorted_books_merge)
else:
    print("–ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π –∫—Ä–∏—Ç–µ—Ä–∏–π —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–µ—Ä–∏—Ç–µ –∏–∑ 'author', 'name', 'year'.")

#3

#—Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø—É–∑—ã—Ä—å–∫–æ–º

strings = ['banana', 'apple', 'kiwi', 'orange', 'grape', 'pear', 'plum', 'cherry', 'apricot', 'lemon']

@measure_time
def bubble_sort(arr):
    n = len(arr)
    for i in range(n):
        for j in range(0, n-i-1):
            if arr[j] > arr[j+1]:
                arr[j], arr[j+1] = arr[j+1], arr[j]
    return arr

bubble_sort(strings)

#—Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ —Å–ª–∏—è–Ω–∏–µ–º

strings = ['banana', 'apple', 'kiwi', 'orange', 'grape', 'pear', 'plum', 'cherry', 'apricot', 'lemon']

@measure_time
def sort_merge(arr):
  return merge_sort(arr)

def merge_sort(arr):
  if len(arr) <= 1:
    return arr
  mid = len(arr) // 2
  left_half = arr[:mid]
  right_half = arr[mid:]
  left_half = merge_sort(left_half)
  right_half = merge_sort(right_half)
  return merge(left_half, right_half)

def merge(left_half, right_half):
  result = []
  i = 0
  j = 0
  while i < len(left_half) and j < len(right_half):
    if left_half[i] <= right_half[j]:
      result.append(left_half[i])
      i += 1
    else:
      result.append(right_half[j])
      j += 1
  result += left_half[i:]
  result += right_half[j:]
  return result

print(sort_merge(strings))

#–±—ã—Å—Ç—Ä–∞—è —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞

strings = ['banana', 'apple', 'kiwi', 'orange', 'grape', 'pear', 'plum', 'cherry', 'apricot', 'lemon']

@measure_time
def quick_sort(arr):
  quick_sort_helper(arr, 0, len(arr) - 1)
  return arr

def quick_sort_helper(arr, first, last):
  if first < last:
    split_point = partition(arr, first, last)
    quick_sort_helper(arr, first, split_point - 1)
    quick_sort_helper(arr, split_point + 1, last)

def partition(arr, first, last):
  pivot_value = arr[first]
  left_mark = first + 1
  right_mark = last
  done = False

  while not done:
    while left_mark <= right_mark and arr[left_mark] <= pivot_value:
      left_mark += 1
    while arr[right_mark] >= pivot_value and right_mark >= left_mark:
      right_mark -= 1
    if right_mark < left_mark:
      done = True
    else:
      arr[left_mark], arr[right_mark] = arr[right_mark], arr[left_mark]

  arr[first], arr[right_mark] = arr[right_mark], arr[first]

  return right_mark

quick_sort(strings)

#—Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –®–µ–ª–ª–∞

@measure_time
def shell_sort(arr):
  gap = len(arr) // 2
  while gap > 0:
    for i in range(gap, len(arr)):
      temp = arr[i]
      j = i
      while j >= gap and arr[j - gap] > temp:
        arr[j] = arr[j - gap]
        j -= gap
      arr[j] = temp
    gap //= 2
  return arr

strings = ['banana', 'apple', 'kiwi', 'orange', 'grape', 'pear', 'plum', 'cherry', 'apricot', 'lemon']
shell_sort(strings)

#—Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ —Å–ª–∏—è–Ω–∏–µ–º

@measure_time
def sort_merge(arr):
  return merge_sort(arr)

def merge_sort(arr):
  if len(arr) <= 1:
    return arr
  mid = len(arr) // 2
  left_half = arr[:mid]
  right_half = arr[mid:]
  left_half = merge_sort(left_half)
  right_half = merge_sort(right_half)
  return merge(left_half, right_half)

def merge(left_half, right_half):
  result = []
  i = 0
  j = 0
  while i < len(left_half) and j < len(right_half):
    if left_half[i] <= right_half[j]:
      result.append(left_half[i])
      i += 1
    else:
      result.append(right_half[j])
      j += 1
  result += left_half[i:]
  result += right_half[j:]
  return result

strings = ['banana', 'apple', 'kiwi', 'orange', 'grape', 'pear', 'plum', 'cherry', 'apricot', 'lemon']
sort_merge(strings)
"""

def list():
  return """

#1.1 —Å–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å–∫–æ–±–∫–∏ deque

from collections import deque

class Stack(deque):
  def push(self, a):
    self.append(a)

def is_balanced(expression):
  stack = Stack()
  opening_brackets = ['(', '{', '[']
  closing_brackets = [')', '}', ']']
  for char in expression:
    if char in opening_brackets:
      stack.push(char)
    elif char in closing_brackets:
      if len(stack)==0:
        return False
      top = stack.pop()
      if opening_brackets.index(top) != closing_brackets.index(char):
        return False
  return len(stack) == 0

def check_balance(expression):
  print('–°–∫–æ–±–∫–∏ —Å–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω—ã' if is_balanced(expression) else '–°–∫–æ–±–∫–∏ –Ω–µ —Å–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω—ã')

expression1 = input('–í–≤–µ–¥–∏—Ç–µ –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ: ')
check_balance(expression1)

expression2 = input('–í–≤–µ–¥–∏—Ç–µ –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ: ')
check_balance(expression2)

#1.2 —Å–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å–∫–æ–±–∫–∏ –±–µ–∑ deque

class Stack():
  def __init__(self, l):
    self.__stack = []
    self.__maxlen = l
  def push(self, e):
    if len(self.__stack)<self.__maxlen:
      self.__stack.append(e)
    else:
      raise ValueError("Stack is full")
  def pop(self):
    return self.__stack.pop()
  def top(self):
    return self.__stack[-1]
  def is_empty(self):
    if len(self.__stack)==0:
      return True
    return False
  def __len__(self):
    return len(self.__stack)
  def __str__(self):
    return str(self.__stack)
    
def is_balanced(expression):
  stack = Stack(100)
  opening_brackets = ['(', '{', '[']
  closing_brackets = [')', '}', ']']
  for char in expression:
    if char in opening_brackets:
      stack.push(char)
    elif char in closing_brackets:
      if len(stack)==0:
        return False
      top = stack.pop()
      if opening_brackets.index(top) != closing_brackets.index(char):
        return False
  return len(stack) == 0

def check_balance(expression):
  print('–°–∫–æ–±–∫–∏ —Å–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω—ã' if is_balanced(expression) else '–°–∫–æ–±–∫–∏ –Ω–µ —Å–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω—ã')

expression1 = input('–í–≤–µ–¥–∏—Ç–µ –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ: ')
check_balance(expression1)

expression2 = input('–í–≤–µ–¥–∏—Ç–µ –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ: ')
check_balance(expression2)

#2.1 —Å—Ç—ç–∫

class Stack():
  def __init__(self, l):
    self.__stack = []
    self.__maxlen = l
  def push(self, e):
    if len(self.__stack)<self.__maxlen:
      self.__stack.append(e)
    else:
      raise ValueError("Stack is full")
  def pop(self):
    return self.__stack.pop()
  def top(self):
    return self.__stack[-1]
  def is_empty(self):
    if len(self.__stack)==0:
      return True
    return False
  def __len__(self):
    return len(self.__stack)
  def __str__(self):
    return str(self.__stack)
    
s=Stack(2)
s.push(5)
s.push(5)
print(s)

s.push(5)

s.pop()
s.pop()
print(str(s))
print(len(s))
s.is_empty()

s.top()

#2.2 —Å—Ç—ç–∫ –Ω–∞ array

import array

class Stack:
    def __init__(self, l):
        self.__stack = array.array('i')
        self.__maxlen = l
    def push(self, e):
        if len(self.__stack) < self.__maxlen:
            self.__stack.append(e)
        else:
            raise ValueError("Stack is full")
    def pop(self):
        return self.__stack.pop()
    def top(self):
        return self.__stack[-1]
    def is_empty(self):
        return len(self.__stack) == 0
    def length(self):
        return len(self.__stack)
    def __str__(self):
        return str(list(self.__stack))

stack = Stack(5)
stack.push(1)
stack.push(2)
stack.push(3)

print(stack.length())
print(stack.top())
print(stack)
stack.push(4)
stack.push(5)
print(stack)
stack.pop()
print(stack)

#3) –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∫–ª–∞—Å—Å –æ–¥–Ω–æ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–Ω–æ–≥–æ —Å–≤—è–∑–∞–Ω–Ω–æ–≥–æ —Å–ø–∏—Å–∫–∞.

class ListItem:
  def __init__ (self,elem):
    self.elem = elem
    self.nextitem = None

class LinkedList:
  def __init__(self):
    self.head = None

class ListItem:
  def __init__ (self,elem):
    self.elem = elem
    self.nextitem = None

class LinkedList:
  def __init__(self):
    self.head = None
  def AddToBegin(self, newelem):
    newitem = ListItem(newelem)
    newitem.nextitem = self.head
    self.head = newitem
  def __str__(self):
    l = []
    item = self.head
    if item is None:
      return ''
    l.append(item.elem)
    while (item.nextitem):
      item = item.nextitem
      l.append(item.elem)
    return str(l)

l = LinkedList()
l.AddToBegin(1)
l.AddToBegin(2)
l.AddToBegin(3)
print(l)

#4) –ù–∞ –±–∞–∑–µ –∫–ª–∞—Å—Å–∞ –æ–¥–Ω–æ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–Ω–æ–≥–æ —Å–≤—è–∑–∞–Ω–Ω–æ–≥–æ —Å–ø–∏—Å–∫–∞ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –¥–≤—É–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–π —Å–≤—è–∑–∞–Ω–Ω—ã–π —Å–ø–∏—Å–æ–∫.

class ListItem:
  def __init__ (self,elem):
    self.elem = elem
    self.nextitem = None
    self.previtem = None

class LinkedList:
  def __init__(self):
    self.head = None
    
#4.1) –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –º–µ—Ç–æ–¥ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —ç–ª–µ–º–µ–Ω—Ç–∞ –≤ –Ω–∞—á–∞–ª–æ —Å–ø–∏—Å–∫–∞.

class ListItem:
  def __init__ (self,elem):
    self.elem = elem
    self.nextitem = None
    self.previtem = None

class LinkedList:
  def __init__(self):
    self.head = None
  def AddToBegin(self, newelem):
    newitem = ListItem(newelem)
    newitem.nextitem = self.head
    if self.head is not None:
      self.head.previtem = newitem
    self.head = newitem
  def __str__(self):
    l = []
    item = self.head
    if item is None:
      return ''
    l.append(item.elem)
    while (item.nextitem):
      item = item.nextitem
      l.append(item.elem)
    return str(l)
  def PrintReversed(self):
    i = self.head
    if i is None:
      return
    while (i.nextitem):
      i = i.nextitem
    while (i.previtem):
      print(i.elem)
      i = i.previtem
    print(i.elem)

l = LinkedList()
l.AddToBegin(1)
l.AddToBegin(2)
l.AddToBegin(3)
l.PrintReversed()

#5) –ü—Ä–∏ –ø–æ–º–æ—â–∏ –∫–ª–∞—Å—Å–∞ —Å–≤—è–∑–∞–Ω–Ω–æ–≥–æ —Å–ø–∏—Å–∫–∞ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –æ—á–µ—Ä–µ–¥—å.

class ListItem:
  def __init__ (self,elem):
    self.elem = elem
    self.nextitem = None
    self.previtem = None

class LinkedList:
  def __init__(self):
    self.head = None
    self.tail = None
  def AddToBegin(self, newelem):
    newitem = ListItem(newelem)
    newitem.nextitem = self.head
    if self.head is not None:
      self.head.previtem = newitem
    else:
      self.tail = newitem
    self.head = newitem
  def GetFromEnd(self):
    i = self.tail
    if i is None:
      return None
    if i.previtem:
      i.previtem.nextitem = None
      self.tail = i.previtem
    return i.elem
  def __str__(self):
    l = []
    item = self.head
    if item is None:
      return ''
    l.append(item.elem)
    while (item.nextitem):
      item = item.nextitem
      l.append(item.elem)
    return str(l)

l = LinkedList()
l.AddToBegin(1)
l.AddToBegin(2)
l.AddToBegin(3)
print(l)
a = l.GetFromEnd()
print(a)
print(l)

#5.2

class ListItem:
  def __init__ (self,elem):
    self.elem = elem
    self.nextitem = None
    self.previtem = None

class LinkedList:
  def __init__(self):
    self.head = None
    self.tail = None
  def AddToEnd(self, newelem):
    newitem = ListItem(newelem)
    if self.head == None:
      self.head = newitem
      self.tail = newitem
    else:
      self.tail.nextitem = newitem
      self.tail=newitem
  def GetFromBegin(self):
    i = self.head
    if i is None:
      return None
    if i.nextitem:
      i.nextitem.previtem = None
      self.head = i.nextitem
    return i.elem
  def __str__(self):
    l = []
    item = self.head
    if item is None:
      return ''
    l.append(item.elem)
    while (item.nextitem):
      item = item.nextitem
      l.append(item.elem)
    return str(l)

l = LinkedList()
l.AddToEnd(1)
l.AddToEnd(2)
l.AddToEnd(3)
print(l)
a = l.GetFromBegin()
print(a)
print(l)

#6) –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä, –∫–æ—Ç–æ—Ä—ã–π –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ–æ—á–µ—Ä–µ–¥–Ω–æ –∏–∑–≤–ª–µ–∫–∞–µ–º–æ–µ –∏–∑ –∫–æ–Ω—Ü–∞ –¥–≤—É—Ö –æ—á–µ—Ä–µ–¥–µ–π (–≤ –∫–∞—á–µ—Å—Ç–≤–µ –æ—á–µ—Ä–µ–¥–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è deque –∏–∑ collections). –ï—Å–ª–∏ –æ—á–µ—Ä–µ–¥—å –∏–∑ –∫–æ—Ç–æ—Ä–æ–π –∏–∑–≤–ª–µ–∫–∞–µ—Ç—Å—è —ç–ª–µ–º–µ–Ω—Ç –ø—É—Å—Ç–∞ - –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä –∑–∞–∫–∞–Ω—á–∏–≤–∞–µ—Ç —Ä–∞–±–æ—Ç—É.

from collections import deque

def alternatequeuevalue(queue1, queue2):
    while queue1 and queue2:
        if queue1:
            yield queue1.pop()
        if queue2:
            yield queue2.pop()

queue1 = deque([1, 2, 3, 4, 5, 0])
queue2 = deque([6, 7, 8, 9, 10])

gen = alternatequeuevalue(queue1, queue2)

for value in gen:
    print(value)

#1- –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é, –∫–æ—Ç–æ—Ä–∞—è –Ω–∞—Ö–æ–¥–∏—Ç —Å—É–º–º—É –≤—Å–µ—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –¥–≤—É—Å–≤—è–∑–Ω–æ–≥–æ —Å–ø–∏—Å–∫–∞, –Ω–∞–¥–æ —Ä–µ—à–∞—Ç—å –∑–∞–¥–∞—á—É –¥–≤—É–º—è —Å–ø–æ—Å–æ–±–∞–º–∏ 1) —Å–ª–æ–∂–Ω–æ—Å—Ç—å –º–µ—Ç–æ–¥–∞ –û(1), 2) —Å–ª–æ–∂–Ω–æ—Å—Ç—å –û(n).

class node:
    def __init__(self, data=None, linkn=None, linkp = None):
        self.data = data
        self.linkn = linkn
        self.linkp = linkp

class linklist2:
    def __init__(self):
        self.head = None
        self.tail = None
        self.__summ=0

    def addnode(self, data):
        newnode = node(data)
        if not self.head:
          self.head = newnode
          self.tail = newnode
        else:
          self.tail.linkn = newnode
          newnode.linkp = self.tail
          self.tail = newnode
        self.__summ+= data

    def addfirst(self, data):
        newnode = node(data)
        if not self.head:
          self.head = newnode
          self.tail = newnode
        else:
          newnode.linkn = self.head
          self.head.linkp = newnode
          self.head = newnode
        self.__summ+= data

    def printback(self):
        s = self.tail
        strr=""
        while s:
          strr+= str(s.data) + "<-"
          s = s.linkp
        return strr

    def printforward(self):
        s = self.head
        strr=""
        while s:
            strr+= str(s.data) + "->"
            s = s.linkn
        return strr

    def __len__(self):
        count = 0
        s = self.head
        while s:
          count += 1
          s = s.linkn
        return count

    def summ (self):
        "O(n)"
        summ = 0
        s = self.head
        while s:
          summ +=s.data
          s = s.linkn
        return summ

    def summo1 (self):
        "O(1)"
        return self.__summ

l = linklist2()
l.addnode(1)
l.addnode(2)
l.addnode(3)
print(l.summ())
l.summo1()

#2- —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é, –∫–æ—Ç–æ—Ä–∞—è —É–¥–∞–ª—è–µ—Ç –≤—Å–µ —ç–ª–µ–º–µ–Ω—Ç—ã —Å –∑–∞–¥–∞–Ω–Ω—ã–º –∑–Ω–∞—á–µ–Ω–∏–µ–º –∏–∑ –¥–≤—É—Å–≤—è–∑–Ω–æ–≥–æ —Å–ø–∏—Å–∫–∞.

class node:
    def __init__(self, data=None, linkn=None, linkp = None):
        self.data = data
        self.linkn = linkn
        self.linkp = linkp

class linklist2:
    def __init__(self):
        self.head = None
        self.tail = None
        self.__summ=0

    def addnode(self, data):
        newnode = node(data)
        if not self.head:
          self.head = newnode
          self.tail = newnode
        else:
          self.tail.linkn = newnode
          newnode.linkp = self.tail
          self.tail = newnode
        self.__summ+= data

    def printforward(self):
        s = self.head
        strr=""
        while s:
            strr+= str(s.data) + "->"
            s = s.linkn
        return strr

    def delfixed(self, number):
      s = self.head
      while s:
        if s.data == number:
          if s == self.head:
            #if s.linkn == None:
              #return None
            s.linkn.linkp = None
            self.head = s.linkn
          elif s != self.tail:
            s.linkn.linkp = s.linkp
            s.linkp.linkn = s.linkn
          elif s == self.tail:
            s.linkp.linkn = None
            s.linkp = None
        s = s.linkn

l = linklist2()
l.addnode(1)
l.addnode(2)
l.addnode(3)
l.addnode(2)
l.addnode(2)
l.addnode(1)
l.addnode(1)
print(l.printforward())
l.delfixed(1)
print(l.printforward())

#3- –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é, –∫–æ—Ç–æ—Ä–∞—è —É–¥–∞–ª—è–µ—Ç –≤—Å–µ –ø–æ–≤—Ç–æ—Ä—è—é—â–∏–µ—Å—è —ç–ª–µ–º–µ–Ω—Ç—ã –∏–∑ –¥–≤—É—Å–≤—è–∑–Ω–æ–≥–æ —Å–ø–∏—Å–∫–∞

class node:
    def __init__(self, data=None, linkn=None, linkp = None):
        self.data = data
        self.linkn = linkn
        self.linkp = linkp

class linklist2:
    def __init__(self):
        self.head = None
        self.tail = None
        self.__dict=dict()

    def addnode(self, data):
        newnode = node(data)
        if not self.head:
          self.head = newnode
          self.tail = newnode
        else:
          self.tail.linkn = newnode
          newnode.linkp = self.tail
          self.tail = newnode

    def printforward(self):
        s = self.head
        strr=""
        while s:
            strr+= str(s.data) + "->"
            s = s.linkn
        return strr

    def delpovtor(self):
      s = self.head
      while s:
        if s.data not in self.__dict:
          self.__dict[s.data] = 1
        else:
          if s == self.tail:
            s.linkp.linkn = None
          else:
            s.linkn.linkp = s.linkp
            s.linkp.linkn = s.linkn
        s = s.linkn

l = linklist2()
l.addnode(1)
l.addnode(2)
l.addnode(3)
l.addnode(2)
l.addnode(4)
l.addnode(1)
print(l.printforward())
l.delpovtor()
print(l.printforward())

#4- –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é, –∫–æ—Ç–æ—Ä–∞—è —Ä–∞–∑–¥–µ–ª—è–µ—Ç –¥–≤—É—Å–≤—è–∑–Ω—ã–π —Å–ø–∏—Å–æ–∫ –Ω–∞ –¥–≤–∞ —Å–ø–∏—Å–∫–∞, –æ–¥–∏–Ω –∏–∑ –∫–æ—Ç–æ—Ä—ã—Ö —Å–æ–¥–µ—Ä–∂–∏—Ç –≤—Å–µ —ç–ª–µ–º–µ–Ω—Ç—ã, –º–µ–Ω—å—à–∏–µ –∑–∞–¥–∞–Ω–Ω–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è, –∞ –¥—Ä—É–≥–æ–π ‚Äî –≤—Å–µ —ç–ª–µ–º–µ–Ω—Ç—ã, –±–æ–ª—å—à–∏–µ –∏–ª–∏ —Ä–∞–≤–Ω—ã–µ –∑–∞–¥–∞–Ω–Ω–æ–º—É –∑–Ω–∞—á–µ–Ω–∏—é.

class node:
    def __init__(self, data=None, linkn=None, linkp = None):
        self.data = data
        self.linkn = linkn
        self.linkp = linkp

class linklist2:
    def __init__(self):
        self.head = None
        self.tail = None
        self.__dict=dict()

    def addnode(self, data):
        newnode = node(data)
        if not self.head:
          self.head = newnode
          self.tail = newnode
        else:
          self.tail.linkn = newnode
          newnode.linkp = self.tail
          self.tail = newnode

    def printforward(self):
        s = self.head
        strr=""
        while s:
            strr+= str(s.data) + "->"
            s = s.linkn
        return strr

    def splitlist(self, number):
      minlist = linklist2()
      maxlist = linklist2()
      s = self.head
      while s:
        if s.data < number:
          minlist.addnode(s.data)
        else:
          maxlist.addnode(s.data)
        s = s.linkn
      return (minlist.printforward(), maxlist.printforward())

l = linklist2()
l.addnode(1)
l.addnode(2)
l.addnode(3)
l.addnode(3)
l.addnode(0)
l.addnode(5)
print(l.printforward())
l.splitlist(3)

# —Å—Ç—ç–∫ –Ω–∞ –æ—Å–Ω–æ–≤–µ –¥–≤—É—Å–≤—è–∑–Ω–æ–≥–æ —Å–ø–∏—Å–∫–∞

class node:
  def __init__(self, data=None, next=None, prev=None):
    self.data = data
    self.next = next
    self.prev = prev

class Stack:
  def __init__(self):
    self.head = None
    self.tail = None
  def addnodetoend(self, data):
    newnode = node(data)
    if not self.head:
      self.head = newnode
      self.tail = newnode
    else:
      self.tail.next = newnode
      self.tail = newnode
  def popnodefromend(self):
    if not self.tail:
      return None
    else:
      data = self.tail.data
      self.tail = self.tail.prev
    return data
  def __str__(self):
    l = []
    item = self.head
    if item is None:
      return ''
    l.append(item.data)
    while (item.next):
      item = item.next
      l.append(item.data)
    return str(l)

s = Stack()
s.addnodetoend(1)
s.addnodetoend(2)
s.addnodetoend(3)
print(s)
k = s.popnodefromend()
print(k)
print(s)
"""

def numpy():
  return """
#1. –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –¥–≤—É—Ö–º–µ—Ä–Ω—ã–π –º–∞—Å—Å–∏–≤ `arr` —Ä–∞–∑–º–µ—Ä–Ω–æ—Å—Ç–∏ (4, 7), —Å–æ—Å—Ç–æ—è—â–∏–π –∏–∑ —Å–ª—É—á–∞–π–Ω—ã—Ö –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã—Ö —á–∏—Å–µ–ª, —Ä–∞–≤–Ω–æ–º–µ—Ä–Ω–æ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã—Ö –≤ –¥–∏–∞–ø–∞–∑–æ–Ω–µ –æ—Ç 0 –¥–æ 20. 
#–ù–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞—Ç—å –∑–Ω–∞—á–µ–Ω–∏—è –º–∞—Å—Å–∏–≤–∞ —Å –ø–æ–º–æ—â—å—é –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è –≤–∏–¥–∞ ax+b —Ç–∞–∫, —á—Ç–æ –ø–æ—Å–ª–µ –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏–∏ –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —ç–ª–µ–º–µ–Ω—Ç –º–∞—Åc–∏–≤–∞ –±—É–¥–µ—Ç —Ä–∞–≤–µ–Ω 1.0, –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π 0.0

import numpy as np
arr = np.random.uniform(0, 20, (4, 7))
arr_norm = (arr - arr.min())/ (arr.max() - arr.min())
print(arr)
print(arr_norm)

#2. –°–æ–∑–¥–∞—Ç—å –º–∞—Ç—Ä–∏—Ü—É 8 –Ω–∞ 10 –∏–∑ —Å–ª—É—á–∞–π–Ω—ã—Ö —Ü–µ–ª—ã—Ö (–∏—Å–ø–æ–ª—å–∑—É—è –º–æ–¥—É–ª—å `numpy.random`) —á–∏—Å–µ–ª –∏–∑ –¥–∏–∞–ø–æ–∑–æ–Ω–∞ –æ—Ç 0 –¥–æ 10 –∏ –Ω–∞–π—Ç–∏ –≤ –Ω–µ–π —Å—Ç—Ä–æ–∫—É (–µ–µ –∏–Ω–¥–µ–∫—Å –∏ –≤—ã–≤–µ—Å—Ç–∏ —Å–∞–º—É —Å—Ç—Ä–æ–∫—É), –≤ –∫–æ—Ç–æ—Ä–æ–π —Å—É–º–º–∞ –∑–Ω–∞—á–µ–Ω–∏–π –º–∏–Ω–∏–º–∞–ª—å–Ω–∞.

import numpy as np
m = np.random.randint(0, 11, (8, 10))
print(m)
mins = 10*10
mini = 10

for i in range(len(m)):
  s = 0
  for j in range(len(m[i])):
    s+=m[i][j]
  if s<mins:
    mins=s
    mini=i

print()
print(m[mini])

#3. –ù–∞–π—Ç–∏ –µ–≤–∫–ª–∏–¥–æ–≤–æ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ –º–µ–∂–¥—É –¥–≤—É–º—è –æ–¥–Ω–æ–º–µ—Ä–Ω—ã–º–∏ –≤–µ–∫—Ç–æ—Ä–∞–º–∏ –æ–¥–∏–Ω–∞–∫–æ–≤–æ–π —Ä–∞–∑–º–µ—Ä–Ω–æ—Å—Ç–∏.

import numpy as np
v1 = np.array((2, 0, 4))
v2 = np.array((2, 4, 4))

#—Å–ø–æ—Å–æ–±1
square = np.square(v1 - v2)
sum_square = np.sum(square)
distance = np.sqrt(sum_square)
print(distance)

#—Å–ø–æ—Å–æ–±2
distance = np.linalg.norm(v1-v2)
print(distance)

#4. –†–µ—à–∏—Ç—å –º–∞—Ç—Ä–∏—á–Ω–æ–µ —É—Ä–∞–≤–Ω–µ–Ω–∏–µ A*X*B=-C - –Ω–∞–π—Ç–∏ –º–∞—Ç—Ä–∏—Ü—É X. –ì–¥–µ A = [[-1, 2, 4], [-3, 1, 2], [-3, 0, 1]], B=[[3, -1], [2, 1]], C=[[7, 21], [11, 8], [8, 4]].

import numpy as np
#A*X*B=-C
#X=-A^(-1)*C*B^(-1)
A = np.matrix([[-1, 2, 4], [-3, 1, 2], [-3, 0, 1]])
B = np.matrix([[3, -1], [2, 1]])
C = np.matrix([[7, 21], [11, 8], [8, 4]])
oA = np.linalg.inv(A)
oB = np.linalg.inv(B)
X = -1*oA.dot(C).dot(oB)
X1 = -1*oA*C*oB
print(X)
print(X1)

#–õ–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–∞—è —Ä–∞–±–æ—Ç–∞ 1

#–ó–∞–º–µ—á–∞–Ω–∏–µ: –ø—Ä–∏ —Ä–µ—à–µ–Ω–∏–∏ –¥–∞–Ω–Ω—ã—Ö –∑–∞–¥–∞—á –Ω–µ –ø–æ–¥—Ä–∞–∑—É–º–µ–≤–∞–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Ü–∏–∫–ª–æ–≤ –∏–ª–∏ –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–æ–≤ Python, –µ—Å–ª–∏ –≤ –∑–∞–¥–∞–Ω–∏–∏ –Ω–µ —Å–∫–∞–∑–∞–Ω–æ –æ–±—Ä–∞—Ç–Ω–æ–≥–æ. –†–µ—à–µ–Ω–∏–µ –¥–æ–ª–∂–Ω–æ –æ–ø–∏—Ä–∞—Ç—å—Å—è –Ω–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ numpy.

#1. –§–∞–π–ª minutes_n_ingredients.csv —Å–æ–¥–µ—Ä–∂–∏—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ–± –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–µ —Ä–µ—Ü–µ–ø—Ç–∞, –≤—Ä–µ–º–µ–Ω–∏ –µ–≥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –≤ –º–∏–Ω—É—Ç–∞—Ö –∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç–æ–≤. –°—á–∏—Ç–∞–π—Ç–µ –¥–∞–Ω–Ω—ã–µ –∏–∑ —ç—Ç–æ–≥–æ —Ñ–∞–π–ª–∞ –≤ –≤–∏–¥–µ –º–∞—Å—Å–∏–≤–∞ numpy —Ç–∏–ø–∞ int32, –∏—Å–ø–æ–ª—å–∑—É—è np.loadtxt. –í—ã–≤–µ–¥–∏—Ç–µ –Ω–∞ —ç–∫—Ä–∞–Ω –ø–µ—Ä–≤—ã–µ 5 —Å—Ç—Ä–æ–∫ –º–∞—Å—Å–∏–≤–∞.

import numpy as np

data = np.loadtxt('data/minutes_n_ingredients.csv', dtype=np.int32, delimiter=',', skiprows=1)
print(data[:5])

#2. –í—ã—á–∏—Å–ª–∏—Ç–µ —Å—Ä–µ–¥–Ω–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ, –º–∏–Ω–∏–º—É–º, –º–∞–∫—Å–∏–º—É–º –∏ –º–µ–¥–∏–∞–Ω—É –ø–æ –∫–∞–∂–¥–æ–º—É –∏–∑ —Å—Ç–æ–ª–±—Ü–æ–≤, –∫—Ä–æ–º–µ –ø–µ—Ä–≤–æ–≥–æ.

import numpy as np

data = np.loadtxt('data/minutes_n_ingredients.csv', dtype=np.int32, delimiter=',', skiprows=1)
print(data[:5])

#3. –û–≥—Ä–∞–Ω–∏—á—å—Ç–µ —Å–≤–µ—Ä—Ö—É –∑–Ω–∞—á–µ–Ω–∏—è –ø—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Ä–µ—Ü–µ–ø—Ç–∞ –∑–Ω–∞—á–µ–Ω–∏–µ–º –∫–≤–∞–Ω—Ç–∏–ª—è q0.75.

# –í—ã—á–∏—Å–ª—è–µ–º –∫–≤–∞–Ω—Ç–∏–ª—å 0.75
q75 = np.quantile(data[:, 1], 0.75)

# –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º –∑–Ω–∞—á–µ–Ω–∏—è —Å–≤–µ—Ä—Ö—É
data[:, 1] = np.clip(data[:, 1], a_min=None, a_max=q75)

print("–ü–µ—Ä–≤—ã–µ 5 —Å—Ç—Ä–æ–∫ –º–∞—Å—Å–∏–≤–∞ –ø–æ—Å–ª–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è:")
print(data[:5])

#4. –ü–æ—Å—á–∏—Ç–∞–π—Ç–µ, –¥–ª—è —Å–∫–æ–ª—å–∫–∏—Ö —Ä–µ—Ü–µ–ø—Ç–æ–≤ —É–∫–∞–∑–∞–Ω–∞ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å, —Ä–∞–≤–Ω–∞—è –Ω—É–ª—é. –ó–∞–º–µ–Ω–∏—Ç–µ –¥–ª—è —Ç–∞–∫–∏—Ö —Å—Ç—Ä–æ–∫ –∑–Ω–∞—á–µ–Ω–∏–µ –≤ –¥–∞–Ω–Ω–æ–º —Å—Ç–æ–ª–±—Ü–µ –Ω–∞ 1.

# –ü–æ–¥—Å—á–∏—Ç—ã–≤–∞–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–µ—Ü–µ–ø—Ç–æ–≤ —Å –ø—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å—é –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Ä–∞–≤–Ω–æ–π –Ω—É–ª—é
num_zeros = np.count_nonzero(data[:, 1] == 0)

# –ó–∞–º–µ–Ω—è–µ–º –∑–Ω–∞—á–µ–Ω–∏—è –≤—Ä–µ–º–µ–Ω–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Ä–µ—Ü–µ–ø—Ç–∞ –Ω–∞ 1 –¥–ª—è —Ä–µ—Ü–µ–ø—Ç–æ–≤ —Å –ø—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å—é —Ä–∞–≤–Ω–æ–π –Ω—É–ª—é
data[data[:, 1] == 0, 1] = 1

print("–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–µ—Ü–µ–ø—Ç–æ–≤ —Å –ø—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å—é –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Ä–∞–≤–Ω–æ–π –Ω—É–ª—é:", num_zeros)
print("–ü–µ—Ä–≤—ã–µ 5 —Å—Ç—Ä–æ–∫ –º–∞—Å—Å–∏–≤–∞ –ø–æ—Å–ª–µ –∑–∞–º–µ–Ω—ã:")
print(data[:5])

#5. –ü–æ—Å—á–∏—Ç–∞–π—Ç–µ, —Å–∫–æ–ª—å–∫–æ —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö —Ä–µ—Ü–µ–ø—Ç–æ–≤ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –¥–∞—Ç–∞—Å–µ—Ç–µ.

# –ü–æ–¥—Å—á–∏—Ç—ã–≤–∞–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö —Ä–µ—Ü–µ–ø—Ç–æ–≤
num_recipes = len(np.unique(data[:, 0]))

print("–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö —Ä–µ—Ü–µ–ø—Ç–æ–≤:", num_recipes)

#6. –°–∫–æ–ª—å–∫–æ –∏ –∫–∞–∫–∏—Ö —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π –∫–æ–ª-–≤–∞ –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç–æ–≤ –ø—Ä–∏—Å—É—Ç–≤—É–µ—Ç –≤ —Ä–µ—Ü–µ–ø—Ç–∞—Ö –∏–∑ –¥–∞—Ç–∞—Å–µ—Ç–∞?

# –ù–∞—Ö–æ–¥–∏–º —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç–æ–≤
unique_ingredient_counts = np.unique(data[:, 2])

# –ü–æ–¥—Å—á–∏—Ç—ã–≤–∞–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π
num_unique_ingredient_counts = len(unique_ingredient_counts)

print("–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç–æ–≤:", num_unique_ingredient_counts)
print("–£–Ω–∏–∫–∞–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç–æ–≤:", unique_ingredient_counts)

#7. –°–æ–∑–¥–∞–π—Ç–µ –≤–µ—Ä—Å–∏—é –º–∞—Å—Å–∏–≤–∞, —Å–æ–¥–µ—Ä–∂–∞—â—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é —Ç–æ–ª—å–∫–æ –æ —Ä–µ—Ü–µ–ø—Ç–∞—Ö, —Å–æ—Å—Ç–æ—è—â–∏—Ö –Ω–µ –±–æ–ª–µ–µ —á–µ–º –∏–∑ 5 –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç–æ–≤.

# –í—ã–±–∏—Ä–∞–µ–º —Ç–æ–ª—å–∫–æ —Ç–µ —Å—Ç—Ä–æ–∫–∏, –≥–¥–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç–æ–≤ –Ω–µ –ø—Ä–µ–≤—ã—à–∞–µ—Ç 5
filtered_data = data[data[:, 2] <= 5]

print("–ü–µ—Ä–≤—ã–µ 5 —Å—Ç—Ä–æ–∫ –æ—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –º–∞—Å—Å–∏–≤–∞:")
print(filtered_data[:5])

#8. –î–ª—è –∫–∞–∂–¥–æ–≥–æ —Ä–µ—Ü–µ–ø—Ç–∞ –ø–æ—Å—á–∏—Ç–∞–π—Ç–µ, —Å–∫–æ–ª—å–∫–æ –≤ —Å—Ä–µ–¥–Ω–µ–º –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç–æ–≤ –ø—Ä–∏—Ö–æ–¥–∏—Ç—Å—è –Ω–∞ –æ–¥–Ω—É –º–∏–Ω—É—Ç—É —Ä–µ—Ü–µ–ø—Ç–∞. –ù–∞–π–¥–∏—Ç–µ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ —ç—Ç–æ–π –≤–µ–ª–∏—á–∏–Ω—ã –¥–ª—è –≤—Å–µ–≥–æ –¥–∞—Ç–∞—Å–µ—Ç–∞

# –°–æ–∑–¥–∞–µ–º –º–∞—Å—Å–∏–≤, —Å–æ–¥–µ—Ä–∂–∞—â–∏–π –æ—Ç–Ω–æ—à–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç–æ–≤ –∫ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Ä–µ—Ü–µ–ø—Ç–∞
ingredient_ratio = data[:, 2] / data[:, 1]

# –ù–∞—Ö–æ–¥–∏–º –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ —ç—Ç–æ–≥–æ –º–∞—Å—Å–∏–≤–∞
max_ingredient_ratio = np.max(ingredient_ratio)

print("–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç–æ–≤ –Ω–∞ –æ–¥–Ω—É –º–∏–Ω—É—Ç—É –≤ —Ä–µ—Ü–µ–ø—Ç–∞—Ö:", max_ingredient_ratio)

#9. –í—ã—á–∏—Å–ª–∏—Ç–µ —Å—Ä–µ–¥–Ω–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç–æ–≤ –¥–ª—è —Ç–æ–ø-100 —Ä–µ—Ü–µ–ø—Ç–æ–≤ —Å –Ω–∞–∏–±–æ–ª—å—à–µ–π –ø—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å—é

# –ü–æ–ª—É—á–∞–µ–º –∏–Ω–¥–µ–∫—Å—ã —Å—Ç—Ä–æ–∫ –≤ –ø–æ—Ä—è–¥–∫–µ —É–±—ã–≤–∞–Ω–∏—è –∑–Ω–∞—á–µ–Ω–∏–π –≤—Ä–µ–º–µ–Ω–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Ä–µ—Ü–µ–ø—Ç–∞
sorted_indices = np.argsort(data[:, 1])[::-1]

# –í—ã–±–∏—Ä–∞–µ–º —Ç–æ–ª—å–∫–æ —Ç–æ–ø-100 –∏–Ω–¥–µ–∫—Å–æ–≤
top_indices = sorted_indices[:100]

# –í—ã–±–∏—Ä–∞–µ–º —Ç–æ–ª—å–∫–æ —Ç–æ–ø-100 —Ä–µ—Ü–µ–ø—Ç–æ–≤
top_recipes = data[top_indices]

# –í—ã—á–∏—Å–ª—è–µ–º —Å—Ä–µ–¥–Ω–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç–æ–≤ –≤ —Ç–æ–ø-100 —Ä–µ—Ü–µ–ø—Ç–∞—Ö
mean_ingredients = np.mean(top_recipes[:, 2])

print("–°—Ä–µ–¥–Ω–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç–æ–≤ –¥–ª—è —Ç–æ–ø-100 —Ä–µ—Ü–µ–ø—Ç–æ–≤ —Å –Ω–∞–∏–±–æ–ª—å—à–µ–π –ø—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å—é:", mean_ingredients)

#10. –í—ã–±–µ—Ä–∏—Ç–µ —Å–ª—É—á–∞–π–Ω—ã–º –æ–±—Ä–∞–∑–æ–º –∏ –≤—ã–≤–µ–¥–∏—Ç–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ 10 —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ä–µ—Ü–µ–ø—Ç–∞—Ö

rng = np.random.default_rng()
d = rng.choice(data, 10, False)
print(d)

#11. –í—ã–≤–µ–¥–∏—Ç–µ –ø—Ä–æ—Ü–µ–Ω—Ç —Ä–µ—Ü–µ–ø—Ç–æ–≤, –∫–æ–ª-–≤–æ –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç–æ–≤ –≤ –∫–æ—Ç–æ—Ä—ã—Ö –º–µ–Ω—å—à–µ —Å—Ä–µ–¥–Ω–µ–≥–æ.

# –í—ã—á–∏—Å–ª—è–µ–º —Å—Ä–µ–¥–Ω–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç–æ–≤ –≤ –º–∞—Å—Å–∏–≤–µ
mean_ingredients = np.mean(data[:, 2])

# –í—ã—á–∏—Å–ª—è–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–µ—Ü–µ–ø—Ç–æ–≤, –∫–æ–ª-–≤–æ –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç–æ–≤ –≤ –∫–æ—Ç–æ—Ä—ã—Ö –º–µ–Ω—å—à–µ —Å—Ä–µ–¥–Ω–µ–≥–æ
less_than_mean = np.count_nonzero(data[:, 2] < mean_ingredients)

# –í—ã—á–∏—Å–ª—è–µ–º –ø—Ä–æ—Ü–µ–Ω—Ç —Ç–∞–∫–∏—Ö —Ä–µ—Ü–µ–ø—Ç–æ–≤ –æ—Ç –æ–±—â–µ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Ä–µ—Ü–µ–ø—Ç–æ–≤
percent_less_than_mean = less_than_mean / data.shape[0] * 100

print("–ü—Ä–æ—Ü–µ–Ω—Ç —Ä–µ—Ü–µ–ø—Ç–æ–≤, –∫–æ–ª-–≤–æ –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç–æ–≤ –≤ –∫–æ—Ç–æ—Ä—ã—Ö –º–µ–Ω—å—à–µ —Å—Ä–µ–¥–Ω–µ–≥–æ:", percent_less_than_mean, "%")

#12. –ù–∞–∑–æ–≤–µ–º "–ø—Ä–æ—Å—Ç—ã–º" —Ç–∞–∫–æ–π —Ä–µ—Ü–µ–ø—Ç, –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∫–æ—Ç–æ—Ä–æ–≥–æ –Ω–µ –±–æ–ª—å—à–µ 20 –º–∏–Ω—É—Ç –∏ –∫–æ–ª-–≤–æ –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç–æ–≤ –≤ –∫–æ—Ç–æ—Ä–æ–º –Ω–µ –±–æ–ª—å—à–µ 5. –°–æ–∑–¥–∞–π—Ç–µ –≤–µ—Ä—Å–∏—é –¥–∞—Ç–∞—Å–µ—Ç–∞ —Å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–º —Å—Ç–æ–ª–±—Ü–æ–º, –∑–Ω–∞—á–µ–Ω–∏—è–º–∏ –∫–æ—Ç–æ—Ä–æ–≥–æ —è–≤–ª—è—é—Ç—Å—è 1, –µ—Å–ª–∏ —Ä–µ—Ü–µ–ø—Ç –ø—Ä–æ—Å—Ç–æ–π, –∏ 0 –≤ –ø—Ä–æ—Ç–∏–≤–Ω–æ–º —Å–ª—É—á–∞–µ.

# –°–æ–∑–¥–∞–µ–º –±—É–ª–µ–≤—ã –º–∞—Å—Å–∏–≤—ã, –æ—Ç—Ä–∞–∂–∞—é—â–∏–µ —É—Å–ª–æ–≤–∏—è "–¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –Ω–µ –±–æ–ª—å—à–µ 20 –º–∏–Ω—É—Ç"
# –∏ "–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç–æ–≤ –Ω–µ –±–æ–ª—å—à–µ 5"
short_time = data[:, 1] <= 20
few_ingredients = data[:, 2] <= 5

# –û–±—ä–µ–¥–∏–Ω—è–µ–º –±—É–ª–µ–≤—ã –º–∞—Å—Å–∏–≤—ã —Å –ø–æ–º–æ—â—å—é –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞ –ª–æ–≥–∏—á–µ—Å–∫–æ–≥–æ "–ò"
simple_recipe = short_time & few_ingredients

# –°–æ–∑–¥–∞–µ–º –Ω–æ–≤—ã–π —Å—Ç–æ–ª–±–µ—Ü —Å –ø–æ–º–æ—â—å—é —Ñ—É–Ω–∫—Ü–∏–∏ np.where()
data_with_simple_flag = np.insert(data, 3, np.where(simple_recipe, 1, 0), axis=1)

# –í—ã–≤–æ–¥–∏–º –ø–µ—Ä–≤—ã–µ 5 —Å—Ç—Ä–æ–∫ –Ω–æ–≤–æ–≥–æ –º–∞—Å—Å–∏–≤–∞
print(data_with_simple_flag[:5])

#13. –í—ã–≤–µ–¥–∏—Ç–µ –ø—Ä–æ—Ü–µ–Ω—Ç "–ø—Ä–æ—Å—Ç—ã—Ö" —Ä–µ—Ü–µ–ø—Ç–æ–≤ –≤ –¥–∞—Ç–∞—Å–µ—Ç–µ

# –°–æ–∑–¥–∞–µ–º –±—É–ª–µ–≤—ã –º–∞—Å—Å–∏–≤—ã, –æ—Ç—Ä–∞–∂–∞—é—â–∏–µ —É—Å–ª–æ–≤–∏—è "–¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –Ω–µ –±–æ–ª—å—à–µ 20 –º–∏–Ω—É—Ç"
# –∏ "–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç–æ–≤ –Ω–µ –±–æ–ª—å—à–µ 5"
short_time = data[:, 1] <= 20
few_ingredients = data[:, 2] <= 5

# –û–±—ä–µ–¥–∏–Ω—è–µ–º –±—É–ª–µ–≤—ã –º–∞—Å—Å–∏–≤—ã —Å –ø–æ–º–æ—â—å—é –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞ –ª–æ–≥–∏—á–µ—Å–∫–æ–≥–æ "–ò"
simple_recipe = short_time & few_ingredients

# –°–æ–∑–¥–∞–µ–º –Ω–æ–≤—ã–π —Å—Ç–æ–ª–±–µ—Ü —Å –ø–æ–º–æ—â—å—é —Ñ—É–Ω–∫—Ü–∏–∏ np.where()
data_with_simple_flag = np.insert(data, 3, np.where(simple_recipe, 1, 0), axis=1)

# –í—ã—á–∏—Å–ª—è–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ "–ø—Ä–æ—Å—Ç—ã—Ö" —Ä–µ—Ü–µ–ø—Ç–æ–≤ –≤ –º–∞—Å—Å–∏–≤–µ
simple_recipe_count = np.count_nonzero(data_with_simple_flag[:, 3] == 1)

# –í—ã—á–∏—Å–ª—è–µ–º –ø—Ä–æ—Ü–µ–Ω—Ç "–ø—Ä–æ—Å—Ç—ã—Ö" —Ä–µ—Ü–µ–ø—Ç–æ–≤ –æ—Ç –æ–±—â–µ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Ä–µ—Ü–µ–ø—Ç–æ–≤
percent_simple_recipe = simple_recipe_count / data.shape[0] * 100

print("–ü—Ä–æ—Ü–µ–Ω—Ç '–ø—Ä–æ—Å—Ç—ã—Ö' —Ä–µ—Ü–µ–ø—Ç–æ–≤ –≤ –¥–∞—Ç–∞—Å–µ—Ç–µ:", percent_simple_recipe, "%")

#14. –†–∞–∑–¥–µ–ª–∏–º —Ä–µ—Ü–µ–ø—Ç—ã –Ω–∞ –≥—Ä—É–ø–ø—ã –ø–æ —Å–ª–µ–¥—É—é—â–µ–º—É –ø—Ä–∞–≤–∏–ª—É. –ù–∞–∑–æ–≤–µ–º —Ä–µ—Ü–µ–ø—Ç—ã –∫–æ—Ä–æ—Ç–∫–∏–º–∏, –µ—Å–ª–∏ –∏—Ö –ø—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Å–æ—Å—Ç–∞–≤–ª—è–µ—Ç –º–µ–Ω–µ–µ 10 –º–∏–Ω—É—Ç; —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–º–∏, –µ—Å–ª–∏ –∏—Ö –ø—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Å–æ—Å—Ç–∞–≤–ª—è–µ—Ç –±–æ–ª–µ–µ 10, –Ω–æ –º–µ–Ω–µ–µ 20 –º–∏–Ω—É—Ç; –∏ –¥–ª–∏–Ω–Ω—ã–º–∏, –µ—Å–ª–∏ –∏—Ö –ø—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Å–æ—Å—Ç–∞–≤–ª—è–µ—Ç –Ω–µ –º–µ–Ω–µ–µ 20 –º–∏–Ω—É—Ç. –°–æ–∑–¥–∞–π—Ç–µ —Ç—Ä–µ—Ö–º–µ—Ä–Ω—ã–π –º–∞—Å—Å–∏–≤, –≥–¥–µ –Ω—É–ª–µ–≤–∞—è –æ—Å—å –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ –Ω–æ–º–µ—Ä –≥—Ä—É–ø–ø—ã (–∫–æ—Ä–æ—Ç–∫–∏–π, —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –∏–ª–∏ –¥–ª–∏–Ω–Ω—ã–π —Ä–µ—Ü–µ–ø—Ç), –ø–µ—Ä–≤–∞—è –æ—Å—å - –∑–∞ —Å–∞–º —Ä–µ—Ü–µ–ø—Ç –∏ –≤—Ç–æ—Ä–∞—è –æ—Å—å - –∑–∞ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ —Ä–µ—Ü–µ–ø—Ç–∞. –í—ã–±–µ—Ä–∏—Ç–µ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–µ—Ü–µ–ø—Ç–æ–≤ –∏–∑ –∫–∞–∂–¥–æ–π –≥—Ä—É–ø–ø—ã —Ç–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, —á—Ç–æ–±—ã –±—ã–ª–æ –≤–æ–∑–º–æ–∂–Ω–æ —Å—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å —Ç—Ä–µ—Ö–º–µ—Ä–Ω—ã–π –º–∞—Å—Å–∏–≤. –í—ã–≤–µ–¥–∏—Ç–µ —Ñ–æ—Ä–º—É –ø–æ–ª—É—á–µ–Ω–Ω–æ–≥–æ –º–∞—Å—Å–∏–≤–∞.

# –°–æ–∑–¥–∞–µ–º –±—É–ª–µ–≤—ã–µ –º–∞—Å—Å–∏–≤—ã –¥–ª—è –∫–∞–∂–¥–æ–π –≥—Ä—É–ø–ø—ã —Ä–µ—Ü–µ–ø—Ç–æ–≤
short_time = data[:, 1] < 10
standard_time = (data[:, 1] >= 10) & (data[:, 1] < 20)
long_time = data[:, 1] >= 20

# –í—ã–±–∏—Ä–∞–µ–º –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–µ—Ü–µ–ø—Ç–æ–≤ –∏–∑ –∫–∞–∂–¥–æ–π –≥—Ä—É–ø–ø—ã
max_short_time = np.count_nonzero(short_time)
max_standard_time = np.count_nonzero(standard_time)
max_long_time = np.count_nonzero(long_time)

# –°–æ–∑–¥–∞–µ–º —Ç—Ä–µ—Ö–º–µ—Ä–Ω—ã–π –º–∞—Å—Å–∏–≤
result_array = np.zeros((3, max(max_short_time, max_standard_time, max_long_time), data.shape[1]), dtype=np.int32)

# –î–æ–±–∞–≤–ª—è–µ–º —Ä–µ—Ü–µ–ø—Ç—ã –≤ –º–∞—Å—Å–∏–≤ –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏ —Å –≥—Ä—É–ø–ø–∞–º–∏
result_array[0, :max_short_time, :] = data[short_time]
result_array[1, :max_standard_time, :] = data[standard_time]
result_array[2, :max_long_time, :] = data[long_time]

# –í—ã–≤–æ–¥–∏–º —Ñ–æ—Ä–º—É –ø–æ–ª—É—á–µ–Ω–Ω–æ–≥–æ –º–∞—Å—Å–∏–≤–∞
print(result_array.shape)

#14. –ï—Å–ª–ª–∏ –Ω—É–∂–Ω–æ, –Ω–∞–æ–±–æ—Ä–æ—Ç, –ø–æ–ª—É—á–∏—Ç—å –º–∞—Å—Å–∏–≤, –≥–¥–µ –æ–¥–Ω–∞ –∏–∑ —Ä–∞–∑–º–µ—Ä–Ω–æ—Å—Ç–µ–π —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –Ω–∞–∏–º–µ–Ω—å—à–µ–º—É –∫–æ–ª-–≤—É —Ä–µ—Ü–µ–ø—Ç–æ–≤ –≤ –≥—Ä—É–ø–ø–µ, —Ç–æ –¥–µ–ª–∞—Ç—å —Ç–∞–∫:
m = data
group1 = m[m[:, 1] < 10]
group2 = m[(m[:, 1] >= 10) * (m[:, 1] < 20)]
group3 = m[m[:, 1] >= 20]
max_size = min(len(group1), len(group2), len(group3))
group1c = group1[:max_size]
group2c = group2[:max_size]
group3c = group3[:max_size]
d3 = np.array([group1c, group2c, group3c])
print(d3.shape)
"""

def pandas():
  return """
#1.1 –í —Ñ–∞–π–ª–∞—Ö recipes_sample.csv –∏ reviews_sample.csv –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± —Ä–µ—Ü–µ–ø—Ç–∞—Ö –±–ª—é–¥ –∏ –æ—Ç–∑—ã–≤–∞—Ö –Ω–∞ —ç—Ç–∏ —Ä–µ—Ü–µ–ø—Ç—ã 
#—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ. –ó–∞–≥—Ä—É–∑–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ –∏–∑ —Ñ–∞–π–ª–æ–≤ –≤ –≤–∏–¥–µ pd.DataFrame —Å –Ω–∞–∑–≤–∞–Ω–∏—è–º–∏ recipes –∏ reviews. –û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ –Ω–∞ 
#–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ —Å—á–∏—Ç—ã–≤–∞–Ω–∏–µ —Å—Ç–æ–ª–±—Ü–∞ —Å –∏–Ω–¥–µ–∫—Å–∞–º–∏ –≤ —Ç–∞–±–ª–∏—Ü–µ reviews (–±–µ–∑—ã–º—è–Ω–Ω—ã–π —Å—Ç–æ–ª–±–µ—Ü).
#2.1 –ü—Ä–µ–æ–±—Ä–∞–∑—É–π—Ç–µ —Å—Ç–æ–ª–±–µ—Ü submitted –∏–∑ —Ç–∞–±–ª–∏—Ü—ã recipes –≤ —Ñ–æ—Ä–º–∞—Ç –≤—Ä–µ–º–µ–Ω–∏. –ú–æ–¥–∏—Ñ–∏—Ü–∏—Ä—É–π—Ç–µ —Ä–µ—à–µ–Ω–∏–µ –∑–∞–¥–∞—á–∏ 1.1 —Ç–∞–∫, —á—Ç–æ–±—ã —Å—á–∏—Ç–∞—Ç—å —Å—Ç–æ–ª–±–µ—Ü —Å—Ä–∞–∑—É –≤ –Ω—É–∂–Ω–æ–º —Ñ–æ—Ä–º–∞—Ç–µ.

import pandas as pd
import numpy as np
recipes = pd.read_csv('recipes_sample.csv', parse_dates=['submitted'])
reviews = pd.read_csv('reviews_sample.csv', index_col=[0])
recipes[:3]


#1.2 –î–ª—è –∫–∞–∂–¥–æ–π –∏–∑ —Ç–∞–±–ª–∏—Ü –≤—ã–≤–µ–¥–∏—Ç–µ –æ—Å–Ω–æ–≤–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:

 #   –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–æ—á–µ–∫ –¥–∞–Ω–Ω—ã—Ö (—Å—Ç—Ä–æ–∫);
 #   –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ç–æ–ª–±—Ü–æ–≤;
 #   —Ç–∏–ø –¥–∞–Ω–Ω—ã—Ö –∫–∞–∂–¥–æ–≥–æ —Å—Ç–æ–ª–±—Ü–∞.

print('–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ç—Ä–æ–∫ –¥–ª—è –ø–µ—Ä–≤–æ–π —Ç–∞–±–ª–∏—Ü—ã =',len(recipes.axes[0]),
      '\n–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ç–æ–ª–±—Ü–æ–≤ –¥–ª—è –ø–µ—Ä–≤–æ–π —Ç–∞–±–ª–∏—Ü—ã =', len(recipes.axes[1]))
for i in range(0,len(recipes.axes[1])):
    print('–¢–∏–ø –¥–∞–Ω–Ω—ã—Ö –¥–ª—è',i+1, '—Å—Ç–æ–ª–±—Ü–∞:',type(recipes.iloc[0, i]))

print('–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ç—Ä–æ–∫ –¥–ª—è –≤—Ç–æ—Ä–æ–π —Ç–∞–±–ª–∏—Ü—ã =',len(reviews.axes[0]),
      '\n–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ç–æ–ª–±—Ü–æ–≤ –¥–ª—è –≤—Ç–æ—Ä–æ–π —Ç–∞–±–ª–∏—Ü—ã =', len(reviews.axes[1]))
for i in range(0,len(reviews.axes[1])):
    print('–¢–∏–ø –¥–∞–Ω–Ω—ã—Ö –¥–ª—è',i+1, '—Å—Ç–æ–ª–±—Ü–∞:',type(reviews.iloc[0,i]))


#1.3 –ò—Å—Å–ª–µ–¥—É–π—Ç–µ, –≤ –∫–∞–∫–∏—Ö —Å—Ç–æ–ª–±—Ü–∞—Ö —Ç–∞–±–ª–∏—Ü —Å–æ–¥–µ—Ä–∂–∞—Ç—Å—è –ø—Ä–æ–ø—É—Å–∫–∏. –ü–æ—Å—á–∏—Ç–∞–π—Ç–µ –¥–æ–ª—é —Å—Ç—Ä–æ–∫, —Å–æ–¥–µ—Ä–∂–∞—â–∏—Ö –ø—Ä–æ–ø—É—Å–∫–∏, –≤ –æ—Ç–Ω–æ—à–µ–Ω–∏–∏ –∫ –æ–±—â–µ–º—É –∫–æ–ª–∏—á–µ—Å—Ç–≤—É —Å—Ç—Ä–æ–∫.

null_rows_total1 = recipes.shape[0] - recipes.dropna().shape[0]    
print('–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–æ–ø—É—Å–∫–æ–≤ –≤ –∫–∞–∂–¥–æ–º —Å—Ç–æ–ª–±—Ü–µ –ø–µ—Ä–≤–æ–π —Ç–∞–±–ª–∏—Ü—ã:\n', recipes.isna().sum())
print('–î–æ–ª—è —Å—Ç—Ä–æ–∫, —Å–æ–¥–µ—Ä–∂–∞—â–∏—Ö –ø—Ä–æ–ø—É—Å–∫–∏: ', (null_rows_total1/len(recipes.axes[0]))*100,'%',sep='' )

null_rows_total2 = reviews.shape[0] - reviews.dropna().shape[0]
print('–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–æ–ø—É—Å–∫–æ–≤ –≤ –∫–∞–∂–¥–æ–º —Å—Ç–æ–ª–±—Ü–µ –≤—Ç–æ—Ä–æ–π —Ç–∞–±–ª–∏—Ü—ã:\n', reviews.isna().sum())
print('–î–æ–ª—è —Å—Ç—Ä–æ–∫, —Å–æ–¥–µ—Ä–∂–∞—â–∏—Ö –ø—Ä–æ–ø—É—Å–∫–∏: ', (null_rows_total2/len(reviews.axes[0]))*100,'%',sep='' )


#1.4 –†–∞—Å—Å—á–∏—Ç–∞–π—Ç–µ —Å—Ä–µ–¥–Ω–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∏–∑ —á–∏—Å–ª–æ–≤—ã—Ö —Å—Ç–æ–ª–±—Ü–æ–≤ (–≥–¥–µ —ç—Ç–æ –∏–º–µ–µ—Ç —Å–º—ã—Å–ª).

print('–°—Ä–µ–¥–Ω–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –¥–ª—è —Å—Ç–æ–ª–±—Ü–∞ minutes: ', recipes['minutes'].mean(), 
      '\n–°—Ä–µ–¥–Ω–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –¥–ª—è —Å—Ç–æ–ª–±—Ü–∞ n_steps: ', recipes['n_steps'].mean(), 
      '\n–°—Ä–µ–¥–Ω–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –¥–ª—è —Å—Ç–æ–ª–±—Ü–∞ n_ingredients: ', recipes['n_ingredients'].mean())

print('–°—Ä–µ–¥–Ω–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –¥–ª—è —Å—Ç–æ–ª–±—Ü–∞ rating: ', reviews['rating'].mean())


#1.5 –°–æ–∑–¥–∞–π—Ç–µ —Å–µ—Ä–∏—é –∏–∑ 10 —Å–ª—É—á–∞–π–Ω—ã—Ö –Ω–∞–∑–≤–∞–Ω–∏–π —Ä–µ—Ü–µ–ø—Ç–æ–≤.

ten_recipes = pd.Series(recipes['name'].sample(n = 10))
ten_recipes


#1.6 –ò–∑–º–µ–Ω–∏—Ç–µ –∏–Ω–¥–µ–∫—Å –≤ —Ç–∞–±–ª–∏—Ü–µ reviews, –ø—Ä–æ–Ω—É–º–µ—Ä–æ–≤–∞–≤ —Å—Ç—Ä–æ–∫–∏, –Ω–∞—á–∏–Ω–∞—è —Å –Ω—É–ª—è.

reviews.reset_index()


#1.7 –í—ã–≤–µ–¥–∏—Ç–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Ä–µ—Ü–µ–ø—Ç–∞—Ö, –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∫–æ—Ç–æ—Ä—ã—Ö –Ω–µ –±–æ–ª—å—à–µ 20 –º–∏–Ω—É—Ç –∏ –∫–æ–ª-–≤–æ –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç–æ–≤ –≤ –∫–æ—Ç–æ—Ä—ã—Ö –Ω–µ –±–æ–ª—å—à–µ 5.

recipes[(recipes.minutes < 21) & (recipes.n_ingredients < 6)]

#2.1 –ü—Ä–µ–æ–±—Ä–∞–∑—É–π—Ç–µ —Å—Ç–æ–ª–±–µ—Ü submitted –∏–∑ —Ç–∞–±–ª–∏—Ü—ã recipes –≤ —Ñ–æ—Ä–º–∞—Ç –≤—Ä–µ–º–µ–Ω–∏. –ú–æ–¥–∏—Ñ–∏—Ü–∏—Ä—É–π—Ç–µ —Ä–µ—à–µ–Ω–∏–µ –∑–∞–¥–∞—á–∏ 1.1 —Ç–∞–∫, —á—Ç–æ–±—ã —Å—á–∏—Ç–∞—Ç—å —Å—Ç–æ–ª–±–µ—Ü —Å—Ä–∞–∑—É –≤ –Ω—É–∂–Ω–æ–º —Ñ–æ—Ä–º–∞—Ç–µ.

import pandas as pd
import numpy as np
recipes = pd.read_csv('recipes_sample.csv', parse_dates=['submitted'])
reviews = pd.read_csv('reviews_sample.csv', index_col=[0])
print(recipes[:5]['submitted'])

#2.2 –í—ã–≤–µ–¥–∏—Ç–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Ä–µ—Ü–µ–ø—Ç–∞—Ö, –¥–æ–±–∞–≤–ª–µ–Ω–Ω—ã—Ö –≤ –¥–∞—Ç–∞—Å–µ—Ç –Ω–µ –ø–æ–∑–∂–µ 2010 –≥–æ–¥–∞.

recipes[recipes['submitted']>='2010-01-01']


#3.1 –î–æ–±–∞–≤—å—Ç–µ –≤ —Ç–∞–±–ª–∏—Ü—É recipes —Å—Ç–æ–ª–±–µ—Ü description_length, –≤ –∫–æ—Ç–æ—Ä–æ–º —Ö—Ä–∞–Ω–∏—Ç—Å—è –¥–ª–∏–Ω–∞ –æ–ø–∏—Å–∞–Ω–∏—è —Ä–µ—Ü–µ–ø—Ç–∞ –∏–∑ —Å—Ç–æ–ª–±—Ü–∞ description.

recipes['description_length']  = recipes['description'].str.len()


#3.2 –ò–∑–º–µ–Ω–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –∫–∞–∂–¥–æ–≥–æ —Ä–µ—Ü–µ–ø—Ç–∞ –≤ —Ç–∞–±–ª–∏—Ü–µ recipes —Ç–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, —á—Ç–æ–±—ã –∫–∞–∂–¥–æ–µ —Å–ª–æ–≤–æ –≤ –Ω–∞–∑–≤–∞–Ω–∏–∏ –Ω–∞—á–∏–Ω–∞–ª–æ—Å—å —Å –ø—Ä–æ–ø–∏—Å–Ω–æ–π –±—É–∫–≤—ã.

recipes['name'] = recipes['name'].str.capitalize()


#3.3 –î–æ–±–∞–≤—å—Ç–µ –≤ —Ç–∞–±–ª–∏—Ü—É recipes —Å—Ç–æ–ª–±–µ—Ü name_word_count, –≤ –∫–æ—Ç–æ—Ä–æ–º —Ö—Ä–∞–Ω–∏—Ç—Å—è –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–ª–æ–≤ –∏–∑ –Ω–∞–∑–≤–∞–Ω–∏–∏ —Ä–µ—Ü–µ–ø—Ç–∞ (—Å—á–∏—Ç–∞–π—Ç–µ, —á—Ç–æ —Å–ª–æ–≤–∞ –≤ –Ω–∞–∑–≤–∞–Ω–∏–∏ 
#—Ä–∞–∑–¥–µ–ª—è—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–æ–±–µ–ª–∞–º–∏). –û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ, —á—Ç–æ –º–µ–∂–¥—É —Å–ª–æ–≤–∞–º–∏ –º–æ–∂–µ—Ç —Ä–∞—Å–ø–æ–ª–∞–≥–∞—Ç—å—Å—è –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø—Ä–æ–±–µ–ª–æ–≤ –ø–æ–¥—Ä—è–¥.

recipes['name_word_count'] = [len(x.split()) for x in recipes['name'].tolist()]


#4.1 –ü–æ—Å—á–∏—Ç–∞–π—Ç–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–µ—Ü–µ–ø—Ç–æ–≤, –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã—Ö –∫–∞–∂–¥—ã–º –∏–∑ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ (contributor_id). –ö–∞–∫–æ–π —É—á–∞—Å—Ç–Ω–∏–∫ –¥–æ–±–∞–≤–∏–ª –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª-–≤–æ —Ä–µ—Ü–µ–ø—Ç–æ–≤?

c = recipes.groupby("contributor_id").size()
print('–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–µ—Ü–µ–ø—Ç–æ–≤, –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã—Ö –∫–∞–∂–¥—ã–º –∏–∑ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤', c, 
      '\n–£—á–∞—Å—Ç–Ω–∏–∫, –∫–æ—Ç–æ—Ä—ã–π –¥–æ–±–∞–≤–∏–ª –Ω–∞–∏–±–æ–ª—å—à–µ–µ –∫–æ–ª-–≤–æ —Ä–µ—Ü–µ–ø—Ç–æ–≤: ', 
      c[c == c.max()].index[0])


#4.2 –ü–æ—Å—á–∏—Ç–∞–π—Ç–µ —Å—Ä–µ–¥–Ω–∏–π —Ä–µ–π—Ç–∏–Ω–≥ –∫ –∫–∞–∂–¥–æ–º—É –∏–∑ —Ä–µ—Ü–µ–ø—Ç–æ–≤. –î–ª—è —Å–∫–æ–ª—å–∫–∏—Ö —Ä–µ—Ü–µ–ø—Ç–æ–≤ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç –æ—Ç–∑—ã–≤—ã? –û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ, —á—Ç–æ –æ—Ç–∑—ã–≤ —Å –Ω—É–ª–µ–≤—ã–º —Ä–µ–π—Ç–∏–Ω–≥–æ–º –∏–ª–∏ –Ω–µ 
#—Å –Ω—É–ª–µ–≤—ã–º —Ä–µ–π—Ç–∏–Ω–≥–æ–º –∏–ª–∏ –Ω–µ –∑–∞–ø–æ–ª–Ω–µ–Ω–Ω—ã–º —Ç–µ–∫—Å—Ç–æ–≤—ã–º –æ–ø–∏—Å–∞–Ω–∏–µ–º –Ω–µ —Å—á–∏—Ç–∞–µ—Ç—Å—è –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–º.
print('–ö–æ–ª-–≤–æ —Ä–µ—Ü–µ–ø—Ç–æ–≤, –¥–ª—è –∫–æ—Ç–æ—Ä—ã—Ö –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç –æ—Ç–∑—ã–≤—ã', 
      len(recipes.groupby('name').size()) - len(reviews.groupby('recipe_id').size()))
reviews.groupby('recipe_id').mean('rating').drop('user_id', axis=1)


#4.3 –ü–æ—Å—á–∏—Ç–∞–π—Ç–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–µ—Ü–µ–ø—Ç–æ–≤ —Å —Ä–∞–∑–±–∏–≤–∫–æ–π –ø–æ –≥–æ–¥–∞–º —Å–æ–∑–¥–∞–Ω–∏—è.

recipes.groupby(recipes.submitted.dt.year).size()


#5.1 –ü—Ä–∏ –ø–æ–º–æ—â–∏ –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏—è —Ç–∞–±–ª–∏—Ü, —Å–æ–∑–¥–∞–π—Ç–µ DataFrame, —Å–æ—Å—Ç–æ—è—â–∏–π –∏–∑ —á–µ—Ç—ã—Ä–µ—Ö —Å—Ç–æ–ª–±—Ü–æ–≤: id, name, user_id, rating. –†–µ—Ü–µ–ø—Ç—ã, –Ω–∞ 
#–∫–æ—Ç–æ—Ä—ã–µ –Ω–µ –æ—Å—Ç–∞–≤–ª–µ–Ω –Ω–∏ –æ–¥–∏–Ω –æ—Ç–∑—ã–≤, –¥–æ–ª–∂–Ω—ã –æ—Ç—Å—É—Ç—Å—Ç–≤–æ–≤–∞—Ç—å –≤ –ø–æ–ª—É—á–µ–Ω–Ω–æ–π —Ç–∞–±–ª–∏—Ü–µ. –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å —Ä–∞–±–æ—Ç—ã –≤–∞—à–µ–≥–æ –∫–æ–¥–∞, 
#–≤—ã–±—Ä–∞–≤ —Ä–µ—Ü–µ–ø—Ç, –Ω–µ –∏–º–µ—é—â–∏–π –æ—Ç–∑—ã–≤–æ–≤, –∏ –ø–æ–ø—ã—Ç–∞–≤—à–∏—Å—å –Ω–∞–π—Ç–∏ —Å—Ç—Ä–æ–∫—É, —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â—É—é —ç—Ç–æ–º—É —Ä–µ—Ü–µ–ø—Ç—É, –≤ –ø–æ–ª—É—á–µ–Ω–Ω–æ–º DataFrame.

import pandas as pd
import numpy as np
recipes = pd.read_csv('recipes_sample.csv', parse_dates=['submitted'])
reviews = pd.read_csv('reviews_sample.csv', index_col=[0])

df = recipes[['id','name']].copy()
dfm = df.merge(reviews[['user_id','rating', 'recipe_id']], left_on='id', right_on='recipe_id')
dfm = dfm.drop('recipe_id', axis=1)

print(dfm[:5])

dfa = df.merge(reviews[['user_id','rating', 'recipe_id']], left_on='id', right_on='recipe_id', how='left').drop('recipe_id', axis=1)

recipes_without_reviews = dfa[dfa['user_id'].isna()]
print(recipes_without_reviews[:5])
id_of_recipe_without_reviews = recipes_without_reviews.iloc[0, 0]
print(id_of_recipe_without_reviews)

print(dfm[dfm['id'] == id_of_recipe_without_reviews])

#5.2 –ü—Ä–∏ –ø–æ–º–æ—â–∏ –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏—è —Ç–∞–±–ª–∏—Ü –∏ –≥—Ä—É–ø–ø–∏—Ä–æ–≤–æ–∫, —Å–æ–∑–¥–∞–π—Ç–µ DataFrame, —Å–æ—Å—Ç–æ—è—â–∏–π –∏–∑ —Ç—Ä–µ—Ö —Å—Ç–æ–ª–±—Ü–æ–≤: recipe_id, name, 
#review_count, –≥–¥–µ —Å—Ç–æ–ª–±–µ—Ü review_count —Å–æ–¥–µ—Ä–∂–∏—Ç –∫–æ–ª-–≤–æ –æ—Ç–∑—ã–≤–æ–≤, –æ—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã—Ö –Ω–∞ —Ä–µ—Ü–µ–ø—Ç recipe_id. –£ —Ä–µ—Ü–µ–ø—Ç–æ–≤, –Ω–∞ –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ 
#–æ—Å—Ç–∞–≤–ª–µ–Ω –Ω–∏ –æ–¥–∏–Ω –æ—Ç–∑—ã–≤, –≤ —Å—Ç–æ–ª–±—Ü–µ review_count –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —É–∫–∞–∑–∞–Ω 0. –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å —Ä–∞–±–æ—Ç—ã –≤–∞—à–µ–≥–æ –∫–æ–¥–∞, –≤—ã–±—Ä–∞–≤ 
#—Ä–µ—Ü–µ–ø—Ç, –Ω–µ –∏–º–µ—é—â–∏–π –æ—Ç–∑—ã–≤–æ–≤, –∏ –Ω–∞–π–¥—è —Å—Ç—Ä–æ–∫—É, —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â—É—é —ç—Ç–æ–º—É —Ä–µ—Ü–µ–ø—Ç—É, –≤ –ø–æ–ª—É—á–µ–Ω–Ω–æ–º DataFrame.

import pandas as pd
import numpy as np
recipes = pd.read_csv('recipes_sample.csv', parse_dates=['submitted'])
reviews = pd.read_csv('reviews_sample.csv', index_col=[0])

df = recipes[['id','name']].copy()
c = reviews.groupby('recipe_id').size().reset_index(name='review_count')
dfm = df.merge(c, left_on='id', right_on='recipe_id', how='left')
dfm = dfm.drop('recipe_id', axis=1)
dfm = dfm.rename(columns={"id": "recipe_id"})
dfm = dfm.fillna(0)

print(dfm[:5])

print(dfm[dfm['review_count'] < 1])

#5.3. –í—ã—è—Å–Ω–∏—Ç–µ, —Ä–µ—Ü–µ–ø—Ç—ã, –¥–æ–±–∞–≤–ª–µ–Ω–Ω—ã–µ –≤ –∫–∞–∫–æ–º –≥–æ–¥—É, –∏–º–µ—é—Ç –Ω–∞–∏–º–µ–Ω—å—à–∏–π —Å—Ä–µ–¥–Ω–∏–π —Ä–µ–π—Ç–∏–Ω–≥?

df = recipes[['id','name']].copy()
df = df.merge(reviews[['recipe_id', 'rating', 'date']], right_on='recipe_id', left_on='id')
df = df.drop(['id', 'name', 'recipe_id'], axis=1)
df.date = pd.DatetimeIndex(df.date).to_period("Y")
df.groupby('date').mean().sort_values('rating')


#6.1 –û—Ç—Å–æ—Ä—Ç–∏—Ä—É–π—Ç–µ —Ç–∞–±–ª–∏—Ü—É –≤ –ø–æ—Ä—è–¥–∫–µ —É–±—ã–≤–∞–Ω–∏—è –≤–µ–ª–∏—á–∏–Ω—ã —Å—Ç–æ–ª–±—Ü–∞ name_word_count –∏ —Å–æ—Ö—Ä–∞–Ω–∏—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–¥–∞–Ω–∏–π 3.1-3.3 –≤ csv —Ñ–∞–π–ª. 

recipes = recipes.sort_values(by=['name_word_count'], ascending=False)
recipes.to_csv("my_data.csv", index=True)


#6.2 –í–æ—Å–ø–æ–ª—å–∑–æ–≤–∞–≤—à–∏—Å—å pd.ExcelWriter, c–æ—Ö—Ä–∞–Ω–∏—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã 5.1 –∏ 5.2 –≤ —Ñ–∞–π–ª: –Ω–∞ –ª–∏—Å—Ç —Å –Ω–∞–∑–≤–∞–Ω–∏–µ–º –†–µ—Ü–µ–ø—Ç—ã —Å –æ—Ü–µ–Ω–∫–∞–º–∏ —Å–æ—Ö—Ä–∞–Ω–∏—Ç–µ 
#—Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è 5.1; –Ω–∞ –ª–∏—Å—Ç —Å –Ω–∞–∑–≤–∞–Ω–∏–µ–º –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—Ç–∑—ã–≤–æ–≤ –ø–æ —Ä–µ—Ü–µ–ø—Ç–∞–º —Å–æ—Ö—Ä–∞–Ω–∏—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è 5.2.

with pd.ExcelWriter("res.xlsx") as writer:
    df5_1.to_excel(writer, sheet_name="–†–µ—Ü–µ–ø—Ç—ã —Å –æ—Ü–µ–Ω–∫–∞–º–∏")  
    df5_2.to_excel(writer, sheet_name="–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—Ç–∑—ã–≤–æ–≤ –ø–æ —Ä–µ—Ü–µ–ø—Ç–∞–º")
"""

def json():
  return """
#–ó–∞–¥–∞—á–∏ –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–Ω–æ–≥–æ —Ä–∞–∑–±–æ—Ä–∞

#1. –í—ã–≤–µ—Å—Ç–∏ –≤—Å–µ –∞–¥—Ä–µ—Å–∞ —ç–ª–µ–∫—Ç—Ä–æ–Ω–Ω–æ–π –ø–æ—á—Ç—ã, —Å–æ–¥–µ—Ä–∂–∞—â–∏–µ—Å—è –≤ –∞–¥—Ä–µ—Å–Ω–æ–π –∫–Ω–∏–≥–µ addres-book.json

import json

with open("./data/addres-book.json", "r", encoding="utf-8") as f:
    data = json.load(f)

for i, j in enumerate(data):
    print(data[i]["email"])

#2. –í—ã–≤–µ—Å—Ç–∏ —Ç–µ–ª–µ—Ñ–æ–Ω—ã, —Å–æ–¥–µ—Ä–∂–∞—â–∏–µ—Å—è –≤ –∞–¥—Ä–µ—Å–Ω–æ–π –∫–Ω–∏–≥–µ addres-book.json

for i in range(len(data)):
    # for _, j in enumerate(i):
    # print(i)
    for j in data[i]["phones"]:
        print(j["phone"])

#3. –ü–æ –¥–∞–Ω–Ω—ã–º –∏–∑ —Ñ–∞–π–ª–∞ addres-book-q.xml —Å—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å —Å–ø–∏—Å–æ–∫ —Å–ª–æ–≤–∞—Ä–µ–π —Å —Ç–µ–ª–µ—Ñ–æ–Ω–∞–º–∏ –∫–∞–∂–¥–æ–≥–æ –∏–∑ –ª—é–¥–µ–π.

from bs4 import BeautifulSoup

with open("./data/addres-book-q.xml", "r", encoding="utf8") as f:
    data = BeautifulSoup(f)

l = []
for adr in data.find_all("address"):
    for name in adr.find_all("name"):
        na = name.getText()
    ph_l = []
    for phone in adr.find_all("phone"):
        
        ph_l.append(phone.text)

    l.append({na:ph_l})
        
print(l)

#–õ–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–∞—è —Ä–∞–±–æ—Ç–∞ ‚Ññ4

import json
import pickle

with open("./data/addres-book.json", "r", encoding="utf-8") as f:
    data = json.load(f)

#1.1 –°—á–∏—Ç–∞–π—Ç–µ —Ñ–∞–π–ª contributors_sample.json. –í–æ—Å–ø–æ–ª—å–∑–æ–≤–∞–≤—à–∏—Å—å –º–æ–¥—É–ª–µ–º json, –ø—Ä–µ–æ–±—Ä–∞–∑—É–π—Ç–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–∞ –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ –æ–±—ä–µ–∫—Ç—ã python. –í—ã–≤–µ–¥–∏—Ç–µ –Ω–∞ —ç–∫—Ä–∞–Ω –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø–µ—Ä–≤—ã—Ö 3 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è—Ö.

class User:

    def __init__(self, username, name, sex, address, mail, jobs, id):
        self.username = username
        self.name = name
        self.sex = sex
        self.address = address
        self.mail = mail
        self.jobs = jobs
        self.id = id

    def __str__(self) -> str:
        jobs_str = ", ".join(self.jobs)
        return f"\nId: {self.id}\nUsername: {self.username}\nName: {self.name}\nSex: {self.sex}\naddress: {self.address}\nmail: {self.mail}\njobs: {jobs_str}\n\n#########################"


with open("./data/contributors_sample.json", "r", encoding="utf8") as f:
    data = json.load(f)

user_l = []
for i in data:
    user_l.append(User(**i))

for usr in user_l[:3]:
    print(usr)

#1.2 –í—ã–≤–µ–¥–∏—Ç–µ —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ –ø–æ—á—Ç–æ–≤—ã–µ –¥–æ–º–µ–Ω—ã, —Å–æ–¥–µ—Ä–∂–∞—â–∏–µ—Å—è –≤ –ø–æ—á—Ç–æ–≤—ã—Ö –∞–¥—Ä–µ—Å–∞—Ö –ª—é–¥–µ–π

# l = []
# for i in data:
#     dom = i["mail"].split("@")[1]
#     if dom not in l:
#         l.append(i["mail"].split("@")[1])

# print(l)

list(set([(usr.mail.split("@")[1]) for usr in user_l]))

#1.3 –ù–∞–ø–∏—à–∏—Ç–µ —Ñ—É–Ω–∫—Ü–∏—é, –∫–æ—Ç–æ—Ä–∞—è –ø–æ username –∏—â–µ—Ç —á–µ–ª–æ–≤–µ–∫–∞ –∏ –≤—ã–≤–æ–¥–∏—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –Ω–µ–º. –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å –∑–∞–¥–∞–Ω–Ω—ã–º username –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç, –≤–æ–∑–±—É–¥–∏—Ç–µ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ ValueError


def find_by_username(usr_name):
    c = 0
    for i in data:
        if usr_name == i["username"]:
            print(i["username"])
            c += 1
    if c == 0:
        print("user not found")

find_by_username("uheber")

#1.4 –ü–æ—Å—á–∏—Ç–∞–π—Ç–µ, —Å–∫–æ–ª—å–∫–æ –º—É–∂—á–∏–Ω –∏ –∂–µ–Ω—â–∏–Ω –ø—Ä–∏—Å—É—Ç—Å–≤—É–µ—Ç –≤ —ç—Ç–æ–º –Ω–∞–±–æ—Ä–µ –¥–∞–Ω–Ω—ã—Ö.

def male_female():
    m, f = 0, 0
    for i in data:
        if i["sex"] == "M":
            m += 1
        else:
            f += 1
    return f"–º—É–∂—á–∏–Ω: {m}, –∂–µ–Ω—â–∏–Ω: {f}"

male_female()

#1.5 –°–æ–∑–¥–∞–π—Ç–µ pd.DataFrame contributors, –∏–º–µ—é—â–∏–π —Å—Ç–æ–ª–±—Ü—ã id, username –∏ sex.

import pandas as pd
    
contributors = pd.read_json("./data/contributors_sample.json").drop(["name", "address", "mail", "jobs"], axis=1)
col = contributors.pop("id")
contributors.insert(0, col.name, col)
print(contributors)

#1.6 –ó–∞–≥—Ä—É–∑–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ –∏–∑ —Ñ–∞–π–ª–∞ recipes_sample.csv (–õ–†2) –≤ —Ç–∞–±–ª–∏—Ü—É recipes. –û–±—ä–µ–¥–∏–Ω–∏—Ç–µ recipes —Å —Ç–∞–±–ª–∏—Ü–µ–π contributors —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º —Å—Ç—Ä–æ–∫ –≤ —Ç–æ–º —Å–ª—É—á–∞–µ, –µ—Å–ª–∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —á–µ–ª–æ–≤–µ–∫–µ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –≤ JSON-—Ñ–∞–π–ª–µ. –î–ª—è —Å–∫–æ–ª—å–∫–∏—Ö —á–µ–ª–æ–≤–µ–∫ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç?

recipes = pd.read_csv("./data/recipes_sample.csv", sep=",")
recipes = recipes.merge(contributors, left_on="contributor_id", right_on="id", how="left")
recipes = recipes[pd.isna(recipes["id_y"])] # –µ—Å–ª–∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç
print(len(recipes["contributor_id"].unique()))

#2.1 –ù–∞ –æ—Å–Ω–æ–≤–µ —Ñ–∞–π–ª–∞ contributors_sample.json —Å–æ–∑–¥–∞–π—Ç–µ —Å–ª–æ–≤–∞—Ä—å —Å–ª–µ–¥—É—é—â–µ–≥–æ –≤–∏–¥–∞:
#{
#    –¥–æ–ª–∂–Ω–æ—Å—Ç—å: [—Å–ø–∏—Å–æ–∫ username –ª—é–¥–µ–π, –∑–∞–Ω–∏–º–∞–≤—à–∏—Ö —ç—Ç—É –¥–æ–ª–∂–Ω–æ—Å—Ç—å]
#}

with open("./data/contributors_sample.json", "r", encoding="utf8") as f:
    data = json.load(f)

d = {}
for i in data:
    for job in i["jobs"]:
        if job not in d:
            d[job] = []
        d[job].append(i["username"])

print({k: d[k] for k in list(d)[:3]})

#2.2 –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤ —Ñ–∞–π–ª job_people.pickle –∏ –≤ —Ñ–∞–π–ª job_people.json —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º —Ñ–æ—Ä–º–∞—Ç–æ–≤ pickle –∏ JSON —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ. –°—Ä–∞–≤–Ω–∏—Ç–µ –æ–±—ä–µ–º—ã –ø–æ–ª—É—á–∏–≤—à–∏—Ö—Å—è —Ñ–∞–π–ª–æ–≤. –ü—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ –≤ JSON —É–∫–∞–∂–∏—Ç–µ –∞—Ä–≥—É–º–µ–Ω—Ç indent.

with open("./data/job_people.pickle", "wb") as f:
    pickle.dump(d, f)

with open("./data/job_people.json", "w") as f:
    json.dump(d, f, indent=1)

import os
print("pickle :", os.path.getsize("./data/job_people.pickle"))
print("json   :", os.path.getsize("./data/job_people.json"))

#2.3 –°—á–∏—Ç–∞–π—Ç–µ —Ñ–∞–π–ª job_people.pickle –∏ –ø—Ä–æ–¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–π—Ç–µ, —á—Ç–æ –¥–∞–Ω–Ω—ã–µ —Å—á–∏—Ç–∞–ª–∏—Å—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ.

with open("./data/job_people.pickle", "rb") as f:
    d_pickle = pickle.load(f)

print({k: d_pickle[k] for k in list(d_pickle)[:3]})

#3.1 –ü–æ –¥–∞–Ω–Ω—ã–º —Ñ–∞–π–ª–∞ steps_sample.xml —Å—Ñ–æ—Ä–º–∏—Ä—É–π—Ç–µ —Å–ª–æ–≤–∞—Ä—å —Å —à–∞–≥–∞–º–∏ –ø–æ –∫–∞–∂–¥–æ–º—É —Ä–µ—Ü–µ–ø—Ç—É –≤–∏–¥–∞ {id_—Ä–µ—Ü–µ–ø—Ç–∞: ["—à–∞–≥1", "—à–∞–≥2"]}. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ —ç—Ç–æ—Ç —Å–ª–æ–≤–∞—Ä—å –≤ —Ñ–∞–π–ª steps_sample.json

from bs4 import BeautifulSoup

with open("./data/steps_sample.xml", "r") as f:
    data_xml = BeautifulSoup(f)

cook = {}

for recipe in data_xml.find_all("recipe"):
    id = recipe.find("id")
    if id.text not in cook:
        cook[id.text] = []
    for step in recipe.find_all("step"):
        cook[id.text].append(step.text)

with open("./data/steps_sample.json", "w") as f:
    json.dump(cook, f, indent=1)

#3.2 –ü–æ –¥–∞–Ω–Ω—ã–º —Ñ–∞–π–ª–∞ steps_sample.xml —Å—Ñ–æ—Ä–º–∏—Ä—É–π—Ç–µ —Å–ª–æ–≤–∞—Ä—å —Å–ª–µ–¥—É—é—â–µ–≥–æ –≤–∏–¥–∞: –∫–æ–ª-–≤–æ_—à–∞–≥–æ–≤_–≤_—Ä–µ—Ü–µ–ø—Ç–µ: [—Å–ø–∏—Å–æ–∫_id_—Ä–µ—Ü–µ–ø—Ç–æ–≤]

step_recipe = {}
for recipe in data_xml.find_all("recipe"):
    step_count = len(recipe.find_all("step"))
    if step_count not in step_recipe:
        step_recipe[step_count] = []
    step_recipe[step_count].append(recipe.find("id").text)

# print({k: step_recipe[k] for k in list(step_recipe)[:2]})

#3.3 –ü–æ–ª—É—á–∏—Ç–µ —Å–ø–∏—Å–æ–∫ —Ä–µ—Ü–µ–ø—Ç–æ–≤, –≤ —ç—Ç–∞–ø–∞—Ö –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∫–æ—Ç–æ—Ä—ã—Ö –µ—Å—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –≤—Ä–µ–º–µ–Ω–∏ (—á–∞—Å—ã –∏–ª–∏ –º–∏–Ω—É—Ç—ã). –î–ª—è –æ—Ç–±–æ—Ä–∞ –ø–æ–¥—Ö–æ–¥—è—â–∏—Ö —Ä–µ—Ü–µ–ø—Ç–æ–≤ –æ–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ –Ω–∞ –∞—Ç—Ä–∏–±—É—Ç—ã —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏—Ö —Ç—ç–≥–æ–≤.

recipes_with_time_info = []

for recipe in data_xml.find_all("recipe"):
    for step in recipe.find_all("step"):
        
        if "has_minutes" in step.attrs or "has_hours" in step.attrs:
            recipes_with_time_info.append(recipe.find("id").text)
            break


print(recipes_with_time_info[:5])

#3.4 –ó–∞–≥—Ä—É–∑–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ –∏–∑ —Ñ–∞–π–ª–∞ recipes_sample.csv (–õ–†2) –≤ —Ç–∞–±–ª–∏—Ü—É recipes. –î–ª—è —Å—Ç—Ä–æ–∫, –∫–æ—Ç–æ—Ä—ã–µ —Å–æ–¥–µ—Ä–∂–∞—Ç –ø—Ä–æ–ø—É—Å–∫–∏ –≤ —Å—Ç–æ–ª–±—Ü–µ n_steps, –∑–∞–ø–æ–ª–Ω–∏—Ç–µ —ç—Ç–æ—Ç —Å—Ç–æ–ª–±–µ—Ü –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ñ–∞–π–ª–∞ steps_sample.xml. –°—Ç—Ä–æ–∫–∏, –≤ –∫–æ—Ç–æ—Ä—ã—Ö —Å—Ç–æ–ª–±–µ—Ü n_steps –∑–∞–ø–æ–ª–Ω–µ–Ω, –æ—Å—Ç–∞–≤—å—Ç–µ –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π.

import pandas as pd
import numpy as np
from bs4 import BeautifulSoup

recipes = pd.read_csv("./data/recipes_sample.csv", sep=',')
recipes_with_missing_steps = recipes[recipes['n_steps'].isnull()]

print(recipes_with_missing_steps[['name', 'n_steps']].head(5)) 

with open("./data/steps_sample.xml", "r") as f:
    data_xml = BeautifulSoup(f, 'xml')

for recipe in data_xml.find_all("recipe"):
    id = int(recipe.find("id").text)
    if np.isnan(recipes[recipes["id"] == id]["n_steps"].values[0]):
        recipes.loc[recipes.id == id, "n_steps"] = len(
            recipe.find_all("step"))

recipes_with_missing_steps_2 = recipes[recipes['n_steps'].isnull()]

print(recipes_with_missing_steps_2[['name', 'n_steps']].head(5)) 

#3.5 –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —Å–æ–¥–µ—Ä–∂–∏—Ç –ª–∏ —Å—Ç–æ–ª–±–µ—Ü n_steps –ø—Ä–æ–ø—É—Å–∫–∏. –ï—Å–ª–∏ –Ω–µ—Ç, —Ç–æ –ø—Ä–µ–æ–±—Ä–∞–∑—É–π—Ç–µ –µ–≥–æ –∫ —Ü–µ–ª–æ—á–∏—Å–ª–µ–Ω–Ω–æ–º—É —Ç–∏–ø—É –∏ —Å–æ—Ö—Ä–∞–Ω–∏—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤ —Ñ–∞–π–ª recipes_sample_with_filled_nsteps.csv

import numpy as np
import pandas as pd

recipes = pd.read_csv("./data/recipes_sample.csv", sep=',')

if recipes["n_steps"].isna().sum() == 0:
    recipes["n_steps"] = recipes["n_steps"].astype(np.int)
    recipes.to_csv("./data/recipes_sample_with_filled_nsteps.csv", index=False)
else:
    print("n_steps column has gaps. unable to save csv")
"""

def visualization():
  return """
import pandas as pd
import numpy as np
import matplotlib.pyplot as plt
import matplotlib.dates as mdates
import seaborn as sns

#–ó–∞–¥–∞—á–∏ –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–Ω–æ–≥–æ —Ä–∞–∑–±–æ—Ä–∞

#1. –ü—Ä–∏ –ø–æ–º–æ—â–∏ –ø–∞–∫–µ—Ç–∞ pandas_datareader –∑–∞–≥—Ä—É–∑–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ –æ —Ü–µ–Ω–∞—Ö –∞–∫—Ü–∏–π Apple —Å 2017-01-01 –ø–æ 2018-12-31. –í–∏–∑—É–∞–ª–∏–∑–∏—Ä—É–π—Ç–µ –≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Ä—è–¥ —Ü–µ–Ω –∞–∫—Ü–∏–π.

import matplotlib.pyplot as plt
from pandas_datareader import data as pdr
import yfinance as yf
yf.pdr_override()

start_date = '2017-01-01'
end_date = '2018-12-31'
aapl = pdr.get_data_yahoo('AAPL', start=start_date, end=end_date)

plt.figure(figsize=(14, 7))
plt.plot(aapl['Close'], label='–¶–µ–Ω–∞')
plt.xlabel('–î–∞—Ç–∞')
plt.ylabel('–¶–µ–Ω–∞')
plt.title('–¶–µ–Ω–∞ –∞–∫—Ü–∏–π Apple —Å ' + start_date + ' –ø–æ ' + end_date)
plt.legend()
plt.show()

#2. –ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä—É–π—Ç–µ –≤—Ä–µ–º–µ–Ω–Ω–æ–π —Ä—è–¥ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π —Ü–µ–Ω—ã –∞–∫—Ü–∏–π –Ω–∞ –ø—Ä–µ–¥–º–µ—Ç –≤—ã–±—Ä–æ—Å–æ–≤.

# –í—ã—á–∏—Å–ª–µ–Ω–∏–µ —Å–∫–æ–ª—å–∑—è—â–µ–≥–æ —Å—Ä–µ–¥–Ω–µ–≥–æ –∏ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–≥–æ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏—è —Å –æ–∫–Ω–æ–º —Ä–∞–∑–º–µ—Ä–æ–º 30 –¥–Ω–µ–π
aapl['Rolling_Mean'] = aapl['High'].rolling(window=30).mean()
aapl['Rolling_STD'] = aapl['High'].rolling(window=30).std()

# –í—ã—á–∏—Å–ª–µ–Ω–∏–µ –≤–µ—Ä—Ö–Ω–µ–≥–æ –∏ –Ω–∏–∂–Ω–µ–≥–æ –ø–æ—Ä–æ–≥–∞ –≤—ã–±—Ä–æ—Å–æ–≤ —Å –ø–æ–º–æ—â—å—é –º–µ–∂–∫–≤–∞—Ä—Ç–∏–ª—å–Ω–æ–≥–æ —Ä–∞–∑–º–∞—Ö–∞ (IQR)
q1 = aapl['High'].quantile(0.25)
q3 = aapl['High'].quantile(0.75)
iqr = q3 - q1
upper_bound = q3 + 1.5 * iqr
lower_bound = q1 - 1.5 * iqr

# –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –≤—ã–±—Ä–æ—Å–æ–≤
outliers = aapl[(aapl['High'] > upper_bound) | (aapl['High'] < lower_bound)]

# –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ —Ä—è–¥–∞ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π —Ü–µ–Ω—ã –∞–∫—Ü–∏–π –∏ –≤—ã–±—Ä–æ—Å–æ–≤
plt.figure(figsize=(14, 7))
plt.plot(aapl['High'], label='–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —Ü–µ–Ω–∞ –∞–∫—Ü–∏–π')
plt.scatter(outliers.index, outliers['High'], color='red', label='–í—ã–±—Ä–æ—Å—ã')
plt.xlabel('–î–∞—Ç–∞')
plt.ylabel('–¶–µ–Ω–∞')
plt.title('–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —Ü–µ–Ω–∞ –∞–∫—Ü–∏–π Apple —Å 2017-01-01 –ø–æ 2018-12-31 –∏ –≤—ã–±—Ä–æ—Å—ã')
plt.legend()
plt.show()

#–õ–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–∞—è —Ä–∞–±–æ—Ç–∞ 5.1

#1. –í —Ñ–∞–π–ª–µ average_ratings.npy —Å–æ–¥–µ—Ä–∂–∏—Ç—Å—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å—Ä–µ–¥–Ω–µ–º —Ä–µ–π—Ç–∏–Ω–≥–µ 3 —Ä–µ—Ü–µ–ø—Ç–æ–≤ –∑–∞ –ø–µ—Ä–∏–æ–¥ —Å 01.01.2019 –ø–æ 30.12.2021. –ü—Ä–∏ –ø–æ–º–æ—â–∏ –ø–∞–∫–µ—Ç–∞ matplotlib –≤ –æ–¥–Ω–æ–π —Å–∏—Å—Ç–µ–º–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç (–Ω–∞ –æ–¥–Ω–æ–π –∫–∞—Ä—Ç–∏–Ω–∫–µ) –∏–∑–æ–±—Ä–∞–∑–∏—Ç–µ —Ç—Ä–∏ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ä—è–¥–∞, —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏—Ö —Å—Ä–µ–¥–Ω–∏–º —Ä–µ–π—Ç–∏–Ω–≥–∞–º —ç—Ç–∏—Ö —Ä–µ—Ü–µ–ø—Ç–æ–≤.
#–ü–æ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–π –æ—Å–∏ —Ä–∞—Å–ø–æ–ª–∞–≥–∞–µ—Ç—Å—è –Ω–æ–º–µ—Ä –¥–Ω—è (0, 1, 2, ...), –ø–æ –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–æ–π - —Å—Ä–µ–¥–Ω–∏–π —Ä–µ–π—Ç–∏–Ω–≥ —Ä–µ—Ü–µ–ø—Ç–æ–≤ –≤ —ç—Ç–æ—Ç –¥–µ–Ω—å.
#–ù–∞–∑–≤–∞–Ω–∏—è —Ä–µ—Ü–µ–ø—Ç–æ–≤ –∏ –∏—Ö –∏–Ω–¥–µ–∫—Å—ã –≤ —Ñ–∞–π–ª–µ average_ratings.npy:
#0: waffle iron french toast
#1: zwetschgenkuchen bavarian plum cake
#2: lime tea
#–†–µ–∑—É–ª—å—Ç–∞—Ç–æ–º —Ä–∞–±–æ—Ç—ã —è–≤–ª—è–µ—Ç—Å—è –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è, –Ω–∞ –∫–æ—Ç–æ—Ä–æ–π:
#
#    –¥–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–¥–ø–∏—Å—å –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–π –æ—Å–∏ —Å —Ç–µ–∫—Å—Ç–æ–º "–ù–æ–º–µ—Ä –¥–Ω—è"
#    –¥–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–¥–ø–∏—Å—å –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–æ–π –æ—Å–∏ —Å —Ç–µ–∫—Å—Ç–æ–º "–°—Ä–µ–¥–Ω–∏–π —Ä–µ–π—Ç–∏–Ω–≥"
#    –¥–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–¥–ø–∏—Å—å —Ä–∏—Å—É–Ω–∫–∞ —Å —Ç–µ–∫—Å—Ç–æ–º "–ò–∑–º–µ–Ω–µ–Ω–∏–µ —Å—Ä–µ–¥–Ω–µ–≥–æ —Ä–µ–π—Ç–∏–Ω–≥–∞ —Ç—Ä–µ—Ö —Ä–µ—Ü–µ–ø—Ç–æ–≤"
#    –∫–∞–∂–¥—ã–π –∏–∑ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ä—è–¥–æ–≤ –∏–º–µ–µ—Ç —É–Ω–∏–∫–∞–ª—å–Ω—ã–π —Ü–≤–µ—Ç
#    –¥–æ–±–∞–≤–ª–µ–Ω–∞ –ª–µ–≥–µ–Ω–¥–∞, –Ω–∞ –∫–æ—Ç–æ—Ä–æ–π –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –Ω–∞–∑–≤–∞–Ω–∏–µ –∫–∞–∂–¥–æ–≥–æ –∏–∑ —Ä–µ—Ü–µ–ø—Ç–æ–≤

#–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ : –¥–ª—è —Å—á–∏—Ç—ã–≤–∞–Ω–∏—è —Ñ–∞–π–ª–∞ –≤–æ—Å–ø–æ–ª—å–∑—É–π—Ç–µ—Å—å —Ñ—É–Ω–∫—Ü–∏–µ–π np.load.

import matplotlib.pyplot as plt
import numpy as np

# –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –∏–∑ —Ñ–∞–π–ª–∞
average_ratings = np.load("average_ratings.npy")

# –°–æ–∑–¥–∞–Ω–∏–µ –≤–µ–∫—Ç–æ—Ä–∞ –¥–Ω–µ–π
days = np.arange(0, average_ratings.shape[1])

# –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –≥—Ä–∞—Ñ–∏–∫–∞
plt.figure(figsize=(10, 6))

# –ü–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ –≥—Ä–∞—Ñ–∏–∫–æ–≤ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ä–µ—Ü–µ–ø—Ç–∞
plt.plot(days, average_ratings[0], label="waffle iron french toast", color="red")
plt.plot(days, average_ratings[1], label="zwetschgenkuchen bavarian plum cake", color="blue")
plt.plot(days, average_ratings[2], label="lime tea", color="green")

# –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –º–µ—Ç–æ–∫ –æ—Å–µ–π –∏ –∑–∞–≥–æ–ª–æ–≤–∫–∞ –≥—Ä–∞—Ñ–∏–∫–∞
plt.xlabel("–ù–æ–º–µ—Ä –¥–Ω—è")
plt.ylabel("–°—Ä–µ–¥–Ω–∏–π —Ä–µ–π—Ç–∏–Ω–≥")
plt.title("–ò–∑–º–µ–Ω–µ–Ω–∏–µ —Å—Ä–µ–¥–Ω–µ–≥–æ —Ä–µ–π—Ç–∏–Ω–≥–∞ —Ç—Ä–µ—Ö —Ä–µ—Ü–µ–ø—Ç–æ–≤")

# –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ª–µ–≥–µ–Ω–¥—ã
plt.legend()

# –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≥—Ä–∞—Ñ–∏–∫–∞
plt.show()

#2.–ò–∑–º–µ–Ω–∏—Ç–µ –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—é, –ø–æ–ª—É—á–µ–Ω–Ω—É—é –≤ –∑–∞–¥–∞–Ω–∏–∏ 1, —Ç–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, —á—Ç–æ–±—ã –ø–æ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–π –æ—Å–∏ –æ—Ç–æ–±—Ä–∞–∂–∞–ª–∏—Å—å –≥–æ–¥–∞, –∞ –º–µ–∂–¥—É –¥–≤—É–º—è —Å–æ—Å–µ–¥–Ω–∏–º–∏ –≥–æ–¥–∞–º–∏ —Ä–∞—Å–ø–æ–ª–∞–≥–∞–ª–∏—Å—å –∑–∞—Å–µ—á–∫–∏, —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ –º–µ—Å—è—Ü–∞–º. 
#–î–ª—è —ç—Ç–æ–≥–æ —Å–æ–∑–¥–∞–π—Ç–µ –¥–∏–∞–ø–∞–∑–æ–Ω –¥–∞—Ç –æ—Ç 01.01.2019 –ø–æ 30.12.2021 —Å —à–∞–≥–æ–º –≤ –æ–¥–∏–Ω –¥–µ–Ω—å (–Ω–∞–ø—Ä–∏–º–µ—Ä, –≤–æ—Ç —Ç–∞–∫) –∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —ç—Ç–æ—Ç –¥–∏–∞–ø–∞–∑–æ–Ω –ø—Ä–∏ –≤—ã–∑–æ–≤–µ –º–µ—Ç–æ–¥–∞ plot. 
#–î–∞–ª–µ–µ –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ major_locator –∏ minor_locator –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–π –æ—Å–∏ (–ø–æ–¥—Ä–æ–±–Ω–µ–µ —Å–º. –∑–¥–µ—Å—å)
#–ü—Ä–∏–º–µ–Ω–∏—Ç–µ –∫ –ø–æ–ª—É—á–∏–≤—à–µ–º—É—Å—è —Ä–∏—Å—É–Ω–∫—É —Ü–≤–µ—Ç–∞ –≥—Ä–∞—Ñ–∏–∫–æ–≤, –ø–æ–¥–ø–∏—Å–∏, –ª–µ–≥–µ–Ω–¥—É –∏–∑ –∑–∞–¥–∞–Ω–∏—è 1. –ò–∑–º–µ–Ω–∏—Ç–µ –ø–æ–¥–ø–∏—Å—å –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–π –æ—Å–∏, –Ω–∞–ø–∏—Å–∞–≤ —Ç–∞–º —Å–ª–æ–≤–æ "–î–∞—Ç–∞".

import matplotlib.pyplot as plt
import numpy as np
from datetime import date, timedelta
import matplotlib.dates as mdates

# –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –∏–∑ —Ñ–∞–π–ª–∞
average_ratings = np.load("average_ratings.npy")

# –°–æ–∑–¥–∞–Ω–∏–µ –¥–∏–∞–ø–∞–∑–æ–Ω–∞ –¥–∞—Ç
start_date = date(2019, 1, 1)
end_date = date(2021, 12, 30)
date_range = [start_date + timedelta(days=x) for x in range((end_date - start_date).days + 1)]

# –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –≥—Ä–∞—Ñ–∏–∫–∞
fig, ax = plt.subplots(figsize=(10, 6))

# –ü–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ –≥—Ä–∞—Ñ–∏–∫–æ–≤ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ä–µ—Ü–µ–ø—Ç–∞
ax.plot(date_range, average_ratings[0], label="waffle iron french toast", color="red")
ax.plot(date_range, average_ratings[1], label="zwetschgenkuchen bavarian plum cake", color="blue")
ax.plot(date_range, average_ratings[2], label="lime tea", color="green")

# –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –º–µ—Ç–æ–∫ –æ—Å–µ–π –∏ –∑–∞–≥–æ–ª–æ–≤–∫–∞ –≥—Ä–∞—Ñ–∏–∫–∞
ax.set_xlabel("–î–∞—Ç–∞")
ax.set_ylabel("–°—Ä–µ–¥–Ω–∏–π —Ä–µ–π—Ç–∏–Ω–≥")
ax.set_title("–ò–∑–º–µ–Ω–µ–Ω–∏–µ —Å—Ä–µ–¥–Ω–µ–≥–æ —Ä–µ–π—Ç–∏–Ω–≥–∞ —Ç—Ä–µ—Ö —Ä–µ—Ü–µ–ø—Ç–æ–≤")

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ major_locator –∏ minor_locator –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–π –æ—Å–∏
ax.xaxis.set_major_locator(mdates.YearLocator())
ax.xaxis.set_major_formatter(mdates.DateFormatter("%Y"))
ax.xaxis.set_minor_locator(mdates.MonthLocator())

# –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ª–µ–≥–µ–Ω–¥—ã
ax.legend()

# –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≥—Ä–∞—Ñ–∏–∫–∞
plt.show()

#3. –ò–∑–º–µ–Ω–∏—Ç–µ –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—é, –ø–æ–ª—É—á–µ–Ω–Ω—É—é –≤ –∑–∞–¥–∞–Ω–∏–∏ 2, —Ä–∞–∑–±–∏–≤ –æ–¥–Ω—É –∫–∞—Ä—Ç–∏–Ω–∫—É –Ω–∞ —Ç—Ä–∏, —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–Ω—ã—Ö –¥—Ä—É–≥ –ø–æ–¥ –¥—Ä—É–≥–æ–º. –¢—Ä–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –¥–æ–ª–∂–Ω—ã –∏–º–µ—Ç—å –æ–¥–Ω—É –æ–±—â—É—é –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω—É—é –æ—Å—å (–∫–∞–∂–¥–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∑–∞—Å–µ—á–∫–∏ –≤ –Ω–∏–∂–Ω–µ–π —á–∞—Å—Ç–∏, –Ω–æ –∑–Ω–∞—á–µ–Ω–∏—è —ç—Ç–∏—Ö –∑–∞—Å–µ—á–µ–∫ –Ω–∞—Ö–æ–¥—è—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø–æ–¥ —Å–∞–º—ã–º –Ω–∏–∂–Ω–∏–º –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º). –ü—Ä–∏–º–µ–Ω–∏—Ç–µ –∫ –ø–æ–ª—É—á–∏–≤—à–µ–º—É—Å—è —Ä–∏—Å—É–Ω–∫—É —Ü–≤–µ—Ç–∞ –≥—Ä–∞—Ñ–∏–∫–æ–≤, –ø–æ–¥–ø–∏—Å–∏, –ª–µ–≥–µ–Ω–¥—É –∏–∑ –∑–∞–¥–∞–Ω–∏—è 2.

import matplotlib.pyplot as plt
import numpy as np
from datetime import date, timedelta
import matplotlib.dates as mdates

# –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –∏–∑ —Ñ–∞–π–ª–∞
average_ratings = np.load("average_ratings.npy")

# –°–æ–∑–¥–∞–Ω–∏–µ –¥–∏–∞–ø–∞–∑–æ–Ω–∞ –¥–∞—Ç
start_date = date(2019, 1, 1)
end_date = date(2021, 12, 30)
date_range = [start_date + timedelta(days=x) for x in range((end_date - start_date).days + 1)]

# –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –≥—Ä–∞—Ñ–∏–∫–∞ —Å —Ç—Ä–µ–º—è –ø–æ–¥–≥—Ä–∞—Ñ–∏–∫–∞–º–∏
fig, axs = plt.subplots(3, 1, figsize=(10, 15), sharex=True)

# –ù–∞–∑–≤–∞–Ω–∏—è —Ä–µ—Ü–µ–ø—Ç–æ–≤
recipes = [
    "waffle iron french toast",
    "zwetschgenkuchen bavarian plum cake",
    "lime tea"
]

# –¶–≤–µ—Ç–∞ –≥—Ä–∞—Ñ–∏–∫–æ–≤
colors = ["red", "blue", "green"]

# –ü–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ –≥—Ä–∞—Ñ–∏–∫–æ–≤ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ä–µ—Ü–µ–ø—Ç–∞
for i in range(3):
    axs[i].plot(date_range, average_ratings[i], label=recipes[i], color=colors[i])
    axs[i].set_ylabel("–°—Ä–µ–¥–Ω–∏–π —Ä–µ–π—Ç–∏–Ω–≥")
    axs[i].legend()

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ major_locator –∏ minor_locator –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–π –æ—Å–∏
axs[2].xaxis.set_major_locator(mdates.YearLocator())
axs[2].xaxis.set_major_formatter(mdates.DateFormatter("%Y"))
axs[2].xaxis.set_minor_locator(mdates.MonthLocator())

# –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –º–µ—Ç–∫–∏ –¥–ª—è –æ–±—â–µ–π –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–π –æ—Å–∏
fig.text(0.5, 0.04, "–î–∞—Ç–∞", ha="center", va="center")

# –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≥—Ä–∞—Ñ–∏–∫–∞
plt.show()

#4. –í —Ñ–∞–π–ª–µ visitors.npy –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ –ø–æ—Å–µ—Ç–∏—Ç–µ–ª–µ–π —Å–∞–π—Ç–∞ –≤ —Ç–µ—á–µ–Ω–∏–∏ –ø–µ—Ä–≤—ã—Ö 100 –¥–Ω–µ–π –ø–æ—Å–ª–µ –æ–±—ä—è–≤–ª–µ–Ω–∏—è —Å–∞–π—Ç–æ–º –∞–∫—Ü–∏–∏. –ü–æ—Å—Ç—Ä–æ–π—Ç–µ –≥—Ä–∞—Ñ–∏–∫ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –¥–Ω—è –≤ –¥–≤—É—Ö –≤–∞—Ä–∏–∞–Ω—Ç–∞—Ö, —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–Ω—ã—Ö —Ä—è–¥–æ–º –ø–æ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª–µ. –í –æ–±–æ–∏—Ö —Å–ª—É—á–∞—è—Ö –∏–∑–æ–±—Ä–∞–∑–∏—Ç–µ –≥—Ä–∞—Ñ–∏–∫ –≤ –≤–∏–¥–µ –ª–æ–º–∞–Ω–æ–π, –Ω–æ –≤ –ø–µ—Ä–≤–æ–º —Å–ª—É—á–∞–µ –æ—Å—Ç–∞–≤—å—Ç–µ –ª–∏–Ω–µ–π–Ω—ã–π –º–∞—Å—à—Ç–∞–± –æ—Å–µ–π, –∞ –≤–æ –≤—Ç–æ—Ä–æ–º —Å–ª—É—á–∞–µ —Å–¥–µ–ª–∞–π—Ç–µ –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω—É—é –æ—Å—å –≤ –ª–æ–≥–∞—Ä–∏—Ñ–º–∏—á–µ—Å–∫–æ–º –º–∞—Å—à—Ç–∞–±–µ. –î–æ–±–∞–≤—å—Ç–µ –Ω–∞ –æ–±–µ –∫–∞—Ä—Ç–∏–Ω–∫–∏ –ø–æ–¥–ø–∏—Å—å –Ω–∞–¥ —ç—Ç–∏–º –≥—Ä–∞—Ñ–∏–∫–æ–º –∫ —Ç–µ–∫—Å—Ç–æ–º y(x)=Œªe‚àíŒªx
#–î–æ–±–∞–≤—å—Ç–µ –Ω–∞ –æ–±–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∫—Ä–∞—Å–Ω—É—é –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω—É—é –ª–∏–Ω–∏—é –Ω–∞ —É—Ä–æ–≤–Ω–µ y=100. –î–æ–±–∞–≤—å—Ç–µ –Ω–∞ –æ–±–µ –∫–∞—Ä—Ç–∏–Ω–∫–∏ –ø–æ–¥–ø–∏—Å—å –Ω–∞–¥ —ç—Ç–æ–π –ª–∏–Ω–∏–µ–π —Å —Ç–µ–∫—Å—Ç–æ–º y(x)=100
#–î–æ–±–∞–≤—å—Ç–µ –Ω–∞ –æ–±–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –ø–æ–¥–ø–∏—Å–∏ –æ—Å–µ–π; –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω—É—é –æ—Å—å –ø–æ–¥–ø–∏—à–∏—Ç–µ —Ç–µ–∫—Å—Ç–æ–º "–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–Ω–µ–π —Å –º–æ–º–µ–Ω—Ç–∞ –∞–∫—Ü–∏–∏", –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω—É—é - "–ß–∏—Å–ª–æ –ø–æ—Å–µ—Ç–∏—Ç–µ–ª–µ–π".
#–î–æ–±–∞–≤—å—Ç–µ –æ–±—â–∏–π –∑–∞–≥–æ–ª–æ–≤–æ–∫ –¥–ª—è —Ñ–∏–≥—É—Ä—ã —Å —Ç–µ–∫—Å—Ç–æ–º "–ò–∑–º–µ–Ω–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –≤ –ª–∏–Ω–µ–π–Ω–æ–º –∏ –ª–æ–≥–∞—Ä–∏—Ñ–º–∏—á–µ—Å–∫–æ–º –º–∞—Å—à—Ç–∞–±–µ".

import matplotlib.pyplot as plt
import numpy as np

# –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –∏–∑ —Ñ–∞–π–ª–∞
visitors = np.load("visitors.npy")

# –°–æ–∑–¥–∞–Ω–∏–µ –≤–µ–∫—Ç–æ—Ä–∞ –¥–Ω–µ–π
days = np.arange(0, len(visitors))

# –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –≥—Ä–∞—Ñ–∏–∫–∞ —Å –¥–≤—É–º—è –ø–æ–¥–≥—Ä–∞—Ñ–∏–∫–∞–º–∏, —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–Ω—ã–º–∏ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ
fig, axs = plt.subplots(1, 2, figsize=(14, 6))

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–±—â–µ–≥–æ –∑–∞–≥–æ–ª–æ–≤–∫–∞ –¥–ª—è —Ñ–∏–≥—É—Ä—ã
fig.suptitle("–ò–∑–º–µ–Ω–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –≤ –ª–∏–Ω–µ–π–Ω–æ–º –∏ –ª–æ–≥–∞—Ä–∏—Ñ–º–∏—á–µ—Å–∫–æ–º –º–∞—Å—à—Ç–∞–±–µ")

# –ü–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ –≥—Ä–∞—Ñ–∏–∫–æ–≤ –≤ –ª–∏–Ω–µ–π–Ω–æ–º –∏ –ª–æ–≥–∞—Ä–∏—Ñ–º–∏—á–µ—Å–∫–æ–º –º–∞—Å—à—Ç–∞–±–µ
for ax, scale in zip(axs, ['linear', 'log']):
    ax.plot(days, visitors, label=r'y(x) = $\lambda e^{-\lambda x}$')
    ax.axhline(y=100, color='r', linestyle='-', label='y(x)=100')
    
    ax.set_title(f"–ú–∞—Å—à—Ç–∞–±: {scale}")
    ax.set_xlabel("–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–Ω–µ–π —Å –º–æ–º–µ–Ω—Ç–∞ –∞–∫—Ü–∏–∏")
    ax.set_ylabel("–ß–∏—Å–ª–æ –ø–æ—Å–µ—Ç–∏—Ç–µ–ª–µ–π")
    ax.set_yscale(scale)
    ax.legend()

# –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≥—Ä–∞—Ñ–∏–∫–∞
plt.show()

#–õ–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–∞—è —Ä–∞–±–æ—Ç–∞ 5.2
#–í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –Ω–∞ –æ—Å–Ω–æ–≤–µ —Å—Ç—Ä—É–∫—Ç—É—Ä pandas.

#–î–ª—è –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏—è —Ä–∞–±–æ—Ç—ã –∑–∞–≥—Ä—É–∑–∏—Ç–µ —Ç–∞–±–ª–∏—Ü—ã recipes –∏ reviews (–õ–†2)

import matplotlib.pyplot as plt
import pandas as pd

# –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö
reviews = pd.read_csv("reviews_sample.csv")
recipes = pd.read_csv("recipes_sample.csv")

#5. –ù–∞–∑–æ–≤–µ–º —Ä–µ—Ü–µ–ø—Ç—ã –∫–æ—Ä–æ—Ç–∫–∏–º–∏, –µ—Å–ª–∏ –æ–Ω–∏ –∑–∞–Ω–∏–º–∞—é—Ç —Å—Ç—Ä–æ–≥–æ –º–µ–Ω—å—à–µ 5 –º–∏–Ω—É—Ç; —Å—Ä–µ–¥–Ω–∏–º–∏, –µ—Å–ª–∏ –æ–Ω–∏ –∑–∞–Ω–∏–º–∞—é—Ç –æ—Ç 5 –¥–æ 50 –º–∏–Ω—É—Ç (–Ω–µ –≤–∫–ª—é—á–∞—è 50), –∏ –¥–ª–∏–Ω–Ω—ã–º–∏, –µ—Å–ª–∏ –æ–Ω–∏ –∑–∞–Ω–∏–º–∞—é—Ç –æ—Ç 50 –º–∏–Ω—É—Ç –∏ –±–æ–ª—å—à–µ. 
#–°–≥—Ä—É–ø–ø–∏—Ä—É–π—Ç–µ –≤—Å–µ —Ä–µ—Ü–µ–ø—Ç—ã –ø–æ –¥–∞–Ω–Ω–æ–º—É –ø—Ä–∏–∑–Ω–∞–∫—É –∏ –¥–ª—è –∫–∞–∂–¥–æ–π –≥—Ä—É–ø–ø—ã –ø–æ—Å—á–∏—Ç–∞–π—Ç–µ 2 –≤–µ–ª–∏—á–∏–Ω—ã: —Å—Ä–µ–¥–Ω–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —à–∞–≥–æ–≤ —Ä–µ—Ü–µ–ø—Ç–æ–≤ –≤ –≥—Ä—É–ø–ø–µ –∏ —Ä–∞–∑–º–µ—Ä –≥—Ä—É–ø–ø—ã. 
#–ü—Ä–∏ –ø–æ–º–æ—â–∏ –º–µ—Ç–æ–¥–æ–≤ —Å—Ç—Ä—É–∫—Ç—É—Ä pandas –ø–æ—Å—Ç—Ä–æ–π—Ç–µ —Å—Ç–æ–ª–±—á–∞—Ç—É—é –¥–∏–∞–≥—Ä–∞–º–º—É, –≥–¥–µ –∫–∞–∂–¥—ã–π —Å—Ç–æ–ª–±–µ—Ü –æ–∑–Ω–∞—á–∞–µ—Ç –≥—Ä—É–ø–ø—É (–∫–æ—Ä–æ—Ç–∫–∏–µ, —Å—Ä–µ–¥–Ω–∏–µ –∏–ª–∏ –¥–ª–∏–Ω–Ω—ã–µ —Ä–µ—Ü–µ–ø—Ç—ã), –∞ –≤—ã—Å–æ—Ç–∞ —Å—Ç–æ–ª–±—Ü–∞ –æ–±–æ–∑–Ω–∞—á–∞–µ—Ç —Å—Ä–µ–¥–Ω–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —à–∞–≥–æ–≤ —Ä–µ—Ü–µ–ø—Ç–æ–≤ –≤ –≥—Ä—É–ø–ø–µ. 
#–†—è–¥–æ–º –ø–æ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª–∏ —Ä–∞–∑–º–µ—Å—Ç–∏—Ç–µ –∫—Ä—É–≥–æ–≤—É—é –¥–∏–∞–≥—Ä–∞–º–º—É, –Ω–∞ –∫–æ—Ç–æ—Ä–æ–π –æ—Ç–æ–±—Ä–∞–∂–µ–Ω—ã —Ä–∞–∑–º–µ—Ä—ã –∫–∞–∂–¥–æ–π –∏–∑ –≥—Ä—É–ø–ø.

#–î–æ–±–∞–≤—å—Ç–µ —Å–ª–µ–¥—É—é—â–∏–µ –ø–æ–¥–ø–∏—Å–∏:

#    –ø–æ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–π –æ—Å–∏ –ø–æ–¥ —Å—Ç–æ–ª–±—á–∞—Ç–æ–π –¥–∏–∞–≥—Ä–∞–º–º–æ–π –Ω–∞–ø–∏—à–∏—Ç–µ "–ì—Ä—É–ø–ø–∞ —Ä–µ—Ü–µ–ø—Ç–æ–≤"
#    –ø–æ –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–æ–π –æ—Å–∏ —Å–ª–µ–≤–∞ –æ—Ç —Å—Ç–æ–ª–±—á–∞—Ç–æ–π –¥–∏–∞–≥—Ä–∞–º–º—ã –Ω–∞–ø–∏—à–∏—Ç–µ "–°—Ä–µ–¥–Ω—è—è –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å"
#    –Ω–∞–¥ –∫—Ä—É–≥–æ–≤–æ–π –¥–∏–∞–≥—Ä–∞–º–º–æ–π –Ω–∞–ø–∏—à–∏—Ç–µ "–†–∞–∑–º–µ—Ä—ã –≥—Ä—É–ø–ø —Ä–µ—Ü–µ–ø—Ç–æ–≤"

# –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ —Ä–µ—Ü–µ–ø—Ç–æ–≤ –ø–æ –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
def categorize_duration(duration):
    if duration < 5:
        return "–ö–æ—Ä–æ—Ç–∫–∏–µ"
    elif 5 <= duration < 50:
        return "–°—Ä–µ–¥–Ω–∏–µ"
    else:
        return "–î–ª–∏–Ω–Ω—ã–µ"

recipes["group"] = recipes["minutes"].apply(categorize_duration)
grouped = recipes.groupby("group").agg({"n_steps": "mean", "group": "count"}).rename(columns={"group": "count"})

# –ü–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ —Å—Ç–æ–ª–±—á–∞—Ç–æ–π –¥–∏–∞–≥—Ä–∞–º–º—ã
fig, (ax1, ax2) = plt.subplots(1, 2, figsize=(12, 6))

grouped["n_steps"].plot(kind="bar", ax=ax1, rot=0)
ax1.set_xlabel("–ì—Ä—É–ø–ø–∞ —Ä–µ—Ü–µ–ø—Ç–æ–≤")
ax1.set_ylabel("–°—Ä–µ–¥–Ω—è—è –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å")

# –ü–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ –∫—Ä—É–≥–æ–≤–æ–π –¥–∏–∞–≥—Ä–∞–º–º—ã
grouped["count"].plot(kind="pie", ax=ax2, autopct="%.1f%%", legend=False)
ax2.set_ylabel("")
ax2.set_title("–†–∞–∑–º–µ—Ä—ã –≥—Ä—É–ø–ø —Ä–µ—Ü–µ–ø—Ç–æ–≤")

plt.show()

#6. –ò–∑ –≤—Å–µ–≥–æ –º–Ω–æ–∂–µ—Å—Ç–≤–∞ –æ—Ç–∑—ã–≤–æ–≤ –æ—Å—Ç–∞–≤—å—Ç–µ —Ç–æ–ª—å–∫–æ —Ç–µ, –∫–æ—Ç–æ—Ä—ã–µ –±—ã–ª–∏ –¥–∞–Ω—ã –≤ 2008 –∏ 2009 –≥–æ–¥–∞—Ö. –í–æ—Å–ø–æ–ª—å–∑–æ–≤–∞–≤—à–∏—Å—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—è–º–∏ –º–µ—Ç–æ–¥–∞ pd.DataFrame.plot.hist, –ø–æ—Å—Ç—Ä–æ–π—Ç–µ 2 –≥–∏—Å—Ç–æ–≥—Ä–∞–º–º—ã —Å—Ç–æ–ª–±—Ü–∞ rating. –ì–∏—Å—Ç–æ–≥—Ä–∞–º–º—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω—ã —Ä—è–¥–æ–º –ø–æ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª–∏. –õ–µ–≤–∞—è –≥–∏—Å—Ç–æ–≥—Ä–∞–º–º–∞ —Å–æ–æ—Ç–≤–µ—Å—Ç–≤—É–µ—Ç 2008 –≥–æ–¥—É, –ø—Ä–∞–≤–∞—è - 2009 –≥–æ–¥—É. –î–æ–±–∞–≤—å—Ç–µ –æ–±—â—É—é –ø–æ–¥–ø–∏—Å—å –¥–ª—è —Ä–∏—Å—É–Ω–∫–∞ —Å —Ç–µ–∫—Å—Ç–æ–º "–ì–∏—Å—Ç–æ–≥—Ä–∞–º–º—ã —Ä–µ–π—Ç–∏–Ω–≥–∞ –æ—Ç–∑—ã–≤–æ–≤ –≤ 2008 –∏ 2009 –≥–æ–¥–∞—Ö". –î–æ–±–µ–π—Ç–µ—Å—å —Ç–æ–≥–æ, —á—Ç–æ–±—ã –ø–æ–¥–ø–∏—Å—å –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–æ–π –æ—Å–∏ –ø—Ä–∞–≤–æ–≥–æ —Ä–∏—Å—É–Ω–∫–∞ –Ω–µ "–Ω–∞–µ–∑–∂–∞–ª–∞" –Ω–∞ –ª–µ–≤—ã–π —Ä–∏—Å—É–Ω–æ–∫.

import matplotlib.pyplot as plt
import pandas as pd

reviews = pd.read_csv("reviews_sample.csv")
recipes = pd.read_csv("recipes_sample.csv")

# –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –æ—Ç–∑—ã–≤–æ–≤ –∑–∞ 2008 –∏ 2009 –≥–æ–¥—ã
reviews["date"] = pd.to_datetime(reviews["date"])
reviews_2008 = reviews[reviews["date"].dt.year == 2008]
reviews_2009 = reviews[reviews["date"].dt.year == 2009]

# –ü–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ –≥–∏—Å—Ç–æ–≥—Ä–∞–º–º
fig, (ax1, ax2) = plt.subplots(1, 2, figsize=(12, 6))

reviews_2008["rating"].plot.hist(ax=ax1, bins=20, edgecolor="black")
ax1.set_title("2008")
ax1.set_xlabel("–†–µ–π—Ç–∏–Ω–≥")
ax1.set_ylabel("–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—Ç–∑—ã–≤–æ–≤")

reviews_2009["rating"].plot.hist(ax=ax2, bins=20, edgecolor="black")
ax2.set_title("2009")
ax2.set_xlabel("–†–µ–π—Ç–∏–Ω–≥")
ax2.set_ylabel("–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—Ç–∑—ã–≤–æ–≤")

fig.suptitle("–ì–∏—Å—Ç–æ–≥—Ä–∞–º–º—ã —Ä–µ–π—Ç–∏–Ω–≥–∞ –æ—Ç–∑—ã–≤–æ–≤ –≤ 2008 –∏ 2009 –≥–æ–¥–∞—Ö")
plt.show()

#–í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –ø—Ä–∏ –ø–æ–º–æ—â–∏ –ø–∞–∫–µ—Ç–∞ seaborn

#7. –ü—Ä–∏ –ø–æ–º–æ—â–∏ –ø–∞–∫–µ—Ç–∞ seaborn –ø–æ—Å—Ç—Ä–æ–π—Ç–µ –¥–∏–∞–≥—Ä–∞–º–º—É —Ä–∞—Å—Å–µ—è–Ω–∏—è –¥–≤—É—Ö —Å—Ç–æ–ª–±—Ü–æ–≤ –∏–∑ —Ç–∞–±–ª–∏—Ü—ã recipes: n_steps –∏ n_ingredients. –£–∫–∞–∂–∏—Ç–µ –≤ –∫–∞—á–µ—Å—Ç–≤–µ –≥—Ä—É–ø–ø–∏—Ä—É—é—â–µ–π –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π (hue) –∫–∞—Ç–µ–≥–æ—Ä–∏–∞–ª—å–Ω—É—é –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Ä–µ—Ü–µ–ø—Ç–∞ (–∫–æ—Ä–æ—Ç–∫–∏–π, —Å—Ä–µ–¥–Ω–∏–π –∏–ª–∏ –¥–ª–∏–Ω–Ω—ã–µ; —Å–º. –∑–∞–¥–∞–Ω–∏–µ 5).

#–î–æ–±–∞–≤—å—Ç–µ –∑–∞–≥–æ–ª–æ–≤–æ–∫ —Ä–∏—Å—É–Ω–∫–∞ "–î–∏–∞–≥—Ä–∞–º–º–∞ —Ä–∞—Å—Å–µ—è–Ω–∏—è n_steps –∏ n_ingredients"

#–ü—Ä–æ–∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ, –Ω–∞–±–ª—é–¥–∞–µ—Ç—Å—è –ª–∏ –≤–∏–∑—É–∞–ª—å–Ω–æ –ª–∏–Ω–µ–π–Ω–∞—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –º–µ–∂–¥—É –¥–≤—É–º—è —ç—Ç–∏–º–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏. –û—Ç–≤–µ—Ç –æ—Å—Ç–∞–≤—å—Ç–µ –≤ –≤–∏–¥–µ —Ç–µ–∫—Å—Ç–æ–≤–æ–π —è—á–µ–π–∫–∏ –ø–æ–¥ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º.

import matplotlib.pyplot as plt
import pandas as pd
import seaborn as sb

reviews = pd.read_csv("reviews_sample.csv")
recipes = pd.read_csv("recipes_sample.csv")

# –°–æ–∑–¥–∞–Ω–∏–µ —Å—Ç–æ–ª–±—Ü–∞ —Å –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º–∏ –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ —Ä–µ—Ü–µ–ø—Ç–∞
def group_by_duration(minutes):
    if minutes < 5:
        return "–ö–æ—Ä–æ—Ç–∫–∏–π"
    elif 5 <= minutes < 50:
        return "–°—Ä–µ–¥–Ω–∏–π"
    else:
        return "–î–ª–∏–Ω–Ω—ã–π"

recipes["duration_category"] = recipes["minutes"].apply(group_by_duration)

# –ü–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ –¥–∏–∞–≥—Ä–∞–º–º—ã —Ä–∞—Å—Å–µ—è–Ω–∏—è
plt.figure(figsize=(12, 6))
sb.scatterplot(data=recipes, x="n_steps", y="n_ingredients", hue="duration_category")
plt.title("–î–∏–∞–≥—Ä–∞–º–º–∞ —Ä–∞—Å—Å–µ—è–Ω–∏—è n_steps –∏ n_ingredients")
plt.show()

#–ù–∞ –æ—Å–Ω–æ–≤–µ –¥–∏–∞–≥—Ä–∞–º–º—ã —Ä–∞—Å—Å–µ—è–Ω–∏—è —Å–ª–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –≤—ã–≤–æ–¥ –æ –Ω–∞–ª–∏—á–∏–∏ –ª–∏–Ω–µ–π–Ω–æ–π –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –º–µ–∂–¥—É n_steps –∏ n_ingredients. –í–∏–∑—É–∞–ª—å–Ω–æ –Ω–∞–±–ª—é–¥–∞–µ—Ç—Å—è –Ω–µ–∫–æ—Ç–æ—Ä–∞—è –∫–æ–Ω—Ü–µ–Ω—Ç—Ä–∞—Ü–∏—è —Ç–æ—á–µ–∫ –≤ –ª–µ–≤–æ–º –Ω–∏–∂–Ω–µ–º —É–≥–ª—É –≥—Ä–∞—Ñ–∏–∫–∞, —á—Ç–æ —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ —Ç–æ, —á—Ç–æ –∫–æ—Ä–æ—Ç–∫–∏–µ —Ä–µ—Ü–µ–ø—Ç—ã –∏–º–µ—é—Ç –º–µ–Ω—å—à–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç–æ–≤ –∏ —à–∞–≥–æ–≤. –û–¥–Ω–∞–∫–æ —Ç–æ—á–∫–∏ –Ω–∞ –≥—Ä–∞—Ñ–∏–∫–µ —Ä–∞–∑–±—Ä–æ—Å–∞–Ω—ã, –∏ –Ω–µ—Ç —á–µ—Ç–∫–æ–π –ª–∏–Ω–∏–∏, –∫–æ—Ç–æ—Ä–∞—è –±—ã –ø–æ–∫–∞–∑—ã–≤–∞–ª–∞ –ª–∏–Ω–µ–π–Ω—É—é –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –º–µ–∂–¥—É —ç—Ç–∏–º–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏.

8. –û–±—ä–µ–¥–∏–Ω–∏—Ç–µ –¥–≤–µ —Ç–∞–±–ª–∏—Ü—ã recipes –∏ reviews –∏ –ø–æ—Å—Ç—Ä–æ–π—Ç–µ –∫–æ—Ä—Ä–µ–ª—è—Ü–∏–æ–Ω–Ω—É—é –º–∞—Ç—Ä–∏—Ü—É –Ω–∞ –æ—Å–Ω–æ–≤–µ —Å—Ç–æ–ª–±—Ü–æ–≤ "minutes", "n_steps", "n_ingredients" –∏ "rating". –ü—Ä–∏ –ø–æ–º–æ—â–∏ –ø–∞–∫–µ—Ç–∞ seaborn –≤–∏–∑—É–∞–ª–∏–∑–∏—Ä—É–π—Ç–µ –ø–æ–ª—É—á–µ–Ω–Ω—É—é –º–∞—Ç—Ä–∏—Ü—É –≤ –≤–∏–¥–µ —Ç–µ–ø–ª–æ–≤–æ–π –∫–∞—Ä—Ç—ã (heatmap).

–î–æ–±–∞–≤—å—Ç–µ –≤ —è—á–µ–π–∫–∏ —Ç–µ–ø–ª–æ–≤–æ–π –∫–∞—Ä—Ç—ã –ø–æ–¥–ø–∏—Å–∏ (–∑–Ω–∞—á–µ–Ω–∏—è –∫-—Ç–∞ –∫–æ—Ä—Ä–µ–ª—è—Ü–∏–∏). –ò–∑–º–µ–Ω–∏—Ç–µ —Ü–≤–µ—Ç–æ–≤—É—é –ø–∞–ª–∏—Ç—Ä—É –Ω–∞ YlOrRd.

–î–æ–±–∞–≤—å—Ç–µ –∑–∞–≥–æ–ª–æ–≤–æ–∫ —Ä–∏—Å—É–Ω–∫–∞ "–ö–æ—Ä—Ä–µ–ª—è—Ü–∏–æ–Ω–Ω–∞—è –º–∞—Ç—Ä–∏—Ü–∞ —á–∏—Å–ª–æ–≤—ã—Ö —Å—Ç–æ–ª–±—Ü–æ–≤ —Ç–∞–±–ª–∏—Ü recipes –∏ reviews"

import matplotlib.pyplot as plt
import pandas as pd
import seaborn as sb

reviews = pd.read_csv("reviews_sample.csv")
recipes = pd.read_csv("recipes_sample.csv")

# –û–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ —Ç–∞–±–ª–∏—Ü
merged_df = pd.merge(recipes, reviews, left_on='id', right_on='recipe_id')

# –í—ã—á–∏—Å–ª–µ–Ω–∏–µ –∫–æ—Ä—Ä–µ–ª—è—Ü–∏–æ–Ω–Ω–æ–π –º–∞—Ç—Ä–∏—Ü—ã
corr_matrix = merged_df[["minutes", "n_steps", "n_ingredients", "rating"]].corr()

# –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –∫–æ—Ä—Ä–µ–ª—è—Ü–∏–æ–Ω–Ω–æ–π –º–∞—Ç—Ä–∏—Ü—ã –≤ –≤–∏–¥–µ —Ç–µ–ø–ª–æ–≤–æ–π –∫–∞—Ä—Ç—ã
plt.figure(figsize=(10, 6))
sb.heatmap(corr_matrix, annot=True, cmap="YlOrRd", fmt=".2f")
plt.title("–ö–æ—Ä—Ä–µ–ª—è—Ü–∏–æ–Ω–Ω–∞—è –º–∞—Ç—Ä–∏—Ü–∞ —á–∏—Å–ª–æ–≤—ã—Ö —Å—Ç–æ–ª–±—Ü–æ–≤ —Ç–∞–±–ª–∏—Ü recipes –∏ reviews")
plt.show()
"""

def kr1():
  return """
#1. –í—ã–±–µ—Ä–∏—Ç–µ —Å–ª—É—á–∞–π–Ω—ã–º –æ–±—Ä–∞–∑–æ–º –∏ –≤—ã–≤–µ–¥–∏—Ç–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ 15 —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –ø–∞—Å—Å–∞–∂–∏—Ä–∞—Ö —Å –∏–º–µ–Ω–∞–º–∏, –∫–æ—Ç–æ—Ä—ã–µ –Ω–∞—á–∏–Ω–∞—é—Ç—Å—è –Ω–∞ –±—É–∫–≤—É "–ê".
#–î–ª—è —Ä–∞—Å—á—ë—Ç–æ–≤ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å numpy

import numpy as np

import csv
 
with open("train.csv", 'r') as x:
    sample_data = list(csv.reader(x, delimiter=","))
 
data = np.array(sample_data)
 
#dat = pd.read_csv('train.csv')
#data = dat.to_numpy()
 
a_passengers = [row for row in data if row[3][0]=='A']
 
#data = data[data[:,3][0]=='A']
#print(data)

# –í—ã–±–æ—Ä 15 —Å–ª—É—á–∞–π–Ω—ã—Ö –ø–∞—Å—Å–∞–∂–∏—Ä–æ–≤
#random_passengers = np.random.choice(a_passengers, size=15, replace=False)
#random_passengers
# –í—ã–≤–æ–¥ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö –ø–∞—Å—Å–∞–∂–∏—Ä–∞—Ö
#for passenger in random_passengers:
    #print(passenger)

rng = np.random.default_rng()
random_passengers = rng.choice(a_passengers, 15, False)
for passenger in random_passengers:
    print(passenger)

#print(d)

#2. –í—ã–≤–µ–¥–∏—Ç–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é, —Ö—Ä–∞–Ω—è—â—É—é—Å—è –≤ —Ñ–∞–π–ª–µ train.csv, –æ –ø–∞—Å—Å–∞–∂–∏—Ä–∞—Ö –¢–∏—Ç–∞–Ω–∏–∫–∞ –∂–µ–Ω—Å–∫–æ–≥–æ –ø–æ–ª–∞, –∫–∞–±–∏–Ω—ã –∫–æ—Ç–æ—Ä—ã—Ö –∏–∑–≤–µ—Å—Ç–Ω—ã
#–î–ª—è —Ä–∞—Å—á—ë—Ç–æ–≤ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å pandas

import pandas as pd
train = pd.read_csv('train.csv')
#print(train)

passengers = train[train['Cabin'].notna() * train['Sex']=='female']

print(passengers[['Sex', 'Cabin']])
"""

def ms5i1():
  return """
import numpy as np
import pandas as pd
import matplotlib.pyplot as plt
import scipy.stats as sts

data_str = '''NA; More; Less; More; NA; Unkn; NA; More; Less; Unkn; Less; More; More; NA; More; Norm; Less; NA; Norm; More; Norm; Less; Unkn; Unkn; More; More; More; Unkn; More; Unkn; Less; More; NA; More; More; Unkn; Unkn; NA; Unkn; More; More; Unkn; Unkn; Unkn; Norm; Norm; NA; NA; More; More; More; Norm; Unkn; Less; More; NA; Unkn; Norm; Norm; More; More; More; Unkn; NA; More; Unkn; Norm; More; Less; Norm; Norm; NA; Unkn; Less; Unkn; Less; Norm; Unkn; Less; Norm; Less; Unkn; Less; More; More; Unkn; Unkn; Less; Less; Unkn; Unkn; Norm; More; Unkn; Unkn; NA; More; More; More; NA; More; More; Unkn; Norm; NA; Less; More; More; More; Norm; More; Unkn; Unkn; Unkn; Unkn; NA; NA; More; Unkn; More; Unkn; More; NA; More; More; More; More; More; NA; Norm; More; Less; NA; Unkn; Norm; More; Less; More; Less; Unkn; Unkn; Less; More; More; More; Less; Unkn; NA; More; More; Unkn; Unkn; More; More; NA; Less; Less; NA; NA; NA; Norm; More; More; Norm; Less; Less; Less; Unkn; Norm; Unkn; Unkn; Less; Unkn; Less; Less; More; Unkn; Unkn; Norm; Unkn; Less; NA; More; More; Norm; Unkn; Less; NA; More; More; More; Norm; Unkn; Unkn; Unkn; Less; NA; More; Less; Unkn; Unkn; More; Less; More; Less; Norm; Unkn; Norm; More; Norm; More; More; Norm; Unkn; Less; Less; Less; NA; Unkn; Unkn; Unkn; NA; Less; Unkn; Norm; More; Unkn; Less; More; Unkn; NA; Less; More; NA; More; Unkn; Unkn; Norm; Unkn; Unkn; NA; More; Less; Norm; Unkn; More; More; Unkn; NA; More; Unkn; More; Unkn; More; More; NA; NA; More; Norm; More; More; More; Less; More; More; More; NA; Less; Less; Less; Norm; Unkn; Less; Less; Norm; Norm; More; Less; More; More; Norm; Less; Unkn; Unkn; Unkn; Less; Norm; Unkn; More; More; More; NA; NA; Norm; Norm; NA; More; Norm; More; More; Norm; Less; More; Unkn; Norm; More; Norm; More; More; NA; More; Less; Unkn; Unkn; More; Norm; Less; More; Less; Less'''
data = pd.Series(data_str.replace('NA; ', '').replace('; NA', '').replace(' ', '').split(';'))
print(data.head())

print()
print('K–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ –æ—Ç–≤–µ—Ç–æ–≤ —Ä–µ—Å–ø–æ–Ω–¥–µ–Ω—Ç–æ–≤, –≤—Å—Ç—Ä–µ—á–∞—é—â–∏–µ—Å—è –≤ –æ—á–∏—â–µ–Ω–Ω–æ–π –≤—ã–±–æ—Ä–∫–µ =', len(data.unique()))
print(data.unique())

print()
print('–û–±—ä–µ–º –æ—á–∏—â–µ–Ω–Ω–æ–π –æ—Ç "NA" –≤—ã–±–æ—Ä–∫–∏ =', len(data))

print()
#print(data[data=="L1"].head())
#print('K–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–µ—Å–ø–æ–Ω–¥–µ–Ω—Ç–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –¥–∞–ª–∏ –æ—Ç–≤–µ—Ç "L1" =', len(data[data=="L1"]))
print('K–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–æ–ø—É—â–µ–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö "NA" –≤ –∏—Å—Ö–æ–¥–Ω–æ–π –≤—ã–±–æ—Ä–∫–µ =', data_str.count('NA'))

print()
print('–î–æ–ª—è —Ä–µ—Å–ø–æ–Ω–¥–µ–Ω—Ç–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –¥–∞–ª–∏ –æ—Ç–≤–µ—Ç "More" =', len(data[data=="More"]) / len(data))

n = len(data)
p = len(data[data=="More"]) / len(data)
q = 1 - p
gamma = 0.9
z = sts.norm.ppf((1+gamma)/2)
delta = z * np.sqrt(p*q/n)

print()
print('–õ–µ–≤–∞—è –≥—Ä–∞–Ω–∏—Ü–∞ 0.9-–¥–æ–≤–µ—Ä–∏—Ç–µ–ª—å–Ω–æ–≥–æ –∏–Ω—Ç–µ—Ä–≤–∞–ª–∞ –¥–ª—è –∏—Å—Ç–∏–Ω–Ω–æ–π –¥–æ–ª–∏ –æ—Ç–≤–µ—Ç–æ–≤ "More" =', p - delta)
print('–ü—Ä–∞–≤–∞—è –≥—Ä–∞–Ω–∏—Ü–∞ 0.9-–¥–æ–≤–µ—Ä–∏—Ç–µ–ª—å–Ω–æ–≥–æ –∏–Ω—Ç–µ—Ä–≤–∞–ª–∞ –¥–ª—è –∏—Å—Ç–∏–Ω–Ω–æ–π –¥–æ–ª–∏ –æ—Ç–≤–µ—Ç–æ–≤ "More" =', p + delta)

alpha = 0.05
ni_obs = []
for i in sorted(data.unique()):
    ni_obs.append(len(data[data==i]))
ni_obs = np.array(ni_obs)
print()
print('ni_obs =', ni_obs)

pi = np.array([1/len(data.unique())]*len(data.unique()))
print('pi =', pi)

n = sum(ni_obs)
l = len(ni_obs)
ni_exp = n*pi
print('ni_exp =', ni_exp)

chi2_obs = sum((ni_obs - ni_exp)**2/ni_exp)
print('chi2_obs =', chi2_obs)

chi2_right_cr = sts.chi2.isf(alpha, l-1)
print('chi2_right_cr =', chi2_right_cr)

print('–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ç–µ–ø–µ–Ω–µ–π —Å–≤–æ–±–æ–¥—ã =', l - 1)
print('H0 –Ω–µ –æ—Ç–≤–µ—Ä–≥–∞–µ—Ç—Å—è') if chi2_obs < chi2_right_cr else print('H0 –æ—Ç–≤–µ—Ä–≥–∞–µ—Ç—Å—è')

plt.hist(data)
#plt.hist(data, bins = 6)
plt.show()  
"""

def ms5i2():
  return """
import numpy as np
import pandas as pd
import matplotlib.pyplot as plt
import scipy.stats as sts

data2_str = '''(255.4105, -253.15); (243.7803, -275.74); (228.7959, -258.14); (229.3319, -250.39); (233.3861, NA); (269.9092, -280.62); (202.303, NA); (210.9884, -263.35); (234.0089, -284.62); (244.3579, -277.5); (226.8919, -225.61); (236.7923, -297.6); (228.431, -289.36); (217.5431, NA); (322.5126, -251.8); (241.8376, -292.33); (220.3509, -228.18); (NA, -248.97); (214.4076, -272.53); (268.6563, -230.77); (192.614, NA); (258.5836, -259.92); (254.3837, -292.96); (247.7287, -266.2); (240.2835, -319.4); (NA, -273.15); (262.1739, -234.77); (280.7547, -243.68); (194.9311, -252.4); (234.2897, -288.5); (258.6198, -284.84); (224.1644, -233.6); (226.2993, -219.4); (174.8306, -276.25); (248.0166, -259.08); (251.3936, -249.28); (245.2212, -287.85); (220.1741, NA); (204.9634, -260.04); (NA, -287.24); (NA, -248.57); (240.7583, -281.76); (268.2492, -259.21); (220.2528, -205.43); (256.2648, -219.91); (NA, -280.12); (NA, -262.83); (303.6843, -270.06); (249.0596, NA); (193.3267, NA); (227.628, -240.52); (264.958, -194.2); (271.4568, -242.4); (NA, -236.48); (293.038, -216.29); (227.8075, NA); (216.9755, -286.05); (273.7833, -293.18); (NA, -233.47); (273.8847, -249.49); (252.536, -224.27); (263.5997, -232.96); (208.5429, -325.94); (234.5393, NA); (241.4325, -236.23); (215.2, -275.25); (NA, -277.67); (223.6072, -231.9); (214.332, -238.32); (232.6875, -259.09); (228.3214, NA); (238.6967, -224.82); (257.8638, -247.11); (186.3718, -262.24); (195.9218, -259.06); (273.1004, -262.08); (205.5066, -278.41); (197.9086, -229.42); (168.1917, NA); (NA, -248.93); (NA, -281.64); (212.8216, -254.78); (199.8364, NA); (279.5461, -281.9); (255.1225, -211.91); (229.5242, -299.81); (229.6714, -225.98); (NA, -250.74); (237.4413, -248.93); (241.7766, -195.81); (291.3587, -275.12); (NA, -308.46); (258.5031, -288.51); (232.3787, -261.09); (228.4212, -193.58); (233.0912, -244.6); (238.5418, -222.17); (248.6548, -240.71); (260.2826, -271.51); (236.8718, -252.47); (258.1758, -256.62); (273.8823, NA); (208.4837, -306.19); (239.8302, -257.38); (NA, -237.11); (274.7391, -253.43); (280.1018, -243.47); (275.7511, NA); (292.4302, -236.13); (254.0945, -263.82); (305.1476, -286.9); (240.2813, -294.77); (249.6823, -220.18); (245.0505, -240.55); (244.0719, -278.86); (234.2264, -240.97); (244.8872, -262.63); (245.0034, -259.61); (247.5337, NA); (238.3164, -288.74); (239.57, -227.33); (250.159, NA); (233.7068, -198.52); (252.5969, -267.27); (NA, -207.13); (232.7191, -252.18); (254.9181, NA); (255.1942, NA); (217.9629, -204.61); (217.0407, -233.86); (236.2114, -254.57); (238.5378, -260.52); (232.7524, -287.79); (262.582, -314.57); (212.8096, -228.2); (201.0162, -193.42); (262.1079, NA); (244.4351, -247.51); (244.68, -258.87); (230.9591, -265.74); (279.0081, -219.27); (266.1207, -204.96); (239.825, -221.2); (NA, -243.02); (214.6849, -285.69); (242.5553, NA); (231.8085, -213.43); (257.5861, -290.58); (226.8102, -230.49); (239.8886, -215.95)'''
data2 = data2_str.replace('(','').replace(')','').replace(' ', '').split(';')

X=[]
Y=[]
for i in data2:
  a, b = i.split(',')
  try:
    np.float64(a)
    np.float64(b)
    X.append(np.float64(a))
    Y.append(np.float64(b))
  except:
    continue
      
df = pd.concat([pd.Series(X, name = 'X'), pd.Series(Y, name = 'Y')], axis= 1)
print(df.head())

print()
print('–í—ã–±–æ—Ä–æ—á–Ω—ã–π –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –∫–æ—Ä—Ä–µ–ª—è—Ü–∏–∏ –ü–∏—Ä—Å–æ–Ω–∞ –º–µ–∂–¥—É X –∏ Y =', df.corr()["X"]["Y"])
print()
'''
#–¥–ª—è H1: mu_x != mu_y
p_val = sts.ttest_ind(X, Y, equal_var=False).pvalue 
print('p_val =', p_val)
alpha = 0.05
print('H0 –Ω–µ –æ—Ç–≤–µ—Ä–≥–∞–µ—Ç—Å—è') if p_val > alpha else print ('H0 –æ—Ç–≤–µ—Ä–≥–∞–µ—Ç—Å—è')
print()
'''

# –î–ª—è H1: mu_x < mu_y –∏–ª–∏ mu_x > mu_y(–≤ —Ñ–æ—Ä–º—É–ª–µ –Ω–∞ –º–µ—Å—Ç–µ alternative —É–∫–∞–∑—ã–≤–∞–µ–º –∏–∑ —É—Å–ª–æ–≤–∏—è)
alternative = 'greater' # from ['two-sided','less','greater']
p_val = sts.ttest_ind(X, Y, alternative = alternative, equal_var = False).pvalue
print('p_val =', p_val)
alpha = 0.05
print('H0 –Ω–µ –æ—Ç–≤–µ—Ä–≥–∞–µ—Ç—Å—è') if p_val > alpha else print ('H0 –æ—Ç–≤–µ—Ä–≥–∞–µ—Ç—Å—è')
print()

'''
#–¥–ª—è H1: sigma2_x > sigma2_y –∏–ª–∏ sigma2_x < sigma2_y
s2_x = df['X'].var(ddof = 1)
s2_y = df['Y'].var(ddof = 1)
m = len(df['X'])
n = len(df['Y'])

f = s2_x / s2_y

if s2_x > s2_y:
    f_obs = f
    k1 = m - 1
    k2 = n - 1
else: 
    f_obs = 1/f
    k1 = n - 1
    k2 = m - 1

alpha = 0.1
f_cr = sts.f.ppf(1 - alpha, k1, k2)
print('H0 –Ω–µ –æ—Ç–≤–µ—Ä–≥–∞–µ—Ç—Å—è') if f_obs < f_cr else print ('H0 –æ—Ç–≤–µ—Ä–≥–∞–µ—Ç—Å—è')

p_val = sts.f.sf(f_obs, k1, k2)
print('p_val =', p_val)

print('H0 –Ω–µ –æ—Ç–≤–µ—Ä–≥–∞–µ—Ç—Å—è') if p_val > alpha else print ('H0 –æ—Ç–≤–µ—Ä–≥–∞–µ—Ç—Å—è')
'''

# –¥–ª—è H1: sigma2_x != sigma2_y
alpha = 0.05
s2_x = df['X'].var(ddof = 1)
s2_y = df['Y'].var(ddof = 1)
m = len(df['X'])
n = len(df['Y'])

f = s2_x / s2_y

if s2_x > s2_y:
    f_obs = f
    k1 = m - 1
    k2 = n - 1
else: 
    f_obs = 1/f
    k1 = n - 1
    k2 = m - 1

f_cr = sts.f.ppf(1 - alpha/2, k1, k2)
print('H0 –Ω–µ –æ—Ç–≤–µ—Ä–≥–∞–µ—Ç—Å—è') if f_obs < f_cr else print ('H0 –æ—Ç–≤–µ—Ä–≥–∞–µ—Ç—Å—è')

p_val = 2*min(sts.f.cdf(f_obs, k1, k2), sts.f.sf(f_obs, k1, k2))
print(p_val)

print('H0 –Ω–µ –æ—Ç–≤–µ—Ä–≥–∞–µ—Ç—Å—è') if p_val > alpha else print ('H0 –æ—Ç–≤–µ—Ä–≥–∞–µ—Ç—Å—è')

print()
"""

def ms5i3():
  return """
import numpy as np
import pandas as pd
import scipy.stats as sts
import matplotlib.pyplot as plt

x = "-194.5; -216.33; -247.2; -241.51; -215.81; -266.72; -164.22; -231.4; -177.55; -230.87; -225.82; -230.89; -242.38; -220.43; -197.21; -240.79; -213.17; -236.68; -179.11; -199.46; -253.28; NA; -206.94; -205.48; -238.74; -212.82; -201.24; -186.79; -203.6; -205.14; -213.14; -196.22; -175.24; -215.01; -213.53; -235.86; NA; -227.27; -215.71; -234.83; NA; NA; -225.62; -213.72; -216.66; -200.56; -244.84; -189.06; -224.67; NA; -218.91; -218.52; NA; NA; -199.67; NA; NA; -209.94; -201.37; -197.21; NA; -196.01; -252.47; -203.01; NA; -208.58; -198.66; -262.14; -176.8; -220.92; -209.73; -211.53; -191.44; NA; -197.27; -224.94; -207.73; -198.88; NA; -195.82; -210.4; -166.47; -248.77; -196.51; -214.3; -234.92; -213.76; -234.13; -228.02; -193.68; -240.59; -229.04; -311.84; -197.03; -184.52; -205.3; -225.06; -165.86; -207.95; -237.96; -240.54; -178.94; -229.89; -229.79; -248.15; -252.93; -197.9; -257.07; -215.84; -204.28; -175.58; -247.94; -205.15; -189.81; -236.46; -235.39; -208.77; -234.83; -234.24; -242.6; -195.97; -207.14; -215.87; -224.42; -239.24; NA; -246.24; -203.26; -198.26; -211.54; NA; -188.53; -199.47; -206.53; -194.52; -175.7; -193.95; -235.34; -231.65; -214.7; -226.46; -206.05; -227.57; -203.11; -222.76; -235.67; NA; -193.68; -192.3; -206.99; -180.77; -212.9; -247.79; -247.04; -236.32; -175.46; -224.83; -217.28; -215.92; -217.53; -258.44; -208.03; -229.66; -221.78; -175.56; -310.16; -219.92; -206.41; -200.88; -169.46; -224.78; -228.77; -225.96; -215.5; -227.67; -205.34; -227.56; -236.04; -199.43; -246.95; -199.51; -258.61; -259.35; -216.13; -202.65; -228.51; -228.42; NA; -171.48; -188.09; -218.25; -221.41; -226.16; -221.05; -205.72; -195.77; -215.09; -125.66; -215.61; -189.87; -225.09; -194.28; -219.73; -198.24; -206.85; -250.06; -237.51; -252.7; -220.99; -240.83; -208.24; -232.38; -215.78; NA; -236.41; -209.53; -223.97; -215.64; -221.63; NA; NA; -241.99; -215.64; -204.62; -189.28; -211.99; -214.46; -229.05; -204.46; -194.6; -228.65; -241.29; -220.49; -232.95; -189.36; -225.44; -196.95; -242.4; -240.32; -240.08; -203.81; -209.52; -242.01; -181.97; -203.57; -227.52; -236.07; -244.95; -216.21; -218.62; -228.94; -254.22; -260.59; -209.84; -306.205; -183.76; -215.28; -260.43; -193.43; -230.69; -228.14; -219.73; -197.84; -226.96; -218.84; NA; -235.9; -205.63; NA; NA; -207.46; -203.35; -260.11; NA; -200.15; -206.73; -248.23; -161.89; -205.84; -163.26; -166.77; -233.06; -231.91; NA; -206.19; -203.03; -204.72; -207.17; -230.83; -218.94; -216.35; -205.73; -184.74; -237.34; NA; -245.27; -233.61; -193.95; -227.94; -203.37; -191.15; -176.89; -236.3; -223.89; NA; -218.12; -215.71; -205.03; -255.42; -235.13"
data = x.replace(' ', '').split(';')
print('–û–±—ä—ë–º –∏—Å—Ö–æ–¥–Ω–æ–π –≤—ã–±–æ—Ä–∫–∏ =', len(data))
print('–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–æ–ø—É—â–µ–Ω–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π –≤ –∏—Å—Ö–æ–¥–Ω–æ–π –≤—ã–±–æ—Ä–∫–µ, –æ–±–æ–∑–Ω–∞—á–µ–Ω–Ω—ã–µ –∫–∞–∫ "NA" =', x.count('NA'))

lst = []
for i in data:
    try: 
        lst.append(np.float64(i))
    except:
        lst.append(np.nan)

lst_ser = pd.Series(lst).dropna()
plt.boxplot(lst_ser)
plt.show()
plt.hist(lst_ser)
plt.show()

print('–û–±—ä–µ–º –æ—á–∏—â–µ–Ω–Ω–æ–π –æ—Ç –ø—Ä–æ–ø—É—Å–∫–æ–≤ –≤—ã–±–æ—Ä–∫–∏ =', lst_ser.count())
print('–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–æ–ø—É—â–µ–Ω–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π –≤ –∏—Å—Ö–æ–¥–Ω–æ–π –≤—ã–±–æ—Ä–∫–µ, –æ–±–æ–∑–Ω–∞—á–µ–Ω–Ω—ã–µ –∫–∞–∫ "NA" =', len(data) - lst_ser.count())
print('–û—à–∏–±–∫–∞ –≤—ã–±–æ—Ä–∫–∏ =', lst_ser.std(ddof=1)/(lst_ser.count())**0.5)
print('–ú–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –≤ –≤–∞—Ä–∏–∞—Ü–∏–æ–Ω–Ω–æ–º —Ä—è–¥—É =', lst_ser.min())
print('–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –≤ –≤–∞—Ä–∏–∞—Ü–∏–æ–Ω–Ω–æ–º —Ä—è–¥—É =', lst_ser.max())
print('–ó–Ω–∞—á–µ–Ω–∏–µ –ø–µ—Ä–≤–æ–π –∫–≤–∞—Ä—Ç–∏–ª–∏ (Q1) =', np.quantile(lst_ser,0.25))
print('–ó–Ω–∞—á–µ–Ω–∏–µ –º–µ–¥–∏–∞–Ω—ã (Q2) =', np.quantile(lst_ser,0.5))
print('–ó–Ω–∞—á–µ–Ω–∏–µ —Ç—Ä–µ—Ç—å–µ–π –∫–≤–∞—Ä—Ç–∏–ª–∏ (Q3) =', np.quantile(lst_ser,0.75))
print('–ö–≤–∞—Ä—Ç–∏–ª—å–Ω—ã–π —Ä–∞–∑–º–∞—Ö =', np.quantile(lst_ser,0.75) - np.quantile(lst_ser,0.25))
print('–°—Ä–µ–¥–Ω–µ–µ –≤—ã–±–æ—Ä–æ—á–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ =', lst_ser.mean())
print('–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω–∞—è –¥–∏—Å–ø–µ—Ä—Å–∏—è =', lst_ser.var(ddof=1))
print('–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–µ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ =', lst_ser.std(ddof=1))
print('–†–∞–∑–º–∞—Ö –≤—ã–±–æ—Ä–∫–∏ =', lst_ser.max() - lst_ser.min())
print('–≠–∫—Å—Ü–µ—Å—Å =', sts.kurtosis(lst_ser, bias=False))
print('–ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –∞—Å–∏–º–º–µ—Ç—Ä–∏–∏ =', sts.skew(lst_ser, bias=False))

gamma = 0.99
n = lst_ser.count()
x_sr = lst_ser.mean()
t_gamma = sts.t.ppf((1+gamma)/2, n-1)
s = lst_ser.std(ddof=1)
delta = t_gamma*s/np.sqrt(n)
print('–õ–µ–≤–∞—è –≥—Ä–∞–Ω–∏—Ü–∞ 0.99-–¥–æ–≤–µ—Ä–∏—Ç–µ–ª—å–Ω–æ–≥–æ –∏–Ω—Ç–µ—Ä–≤–∞–ª–∞ –¥–ª—è E(X) =', x_sr - delta) 
print('–ü—Ä–∞–≤–∞—è –≥—Ä–∞–Ω–∏—Ü–∞ 0.99-–¥–æ–≤–µ—Ä–∏—Ç–µ–ª—å–Ω–æ–≥–æ –∏–Ω—Ç–µ—Ä–≤–∞–ª–∞ –¥–ª—è E(X) =', x_sr + delta)

gamma = 0.99
n = lst_ser.count()
s2 = np.var(lst_ser, ddof=1)
chi2_gamma1 = sts.chi2.ppf((1+gamma)/2, n-1)
chi2_gamma2 = sts.chi2.ppf((1-gamma)/2, n-1)
print('–õ–µ–≤–∞—è –≥—Ä–∞–Ω–∏—Ü–∞ 0.99-–¥–æ–≤–µ—Ä–∏—Ç–µ–ª—å–Ω–æ–≥–æ –∏–Ω—Ç–µ—Ä–≤–∞–ª–∞ –¥–ª—è Var(X) =', (n-1)*s2/chi2_gamma1) 
print('–ü—Ä–∞–≤–∞—è –≥—Ä–∞–Ω–∏—Ü–∞ 0.99-–¥–æ–≤–µ—Ä–∏—Ç–µ–ª—å–Ω–æ–≥–æ –∏–Ω—Ç–µ—Ä–≤–∞–ª–∞ –¥–ª—è Var(X) =', (n-1)*s2/chi2_gamma2)

print('–ó–Ω–∞—á–µ–Ω–∏–µ 63%-–∫–≤–∞–Ω—Ç–∏–ª–∏ (Q2) =', np.quantile(lst_ser,0.63))
print('–ö–≤–∞–Ω—Ç–∏–ª—å —É—Ä–æ–≤–Ω—è 0.1 =', np.quantile(lst_ser, 0.1))

lst_min = np.quantile(lst_ser,0.25) - 1.5*(np.quantile(lst_ser,0.75) - np.quantile(lst_ser,0.25))
lst_max = np.quantile(lst_ser,0.75) + 1.5*(np.quantile(lst_ser,0.75) - np.quantile(lst_ser,0.25))
print('–ù–∏–∂–Ω—è—è –≥—Ä–∞–Ω–∏—Ü–∞ –Ω–æ—Ä–º—ã =', lst_min)
print('–í–µ—Ä—Ö–Ω—è—è –≥—Ä–∞–Ω–∏—Ü–∞ –Ω–æ—Ä–º—ã =', lst_max)
print('–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤—ã–±—Ä–æ—Å–æ–≤ –Ω–∏–∂–µ –Ω–∏–∂–Ω–µ–π –Ω–æ—Ä–º—ã =', len(lst_ser[lst_ser<lst_min]))
print('–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤—ã–±—Ä–æ—Å–æ–≤ –≤—ã—à–µ –≤–µ—Ä—Ö–Ω–µ–π –Ω–æ—Ä–º—ã =', len(lst_ser[lst_ser>lst_max]))
print('–û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤—ã–±—Ä–æ—Å–æ–≤ =', len(lst_ser[lst_ser>lst_max]) + len(lst_ser[lst_ser<lst_min]))

######################################################################################
modes = sts.mode(lst_ser)
mod_count = lst_ser.value_counts()[modes[0]]
if mod_count == 1:
    print('–î–û–ü5) –ú–æ–¥—ã –Ω–µ—Ç')
    print('–î–û–ü6) –ö–∞–∫ —á–∞—Å—Ç–æ –≤—Å—Ç—Ä–µ—á–∞–µ—Ç—Å—è "–º–æ–¥–∞" = 0')
else:
    print('–î–û–ü5) –ú–æ–¥–∞ =', modes[0])
    print('–î–û–ü6) –ö–∞–∫ —á–∞—Å—Ç–æ –≤—Å—Ç—Ä–µ—á–∞–µ—Ç—Å—è "–º–æ–¥–∞" =', mod_count)
#####################################################################################

Q1 = np.quantile(lst_ser,0.25)
Q3 = np.quantile(lst_ser,0.75)
RQ = Q3 - Q1
lst_min = Q1 - 1.5*RQ
lst_max = Q3 + 1.5*RQ
lst_no_out = lst_ser[(lst_ser>=lst_min)&(lst_ser<=lst_max)]

plt.boxplot(lst_no_out)
plt.show()
plt.hist(lst_no_out)
plt.show()
"""
